/*!
 * jQuery JavaScript Library v1.11.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-17T15:27Z
 */
function DegToRad(t){return t/180*pi}function RadToDeg(t){return t/pi*180}function ArcLengthOfMeridian(t){var e,n,o,i,r,s,a;return s=(sm_a-sm_b)/(sm_a+sm_b),e=(sm_a+sm_b)/2*(1+Math.pow(s,2)/4+Math.pow(s,4)/64),n=-3*s/2+9*Math.pow(s,3)/16+-3*Math.pow(s,5)/32,o=15*Math.pow(s,2)/16+-15*Math.pow(s,4)/32,i=-35*Math.pow(s,3)/48+105*Math.pow(s,5)/256,r=315*Math.pow(s,4)/512,a=e*(t+n*Math.sin(2*t)+o*Math.sin(4*t)+i*Math.sin(6*t)+r*Math.sin(8*t))}function UTMCentralMeridian(t){var e;return e=DegToRad(-183+6*t)}function FootpointLatitude(t){var e,n,o,i,r,s,a,l;return a=(sm_a-sm_b)/(sm_a+sm_b),n=(sm_a+sm_b)/2*(1+Math.pow(a,2)/4+Math.pow(a,4)/64),e=t/n,o=3*a/2+-27*Math.pow(a,3)/32+269*Math.pow(a,5)/512,i=21*Math.pow(a,2)/16+-55*Math.pow(a,4)/32,r=151*Math.pow(a,3)/96+-417*Math.pow(a,5)/128,s=1097*Math.pow(a,4)/512,l=e+o*Math.sin(2*e)+i*Math.sin(4*e)+r*Math.sin(6*e)+s*Math.sin(8*e)}function MapLatLonToXY(t,e,n,o){var i,r,s,a,l,p,u,h,d,c,g,f,m;s=(Math.pow(sm_a,2)-Math.pow(sm_b,2))/Math.pow(sm_b,2),r=s*Math.pow(Math.cos(t),2),i=Math.pow(sm_a,2)/(sm_b*Math.sqrt(1+r)),a=Math.tan(t),l=a*a,m=l*l*l-Math.pow(a,6),p=e-n,u=1-l+r,h=5-l+9*r+4*r*r,d=5-18*l+l*l+14*r-58*l*r,c=61-58*l+l*l+270*r-330*l*r,g=61-479*l+179*l*l-l*l*l,f=1385-3111*l+543*l*l-l*l*l,o[0]=i*Math.cos(t)*p+i/6*Math.pow(Math.cos(t),3)*u*Math.pow(p,3)+i/120*Math.pow(Math.cos(t),5)*d*Math.pow(p,5)+i/5040*Math.pow(Math.cos(t),7)*g*Math.pow(p,7),o[1]=ArcLengthOfMeridian(t)+a/2*i*Math.pow(Math.cos(t),2)*Math.pow(p,2)+a/24*i*Math.pow(Math.cos(t),4)*h*Math.pow(p,4)+a/720*i*Math.pow(Math.cos(t),6)*c*Math.pow(p,6)+a/40320*i*Math.pow(Math.cos(t),8)*f*Math.pow(p,8)}function MapXYToLatLon(t,e,n,o){var i,r,s,a,l,p,u,h,d,c,g,f,m,y,v,x,E,P,j,I,C,L,S,b;i=FootpointLatitude(e),l=(Math.pow(sm_a,2)-Math.pow(sm_b,2))/Math.pow(sm_b,2),d=Math.cos(i),a=l*Math.pow(d,2),r=Math.pow(sm_a,2)/(sm_b*Math.sqrt(1+a)),s=r,p=Math.tan(i),u=p*p,h=u*u,c=1/(s*d),s*=r,g=p/(2*s),s*=r,f=1/(6*s*d),s*=r,m=p/(24*s),s*=r,y=1/(120*s*d),s*=r,v=p/(720*s),s*=r,x=1/(5040*s*d),s*=r,E=p/(40320*s),P=-1-a,j=-1-2*u-a,I=5+3*u+6*a-6*u*a-3*a*a-9*u*a*a,C=5+28*u+24*h+6*a+8*u*a,L=-61-90*u-45*h-107*a+162*u*a,S=-61-662*u-1320*h-720*h*u,b=1385+3633*u+4095*h+1575*h*u,o[0]=i+g*P*t*t+m*I*Math.pow(t,4)+v*L*Math.pow(t,6)+E*b*Math.pow(t,8),o[1]=n+c*t+f*j*Math.pow(t,3)+y*C*Math.pow(t,5)+x*S*Math.pow(t,7)}function LatLonToUTMXY(t,e,n,o){return MapLatLonToXY(t,e,UTMCentralMeridian(n),o),o[0]=o[0]*UTMScaleFactor+5e5,o[1]=o[1]*UTMScaleFactor,o[1]<0&&(o[1]=o[1]+1e7),n}function UTMXYToLatLon(t,e,n,o,i){var r;t-=5e5,t/=UTMScaleFactor,o&&(e-=1e7),e/=UTMScaleFactor,r=UTMCentralMeridian(n),MapXYToLatLon(t,e,r,i)}function toUTM(t,e){var n=new Array(2);return zone=Math.floor((e+180)/6)+1,zone=LatLonToUTMXY(DegToRad(t),DegToRad(e),zone,n),n}function btnToUTM_OnClick(){var t=new Array(2);return isNaN(parseFloat(document.frmConverter.txtLongitude.value))?(alert("Please enter a valid longitude in the lon field."),!1):(lon=parseFloat(document.frmConverter.txtLongitude.value),lon<-180||180<=lon?(alert("The longitude you entered is out of range.  Please enter a number in the range [-180, 180)."),!1):isNaN(parseFloat(document.frmConverter.txtLatitude.value))?(alert("Please enter a valid latitude in the lat field."),!1):(lat=parseFloat(document.frmConverter.txtLatitude.value),lat<-90||90<lat?(alert("The latitude you entered is out of range.  Please enter a number in the range [-90, 90]."),!1):(zone=Math.floor((lon+180)/6)+1,zone=LatLonToUTMXY(DegToRad(lat),DegToRad(lon),zone,t),document.frmConverter.txtX.value=t[0],document.frmConverter.txtY.value=t[1],document.frmConverter.txtZone.value=zone,lat<0?document.frmConverter.rbtnHemisphere[1].checked=!0:document.frmConverter.rbtnHemisphere[0].checked=!0,!0)))}function btnToGeographic_OnClick(){latlon=new Array(2);var t,e,n,o;return isNaN(parseFloat(document.frmConverter.txtX.value))?(alert("Please enter a valid easting in the x field."),!1):(t=parseFloat(document.frmConverter.txtX.value),isNaN(parseFloat(document.frmConverter.txtY.value))?(alert("Please enter a valid northing in the y field."),!1):(e=parseFloat(document.frmConverter.txtY.value),isNaN(parseInt(document.frmConverter.txtZone.value))?(alert("Please enter a valid UTM zone in the zone field."),!1):(n=parseFloat(document.frmConverter.txtZone.value),1>n||n>60?(alert("The UTM zone you entered is out of range.  Please enter a number in the range [1, 60]."),!1):(o=1==document.frmConverter.rbtnHemisphere[1].checked?!0:!1,UTMXYToLatLon(t,e,n,o,latlon),document.frmConverter.txtLongitude.value=RadToDeg(latlon[1]),document.frmConverter.txtLatitude.value=RadToDeg(latlon[0]),!0))))}function notTooClose(t,e){if(e===[])return!0;var n,o,i=200,r=!0,s=new google.maps.LatLng(t.geometry.location.G,t.geometry.location.K);return e.forEach(function(t){n=t.geometry.location,o=new google.maps.LatLng(n.G,n.K),google.maps.geometry.spherical.computeDistanceBetween(o,s)<i&&(r=!1)}),r}function cullNeighboringDuplicates(t){var e=[t[0]];return t.forEach(function(t){notTooClose(t,e)===!0&&e.push(t)}),e}function getGeo(t){return new Promise(function(e){(new google.maps.Geocoder).geocode({address:t},function(t){e(t)})})}function makeBounds(t,e){var n,o,i,r,s=.025;t.G>=e.G?(n=t.G,o=e.G):t.G<e.G&&(n=e.G,o=t.G),t.K>=e.K?(i=t.K,r=e.K):t.K<e.K&&(i=e.K,r=t.K),o-=s,n+=s,r-=s,i+=s;var a=new google.maps.LatLng(o,r),l=new google.maps.LatLng(n,i);return[a,l]}function polylineBufferExtremities(t,e){for(var n=t[0].G,o=t[0].G,i=t[0].K,r=t[0].K,s=t.length,a=0;s>a;a++)t[a].G>=n&&(n=t[a].G),t[a].G<=o&&(o=t[a].G),t[a].K>=i&&(i=t[a].K),t[a].K<=r&&(r=t[a].K);var l,p,u,h;l=new google.maps.LatLng(n,r),p=new google.maps.LatLng(n,i),u=new google.maps.LatLng(o,i),h=new google.maps.LatLng(o,r);var d=new google.maps.LatLngBounds(h,p),c=[l,p,u,h],g=new google.maps.Polygon({paths:c});return"shape"===e?g:d}function compareStopOptions(t,e,n){var o,i=1e19;t.forEach(function(t){var r,s,a=[];t.forEach(function(t){r=t.geometry.location,s={location:new google.maps.LatLng(r.G,r.K)},a.push(s)});var l={origin:e,destination:n,waypoints:a,optimizeWaypoints:!0,travelMode:google.maps.TravelMode.DRIVING},p=getDirections(l);p.then(function(t){if(null!==t){for(var e=t.routes[0].legs.length,n=0,r=0,s=0;e>s;s++)n+=t.routes[0].legs[s].duration.value,r+=t.routes[0].legs[s].distance.value;i>n&&(i=n,o=t),directionsDisplay.setDirections(o)}else console.log("directions request: response was null")})})}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=ie.type(t);return"function"===n||ie.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function o(t,e,n){if(ie.isFunction(e))return ie.grep(t,function(t,o){return!!e.call(t,o,t)!==n});if(e.nodeType)return ie.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(de.test(e))return ie.filter(e,t,n);e=ie.filter(e,t)}return ie.grep(t,function(t){return ie.inArray(t,e)>=0!==n})}function i(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function r(t){var e=Ee[t]={};return ie.each(t.match(xe)||[],function(t,n){e[n]=!0}),e}function s(){ge.addEventListener?(ge.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(ge.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(ge.addEventListener||"load"===event.type||"complete"===ge.readyState)&&(s(),ie.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var o="data-"+e.replace(Le,"-$1").toLowerCase();if(n=t.getAttribute(o),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Ce.test(n)?ie.parseJSON(n):n}catch(i){}ie.data(t,e,n)}else n=void 0}return n}function p(t){var e;for(e in t)if(("data"!==e||!ie.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function u(t,e,n,o){if(ie.acceptData(t)){var i,r,s=ie.expando,a=t.nodeType,l=a?ie.cache:t,p=a?t[s]:t[s]&&s;if(p&&l[p]&&(o||l[p].data)||void 0!==n||"string"!=typeof e)return p||(p=a?t[s]=z.pop()||ie.guid++:s),l[p]||(l[p]=a?{}:{toJSON:ie.noop}),("object"==typeof e||"function"==typeof e)&&(o?l[p]=ie.extend(l[p],e):l[p].data=ie.extend(l[p].data,e)),r=l[p],o||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[ie.camelCase(e)]=n),"string"==typeof e?(i=r[e],null==i&&(i=r[ie.camelCase(e)])):i=r,i}}function h(t,e,n){if(ie.acceptData(t)){var o,i,r=t.nodeType,s=r?ie.cache:t,a=r?t[ie.expando]:ie.expando;if(s[a]){if(e&&(o=n?s[a]:s[a].data)){ie.isArray(e)?e=e.concat(ie.map(e,ie.camelCase)):e in o?e=[e]:(e=ie.camelCase(e),e=e in o?[e]:e.split(" ")),i=e.length;for(;i--;)delete o[e[i]];if(n?!p(o):!ie.isEmptyObject(o))return}(n||(delete s[a].data,p(s[a])))&&(r?ie.cleanData([t],!0):ne.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function d(){return!0}function c(){return!1}function g(){try{return ge.activeElement}catch(t){}}function f(t){var e=Me.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function m(t,e){var n,o,i=0,r=typeof t.getElementsByTagName!==Ie?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Ie?t.querySelectorAll(e||"*"):void 0;if(!r)for(r=[],n=t.childNodes||t;null!=(o=n[i]);i++)!e||ie.nodeName(o,e)?r.push(o):ie.merge(r,m(o,e));return void 0===e||e&&ie.nodeName(t,e)?ie.merge([t],r):r}function y(t){Oe.test(t.type)&&(t.defaultChecked=t.checked)}function v(t,e){return ie.nodeName(t,"table")&&ie.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function x(t){return t.type=(null!==ie.find.attr(t,"type"))+"/"+t.type,t}function E(t){var e=Ue.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function P(t,e){for(var n,o=0;null!=(n=t[o]);o++)ie._data(n,"globalEval",!e||ie._data(e[o],"globalEval"))}function j(t,e){if(1===e.nodeType&&ie.hasData(t)){var n,o,i,r=ie._data(t),s=ie._data(e,r),a=r.events;if(a){delete s.handle,s.events={};for(n in a)for(o=0,i=a[n].length;i>o;o++)ie.event.add(e,n,a[n][o])}s.data&&(s.data=ie.extend({},s.data))}}function I(t,e){var n,o,i;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ne.noCloneEvent&&e[ie.expando]){i=ie._data(e);for(o in i.events)ie.removeEvent(e,o,i.handle);e.removeAttribute(ie.expando)}"script"===n&&e.text!==t.text?(x(e).text=t.text,E(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ne.html5Clone&&t.innerHTML&&!ie.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Oe.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function C(e,n){var o,i=ie(n.createElement(e)).appendTo(n.body),r=t.getDefaultComputedStyle&&(o=t.getDefaultComputedStyle(i[0]))?o.display:ie.css(i[0],"display");return i.detach(),r}function L(t){var e=ge,n=Ze[t];return n||(n=C(t,e),"none"!==n&&n||($e=($e||ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=($e[0].contentWindow||$e[0].contentDocument).document,e.write(),e.close(),n=C(t,e),$e.detach()),Ze[t]=n),n}function S(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function b(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),o=e,i=cn.length;i--;)if(e=cn[i]+n,e in t)return e;return o}function N(t,e){for(var n,o,i,r=[],s=0,a=t.length;a>s;s++)o=t[s],o.style&&(r[s]=ie._data(o,"olddisplay"),n=o.style.display,e?(r[s]||"none"!==n||(o.style.display=""),""===o.style.display&&Ne(o)&&(r[s]=ie._data(o,"olddisplay",L(o.nodeName)))):(i=Ne(o),(n&&"none"!==n||!i)&&ie._data(o,"olddisplay",i?n:ie.css(o,"display"))));for(s=0;a>s;s++)o=t[s],o.style&&(e&&"none"!==o.style.display&&""!==o.style.display||(o.style.display=e?r[s]||"":"none"));return t}function T(t,e,n){var o=pn.exec(e);return o?Math.max(0,o[1]-(n||0))+(o[2]||"px"):e}function O(t,e,n,o,i){for(var r=n===(o?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=ie.css(t,n+be[r],!0,i)),o?("content"===n&&(s-=ie.css(t,"padding"+be[r],!0,i)),"margin"!==n&&(s-=ie.css(t,"border"+be[r]+"Width",!0,i))):(s+=ie.css(t,"padding"+be[r],!0,i),"padding"!==n&&(s+=ie.css(t,"border"+be[r]+"Width",!0,i)));return s}function A(t,e,n){var o=!0,i="width"===e?t.offsetWidth:t.offsetHeight,r=tn(t),s=ne.boxSizing&&"border-box"===ie.css(t,"boxSizing",!1,r);if(0>=i||null==i){if(i=en(t,e,r),(0>i||null==i)&&(i=t.style[e]),on.test(i))return i;o=s&&(ne.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+O(t,e,n||(s?"border":"content"),o,r)+"px"}function w(t,e,n,o,i){return new w.prototype.init(t,e,n,o,i)}function _(){return setTimeout(function(){gn=void 0}),gn=ie.now()}function R(t,e){var n,o={height:t},i=0;for(e=e?1:0;4>i;i+=2-e)n=be[i],o["margin"+n]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function D(t,e,n){for(var o,i=(En[e]||[]).concat(En["*"]),r=0,s=i.length;s>r;r++)if(o=i[r].call(n,e,t))return o}function M(t,e,n){var o,i,r,s,a,l,p,u,h=this,d={},c=t.style,g=t.nodeType&&Ne(t),f=ie._data(t,"fxshow");n.queue||(a=ie._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,ie.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],p=ie.css(t,"display"),u="none"===p?ie._data(t,"olddisplay")||L(t.nodeName):p,"inline"===u&&"none"===ie.css(t,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==L(t.nodeName)?c.zoom=1:c.display="inline-block")),n.overflow&&(c.overflow="hidden",ne.shrinkWrapBlocks()||h.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(o in e)if(i=e[o],mn.exec(i)){if(delete e[o],r=r||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!f||void 0===f[o])continue;g=!0}d[o]=f&&f[o]||ie.style(t,o)}else p=void 0;if(ie.isEmptyObject(d))"inline"===("none"===p?L(t.nodeName):p)&&(c.display=p);else{f?"hidden"in f&&(g=f.hidden):f=ie._data(t,"fxshow",{}),r&&(f.hidden=!g),g?ie(t).show():h.done(function(){ie(t).hide()}),h.done(function(){var e;ie._removeData(t,"fxshow");for(e in d)ie.style(t,e,d[e])});for(o in d)s=D(g?f[o]:0,o,h),o in f||(f[o]=s.start,g&&(s.end=s.start,s.start="width"===o||"height"===o?1:0))}}function B(t,e){var n,o,i,r,s;for(n in t)if(o=ie.camelCase(n),i=e[o],r=t[n],ie.isArray(r)&&(i=r[1],r=t[n]=r[0]),n!==o&&(t[o]=r,delete t[n]),s=ie.cssHooks[o],s&&"expand"in s){r=s.expand(r),delete t[o];for(n in r)n in t||(t[n]=r[n],e[n]=i)}else e[o]=i}function F(t,e,n){var o,i,r=0,s=xn.length,a=ie.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=gn||_(),n=Math.max(0,p.startTime+p.duration-e),o=n/p.duration||0,r=1-o,s=0,l=p.tweens.length;l>s;s++)p.tweens[s].run(r);return a.notifyWith(t,[p,r,n]),1>r&&l?n:(a.resolveWith(t,[p]),!1)},p=a.promise({elem:t,props:ie.extend({},e),opts:ie.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:gn||_(),duration:n.duration,tweens:[],createTween:function(e,n){var o=ie.Tween(t,p.opts,e,n,p.opts.specialEasing[e]||p.opts.easing);return p.tweens.push(o),o},stop:function(e){var n=0,o=e?p.tweens.length:0;if(i)return this;for(i=!0;o>n;n++)p.tweens[n].run(1);return e?a.resolveWith(t,[p,e]):a.rejectWith(t,[p,e]),this}}),u=p.props;for(B(u,p.opts.specialEasing);s>r;r++)if(o=xn[r].call(p,t,u,p.opts))return o;return ie.map(u,D,p),ie.isFunction(p.opts.start)&&p.opts.start.call(t,p),ie.fx.timer(ie.extend(l,{elem:t,anim:p,queue:p.opts.queue})),p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always)}function X(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var o,i=0,r=e.toLowerCase().match(xe)||[];if(ie.isFunction(n))for(;o=r[i++];)"+"===o.charAt(0)?(o=o.slice(1)||"*",(t[o]=t[o]||[]).unshift(n)):(t[o]=t[o]||[]).push(n)}}function Y(t,e,n,o){function i(a){var l;return r[a]=!0,ie.each(t[a]||[],function(t,a){var p=a(e,n,o);return"string"!=typeof p||s||r[p]?s?!(l=p):void 0:(e.dataTypes.unshift(p),i(p),!1)}),l}var r={},s=t===Vn;return i(e.dataTypes[0])||!r["*"]&&i("*")}function G(t,e){var n,o,i=ie.ajaxSettings.flatOptions||{};for(o in e)void 0!==e[o]&&((i[o]?t:n||(n={}))[o]=e[o]);return n&&ie.extend(!0,t,n),t}function q(t,e,n){for(var o,i,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}o||(o=s)}r=r||o}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function k(t,e,n,o){var i,r,s,a,l,p={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)p[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&o&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=p[l+" "+r]||p["* "+r],!s)for(i in p)if(a=i.split(" "),a[1]===r&&(s=p[l+" "+a[0]]||p["* "+a[0]])){s===!0?s=p[i]:p[i]!==!0&&(r=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function V(t,e,n,o){var i;if(ie.isArray(e))ie.each(e,function(e,i){n||zn.test(t)?o(t,i):V(t+"["+("object"==typeof i?e:"")+"]",i,n,o)});else if(n||"object"!==ie.type(e))o(t,e);else for(i in e)V(t+"["+i+"]",e[i],n,o)}function H(){try{return new t.XMLHttpRequest}catch(e){}}function W(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function U(t){return ie.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var z=[],J=z.slice,Q=z.concat,K=z.push,$=z.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ne={},oe="1.11.2",ie=function(t,e){return new ie.fn.init(t,e)},re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,ae=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};ie.fn=ie.prototype={jquery:oe,constructor:ie,selector:"",length:0,toArray:function(){return J.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:J.call(this)},pushStack:function(t){var e=ie.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return ie.each(this,t,e)},map:function(t){return this.pushStack(ie.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:z.sort,splice:z.splice},ie.extend=ie.fn.extend=function(){var t,e,n,o,i,r,s=arguments[0]||{},a=1,l=arguments.length,p=!1;for("boolean"==typeof s&&(p=s,s=arguments[a]||{},a++),"object"==typeof s||ie.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(i=arguments[a]))for(o in i)t=s[o],n=i[o],s!==n&&(p&&n&&(ie.isPlainObject(n)||(e=ie.isArray(n)))?(e?(e=!1,r=t&&ie.isArray(t)?t:[]):r=t&&ie.isPlainObject(t)?t:{},s[o]=ie.extend(p,r,n)):void 0!==n&&(s[o]=n));return s},ie.extend({expando:"jQuery"+(oe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ie.type(t)},isArray:Array.isArray||function(t){return"array"===ie.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!ie.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==ie.type(t)||t.nodeType||ie.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&ie.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(se,"ms-").replace(ae,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,o){var i,r=0,s=t.length,a=n(t);if(o){if(a)for(;s>r&&(i=e.apply(t[r],o),i!==!1);r++);else for(r in t)if(i=e.apply(t[r],o),i===!1)break}else if(a)for(;s>r&&(i=e.call(t[r],r,t[r]),i!==!1);r++);else for(r in t)if(i=e.call(t[r],r,t[r]),i===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(re,"")},makeArray:function(t,e){var o=e||[];return null!=t&&(n(Object(t))?ie.merge(o,"string"==typeof t?[t]:t):K.call(o,t)),o},inArray:function(t,e,n){var o;if(e){if($)return $.call(e,t,n);for(o=e.length,n=n?0>n?Math.max(0,o+n):n:0;o>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,o=0,i=t.length;n>o;)t[i++]=e[o++];if(n!==n)for(;void 0!==e[o];)t[i++]=e[o++];return t.length=i,t},grep:function(t,e,n){for(var o,i=[],r=0,s=t.length,a=!n;s>r;r++)o=!e(t[r],r),o!==a&&i.push(t[r]);return i},map:function(t,e,o){var i,r=0,s=t.length,a=n(t),l=[];if(a)for(;s>r;r++)i=e(t[r],r,o),null!=i&&l.push(i);else for(r in t)i=e(t[r],r,o),null!=i&&l.push(i);return Q.apply([],l)},guid:1,proxy:function(t,e){var n,o,i;return"string"==typeof e&&(i=t[e],e=t,t=i),ie.isFunction(t)?(n=J.call(arguments,2),o=function(){return t.apply(e||this,n.concat(J.call(arguments)))},o.guid=t.guid=t.guid||ie.guid++,o):void 0},now:function(){return+new Date},support:ne}),ie.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var pe=/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
function(t){function e(t,e,n,o){var i,r,s,a,l,p,h,c,g,f;if((e?e.ownerDocument||e:Y)!==w&&A(e),e=e||w,n=n||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return n;if(!o&&R){if(11!==a&&(i=ve.exec(t)))if(s=i[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&F(e,r)&&r.id===s)return n.push(r),n}else{if(i[2])return $.apply(n,e.getElementsByTagName(t)),n;if((s=i[3])&&P.getElementsByClassName)return $.apply(n,e.getElementsByClassName(s)),n}if(P.qsa&&(!D||!D.test(t))){if(c=h=X,g=e,f=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(p=L(t),(h=e.getAttribute("id"))?c=h.replace(Ee,"\\$&"):e.setAttribute("id",c),c="[id='"+c+"'] ",l=p.length;l--;)p[l]=c+d(p[l]);g=xe.test(t)&&u(e.parentNode)||e,f=p.join(",")}if(f)try{return $.apply(n,g.querySelectorAll(f)),n}catch(m){}finally{h||e.removeAttribute("id")}}}return b(t.replace(le,"$1"),e,n,o)}function n(){function t(n,o){return e.push(n+" ")>j.cacheLength&&delete t[e.shift()],t[n+" "]=o}var e=[];return t}function o(t){return t[X]=!0,t}function i(t){var e=w.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),o=t.length;o--;)j.attrHandle[n[o]]=e}function s(t,e){var n=e&&t,o=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||U)-(~t.sourceIndex||U);if(o)return o;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function p(t){return o(function(e){return e=+e,o(function(n,o){for(var i,r=t([],n.length,e),s=r.length;s--;)n[i=r[s]]&&(n[i]=!(o[i]=n[i]))})})}function u(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function d(t){for(var e=0,n=t.length,o="";n>e;e++)o+=t[e].value;return o}function c(t,e,n){var o=e.dir,i=n&&"parentNode"===o,r=q++;return e.first?function(e,n,r){for(;e=e[o];)if(1===e.nodeType||i)return t(e,n,r)}:function(e,n,s){var a,l,p=[G,r];if(s){for(;e=e[o];)if((1===e.nodeType||i)&&t(e,n,s))return!0}else for(;e=e[o];)if(1===e.nodeType||i){if(l=e[X]||(e[X]={}),(a=l[o])&&a[0]===G&&a[1]===r)return p[2]=a[2];if(l[o]=p,p[2]=t(e,n,s))return!0}}}function g(t){return t.length>1?function(e,n,o){for(var i=t.length;i--;)if(!t[i](e,n,o))return!1;return!0}:t[0]}function f(t,n,o){for(var i=0,r=n.length;r>i;i++)e(t,n[i],o);return o}function m(t,e,n,o,i){for(var r,s=[],a=0,l=t.length,p=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,o,i))&&(s.push(r),p&&e.push(a));return s}function y(t,e,n,i,r,s){return i&&!i[X]&&(i=y(i)),r&&!r[X]&&(r=y(r,s)),o(function(o,s,a,l){var p,u,h,d=[],c=[],g=s.length,y=o||f(e||"*",a.nodeType?[a]:a,[]),v=!t||!o&&e?y:m(y,d,t,a,l),x=n?r||(o?t:g||i)?[]:s:v;if(n&&n(v,x,a,l),i)for(p=m(x,c),i(p,[],a,l),u=p.length;u--;)(h=p[u])&&(x[c[u]]=!(v[c[u]]=h));if(o){if(r||t){if(r){for(p=[],u=x.length;u--;)(h=x[u])&&p.push(v[u]=h);r(null,x=[],p,l)}for(u=x.length;u--;)(h=x[u])&&(p=r?te(o,h):d[u])>-1&&(o[p]=!(s[p]=h))}}else x=m(x===s?x.splice(g,x.length):x),r?r(null,s,x,l):$.apply(s,x)})}function v(t){for(var e,n,o,i=t.length,r=j.relative[t[0].type],s=r||j.relative[" "],a=r?1:0,l=c(function(t){return t===e},s,!0),p=c(function(t){return te(e,t)>-1},s,!0),u=[function(t,n,o){var i=!r&&(o||n!==N)||((e=n).nodeType?l(t,n,o):p(t,n,o));return e=null,i}];i>a;a++)if(n=j.relative[t[a].type])u=[c(g(u),n)];else{if(n=j.filter[t[a].type].apply(null,t[a].matches),n[X]){for(o=++a;i>o&&!j.relative[t[o].type];o++);return y(a>1&&g(u),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(le,"$1"),n,o>a&&v(t.slice(a,o)),i>o&&v(t=t.slice(o)),i>o&&d(t))}u.push(n)}return g(u)}function x(t,n){var i=n.length>0,r=t.length>0,s=function(o,s,a,l,p){var u,h,d,c=0,g="0",f=o&&[],y=[],v=N,x=o||r&&j.find.TAG("*",p),E=G+=null==v?1:Math.random()||.1,P=x.length;for(p&&(N=s!==w&&s);g!==P&&null!=(u=x[g]);g++){if(r&&u){for(h=0;d=t[h++];)if(d(u,s,a)){l.push(u);break}p&&(G=E)}i&&((u=!d&&u)&&c--,o&&f.push(u))}if(c+=g,i&&g!==c){for(h=0;d=n[h++];)d(f,y,s,a);if(o){if(c>0)for(;g--;)f[g]||y[g]||(y[g]=Q.call(l));y=m(y)}$.apply(l,y),p&&!o&&y.length>0&&c+n.length>1&&e.uniqueSort(l)}return p&&(G=E,N=v),f};return i?o(s):s}var E,P,j,I,C,L,S,b,N,T,O,A,w,_,R,D,M,B,F,X="sizzle"+1*new Date,Y=t.document,G=0,q=0,k=n(),V=n(),H=n(),W=function(t,e){return t===e&&(O=!0),0},U=1<<31,z={}.hasOwnProperty,J=[],Q=J.pop,K=J.push,$=J.push,Z=J.slice,te=function(t,e){for(var n=0,o=t.length;o>n;n++)if(t[n]===e)return n;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=oe.replace("w","w#"),re="\\["+ne+"*("+oe+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",se=":("+oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),pe=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),he=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(se),ce=new RegExp("^"+ie+"$"),ge={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/[+~]/,Ee=/'|\\/g,Pe=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),je=function(t,e,n){var o="0x"+e-65536;return o!==o||n?e:0>o?String.fromCharCode(o+65536):String.fromCharCode(o>>10|55296,1023&o|56320)},Ie=function(){A()};try{$.apply(J=Z.call(Y.childNodes),Y.childNodes),J[Y.childNodes.length].nodeType}catch(Ce){$={apply:J.length?function(t,e){K.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,o=0;t[n++]=e[o++];);t.length=n-1}}}P=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},A=e.setDocument=function(t){var e,n,o=t?t.ownerDocument||t:Y;return o!==w&&9===o.nodeType&&o.documentElement?(w=o,_=o.documentElement,n=o.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ie,!1):n.attachEvent&&n.attachEvent("onunload",Ie)),R=!C(o),P.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),P.getElementsByTagName=i(function(t){return t.appendChild(o.createComment("")),!t.getElementsByTagName("*").length}),P.getElementsByClassName=ye.test(o.getElementsByClassName),P.getById=i(function(t){return _.appendChild(t).id=X,!o.getElementsByName||!o.getElementsByName(X).length}),P.getById?(j.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&R){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},j.filter.ID=function(t){var e=t.replace(Pe,je);return function(t){return t.getAttribute("id")===e}}):(delete j.find.ID,j.filter.ID=function(t){var e=t.replace(Pe,je);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),j.find.TAG=P.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):P.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,o=[],i=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[i++];)1===n.nodeType&&o.push(n);return o}return r},j.find.CLASS=P.getElementsByClassName&&function(t,e){return R?e.getElementsByClassName(t):void 0},M=[],D=[],(P.qsa=ye.test(o.querySelectorAll))&&(i(function(t){_.appendChild(t).innerHTML="<a id='"+X+"'></a><select id='"+X+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||D.push("\\["+ne+"*(?:value|"+ee+")"),t.querySelectorAll("[id~="+X+"-]").length||D.push("~="),t.querySelectorAll(":checked").length||D.push(":checked"),t.querySelectorAll("a#"+X+"+*").length||D.push(".#.+[+~]")}),i(function(t){var e=o.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&D.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),D.push(",.*:")})),(P.matchesSelector=ye.test(B=_.matches||_.webkitMatchesSelector||_.mozMatchesSelector||_.oMatchesSelector||_.msMatchesSelector))&&i(function(t){P.disconnectedMatch=B.call(t,"div"),B.call(t,"[s!='']:x"),M.push("!=",se)}),D=D.length&&new RegExp(D.join("|")),M=M.length&&new RegExp(M.join("|")),e=ye.test(_.compareDocumentPosition),F=e||ye.test(_.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,o=e&&e.parentNode;return t===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):t.compareDocumentPosition&&16&t.compareDocumentPosition(o)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return O=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!P.sortDetached&&e.compareDocumentPosition(t)===n?t===o||t.ownerDocument===Y&&F(Y,t)?-1:e===o||e.ownerDocument===Y&&F(Y,e)?1:T?te(T,t)-te(T,e):0:4&n?-1:1)}:function(t,e){if(t===e)return O=!0,0;var n,i=0,r=t.parentNode,a=e.parentNode,l=[t],p=[e];if(!r||!a)return t===o?-1:e===o?1:r?-1:a?1:T?te(T,t)-te(T,e):0;if(r===a)return s(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)p.unshift(n);for(;l[i]===p[i];)i++;return i?s(l[i],p[i]):l[i]===Y?-1:p[i]===Y?1:0},o):w},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==w&&A(t),n=n.replace(he,"='$1']"),!(!P.matchesSelector||!R||M&&M.test(n)||D&&D.test(n)))try{var o=B.call(t,n);if(o||P.disconnectedMatch||t.document&&11!==t.document.nodeType)return o}catch(i){}return e(n,w,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==w&&A(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==w&&A(t);var n=j.attrHandle[e.toLowerCase()],o=n&&z.call(j.attrHandle,e.toLowerCase())?n(t,e,!R):void 0;return void 0!==o?o:P.attributes||!R?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],o=0,i=0;if(O=!P.detectDuplicates,T=!P.sortStable&&t.slice(0),t.sort(W),O){for(;e=t[i++];)e===t[i]&&(o=n.push(i));for(;o--;)t.splice(n[o],1)}return T=null,t},I=e.getText=function(t){var e,n="",o=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=I(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[o++];)n+=I(e);return n},j=e.selectors={cacheLength:50,createPseudo:o,match:ge,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Pe,je),t[3]=(t[3]||t[4]||t[5]||"").replace(Pe,je),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ge.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&de.test(n)&&(e=L(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Pe,je).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=k[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&k(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,o){return function(i){var r=e.attr(i,t);return null==r?"!="===n:n?(r+="","="===n?r===o:"!="===n?r!==o:"^="===n?o&&0===r.indexOf(o):"*="===n?o&&r.indexOf(o)>-1:"$="===n?o&&r.slice(-o.length)===o:"~="===n?(" "+r.replace(ae," ")+" ").indexOf(o)>-1:"|="===n?r===o||r.slice(0,o.length+1)===o+"-":!1):!0}},CHILD:function(t,e,n,o,i){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===o&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var p,u,h,d,c,g,f=r!==s?"nextSibling":"previousSibling",m=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(m){if(r){for(;f;){for(h=e;h=h[f];)if(a?h.nodeName.toLowerCase()===y:1===h.nodeType)return!1;g=f="only"===t&&!g&&"nextSibling"}return!0}if(g=[s?m.firstChild:m.lastChild],s&&v){for(u=m[X]||(m[X]={}),p=u[t]||[],c=p[0]===G&&p[1],d=p[0]===G&&p[2],h=c&&m.childNodes[c];h=++c&&h&&h[f]||(d=c=0)||g.pop();)if(1===h.nodeType&&++d&&h===e){u[t]=[G,c,d];break}}else if(v&&(p=(e[X]||(e[X]={}))[t])&&p[0]===G)d=p[1];else for(;(h=++c&&h&&h[f]||(d=c=0)||g.pop())&&((a?h.nodeName.toLowerCase()!==y:1!==h.nodeType)||!++d||(v&&((h[X]||(h[X]={}))[t]=[G,d]),h!==e)););return d-=i,d===o||d%o===0&&d/o>=0}}},PSEUDO:function(t,n){var i,r=j.pseudos[t]||j.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[X]?r(n):r.length>1?(i=[t,t,"",n],j.setFilters.hasOwnProperty(t.toLowerCase())?o(function(t,e){for(var o,i=r(t,n),s=i.length;s--;)o=te(t,i[s]),t[o]=!(e[o]=i[s])}):function(t){return r(t,0,i)}):r}},pseudos:{not:o(function(t){var e=[],n=[],i=S(t.replace(le,"$1"));return i[X]?o(function(t,e,n,o){for(var r,s=i(t,null,o,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,o,r){return e[0]=t,i(e,null,r,n),e[0]=null,!n.pop()}}),has:o(function(t){return function(n){return e(t,n).length>0}}),contains:o(function(t){return t=t.replace(Pe,je),function(e){return(e.textContent||e.innerText||I(e)).indexOf(t)>-1}}),lang:o(function(t){return ce.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(Pe,je).toLowerCase(),function(e){var n;do if(n=R?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===_},focus:function(t){return t===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!j.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return fe.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:p(function(){return[0]}),last:p(function(t,e){return[e-1]}),eq:p(function(t,e,n){return[0>n?n+e:n]}),even:p(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:p(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:p(function(t,e,n){for(var o=0>n?n+e:n;--o>=0;)t.push(o);return t}),gt:p(function(t,e,n){for(var o=0>n?n+e:n;++o<e;)t.push(o);return t})}},j.pseudos.nth=j.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})j.pseudos[E]=a(E);for(E in{submit:!0,reset:!0})j.pseudos[E]=l(E);return h.prototype=j.filters=j.pseudos,j.setFilters=new h,L=e.tokenize=function(t,n){var o,i,r,s,a,l,p,u=V[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],p=j.preFilter;a;){(!o||(i=pe.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(r=[])),o=!1,(i=ue.exec(a))&&(o=i.shift(),r.push({value:o,type:i[0].replace(le," ")}),a=a.slice(o.length));for(s in j.filter)!(i=ge[s].exec(a))||p[s]&&!(i=p[s](i))||(o=i.shift(),r.push({value:o,type:s,matches:i}),a=a.slice(o.length));if(!o)break}return n?a.length:a?e.error(t):V(t,l).slice(0)},S=e.compile=function(t,e){var n,o=[],i=[],r=H[t+" "];if(!r){for(e||(e=L(t)),n=e.length;n--;)r=v(e[n]),r[X]?o.push(r):i.push(r);r=H(t,x(i,o)),r.selector=t}return r},b=e.select=function(t,e,n,o){var i,r,s,a,l,p="function"==typeof t&&t,h=!o&&L(t=p.selector||t);if(n=n||[],1===h.length){if(r=h[0]=h[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&P.getById&&9===e.nodeType&&R&&j.relative[r[1].type]){if(e=(j.find.ID(s.matches[0].replace(Pe,je),e)||[])[0],!e)return n;p&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(i=ge.needsContext.test(t)?0:r.length;i--&&(s=r[i],!j.relative[a=s.type]);)if((l=j.find[a])&&(o=l(s.matches[0].replace(Pe,je),xe.test(r[0].type)&&u(e.parentNode)||e))){if(r.splice(i,1),t=o.length&&d(r),!t)return $.apply(n,o),n;break}}return(p||S(t,h))(o,e,!R,n,xe.test(t)&&u(e.parentNode)||e),n},P.sortStable=X.split("").sort(W).join("")===X,P.detectDuplicates=!!O,A(),P.sortDetached=i(function(t){return 1&t.compareDocumentPosition(w.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),P.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||r(ee,function(t,e,n){var o;return n?void 0:t[e]===!0?e.toLowerCase():(o=t.getAttributeNode(e))&&o.specified?o.value:null}),e}(t);ie.find=pe,ie.expr=pe.selectors,ie.expr[":"]=ie.expr.pseudos,ie.unique=pe.uniqueSort,ie.text=pe.getText,ie.isXMLDoc=pe.isXML,ie.contains=pe.contains;var ue=ie.expr.match.needsContext,he=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,de=/^.[^:#\[\.,]*$/;ie.filter=function(t,e,n){var o=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===o.nodeType?ie.find.matchesSelector(o,t)?[o]:[]:ie.find.matches(t,ie.grep(e,function(t){return 1===t.nodeType}))},ie.fn.extend({find:function(t){var e,n=[],o=this,i=o.length;if("string"!=typeof t)return this.pushStack(ie(t).filter(function(){for(e=0;i>e;e++)if(ie.contains(o[e],this))return!0}));for(e=0;i>e;e++)ie.find(t,o[e],n);return n=this.pushStack(i>1?ie.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(o(this,t||[],!1))},not:function(t){return this.pushStack(o(this,t||[],!0))},is:function(t){return!!o(this,"string"==typeof t&&ue.test(t)?ie(t):t||[],!1).length}});var ce,ge=t.document,fe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=ie.fn.init=function(t,e){var n,o;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:fe.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ce).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof ie?e[0]:e,ie.merge(this,ie.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:ge,!0)),he.test(n[1])&&ie.isPlainObject(e))for(n in e)ie.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(o=ge.getElementById(n[2]),o&&o.parentNode){if(o.id!==n[2])return ce.find(t);this.length=1,this[0]=o}return this.context=ge,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ie.isFunction(t)?"undefined"!=typeof ce.ready?ce.ready(t):t(ie):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),ie.makeArray(t,this))};me.prototype=ie.fn,ce=ie(ge);var ye=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};ie.extend({dir:function(t,e,n){for(var o=[],i=t[e];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!ie(i).is(n));)1===i.nodeType&&o.push(i),i=i[e];return o},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),ie.fn.extend({has:function(t){var e,n=ie(t,this),o=n.length;return this.filter(function(){for(e=0;o>e;e++)if(ie.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,o=0,i=this.length,r=[],s=ue.test(t)||"string"!=typeof t?ie(t,e||this.context):0;i>o;o++)for(n=this[o];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ie.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?ie.unique(r):r)},index:function(t){return t?"string"==typeof t?ie.inArray(this[0],ie(t)):ie.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ie.unique(ie.merge(this.get(),ie(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ie.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ie.dir(t,"parentNode")},parentsUntil:function(t,e,n){return ie.dir(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return ie.dir(t,"nextSibling")},prevAll:function(t){return ie.dir(t,"previousSibling")},nextUntil:function(t,e,n){return ie.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return ie.dir(t,"previousSibling",n)},siblings:function(t){return ie.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return ie.sibling(t.firstChild)},contents:function(t){return ie.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ie.merge([],t.childNodes)}},function(t,e){ie.fn[t]=function(n,o){var i=ie.map(this,e,n);return"Until"!==t.slice(-5)&&(o=n),o&&"string"==typeof o&&(i=ie.filter(o,i)),this.length>1&&(ve[t]||(i=ie.unique(i)),ye.test(t)&&(i=i.reverse())),this.pushStack(i)}});var xe=/\S+/g,Ee={};ie.Callbacks=function(t){t="string"==typeof t?Ee[t]||r(t):ie.extend({},t);var e,n,o,i,s,a,l=[],p=!t.once&&[],u=function(r){for(n=t.memory&&r,o=!0,s=a||0,a=0,i=l.length,e=!0;l&&i>s;s++)if(l[s].apply(r[0],r[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(p?p.length&&u(p.shift()):n?l=[]:h.disable())},h={add:function(){if(l){var o=l.length;!function r(e){ie.each(e,function(e,n){var o=ie.type(n);"function"===o?t.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==o&&r(n)})}(arguments),e?i=l.length:n&&(a=o,u(n))}return this},remove:function(){return l&&ie.each(arguments,function(t,n){for(var o;(o=ie.inArray(n,l,o))>-1;)l.splice(o,1),e&&(i>=o&&i--,s>=o&&s--)}),this},has:function(t){return t?ie.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],i=0,this},disable:function(){return l=p=n=void 0,this},disabled:function(){return!l},lock:function(){return p=void 0,n||h.disable(),this},locked:function(){return!p},fireWith:function(t,n){return!l||o&&!p||(n=n||[],n=[t,n.slice?n.slice():n],e?p.push(n):u(n)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},ie.extend({Deferred:function(t){var e=[["resolve","done",ie.Callbacks("once memory"),"resolved"],["reject","fail",ie.Callbacks("once memory"),"rejected"],["notify","progress",ie.Callbacks("memory")]],n="pending",o={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ie.Deferred(function(n){ie.each(e,function(e,r){var s=ie.isFunction(t[e])&&t[e];i[r[1]](function(){var t=s&&s.apply(this,arguments);t&&ie.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===o?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ie.extend(t,o):o}},i={};return o.pipe=o.then,ie.each(e,function(t,r){var s=r[2],a=r[3];o[r[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),i[r[0]]=function(){return i[r[0]+"With"](this===i?o:this,arguments),this},i[r[0]+"With"]=s.fireWith}),o.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,o,i=0,r=J.call(arguments),s=r.length,a=1!==s||t&&ie.isFunction(t.promise)?s:0,l=1===a?t:ie.Deferred(),p=function(t,n,o){return function(i){n[t]=this,o[t]=arguments.length>1?J.call(arguments):i,o===e?l.notifyWith(n,o):--a||l.resolveWith(n,o)}};if(s>1)for(e=new Array(s),n=new Array(s),o=new Array(s);s>i;i++)r[i]&&ie.isFunction(r[i].promise)?r[i].promise().done(p(i,o,r)).fail(l.reject).progress(p(i,n,e)):--a;return a||l.resolveWith(o,r),l.promise()}});var Pe;ie.fn.ready=function(t){return ie.ready.promise().done(t),this},ie.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ie.readyWait++:ie.ready(!0)},ready:function(t){if(t===!0?!--ie.readyWait:!ie.isReady){if(!ge.body)return setTimeout(ie.ready);ie.isReady=!0,t!==!0&&--ie.readyWait>0||(Pe.resolveWith(ge,[ie]),ie.fn.triggerHandler&&(ie(ge).triggerHandler("ready"),ie(ge).off("ready")))}}}),ie.ready.promise=function(e){if(!Pe)if(Pe=ie.Deferred(),"complete"===ge.readyState)setTimeout(ie.ready);else if(ge.addEventListener)ge.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{ge.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var n=!1;try{n=null==t.frameElement&&ge.documentElement}catch(o){}n&&n.doScroll&&!function i(){if(!ie.isReady){try{n.doScroll("left")}catch(t){return setTimeout(i,50)}s(),ie.ready()}}()}return Pe.promise(e)};var je,Ie="undefined";for(je in ie(ne))break;ne.ownLast="0"!==je,ne.inlineBlockNeedsLayout=!1,ie(function(){var t,e,n,o;n=ge.getElementsByTagName("body")[0],n&&n.style&&(e=ge.createElement("div"),o=ge.createElement("div"),o.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(o).appendChild(e),typeof e.style.zoom!==Ie&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(o))}),function(){var t=ge.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}t=null}(),ie.acceptData=function(t){var e=ie.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var Ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Le=/([A-Z])/g;ie.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?ie.cache[t[ie.expando]]:t[ie.expando],!!t&&!p(t)},data:function(t,e,n){return u(t,e,n)},removeData:function(t,e){return h(t,e)},_data:function(t,e,n){return u(t,e,n,!0)},_removeData:function(t,e){return h(t,e,!0)}}),ie.fn.extend({data:function(t,e){var n,o,i,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(i=ie.data(r),1===r.nodeType&&!ie._data(r,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&(o=s[n].name,0===o.indexOf("data-")&&(o=ie.camelCase(o.slice(5)),l(r,o,i[o])));ie._data(r,"parsedAttrs",!0)}return i}return"object"==typeof t?this.each(function(){ie.data(this,t)}):arguments.length>1?this.each(function(){ie.data(this,t,e)}):r?l(r,t,ie.data(r,t)):void 0},removeData:function(t){return this.each(function(){ie.removeData(this,t)})}}),ie.extend({queue:function(t,e,n){var o;return t?(e=(e||"fx")+"queue",o=ie._data(t,e),n&&(!o||ie.isArray(n)?o=ie._data(t,e,ie.makeArray(n)):o.push(n)),o||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=ie.queue(t,e),o=n.length,i=n.shift(),r=ie._queueHooks(t,e),s=function(){ie.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),o--),i&&("fx"===e&&n.unshift("inprogress"),delete r.stop,i.call(t,s,r)),!o&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ie._data(t,n)||ie._data(t,n,{empty:ie.Callbacks("once memory").add(function(){ie._removeData(t,e+"queue"),ie._removeData(t,n)})})}}),ie.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?ie.queue(this[0],t):void 0===e?this:this.each(function(){var n=ie.queue(this,t,e);ie._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&ie.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ie.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,o=1,i=ie.Deferred(),r=this,s=this.length,a=function(){--o||i.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=ie._data(r[s],t+"queueHooks"),n&&n.empty&&(o++,n.empty.add(a));return a(),i.promise(e)}});var Se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,be=["Top","Right","Bottom","Left"],Ne=function(t,e){return t=e||t,"none"===ie.css(t,"display")||!ie.contains(t.ownerDocument,t)},Te=ie.access=function(t,e,n,o,i,r,s){var a=0,l=t.length,p=null==n;if("object"===ie.type(n)){i=!0;for(a in n)ie.access(t,e,a,n[a],!0,r,s)}else if(void 0!==o&&(i=!0,ie.isFunction(o)||(s=!0),p&&(s?(e.call(t,o),e=null):(p=e,e=function(t,e,n){return p.call(ie(t),n)})),e))for(;l>a;a++)e(t[a],n,s?o:o.call(t[a],a,e(t[a],n)));return i?t:p?e.call(t):l?e(t[0],n):r},Oe=/^(?:checkbox|radio)$/i;!function(){var t=ge.createElement("input"),e=ge.createElement("div"),n=ge.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===e.firstChild.nodeType,ne.tbody=!e.getElementsByTagName("tbody").length,ne.htmlSerialize=!!e.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==ge.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),ne.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ne.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(o){ne.deleteExpando=!1}}}(),function(){var e,n,o=ge.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ne[e+"Bubbles"]=n in t)||(o.setAttribute(n,"t"),ne[e+"Bubbles"]=o.attributes[n].expando===!1);o=null}();var Ae=/^(?:input|select|textarea)$/i,we=/^key/,_e=/^(?:mouse|pointer|contextmenu)|click/,Re=/^(?:focusinfocus|focusoutblur)$/,De=/^([^.]*)(?:\.(.+)|)$/;ie.event={global:{},add:function(t,e,n,o,i){var r,s,a,l,p,u,h,d,c,g,f,m=ie._data(t);if(m){for(n.handler&&(l=n,n=l.handler,i=l.selector),n.guid||(n.guid=ie.guid++),(s=m.events)||(s=m.events={}),(u=m.handle)||(u=m.handle=function(t){return typeof ie===Ie||t&&ie.event.triggered===t.type?void 0:ie.event.dispatch.apply(u.elem,arguments)},u.elem=t),e=(e||"").match(xe)||[""],a=e.length;a--;)r=De.exec(e[a])||[],c=f=r[1],g=(r[2]||"").split(".").sort(),c&&(p=ie.event.special[c]||{},c=(i?p.delegateType:p.bindType)||c,p=ie.event.special[c]||{},h=ie.extend({type:c,origType:f,data:o,handler:n,guid:n.guid,selector:i,needsContext:i&&ie.expr.match.needsContext.test(i),namespace:g.join(".")},l),(d=s[c])||(d=s[c]=[],d.delegateCount=0,p.setup&&p.setup.call(t,o,g,u)!==!1||(t.addEventListener?t.addEventListener(c,u,!1):t.attachEvent&&t.attachEvent("on"+c,u))),p.add&&(p.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,h):d.push(h),ie.event.global[c]=!0);t=null}},remove:function(t,e,n,o,i){var r,s,a,l,p,u,h,d,c,g,f,m=ie.hasData(t)&&ie._data(t);if(m&&(u=m.events)){for(e=(e||"").match(xe)||[""],p=e.length;p--;)if(a=De.exec(e[p])||[],c=f=a[1],g=(a[2]||"").split(".").sort(),c){for(h=ie.event.special[c]||{},c=(o?h.delegateType:h.bindType)||c,d=u[c]||[],a=a[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=d.length;r--;)s=d[r],!i&&f!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||o&&o!==s.selector&&("**"!==o||!s.selector)||(d.splice(r,1),s.selector&&d.delegateCount--,h.remove&&h.remove.call(t,s));l&&!d.length&&(h.teardown&&h.teardown.call(t,g,m.handle)!==!1||ie.removeEvent(t,c,m.handle),delete u[c])}else for(c in u)ie.event.remove(t,c+e[p],n,o,!0);ie.isEmptyObject(u)&&(delete m.handle,ie._removeData(t,"events"))}},trigger:function(e,n,o,i){var r,s,a,l,p,u,h,d=[o||ge],c=ee.call(e,"type")?e.type:e,g=ee.call(e,"namespace")?e.namespace.split("."):[];if(a=u=o=o||ge,3!==o.nodeType&&8!==o.nodeType&&!Re.test(c+ie.event.triggered)&&(c.indexOf(".")>=0&&(g=c.split("."),c=g.shift(),g.sort()),s=c.indexOf(":")<0&&"on"+c,e=e[ie.expando]?e:new ie.Event(c,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=g.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=o),n=null==n?[e]:ie.makeArray(n,[e]),p=ie.event.special[c]||{},i||!p.trigger||p.trigger.apply(o,n)!==!1)){if(!i&&!p.noBubble&&!ie.isWindow(o)){for(l=p.delegateType||c,Re.test(l+c)||(a=a.parentNode);a;a=a.parentNode)d.push(a),u=a;
u===(o.ownerDocument||ge)&&d.push(u.defaultView||u.parentWindow||t)}for(h=0;(a=d[h++])&&!e.isPropagationStopped();)e.type=h>1?l:p.bindType||c,r=(ie._data(a,"events")||{})[e.type]&&ie._data(a,"handle"),r&&r.apply(a,n),r=s&&a[s],r&&r.apply&&ie.acceptData(a)&&(e.result=r.apply(a,n),e.result===!1&&e.preventDefault());if(e.type=c,!i&&!e.isDefaultPrevented()&&(!p._default||p._default.apply(d.pop(),n)===!1)&&ie.acceptData(o)&&s&&o[c]&&!ie.isWindow(o)){u=o[s],u&&(o[s]=null),ie.event.triggered=c;try{o[c]()}catch(f){}ie.event.triggered=void 0,u&&(o[s]=u)}return e.result}},dispatch:function(t){t=ie.event.fix(t);var e,n,o,i,r,s=[],a=J.call(arguments),l=(ie._data(this,"events")||{})[t.type]||[],p=ie.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!p.preDispatch||p.preDispatch.call(this,t)!==!1){for(s=ie.event.handlers.call(this,t,l),e=0;(i=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,r=0;(o=i.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,n=((ie.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return p.postDispatch&&p.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,o,i,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(i=[],r=0;a>r;r++)o=e[r],n=o.selector+" ",void 0===i[n]&&(i[n]=o.needsContext?ie(n,this).index(l)>=0:ie.find(n,this,null,[l]).length),i[n]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[ie.expando])return t;var e,n,o,i=t.type,r=t,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=_e.test(i)?this.mouseHooks:we.test(i)?this.keyHooks:{}),o=s.props?this.props.concat(s.props):this.props,t=new ie.Event(r),e=o.length;e--;)n=o[e],t[n]=r[n];return t.target||(t.target=r.srcElement||ge),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,o,i,r=e.button,s=e.fromElement;return null==t.pageX&&null!=e.clientX&&(o=t.target.ownerDocument||ge,i=o.documentElement,n=o.body,t.pageX=e.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?e.toElement:s),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==g()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ie.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return ie.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,o){var i=ie.extend(new ie.Event,n,{type:t,isSimulated:!0,originalEvent:{}});o?ie.event.trigger(i,null,e):ie.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},ie.removeEvent=ge.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var o="on"+e;t.detachEvent&&(typeof t[o]===Ie&&(t[o]=null),t.detachEvent(o,n))},ie.Event=function(t,e){return this instanceof ie.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:c):this.type=t,e&&ie.extend(this,e),this.timeStamp=t&&t.timeStamp||ie.now(),void(this[ie.expando]=!0)):new ie.Event(t,e)},ie.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){ie.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,o=this,i=t.relatedTarget,r=t.handleObj;return(!i||i!==o&&!ie.contains(o,i))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),ne.submitBubbles||(ie.event.special.submit={setup:function(){return ie.nodeName(this,"form")?!1:void ie.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=ie.nodeName(e,"input")||ie.nodeName(e,"button")?e.form:void 0;n&&!ie._data(n,"submitBubbles")&&(ie.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),ie._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&ie.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return ie.nodeName(this,"form")?!1:void ie.event.remove(this,"._submit")}}),ne.changeBubbles||(ie.event.special.change={setup:function(){return Ae.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ie.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),ie.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),ie.event.simulate("change",this,t,!0)})),!1):void ie.event.add(this,"beforeactivate._change",function(t){var e=t.target;Ae.test(e.nodeName)&&!ie._data(e,"changeBubbles")&&(ie.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ie.event.simulate("change",this.parentNode,t,!0)}),ie._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ie.event.remove(this,"._change"),!Ae.test(this.nodeName)}}),ne.focusinBubbles||ie.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){ie.event.simulate(e,t.target,ie.event.fix(t),!0)};ie.event.special[e]={setup:function(){var o=this.ownerDocument||this,i=ie._data(o,e);i||o.addEventListener(t,n,!0),ie._data(o,e,(i||0)+1)},teardown:function(){var o=this.ownerDocument||this,i=ie._data(o,e)-1;i?ie._data(o,e,i):(o.removeEventListener(t,n,!0),ie._removeData(o,e))}}}),ie.fn.extend({on:function(t,e,n,o,i){var r,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(r in t)this.on(r,e,n,t[r],i);return this}if(null==n&&null==o?(o=e,n=e=void 0):null==o&&("string"==typeof e?(o=n,n=void 0):(o=n,n=e,e=void 0)),o===!1)o=c;else if(!o)return this;return 1===i&&(s=o,o=function(t){return ie().off(t),s.apply(this,arguments)},o.guid=s.guid||(s.guid=ie.guid++)),this.each(function(){ie.event.add(this,t,o,n,e)})},one:function(t,e,n,o){return this.on(t,e,n,o,1)},off:function(t,e,n){var o,i;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,ie(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=c),this.each(function(){ie.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){ie.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?ie.event.trigger(t,e,n,!0):void 0}});var Me="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Be=/ jQuery\d+="(?:null|\d+)"/g,Fe=new RegExp("<(?:"+Me+")[\\s/>]","i"),Xe=/^\s+/,Ye=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ge=/<([\w:]+)/,qe=/<tbody/i,ke=/<|&#?\w+;/,Ve=/<(?:script|style|link)/i,He=/checked\s*(?:[^=]|=\s*.checked.)/i,We=/^$|\/(?:java|ecma)script/i,Ue=/^true\/(.*)/,ze=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Je={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Qe=f(ge),Ke=Qe.appendChild(ge.createElement("div"));Je.optgroup=Je.option,Je.tbody=Je.tfoot=Je.colgroup=Je.caption=Je.thead,Je.th=Je.td,ie.extend({clone:function(t,e,n){var o,i,r,s,a,l=ie.contains(t.ownerDocument,t);if(ne.html5Clone||ie.isXMLDoc(t)||!Fe.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(Ke.innerHTML=t.outerHTML,Ke.removeChild(r=Ke.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ie.isXMLDoc(t)))for(o=m(r),a=m(t),s=0;null!=(i=a[s]);++s)o[s]&&I(i,o[s]);if(e)if(n)for(a=a||m(t),o=o||m(r),s=0;null!=(i=a[s]);s++)j(i,o[s]);else j(t,r);return o=m(r,"script"),o.length>0&&P(o,!l&&m(t,"script")),o=a=i=null,r},buildFragment:function(t,e,n,o){for(var i,r,s,a,l,p,u,h=t.length,d=f(e),c=[],g=0;h>g;g++)if(r=t[g],r||0===r)if("object"===ie.type(r))ie.merge(c,r.nodeType?[r]:r);else if(ke.test(r)){for(a=a||d.appendChild(e.createElement("div")),l=(Ge.exec(r)||["",""])[1].toLowerCase(),u=Je[l]||Je._default,a.innerHTML=u[1]+r.replace(Ye,"<$1></$2>")+u[2],i=u[0];i--;)a=a.lastChild;if(!ne.leadingWhitespace&&Xe.test(r)&&c.push(e.createTextNode(Xe.exec(r)[0])),!ne.tbody)for(r="table"!==l||qe.test(r)?"<table>"!==u[1]||qe.test(r)?0:a:a.firstChild,i=r&&r.childNodes.length;i--;)ie.nodeName(p=r.childNodes[i],"tbody")&&!p.childNodes.length&&r.removeChild(p);for(ie.merge(c,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else c.push(e.createTextNode(r));for(a&&d.removeChild(a),ne.appendChecked||ie.grep(m(c,"input"),y),g=0;r=c[g++];)if((!o||-1===ie.inArray(r,o))&&(s=ie.contains(r.ownerDocument,r),a=m(d.appendChild(r),"script"),s&&P(a),n))for(i=0;r=a[i++];)We.test(r.type||"")&&n.push(r);return a=null,d},cleanData:function(t,e){for(var n,o,i,r,s=0,a=ie.expando,l=ie.cache,p=ne.deleteExpando,u=ie.event.special;null!=(n=t[s]);s++)if((e||ie.acceptData(n))&&(i=n[a],r=i&&l[i])){if(r.events)for(o in r.events)u[o]?ie.event.remove(n,o):ie.removeEvent(n,o,r.handle);l[i]&&(delete l[i],p?delete n[a]:typeof n.removeAttribute!==Ie?n.removeAttribute(a):n[a]=null,z.push(i))}}}),ie.fn.extend({text:function(t){return Te(this,function(t){return void 0===t?ie.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ge).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,o=t?ie.filter(t,this):this,i=0;null!=(n=o[i]);i++)e||1!==n.nodeType||ie.cleanData(m(n)),n.parentNode&&(e&&ie.contains(n.ownerDocument,n)&&P(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ie.cleanData(m(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ie.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return ie.clone(this,t,e)})},html:function(t){return Te(this,function(t){var e=this[0]||{},n=0,o=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Be,""):void 0;if(!("string"!=typeof t||Ve.test(t)||!ne.htmlSerialize&&Fe.test(t)||!ne.leadingWhitespace&&Xe.test(t)||Je[(Ge.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Ye,"<$1></$2>");try{for(;o>n;n++)e=this[n]||{},1===e.nodeType&&(ie.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,ie.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Q.apply([],t);var n,o,i,r,s,a,l=0,p=this.length,u=this,h=p-1,d=t[0],c=ie.isFunction(d);if(c||p>1&&"string"==typeof d&&!ne.checkClone&&He.test(d))return this.each(function(n){var o=u.eq(n);c&&(t[0]=d.call(this,n,o.html())),o.domManip(t,e)});if(p&&(a=ie.buildFragment(t,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(r=ie.map(m(a,"script"),x),i=r.length;p>l;l++)o=a,l!==h&&(o=ie.clone(o,!0,!0),i&&ie.merge(r,m(o,"script"))),e.call(this[l],o,l);if(i)for(s=r[r.length-1].ownerDocument,ie.map(r,E),l=0;i>l;l++)o=r[l],We.test(o.type||"")&&!ie._data(o,"globalEval")&&ie.contains(s,o)&&(o.src?ie._evalUrl&&ie._evalUrl(o.src):ie.globalEval((o.text||o.textContent||o.innerHTML||"").replace(ze,"")));a=n=null}return this}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ie.fn[t]=function(t){for(var n,o=0,i=[],r=ie(t),s=r.length-1;s>=o;o++)n=o===s?this:this.clone(!0),ie(r[o])[e](n),K.apply(i,n.get());return this.pushStack(i)}});var $e,Ze={};!function(){var t;ne.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,n,o;return n=ge.getElementsByTagName("body")[0],n&&n.style?(e=ge.createElement("div"),o=ge.createElement("div"),o.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(o).appendChild(e),typeof e.style.zoom!==Ie&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(ge.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(o),t):void 0}}();var tn,en,nn=/^margin/,on=new RegExp("^("+Se+")(?!px)[a-z%]+$","i"),rn=/^(top|right|bottom|left)$/;t.getComputedStyle?(tn=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)},en=function(t,e,n){var o,i,r,s,a=t.style;return n=n||tn(t),s=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==s||ie.contains(t.ownerDocument,t)||(s=ie.style(t,e)),on.test(s)&&nn.test(e)&&(o=a.width,i=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=o,a.minWidth=i,a.maxWidth=r)),void 0===s?s:s+""}):ge.documentElement.currentStyle&&(tn=function(t){return t.currentStyle},en=function(t,e,n){var o,i,r,s,a=t.style;return n=n||tn(t),s=n?n[e]:void 0,null==s&&a&&a[e]&&(s=a[e]),on.test(s)&&!rn.test(e)&&(o=a.left,i=t.runtimeStyle,r=i&&i.left,r&&(i.left=t.currentStyle.left),a.left="fontSize"===e?"1em":s,s=a.pixelLeft+"px",a.left=o,r&&(i.left=r)),void 0===s?s:s+""||"auto"}),function(){function e(){var e,n,o,i;n=ge.getElementsByTagName("body")[0],n&&n.style&&(e=ge.createElement("div"),o=ge.createElement("div"),o.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(o).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=s=!1,l=!0,t.getComputedStyle&&(r="1%"!==(t.getComputedStyle(e,null)||{}).top,s="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,i=e.appendChild(ge.createElement("div")),i.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight),e.removeChild(i)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=e.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===i[0].offsetHeight,a&&(i[0].style.display="",i[1].style.display="none",a=0===i[0].offsetHeight),n.removeChild(o))}var n,o,i,r,s,a,l;n=ge.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=n.getElementsByTagName("a")[0],o=i&&i.style,o&&(o.cssText="float:left;opacity:.5",ne.opacity="0.5"===o.opacity,ne.cssFloat=!!o.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===o.boxSizing||""===o.MozBoxSizing||""===o.WebkitBoxSizing,ie.extend(ne,{reliableHiddenOffsets:function(){return null==a&&e(),a},boxSizingReliable:function(){return null==s&&e(),s},pixelPosition:function(){return null==r&&e(),r},reliableMarginRight:function(){return null==l&&e(),l}}))}(),ie.swap=function(t,e,n,o){var i,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];i=n.apply(t,o||[]);for(r in e)t.style[r]=s[r];return i};var sn=/alpha\([^)]*\)/i,an=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,pn=new RegExp("^("+Se+")(.*)$","i"),un=new RegExp("^([+-])=("+Se+")","i"),hn={position:"absolute",visibility:"hidden",display:"block"},dn={letterSpacing:"0",fontWeight:"400"},cn=["Webkit","O","Moz","ms"];ie.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=en(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,r,s,a=ie.camelCase(e),l=t.style;if(e=ie.cssProps[a]||(ie.cssProps[a]=b(l,a)),s=ie.cssHooks[e]||ie.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,o))?i:l[e];if(r=typeof n,"string"===r&&(i=un.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(ie.css(t,e)),r="number"),null!=n&&n===n&&("number"!==r||ie.cssNumber[a]||(n+="px"),ne.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(t,n,o)))))try{l[e]=n}catch(p){}}},css:function(t,e,n,o){var i,r,s,a=ie.camelCase(e);return e=ie.cssProps[a]||(ie.cssProps[a]=b(t.style,a)),s=ie.cssHooks[e]||ie.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=en(t,e,o)),"normal"===r&&e in dn&&(r=dn[e]),""===n||n?(i=parseFloat(r),n===!0||ie.isNumeric(i)?i||0:r):r}}),ie.each(["height","width"],function(t,e){ie.cssHooks[e]={get:function(t,n,o){return n?ln.test(ie.css(t,"display"))&&0===t.offsetWidth?ie.swap(t,hn,function(){return A(t,e,o)}):A(t,e,o):void 0},set:function(t,n,o){var i=o&&tn(t);return T(t,n,o?O(t,e,o,ne.boxSizing&&"border-box"===ie.css(t,"boxSizing",!1,i),i):0)}}}),ne.opacity||(ie.cssHooks.opacity={get:function(t,e){return an.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,o=t.currentStyle,i=ie.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=o&&o.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===ie.trim(r.replace(sn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||o&&!o.filter)||(n.filter=sn.test(r)?r.replace(sn,i):r+" "+i)}}),ie.cssHooks.marginRight=S(ne.reliableMarginRight,function(t,e){return e?ie.swap(t,{display:"inline-block"},en,[t,"marginRight"]):void 0}),ie.each({margin:"",padding:"",border:"Width"},function(t,e){ie.cssHooks[t+e]={expand:function(n){for(var o=0,i={},r="string"==typeof n?n.split(" "):[n];4>o;o++)i[t+be[o]+e]=r[o]||r[o-2]||r[0];return i}},nn.test(t)||(ie.cssHooks[t+e].set=T)}),ie.fn.extend({css:function(t,e){return Te(this,function(t,e,n){var o,i,r={},s=0;if(ie.isArray(e)){for(o=tn(t),i=e.length;i>s;s++)r[e[s]]=ie.css(t,e[s],!1,o);return r}return void 0!==n?ie.style(t,e,n):ie.css(t,e)},t,e,arguments.length>1)},show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ne(this)?ie(this).show():ie(this).hide()})}}),ie.Tween=w,w.prototype={constructor:w,init:function(t,e,n,o,i,r){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=o,this.unit=r||(ie.cssNumber[n]?"":"px")},cur:function(){var t=w.propHooks[this.prop];return t&&t.get?t.get(this):w.propHooks._default.get(this)},run:function(t){var e,n=w.propHooks[this.prop];return this.pos=e=this.options.duration?ie.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):w.propHooks._default.set(this),this}},w.prototype.init.prototype=w.prototype,w.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=ie.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){ie.fx.step[t.prop]?ie.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[ie.cssProps[t.prop]]||ie.cssHooks[t.prop])?ie.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},w.propHooks.scrollTop=w.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ie.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},ie.fx=w.prototype.init,ie.fx.step={};var gn,fn,mn=/^(?:toggle|show|hide)$/,yn=new RegExp("^(?:([+-])=|)("+Se+")([a-z%]*)$","i"),vn=/queueHooks$/,xn=[M],En={"*":[function(t,e){var n=this.createTween(t,e),o=n.cur(),i=yn.exec(e),r=i&&i[3]||(ie.cssNumber[t]?"":"px"),s=(ie.cssNumber[t]||"px"!==r&&+o)&&yn.exec(ie.css(n.elem,t)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],i=i||[],s=+o||1;do a=a||".5",s/=a,ie.style(n.elem,t,s+r);while(a!==(a=n.cur()/o)&&1!==a&&--l)}return i&&(s=n.start=+s||+o||0,n.unit=r,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};ie.Animation=ie.extend(F,{tweener:function(t,e){ie.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,o=0,i=t.length;i>o;o++)n=t[o],En[n]=En[n]||[],En[n].unshift(e)},prefilter:function(t,e){e?xn.unshift(t):xn.push(t)}}),ie.speed=function(t,e,n){var o=t&&"object"==typeof t?ie.extend({},t):{complete:n||!n&&e||ie.isFunction(t)&&t,duration:t,easing:n&&e||e&&!ie.isFunction(e)&&e};return o.duration=ie.fx.off?0:"number"==typeof o.duration?o.duration:o.duration in ie.fx.speeds?ie.fx.speeds[o.duration]:ie.fx.speeds._default,(null==o.queue||o.queue===!0)&&(o.queue="fx"),o.old=o.complete,o.complete=function(){ie.isFunction(o.old)&&o.old.call(this),o.queue&&ie.dequeue(this,o.queue)},o},ie.fn.extend({fadeTo:function(t,e,n,o){return this.filter(Ne).css("opacity",0).show().end().animate({opacity:e},t,n,o)},animate:function(t,e,n,o){var i=ie.isEmptyObject(t),r=ie.speed(e,n,o),s=function(){var e=F(this,ie.extend({},t),r);(i||ie._data(this,"finish"))&&e.stop(!0)};return s.finish=s,i||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var o=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",r=ie.timers,s=ie._data(this);if(i)s[i]&&s[i].stop&&o(s[i]);else for(i in s)s[i]&&s[i].stop&&vn.test(i)&&o(s[i]);for(i=r.length;i--;)r[i].elem!==this||null!=t&&r[i].queue!==t||(r[i].anim.stop(n),e=!1,r.splice(i,1));(e||!n)&&ie.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ie._data(this),o=n[t+"queue"],i=n[t+"queueHooks"],r=ie.timers,s=o?o.length:0;for(n.finish=!0,ie.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;s>e;e++)o[e]&&o[e].finish&&o[e].finish.call(this);delete n.finish})}}),ie.each(["toggle","show","hide"],function(t,e){var n=ie.fn[e];ie.fn[e]=function(t,o,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(R(e,!0),t,o,i)}}),ie.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ie.fn[t]=function(t,n,o){return this.animate(e,t,n,o)}}),ie.timers=[],ie.fx.tick=function(){var t,e=ie.timers,n=0;for(gn=ie.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||ie.fx.stop(),gn=void 0},ie.fx.timer=function(t){ie.timers.push(t),t()?ie.fx.start():ie.timers.pop()},ie.fx.interval=13,ie.fx.start=function(){fn||(fn=setInterval(ie.fx.tick,ie.fx.interval))},ie.fx.stop=function(){clearInterval(fn),fn=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(t,e){return t=ie.fx?ie.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var o=setTimeout(e,t);n.stop=function(){clearTimeout(o)}})},function(){var t,e,n,o,i;e=ge.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=e.getElementsByTagName("a")[0],n=ge.createElement("select"),i=n.appendChild(ge.createElement("option")),t=e.getElementsByTagName("input")[0],o.style.cssText="top:1px",ne.getSetAttribute="t"!==e.className,ne.style=/top/.test(o.getAttribute("style")),ne.hrefNormalized="/a"===o.getAttribute("href"),ne.checkOn=!!t.value,ne.optSelected=i.selected,ne.enctype=!!ge.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!i.disabled,t=ge.createElement("input"),t.setAttribute("value",""),ne.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ne.radioValue="t"===t.value}();var Pn=/\r/g;ie.fn.extend({val:function(t){var e,n,o,i=this[0];{if(arguments.length)return o=ie.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=o?t.call(this,n,ie(this).val()):t,null==i?i="":"number"==typeof i?i+="":ie.isArray(i)&&(i=ie.map(i,function(t){return null==t?"":t+""})),e=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return e=ie.valHooks[i.type]||ie.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(Pn,""):null==n?"":n)}}}),ie.extend({valHooks:{option:{get:function(t){var e=ie.find.attr(t,"value");return null!=e?e:ie.trim(ie.text(t))}},select:{get:function(t){for(var e,n,o=t.options,i=t.selectedIndex,r="select-one"===t.type||0>i,s=r?null:[],a=r?i+1:o.length,l=0>i?a:r?i:0;a>l;l++)if(n=o[l],!(!n.selected&&l!==i||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ie.nodeName(n.parentNode,"optgroup"))){if(e=ie(n).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var n,o,i=t.options,r=ie.makeArray(e),s=i.length;s--;)if(o=i[s],ie.inArray(ie.valHooks.option.get(o),r)>=0)try{o.selected=n=!0}catch(a){o.scrollHeight}else o.selected=!1;return n||(t.selectedIndex=-1),i}}}}),ie.each(["radio","checkbox"],function(){ie.valHooks[this]={set:function(t,e){return ie.isArray(e)?t.checked=ie.inArray(ie(t).val(),e)>=0:void 0}},ne.checkOn||(ie.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var jn,In,Cn=ie.expr.attrHandle,Ln=/^(?:checked|selected)$/i,Sn=ne.getSetAttribute,bn=ne.input;ie.fn.extend({attr:function(t,e){return Te(this,ie.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ie.removeAttr(this,t)})}}),ie.extend({attr:function(t,e,n){var o,i,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===Ie?ie.prop(t,e,n):(1===r&&ie.isXMLDoc(t)||(e=e.toLowerCase(),o=ie.attrHooks[e]||(ie.expr.match.bool.test(e)?In:jn)),void 0===n?o&&"get"in o&&null!==(i=o.get(t,e))?i:(i=ie.find.attr(t,e),null==i?void 0:i):null!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void ie.removeAttr(t,e))},removeAttr:function(t,e){var n,o,i=0,r=e&&e.match(xe);if(r&&1===t.nodeType)for(;n=r[i++];)o=ie.propFix[n]||n,ie.expr.match.bool.test(n)?bn&&Sn||!Ln.test(n)?t[o]=!1:t[ie.camelCase("default-"+n)]=t[o]=!1:ie.attr(t,n,""),t.removeAttribute(Sn?n:o)},attrHooks:{type:{set:function(t,e){if(!ne.radioValue&&"radio"===e&&ie.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),In={set:function(t,e,n){return e===!1?ie.removeAttr(t,n):bn&&Sn||!Ln.test(n)?t.setAttribute(!Sn&&ie.propFix[n]||n,n):t[ie.camelCase("default-"+n)]=t[n]=!0,n}},ie.each(ie.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Cn[e]||ie.find.attr;Cn[e]=bn&&Sn||!Ln.test(e)?function(t,e,o){var i,r;return o||(r=Cn[e],Cn[e]=i,i=null!=n(t,e,o)?e.toLowerCase():null,Cn[e]=r),i}:function(t,e,n){return n?void 0:t[ie.camelCase("default-"+e)]?e.toLowerCase():null}}),bn&&Sn||(ie.attrHooks.value={set:function(t,e,n){return ie.nodeName(t,"input")?void(t.defaultValue=e):jn&&jn.set(t,e,n)}}),Sn||(jn={set:function(t,e,n){var o=t.getAttributeNode(n);return o||t.setAttributeNode(o=t.ownerDocument.createAttribute(n)),o.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},Cn.id=Cn.name=Cn.coords=function(t,e,n){var o;return n?void 0:(o=t.getAttributeNode(e))&&""!==o.value?o.value:null},ie.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:jn.set},ie.attrHooks.contenteditable={set:function(t,e,n){jn.set(t,""===e?!1:e,n)}},ie.each(["width","height"],function(t,e){ie.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),ne.style||(ie.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Nn=/^(?:input|select|textarea|button|object)$/i,Tn=/^(?:a|area)$/i;ie.fn.extend({prop:function(t,e){return Te(this,ie.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ie.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),ie.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var o,i,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return r=1!==s||!ie.isXMLDoc(t),r&&(e=ie.propFix[e]||e,i=ie.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:t[e]=n:i&&"get"in i&&null!==(o=i.get(t,e))?o:t[e]},propHooks:{tabIndex:{get:function(t){var e=ie.find.attr(t,"tabindex");return e?parseInt(e,10):Nn.test(t.nodeName)||Tn.test(t.nodeName)&&t.href?0:-1}}}}),ne.hrefNormalized||ie.each(["href","src"],function(t,e){ie.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ne.optSelected||(ie.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),ie.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ie.propFix[this.toLowerCase()]=this}),ne.enctype||(ie.propFix.enctype="encoding");var On=/[\t\r\n\f]/g;ie.fn.extend({addClass:function(t){var e,n,o,i,r,s,a=0,l=this.length,p="string"==typeof t&&t;if(ie.isFunction(t))return this.each(function(e){ie(this).addClass(t.call(this,e,this.className))});if(p)for(e=(t||"").match(xe)||[];l>a;a++)if(n=this[a],o=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(On," "):" ")){for(r=0;i=e[r++];)o.indexOf(" "+i+" ")<0&&(o+=i+" ");s=ie.trim(o),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,o,i,r,s,a=0,l=this.length,p=0===arguments.length||"string"==typeof t&&t;if(ie.isFunction(t))return this.each(function(e){ie(this).removeClass(t.call(this,e,this.className))});if(p)for(e=(t||"").match(xe)||[];l>a;a++)if(n=this[a],o=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(On," "):"")){for(r=0;i=e[r++];)for(;o.indexOf(" "+i+" ")>=0;)o=o.replace(" "+i+" "," ");s=t?ie.trim(o):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(ie.isFunction(t)?function(n){ie(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,o=0,i=ie(this),r=t.match(xe)||[];e=r[o++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);
else(n===Ie||"boolean"===n)&&(this.className&&ie._data(this,"__className__",this.className),this.className=this.className||t===!1?"":ie._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,o=this.length;o>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(On," ").indexOf(e)>=0)return!0;return!1}}),ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ie.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),ie.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,o){return this.on(e,t,n,o)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var An=ie.now(),wn=/\?/,_n=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ie.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,o=null,i=ie.trim(e+"");return i&&!ie.trim(i.replace(_n,function(t,e,i,r){return n&&e&&(o=0),0===o?t:(n=i||e,o+=!r-!i,"")}))?Function("return "+i)():ie.error("Invalid JSON: "+e)},ie.parseXML=function(e){var n,o;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(o=new DOMParser,n=o.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+e),n};var Rn,Dn,Mn=/#.*$/,Bn=/([?&])_=[^&]*/,Fn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Yn=/^(?:GET|HEAD)$/,Gn=/^\/\//,qn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,kn={},Vn={},Hn="*/".concat("*");try{Dn=location.href}catch(Wn){Dn=ge.createElement("a"),Dn.href="",Dn=Dn.href}Rn=qn.exec(Dn.toLowerCase())||[],ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dn,type:"GET",isLocal:Xn.test(Rn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ie.parseJSON,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?G(G(t,ie.ajaxSettings),e):G(ie.ajaxSettings,t)},ajaxPrefilter:X(kn),ajaxTransport:X(Vn),ajax:function(t,e){function n(t,e,n,o){var i,u,y,v,E,j=e;2!==x&&(x=2,a&&clearTimeout(a),p=void 0,s=o||"",P.readyState=t>0?4:0,i=t>=200&&300>t||304===t,n&&(v=q(h,P,n)),v=k(h,v,P,i),i?(h.ifModified&&(E=P.getResponseHeader("Last-Modified"),E&&(ie.lastModified[r]=E),E=P.getResponseHeader("etag"),E&&(ie.etag[r]=E)),204===t||"HEAD"===h.type?j="nocontent":304===t?j="notmodified":(j=v.state,u=v.data,y=v.error,i=!y)):(y=j,(t||!j)&&(j="error",0>t&&(t=0))),P.status=t,P.statusText=(e||j)+"",i?g.resolveWith(d,[u,j,P]):g.rejectWith(d,[P,j,y]),P.statusCode(m),m=void 0,l&&c.trigger(i?"ajaxSuccess":"ajaxError",[P,h,i?u:y]),f.fireWith(d,[P,j]),l&&(c.trigger("ajaxComplete",[P,h]),--ie.active||ie.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var o,i,r,s,a,l,p,u,h=ie.ajaxSetup({},e),d=h.context||h,c=h.context&&(d.nodeType||d.jquery)?ie(d):ie.event,g=ie.Deferred(),f=ie.Callbacks("once memory"),m=h.statusCode||{},y={},v={},x=0,E="canceled",P={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!u)for(u={};e=Fn.exec(s);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return x||(t=v[n]=v[n]||t,y[t]=e),this},overrideMimeType:function(t){return x||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>x)for(e in t)m[e]=[m[e],t[e]];else P.always(t[P.status]);return this},abort:function(t){var e=t||E;return p&&p.abort(e),n(0,e),this}};if(g.promise(P).complete=f.add,P.success=P.done,P.error=P.fail,h.url=((t||h.url||Dn)+"").replace(Mn,"").replace(Gn,Rn[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=ie.trim(h.dataType||"*").toLowerCase().match(xe)||[""],null==h.crossDomain&&(o=qn.exec(h.url.toLowerCase()),h.crossDomain=!(!o||o[1]===Rn[1]&&o[2]===Rn[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(Rn[3]||("http:"===Rn[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ie.param(h.data,h.traditional)),Y(kn,h,e,P),2===x)return P;l=ie.event&&h.global,l&&0===ie.active++&&ie.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Yn.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(wn.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Bn.test(r)?r.replace(Bn,"$1_="+An++):r+(wn.test(r)?"&":"?")+"_="+An++)),h.ifModified&&(ie.lastModified[r]&&P.setRequestHeader("If-Modified-Since",ie.lastModified[r]),ie.etag[r]&&P.setRequestHeader("If-None-Match",ie.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&P.setRequestHeader("Content-Type",h.contentType),P.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Hn+"; q=0.01":""):h.accepts["*"]);for(i in h.headers)P.setRequestHeader(i,h.headers[i]);if(h.beforeSend&&(h.beforeSend.call(d,P,h)===!1||2===x))return P.abort();E="abort";for(i in{success:1,error:1,complete:1})P[i](h[i]);if(p=Y(Vn,h,e,P)){P.readyState=1,l&&c.trigger("ajaxSend",[P,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){P.abort("timeout")},h.timeout));try{x=1,p.send(y,n)}catch(j){if(!(2>x))throw j;n(-1,j)}}else n(-1,"No Transport");return P},getJSON:function(t,e,n){return ie.get(t,e,n,"json")},getScript:function(t,e){return ie.get(t,void 0,e,"script")}}),ie.each(["get","post"],function(t,e){ie[e]=function(t,n,o,i){return ie.isFunction(n)&&(i=i||o,o=n,n=void 0),ie.ajax({url:t,type:e,dataType:i,data:n,success:o})}}),ie._evalUrl=function(t){return ie.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ie.fn.extend({wrapAll:function(t){if(ie.isFunction(t))return this.each(function(e){ie(this).wrapAll(t.call(this,e))});if(this[0]){var e=ie(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(ie.isFunction(t)?function(e){ie(this).wrapInner(t.call(this,e))}:function(){var e=ie(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=ie.isFunction(t);return this.each(function(n){ie(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){ie.nodeName(this,"body")||ie(this).replaceWith(this.childNodes)}).end()}}),ie.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||ie.css(t,"display"))},ie.expr.filters.visible=function(t){return!ie.expr.filters.hidden(t)};var Un=/%20/g,zn=/\[\]$/,Jn=/\r?\n/g,Qn=/^(?:submit|button|image|reset|file)$/i,Kn=/^(?:input|select|textarea|keygen)/i;ie.param=function(t,e){var n,o=[],i=function(t,e){e=ie.isFunction(e)?e():null==e?"":e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=ie.ajaxSettings&&ie.ajaxSettings.traditional),ie.isArray(t)||t.jquery&&!ie.isPlainObject(t))ie.each(t,function(){i(this.name,this.value)});else for(n in t)V(n,t[n],e,i);return o.join("&").replace(Un,"+")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ie.prop(this,"elements");return t?ie.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ie(this).is(":disabled")&&Kn.test(this.nodeName)&&!Qn.test(t)&&(this.checked||!Oe.test(t))}).map(function(t,e){var n=ie(this).val();return null==n?null:ie.isArray(n)?ie.map(n,function(t){return{name:e.name,value:t.replace(Jn,"\r\n")}}):{name:e.name,value:n.replace(Jn,"\r\n")}}).get()}}),ie.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&H()||W()}:H;var $n=0,Zn={},to=ie.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Zn)Zn[t](void 0,!0)}),ne.cors=!!to&&"withCredentials"in to,to=ne.ajax=!!to,to&&ie.ajaxTransport(function(t){if(!t.crossDomain||ne.cors){var e;return{send:function(n,o){var i,r=t.xhr(),s=++$n;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)r[i]=t.xhrFields[i];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&r.setRequestHeader(i,n[i]+"");r.send(t.hasContent&&t.data||null),e=function(n,i){var a,l,p;if(e&&(i||4===r.readyState))if(delete Zn[s],e=void 0,r.onreadystatechange=ie.noop,i)4!==r.readyState&&r.abort();else{p={},a=r.status,"string"==typeof r.responseText&&(p.text=r.responseText);try{l=r.statusText}catch(u){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=p.text?200:404}p&&o(a,l,p,r.getAllResponseHeaders())},t.async?4===r.readyState?setTimeout(e):r.onreadystatechange=Zn[s]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return ie.globalEval(t),t}}}),ie.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ie.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=ge.head||ie("head")[0]||ge.documentElement;return{send:function(o,i){e=ge.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||i(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var eo=[],no=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=eo.pop()||ie.expando+"_"+An++;return this[t]=!0,t}}),ie.ajaxPrefilter("json jsonp",function(e,n,o){var i,r,s,a=e.jsonp!==!1&&(no.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&no.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=ie.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(no,"$1"+i):e.jsonp!==!1&&(e.url+=(wn.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||ie.error(i+" was not called"),s[0]},e.dataTypes[0]="json",r=t[i],t[i]=function(){s=arguments},o.always(function(){t[i]=r,e[i]&&(e.jsonpCallback=n.jsonpCallback,eo.push(i)),s&&ie.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),ie.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||ge;var o=he.exec(t),i=!n&&[];return o?[e.createElement(o[1])]:(o=ie.buildFragment([t],e,i),i&&i.length&&ie(i).remove(),ie.merge([],o.childNodes))};var oo=ie.fn.load;ie.fn.load=function(t,e,n){if("string"!=typeof t&&oo)return oo.apply(this,arguments);var o,i,r,s=this,a=t.indexOf(" ");return a>=0&&(o=ie.trim(t.slice(a,t.length)),t=t.slice(0,a)),ie.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&ie.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){i=arguments,s.html(o?ie("<div>").append(ie.parseHTML(t)).find(o):t)}).complete(n&&function(t,e){s.each(n,i||[t.responseText,e,t])}),this},ie.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ie.fn[e]=function(t){return this.on(e,t)}}),ie.expr.filters.animated=function(t){return ie.grep(ie.timers,function(e){return t===e.elem}).length};var io=t.document.documentElement;ie.offset={setOffset:function(t,e,n){var o,i,r,s,a,l,p,u=ie.css(t,"position"),h=ie(t),d={};"static"===u&&(t.style.position="relative"),a=h.offset(),r=ie.css(t,"top"),l=ie.css(t,"left"),p=("absolute"===u||"fixed"===u)&&ie.inArray("auto",[r,l])>-1,p?(o=h.position(),s=o.top,i=o.left):(s=parseFloat(r)||0,i=parseFloat(l)||0),ie.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+i),"using"in e?e.using.call(t,d):h.css(d)}},ie.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ie.offset.setOffset(this,t,e)});var e,n,o={top:0,left:0},i=this[0],r=i&&i.ownerDocument;if(r)return e=r.documentElement,ie.contains(e,i)?(typeof i.getBoundingClientRect!==Ie&&(o=i.getBoundingClientRect()),n=U(r),{top:o.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:o.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):o},position:function(){if(this[0]){var t,e,n={top:0,left:0},o=this[0];return"fixed"===ie.css(o,"position")?e=o.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ie.nodeName(t[0],"html")||(n=t.offset()),n.top+=ie.css(t[0],"borderTopWidth",!0),n.left+=ie.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-ie.css(o,"marginTop",!0),left:e.left-n.left-ie.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||io;t&&!ie.nodeName(t,"html")&&"static"===ie.css(t,"position");)t=t.offsetParent;return t||io})}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);ie.fn[t]=function(o){return Te(this,function(t,o,i){var r=U(t);return void 0===i?r?e in r?r[e]:r.document.documentElement[o]:t[o]:void(r?r.scrollTo(n?ie(r).scrollLeft():i,n?i:ie(r).scrollTop()):t[o]=i)},t,o,arguments.length,null)}}),ie.each(["top","left"],function(t,e){ie.cssHooks[e]=S(ne.pixelPosition,function(t,n){return n?(n=en(t,e),on.test(n)?ie(t).position()[e]+"px":n):void 0})}),ie.each({Height:"height",Width:"width"},function(t,e){ie.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,o){ie.fn[o]=function(o,i){var r=arguments.length&&(n||"boolean"!=typeof o),s=n||(o===!0||i===!0?"margin":"border");return Te(this,function(e,n,o){var i;return ie.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===o?ie.css(e,n,s):ie.style(e,n,o,s)},e,r?o:void 0,r,null)}})}),ie.fn.size=function(){return this.length},ie.fn.andSelf=ie.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ie});var ro=t.jQuery,so=t.$;return ie.noConflict=function(e){return t.$===ie&&(t.$=so),e&&t.jQuery===ie&&(t.jQuery=ro),ie},typeof e===Ie&&(t.jQuery=t.$=ie),ie}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,o=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)},fire:function(e,n,o){var i=t.Event(n);return e.trigger(i,o),i.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},handleRemote:function(o){var i,r,s,a,l,p;if(n.fire(o,"ajax:before")){if(a=o.data("with-credentials")||null,l=o.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,o.is("form")){i=o.attr("method"),r=o.attr("action"),s=o.serializeArray();var u=o.data("ujs:submit-button");u&&(s.push(u),o.data("ujs:submit-button",null))}else o.is(n.inputChangeSelector)?(i=o.data("method"),r=o.data("url"),s=o.serialize(),o.data("params")&&(s=s+"&"+o.data("params"))):o.is(n.buttonClickSelector)?(i=o.data("method")||"get",r=o.data("url"),s=o.serialize(),o.data("params")&&(s=s+"&"+o.data("params"))):(i=o.data("method"),r=n.href(o),s=o.data("params")||null);return p={type:i||"GET",data:s,dataType:l,beforeSend:function(t,i){return i.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(o,"ajax:beforeSend",[t,i])?void o.trigger("ajax:send",t):!1},success:function(t,e,n){o.trigger("ajax:success",[t,e,n])},complete:function(t,e){o.trigger("ajax:complete",[t,e])},error:function(t,e,n){o.trigger("ajax:error",[t,e,n])},crossDomain:n.isCrossDomain(r)},a&&(p.xhrFields={withCredentials:a}),r&&(p.url=r),n.ajax(p)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!n.protocol||!n.host||e.protocol+"//"+e.host!=n.protocol+"//"+n.host}catch(o){return!0}},handleMethod:function(o){var i=n.href(o),r=o.data("method"),s=o.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),p=t('<form method="post" action="'+i+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />';l===e||a===e||n.isCrossDomain(i)||(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&p.attr("target",s),p.hide().append(u).appendTo("body"),p.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,o;n=t.is("button")?"html":"val",o=t.data("disable-with"),t.data("ujs:enable-with",t[n]()),o!==e&&t[n](o),t.prop("disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,o=t.data("confirm"),i=!1;return o?(n.fire(t,"confirm")&&(i=n.confirm(o),e=n.fire(t,"confirm:complete",[i])),i&&e):!0},blankInputs:function(e,n,o){var i,r,s=t(),a=n||"input,textarea",l=e.find(a);return l.each(function(){if(i=t(this),r=i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val(),!r==!o){if(i.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;s=s.add(i)}}),s.length?s:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var o=t.data("disable-with");t.data("ujs:enable-with",t.html()),o!==e&&t.html(o),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(o,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,o){t.crossDomain||n.CSRFProtection(o)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableElement(e)})}),o.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),o.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(t(this))}),o.delegate(n.linkClickSelector,"click.rails",function(o){var i=t(this),r=i.data("method"),s=i.data("params"),a=o.metaKey||o.ctrlKey;if(!n.allowAction(i))return n.stopEverything(o);if(!a&&i.is(n.linkDisableSelector)&&n.disableElement(i),i.data("remote")!==e){if(a&&(!r||"GET"===r)&&!s)return!0;var l=n.handleRemote(i);return l===!1?n.enableElement(i):l.fail(function(){n.enableElement(i)}),!1}return r?(n.handleMethod(i),!1):void 0}),o.delegate(n.buttonClickSelector,"click.rails",function(e){var o=t(this);if(!n.allowAction(o))return n.stopEverything(e);o.is(n.buttonDisableSelector)&&n.disableFormElement(o);var i=n.handleRemote(o);return i===!1?n.enableFormElement(o):i.fail(function(){n.enableFormElement(o)}),!1}),o.delegate(n.inputChangeSelector,"change.rails",function(e){var o=t(this);return n.allowAction(o)?(n.handleRemote(o),!1):n.stopEverything(e)}),o.delegate(n.formSubmitSelector,"submit.rails",function(o){var i,r,s=t(this),a=s.data("remote")!==e;if(!n.allowAction(s))return n.stopEverything(o);if(s.attr("novalidate")==e&&(i=n.blankInputs(s,n.requiredInputSelector),i&&n.fire(s,"ajax:aborted:required",[i])))return n.stopEverything(o);if(a){if(r=n.nonBlankInputs(s,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(s)},13);var l=n.fire(s,"ajax:aborted:file",[r]);return l||setTimeout(function(){n.enableFormElements(s)},13),l}return n.handleRemote(s),!1}setTimeout(function(){n.disableFormElements(s)},13)}),o.delegate(n.formInputClickSelector,"click.rails",function(e){var o=t(this);if(!n.allowAction(o))return n.stopEverything(e);var i=o.attr("name"),r=i?{name:i,value:o.val()}:null;o.closest("form").data("ujs:submit-button",r)}),o.delegate(n.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),o.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),function(){var t,e,n,o,i,r,s,a,l,p,u,h,d,c,g,f,m,y,v,x,E,P,j,I,C,L,S,b,N,T,O,A,w,_,R,D,M,B,F,X,Y,G,q,k,V,H,W,U,z,J,Q,K,$,Z,te,ee,ne=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},oe=function(t,e){function n(){this.constructor=t}for(var o in e)ie.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},ie={}.hasOwnProperty,re=[].slice,se=function(t,e){return function(){return t.apply(e,arguments)}};_={},d=10,K=!1,F=null,v=null,A=null,G=null,ee=null,o={BEFORE_CHANGE:"page:before-change",FETCH:"page:fetch",RECEIVE:"page:receive",CHANGE:"page:change",UPDATE:"page:update",LOAD:"page:load",RESTORE:"page:restore",BEFORE_UNLOAD:"page:before-unload",EXPIRE:"page:expire"},I=function(t){var e;return t=new n(t),W(),h(),null!=F&&F.start(),K&&(e=$(t.absolute))?(C(e),L(t,null,!1)):L(t,J)},$=function(t){var e;return e=_[t],e&&!e.transitionCacheDisabled?e:void 0},E=function(t){return null==t&&(t=!0),K=t},x=function(t){return null==t&&(t=!0),p?t?null!=F?F:F=new r("html"):(null!=F&&F.uninstall(),F=null):void 0},L=function(t,e,n){return null==n&&(n=!0),Z(o.FETCH,{url:t.absolute}),null!=ee&&ee.abort(),ee=new XMLHttpRequest,ee.open("GET",t.withoutHashForIE10compatibility(),!0),ee.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),ee.setRequestHeader("X-XHR-Referer",G),ee.onload=function(){var n;return Z(o.RECEIVE,{url:t.absolute}),(n=B())?(q(t),k(),c.apply(null,j(n)),w(),"function"==typeof e&&e(),Z(o.LOAD)):document.location.href=y()||t.absolute},F&&n&&(ee.onprogress=function(){return function(t){var e;return e=t.lengthComputable?t.loaded/t.total*100:F.value+(100-F.value)/10,F.advanceTo(e)}}(this)),ee.onloadend=function(){return ee=null},ee.onerror=function(){return document.location.href=t.absolute},ee.send()},C=function(t){return null!=ee&&ee.abort(),c(t.title,t.body),X(t),Z(o.RESTORE)},h=function(){var t;return t=new n(v.url),_[t.absolute]={url:t.relative,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")},f(d)},D=function(t){return null==t&&(t=d),/^[\d]+$/.test(t)?d=parseInt(t):void 0},f=function(t){var e,n,i,r,s,a;for(s=Object.keys(_),e=s.map(function(t){return _[t].cachedAt}).sort(function(t,e){return e-t}),a=[],n=0,r=s.length;r>n;n++)i=s[n],_[i].cachedAt<=e[t]&&(Z(o.EXPIRE,_[i]),a.push(delete _[i]));return a},c=function(e,n,i,r){return Z(o.BEFORE_UNLOAD),document.title=e,document.documentElement.replaceChild(n,document.body),null!=i&&t.update(i),Q(),r&&P(),v=window.history.state,null!=F&&F.done(),Z(o.CHANGE),Z(o.UPDATE)},P=function(){var t,e,n,o,i,r,s,a,l,p,u,h;for(h=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),n=0,i=h.length;i>n;n++)if(u=h[n],""===(l=u.type)||"text/javascript"===l){for(e=document.createElement("script"),p=u.attributes,o=0,r=p.length;r>o;o++)t=p[o],e.setAttribute(t.name,t.value);u.hasAttribute("async")||(e.async=!1),e.appendChild(document.createTextNode(u.innerHTML)),a=u.parentNode,s=u.nextSibling,a.removeChild(u),a.insertBefore(e,s)}},U=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},Q=function(){var t,e;return t=(e=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[e.length-1],t&&document.activeElement!==t?t.focus():void 0},q=function(t){return(t=new n(t)).absolute!==G?window.history.pushState({turbolinks:!0,url:t.absolute},"",t.absolute):void 0},k=function(){var t,e;return(t=ee.getResponseHeader("X-XHR-Redirected-To"))?(t=new n(t),e=t.hasNoHash()?document.location.hash:"",window.history.replaceState(window.history.state,"",t.href+e)):void 0},y=function(){var t;return null!=(t=ee.getResponseHeader("Location"))&&new n(t).crossOrigin()?t:void 0},W=function(){return G=document.location.href},H=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},V=function(){return v=window.history.state},w=function(){var t;return navigator.userAgent.match(/Firefox/)&&!(t=new n).hasNoHash()?(window.history.replaceState(v,"",t.withoutHash()),document.location.hash=t.hash):void 0},X=function(t){return window.scrollTo(t.positionX,t.positionY)},J=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},g=function(t){var e,n,o;if(null==t||"object"!=typeof t)return t;e=new t.constructor;for(n in t)o=t[n],e[n]=g(o);return e},M=function(t){var e,n;return n=(null!=(e=document.cookie.match(new RegExp(t+"=(\\w+)")))?e[1].toUpperCase():void 0)||"",document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",n},Z=function(t,e){var n;return"undefined"!=typeof Prototype&&Event.fire(document,t,e,!0),n=document.createEvent("Events"),e&&(n.data=e),n.initEvent(t,!0,!0),document.dispatchEvent(n)},R=function(t){return!Z(o.BEFORE_CHANGE,{url:t})},B=function(){var t,e,n,o,i,r;return e=function(){var t;return 400<=(t=ee.status)&&600>t},r=function(){var t;return null!=(t=ee.getResponseHeader("Content-Type"))&&t.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},o=function(t){var e,n,o,i,r;for(i=t.querySelector("head").childNodes,r=[],e=0,n=i.length;n>e;e++)o=i[e],null!=("function"==typeof o.getAttribute?o.getAttribute("data-turbolinks-track"):void 0)&&r.push(o.getAttribute("src")||o.getAttribute("href"));return r},t=function(t){var e;return A||(A=o(document)),e=o(t),e.length!==A.length||i(e,A).length!==A.length},i=function(t,e){var n,o,i,r,s;for(t.length>e.length&&(i=[e,t],t=i[0],e=i[1]),r=[],n=0,o=t.length;o>n;n++)s=t[n],ne.call(e,s)>=0&&r.push(s);return r},!e()&&r()&&(n=m(ee.responseText),n&&!t(n))?n:void 0},j=function(e){var n;return n=e.querySelector("title"),[null!=n?n.textContent:void 0,U(e.querySelector("body")),t.get(e).token,"runScripts"]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e&&"function"==typeof e.getAttribute?e.getAttribute("content"):void 0}},update:function(t){var e;return e=this.get(),null!=e.token&&null!=t&&e.token!==t?e.node.setAttribute("content",t):void 0}},m=function(t){var e;return e=document.documentElement.cloneNode(),e.innerHTML=t,e.head=e.querySelector("head"),e.body=e.querySelector("body"),e},n=function(){function t(e){return this.original=null!=e?e:document.location.href,this.original.constructor===t?this.original:void this._parse()}return t.prototype.withoutHash=function(){return this.href.replace(this.hash,"").replace("#","")},t.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},t.prototype.hasNoHash=function(){return 0===this.hash.length},t.prototype.crossOrigin=function(){return this.origin!==(new t).origin},t.prototype._parse=function(){var t;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,t=this.link,this.href=t.href,this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.search=t.search,this.hash=t.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},t}(),i=function(t){function e(t){return this.link=t,this.link.constructor===e?this.link:(this.original=this.link.href,this.originalElement=this.link,this.link=this.link.cloneNode(!1),void e.__super__.constructor.apply(this,arguments))}return oe(e,t),e.HTML_EXTENSIONS=["html"],e.allowExtensions=function(){var t,n,o,i;for(n=1<=arguments.length?re.call(arguments,0):[],o=0,i=n.length;i>o;o++)t=n[o],e.HTML_EXTENSIONS.push(t);return e.HTML_EXTENSIONS},e.prototype.shouldIgnore=function(){return this.crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},e.prototype._anchored=function(){return(this.hash.length>0||"#"===this.href.charAt(this.href.length-1))&&this.withoutHash()===(new n).withoutHash()},e.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+e.HTML_EXTENSIONS.join("|")+")?$","g"))},e.prototype._optOut=function(){var t,e;for(e=this.originalElement;!t&&e!==document;)t=null!=e.getAttribute("data-no-turbolink"),e=e.parentNode;return t},e.prototype._target=function(){return 0!==this.link.target.length},e}(n),e=function(){function t(t){this.event=t,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(R(this.link.absolute)||te(this.link.href),this.event.preventDefault()))}return t.installHandlerLast=function(e){return e.defaultPrevented?void 0:(document.removeEventListener("click",t.handle,!1),document.addEventListener("click",t.handle,!1))},t.handle=function(e){return new t(e)},t.prototype._extractLink=function(){var t;for(t=this.event.target;t.parentNode&&"A"!==t.nodeName;)t=t.parentNode;return"A"===t.nodeName&&0!==t.href.length?this.link=new i(t):void 0},t.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick())},t.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},t}(),r=function(){function t(t){this.elementSelector=t,this._trickle=se(this._trickle,this),this.value=0,this.content="",this.speed=300,this.opacity=.99,this.install()}var e;return e="turbolinks-progress-bar",t.prototype.install=function(){return this.element=document.querySelector(this.elementSelector),this.element.classList.add(e),this.styleElement=document.createElement("style"),document.head.appendChild(this.styleElement),this._updateStyle()},t.prototype.uninstall=function(){return this.element.classList.remove(e),document.head.removeChild(this.styleElement)
},t.prototype.start=function(){return this.advanceTo(5)},t.prototype.advanceTo=function(t){var e;if(t>(e=this.value)&&100>=e){if(this.value=t,this._updateStyle(),100===this.value)return this._stopTrickle();if(this.value>0)return this._startTrickle()}},t.prototype.done=function(){return this.value>0?(this.advanceTo(100),this._reset()):void 0},t.prototype._reset=function(){var t;return t=this.opacity,setTimeout(function(t){return function(){return t.opacity=0,t._updateStyle()}}(this),this.speed/2),setTimeout(function(e){return function(){return e.value=0,e.opacity=t,e._withSpeed(0,function(){return e._updateStyle(!0)})}}(this),this.speed)},t.prototype._startTrickle=function(){return this.trickling?void 0:(this.trickling=!0,setTimeout(this._trickle,this.speed))},t.prototype._stopTrickle=function(){return delete this.trickling},t.prototype._trickle=function(){return this.trickling?(this.advanceTo(this.value+Math.random()/2),setTimeout(this._trickle,this.speed)):void 0},t.prototype._withSpeed=function(t,e){var n,o;return n=this.speed,this.speed=t,o=e(),this.speed=n,o},t.prototype._updateStyle=function(t){return null==t&&(t=!1),t&&this._changeContentToForceRepaint(),this.styleElement.textContent=this._createCSSRule()},t.prototype._changeContentToForceRepaint=function(){return this.content=""===this.content?" ":""},t.prototype._createCSSRule=function(){return this.elementSelector+"."+e+"::before {\n  content: '"+this.content+"';\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 2000;\n  background-color: #0076ff;\n  height: 3px;\n  opacity: "+this.opacity+";\n  width: "+this.value+"%;\n  transition: width "+this.speed+"ms ease-out, opacity "+this.speed/2+"ms ease-in;\n  transform: translate3d(0,0,0);\n}"},t}(),u=function(t){return setTimeout(t,500)},N=function(){return document.addEventListener("DOMContentLoaded",function(){return Z(o.CHANGE),Z(o.UPDATE)},!0)},O=function(){return"undefined"!=typeof jQuery?jQuery(document).on("ajaxSuccess",function(t,e){return jQuery.trim(e.responseText)?Z(o.UPDATE):void 0}):void 0},T=function(t){var e,o;return(null!=(o=t.state)?o.turbolinks:void 0)?(e=_[new n(t.state.url).absolute])?(h(),C(e)):te(t.target.location.href):void 0},b=function(){return H(),V(),document.addEventListener("click",e.installHandlerLast,!0),window.addEventListener("hashchange",function(){return H(),V()},!1),u(function(){return window.addEventListener("popstate",T,!1)})},S=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),l=window.history&&window.history.pushState&&window.history.replaceState&&S,s=!navigator.userAgent.match(/CriOS\//),z="GET"===(Y=M("request_method"))||""===Y,p=l&&s&&z,a=document.addEventListener&&document.createEvent,a&&(N(),O()),p?(te=I,b()):te=function(t){return document.location.href=t},this.Turbolinks={visit:te,pagesCached:D,enableTransitionCache:E,enableProgressBar:x,allowLinkExtensions:i.allowExtensions,supported:p,EVENTS:g(o)}}.call(this),$(function(){$(".fill-form").on("click",".add-stop",function(t){t.preventDefault(),$(".stop_location_3").length||($(".stop_location_2").length?($("<br><label for=''>Stop 3:</label><input class='stop_location_3 form-control stop' class='search-ui' placeholder='(e.g. Costco)'>").insertAfter(".stop_location_2"),$(".add-stop").remove()):$("<br><label for=''>Stop 2:</label><input class='stop_location_2 form-control stop' class='search-ui' placeholder='(e.g. Trader Joes)'>").insertAfter(".stop_location_1"))})}),/********************************************************************************
 *                                                                              *
 * Author    :  Angus Johnson                                                   *
 * Version   :  6.1.3a                                                          *
 * Date      :  22 January 2014                                                 *
 * Website   :  http://www.angusj.com                                           *
 * Copyright :  Angus Johnson 2010-2014                                         *
 *                                                                              *
 * License:                                                                     *
 * Use, modification & distribution is subject to Boost Software License Ver 1. *
 * http://www.boost.org/LICENSE_1_0.txt                                         *
 *                                                                              *
 * Attributions:                                                                *
 * The code in this library is an extension of Bala Vatti's clipping algorithm: *
 * "A generic solution to polygon clipping"                                     *
 * Communications of the ACM, Vol 35, Issue 7 (July 1992) pp 56-63.             *
 * http://portal.acm.org/citation.cfm?id=129906                                 *
 *                                                                              *
 * Computer graphics and geometric modeling: implementation and algorithms      *
 * By Max K. Agoston                                                            *
 * Springer; 1 edition (January 4, 2005)                                        *
 * http://books.google.com/books?q=vatti+clipping+agoston                       *
 *                                                                              *
 * See also:                                                                    *
 * "Polygon Offsetting by Computing Winding Numbers"                            *
 * Paper no. DETC2005-85513 pp. 565-575                                         *
 * ASME 2005 International Design Engineering Technical Conferences             *
 * and Computers and Information in Engineering Conference (IDETC/CIE2005)      *
 * September 24-28, 2005 , Long Beach, California, USA                          *
 * http://www.me.berkeley.edu/~mcmains/pubs/DAC05OffsetPolygon.pdf              *
 *                                                                              *
 *******************************************************************************/
/*******************************************************************************
 *                                                                              *
 * Basic JavaScript BN library - subset useful for RSA encryption.              *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/                               *
 * Copyright (c) 2005  Tom Wu                                                   *
 * All Rights Reserved.                                                         *
 * See "LICENSE" for details:                                                   *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/LICENSE                        *
 *                                                                              *
 *******************************************************************************/
function(){function t(t,e,n){y.biginteger_used=1,null!=t&&("number"==typeof t&&"undefined"==typeof e?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function e(){return new t(null)}function n(t,e,n,o,i,r){for(;0<=--r;){var s=e*this[t++]+n[o]+i;i=Math.floor(s/67108864),n[o++]=67108863&s}return i}function o(t,e,n,o,i,r){var s=32767&e;for(e>>=15;0<=--r;){var a=32767&this[t],l=this[t++]>>15,p=e*a+l*s,a=s*a+((32767&p)<<15)+n[o]+(1073741823&i);i=(a>>>30)+(p>>>15)+e*l+(i>>>30),n[o++]=1073741823&a}return i}function i(t,e,n,o,i,r){var s=16383&e;for(e>>=14;0<=--r;){var a=16383&this[t],l=this[t++]>>14,p=e*a+l*s,a=s*a+((16383&p)<<14)+n[o]+i;i=(a>>28)+(p>>14)+e*l,n[o++]=268435455&a}return i}function r(t,e){var n=N[t.charCodeAt(e)];return null==n?-1:n}function s(t){var n=e();return n.fromInt(t),n}function a(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=t>>1&&(n+=1),n}function l(t){this.m=t}function p(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function u(t,e){return t&e}function h(t,e){return t|e}function d(t,e){return t^e}function c(t,e){return t&~e}function g(){}function f(t){return t}function m(n){this.r2=e(),this.q3=e(),t.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n),this.m=n}var y={},v=!1;"undefined"!=typeof module&&module.exports?(module.exports=y,v=!0):"undefined"!=typeof document?window.ClipperLib=y:self.ClipperLib=y;var x;if(v)E="chrome",x="Netscape";else{var E=navigator.userAgent.toString().toLowerCase();x=navigator.appName}var P,j,I,C,L,S;P=-1!=E.indexOf("chrome")&&-1==E.indexOf("chromium")?1:0,v=-1!=E.indexOf("chromium")?1:0,j=-1!=E.indexOf("safari")&&-1==E.indexOf("chrome")&&-1==E.indexOf("chromium")?1:0,I=-1!=E.indexOf("firefox")?1:0,E.indexOf("firefox/17"),E.indexOf("firefox/15"),E.indexOf("firefox/3"),C=-1!=E.indexOf("opera")?1:0,E.indexOf("msie 10"),E.indexOf("msie 9"),L=-1!=E.indexOf("msie 8")?1:0,S=-1!=E.indexOf("msie 7")?1:0,E=-1!=E.indexOf("msie ")?1:0,y.biginteger_used=null,"Microsoft Internet Explorer"==x?(t.prototype.am=o,x=30):"Netscape"!=x?(t.prototype.am=n,x=26):(t.prototype.am=i,x=28),t.prototype.DB=x,t.prototype.DM=(1<<x)-1,t.prototype.DV=1<<x,t.prototype.FV=Math.pow(2,52),t.prototype.F1=52-x,t.prototype.F2=2*x-52;var b,N=[];for(x=48,b=0;9>=b;++b)N[x++]=b;for(x=97,b=10;36>b;++b)N[x++]=b;for(x=65,b=10;36>b;++b)N[x++]=b;l.prototype.convert=function(t){return 0>t.s||0<=t.compareTo(this.m)?t.mod(this.m):t},l.prototype.revert=function(t){return t},l.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},l.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},l.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},p.prototype.convert=function(n){var o=e();return n.abs().dlShiftTo(this.m.t,o),o.divRemTo(this.m,null,o),0>n.s&&0<o.compareTo(t.ZERO)&&this.m.subTo(o,o),o},p.prototype.revert=function(t){var n=e();return t.copyTo(n),this.reduce(n),n},p.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],o=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM,n=e+this.m.t;for(t[n]+=this.m.am(0,o,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),0<=t.compareTo(this.m)&&t.subTo(this.m,t)},p.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},p.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,n){var o;if(16==n)o=4;else if(8==n)o=3;else if(256==n)o=8;else if(2==n)o=1;else if(32==n)o=5;else{if(4!=n)return void this.fromRadix(e,n);o=2}this.s=this.t=0;for(var i=e.length,s=!1,a=0;0<=--i;){var l=8==o?255&e[i]:r(e,i);0>l?"-"==e.charAt(i)&&(s=!0):(s=!1,0==a?this[this.t++]=l:a+o>this.DB?(this[this.t-1]|=(l&(1<<this.DB-a)-1)<<a,this[this.t++]=l>>this.DB-a):this[this.t-1]|=l<<a,a+=o,a>=this.DB&&(a-=this.DB))}8==o&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),s&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;0<this.t&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){var n,o=t%this.DB,i=this.DB-o,r=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<o&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>i|a,a=(this[n]&r)<<o;for(n=s-1;n>=0;--n)e[n]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var o=t%this.DB,i=this.DB-o,r=(1<<o)-1;e[0]=this[n]>>o;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&r)<<i,e[s-n]=this[s]>>o;o>0&&(e[this.t-n-1]|=(this.s&r)<<i),e.t=this.t-n,e.clamp()}},t.prototype.subTo=function(t,e){for(var n=0,o=0,i=Math.min(t.t,this.t);i>n;)o+=this[n]-t[n],e[n++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o-=t.s;n<this.t;)o+=this[n],e[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<t.t;)o-=t[n],e[n++]=o&this.DM,o>>=this.DB;o-=t.s}e.s=0>o?-1:0,-1>o?e[n++]=this.DV+o:o>0&&(e[n++]=o),e.t=n,e.clamp()},t.prototype.multiplyTo=function(e,n){var o=this.abs(),i=e.abs(),r=o.t;for(n.t=r+i.t;0<=--r;)n[r]=0;for(r=0;r<i.t;++r)n[r+o.t]=o.am(0,i[r],n,r,0,o.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)},t.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;0<=--n;)t[n]=0;for(n=0;n<e.t-1;++n){var o=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,o,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}0<t.t&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(n,o,i){var r=n.abs();if(!(0>=r.t)){var s=this.abs();if(s.t<r.t)null!=o&&o.fromInt(0),null!=i&&this.copyTo(i);else{null==i&&(i=e());var l=e(),p=this.s;n=n.s;var u=this.DB-a(r[r.t-1]);if(u>0?(r.lShiftTo(u,l),s.lShiftTo(u,i)):(r.copyTo(l),s.copyTo(i)),r=l.t,s=l[r-1],0!=s){var h=s*(1<<this.F1)+(r>1?l[r-2]>>this.F2:0),d=this.FV/h,h=(1<<this.F1)/h,c=1<<this.F2,g=i.t,f=g-r,m=null==o?e():o;for(l.dlShiftTo(f,m),0<=i.compareTo(m)&&(i[i.t++]=1,i.subTo(m,i)),t.ONE.dlShiftTo(r,m),m.subTo(l,l);l.t<r;)l[l.t++]=0;for(;0<=--f;){var y=i[--g]==s?this.DM:Math.floor(i[g]*d+(i[g-1]+c)*h);if((i[g]+=l.am(0,y,i,f,0,r))<y)for(l.dlShiftTo(f,m),i.subTo(m,i);i[g]<--y;)i.subTo(m,i)}null!=o&&(i.drShiftTo(r,o),p!=n&&t.ZERO.subTo(o,o)),i.t=r,i.clamp(),u>0&&i.rShiftTo(u,i),0>p&&t.ZERO.subTo(i,i)}}}},t.prototype.invDigit=function(){if(1>this.t)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t,e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV;return e>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},t.prototype.exp=function(n,o){if(n>4294967295||1>n)return t.ONE;var i=e(),r=e(),s=o.convert(this),l=a(n)-1;for(s.copyTo(i);0<=--l;)if(o.sqrTo(i,r),(n&1<<l)>0)o.mulTo(r,s,i);else var p=i,i=r,r=p;return o.revert(i)},t.prototype.toString=function(t){if(0>this.s)return"-"+this.negate().toString(t);if(16==t)t=4;else if(8==t)t=3;else if(2==t)t=1;else if(32==t)t=5;else{if(4!=t)return this.toRadix(t);t=2}var e,n=(1<<t)-1,o=!1,i="",r=this.t,s=this.DB-r*this.DB%t;if(0<r--)for(s<this.DB&&0<(e=this[r]>>s)&&(o=!0,i="0123456789abcdefghijklmnopqrstuvwxyz".charAt(e));r>=0;)t>s?(e=(this[r]&(1<<s)-1)<<t-s,e|=this[--r]>>(s+=this.DB-t)):(e=this[r]>>(s-=t)&n,0>=s&&(s+=this.DB,--r)),e>0&&(o=!0),o&&(i+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(e));return o?i:"0"},t.prototype.negate=function(){var n=e();return t.ZERO.subTo(this,n),n},t.prototype.abs=function(){return 0>this.s?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t,e=n-t.t;if(0!=e)return 0>this.s?-e:e;for(;0<=--n;)if(0!=(e=this[n]-t[n]))return e;return 0},t.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+a(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(n){var o=e();return this.abs().divRemTo(n,null,o),0>this.s&&0<o.compareTo(t.ZERO)&&n.subTo(o,o),o},t.prototype.modPowInt=function(t,e){var n;return n=256>t||e.isEven()?new l(e):new p(e),this.exp(t,n)},t.ZERO=s(0),t.ONE=s(1),g.prototype.convert=f,g.prototype.revert=f,g.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},g.prototype.sqrTo=function(t,e){t.squareTo(e)},m.prototype.convert=function(t){if(0>t.s||t.t>2*this.m.t)return t.mod(this.m);if(0>t.compareTo(this.m))return t;var n=e();return t.copyTo(n),this.reduce(n),n},m.prototype.revert=function(t){return t},m.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>t.compareTo(this.r2);)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);0<=t.compareTo(this.m);)t.subTo(this.m,t)},m.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},m.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var T=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],O=67108864/T[T.length-1];t.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},t.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var n=this.chunkSize(t),n=Math.pow(t,n),o=s(n),i=e(),r=e(),a="";for(this.divRemTo(o,i,r);0<i.signum();)a=(n+r.intValue()).toString(t).substr(1)+a,i.divRemTo(o,i,r);return r.intValue().toString(t)+a},t.prototype.fromRadix=function(e,n){this.fromInt(0),null==n&&(n=10);for(var o=this.chunkSize(n),i=Math.pow(n,o),s=!1,a=0,l=0,p=0;p<e.length;++p){var u=r(e,p);0>u?"-"==e.charAt(p)&&0==this.signum()&&(s=!0):(l=n*l+u,++a>=o&&(this.dMultiply(i),this.dAddOffset(l,0),l=a=0))}a>0&&(this.dMultiply(Math.pow(n,a)),this.dAddOffset(l,0)),s&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,n,o){if("number"==typeof n)if(2>e)this.fromInt(1);else for(this.fromNumber(e,o),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),h,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{o=[];var i=7&e;o.length=(e>>3)+1,n.nextBytes(o),o[0]=i>0?o[0]&(1<<i)-1:0,this.fromString(o,256)}},t.prototype.bitwiseTo=function(t,e,n){var o,i,r=Math.min(t.t,this.t);for(o=0;r>o;++o)n[o]=e(this[o],t[o]);if(t.t<this.t){for(i=t.s&this.DM,o=r;o<this.t;++o)n[o]=e(this[o],i);n.t=this.t}else{for(i=this.s&this.DM,o=r;o<t.t;++o)n[o]=e(i,t[o]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},t.prototype.changeBit=function(e,n){var o=t.ONE.shiftLeft(e);return this.bitwiseTo(o,n,o),o},t.prototype.addTo=function(t,e){for(var n=0,o=0,i=Math.min(t.t,this.t);i>n;)o+=this[n]+t[n],e[n++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o+=t.s;n<this.t;)o+=this[n],e[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<t.t;)o+=t[n],e[n++]=o&this.DM,o>>=this.DB;o+=t.s}e.s=0>o?-1:0,o>0?e[n++]=o:-1>o&&(e[n++]=this.DV+o),e.t=n,e.clamp()},t.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},t.prototype.multiplyLowerTo=function(t,e,n){var o=Math.min(this.t+t.t,e);for(n.s=0,n.t=o;o>0;)n[--o]=0;var i;for(i=n.t-this.t;i>o;++o)n[o+this.t]=this.am(0,t[o],n,o,0,this.t);for(i=Math.min(t.t,e);i>o;++o)this.am(0,t[o],n,o,0,e-o);n.clamp()},t.prototype.multiplyUpperTo=function(t,e,n){--e;var o=n.t=this.t+t.t-e;for(n.s=0;0<=--o;)n[o]=0;for(o=Math.max(e-this.t,0);o<t.t;++o)n[this.t+o-e]=this.am(e-o,t[o],n,0,0,this.t+o-e);n.clamp(),n.drShiftTo(1,n)},t.prototype.modInt=function(t){if(0>=t)return 0;var e=this.DV%t,n=0>this.s?t-1:0;if(0<this.t)if(0==e)n=this[0]%t;else for(var o=this.t-1;o>=0;--o)n=(e*n+this[o])%t;return n},t.prototype.millerRabin=function(n){var o=this.subtract(t.ONE),i=o.getLowestSetBit();if(0>=i)return!1;var r=o.shiftRight(i);n=n+1>>1,n>T.length&&(n=T.length);for(var s=e(),a=0;n>a;++a){s.fromInt(T[Math.floor(Math.random()*T.length)]);var l=s.modPow(r,this);if(0!=l.compareTo(t.ONE)&&0!=l.compareTo(o)){for(var p=1;p++<i&&0!=l.compareTo(o);)if(l=l.modPowInt(2,this),0==l.compareTo(t.ONE))return!1;if(0!=l.compareTo(o))return!1}}return!0},t.prototype.clone=function(){var t=e();return this.copyTo(t),t},t.prototype.intValue=function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1},t.prototype.toByteArray=function(){var t=this.t,e=[];e[0]=this.s;var n,o=this.DB-t*this.DB%8,i=0;if(0<t--)for(o<this.DB&&(n=this[t]>>o)!=(this.s&this.DM)>>o&&(e[i++]=n|this.s<<this.DB-o);t>=0;)8>o?(n=(this[t]&(1<<o)-1)<<8-o,n|=this[--t]>>(o+=this.DB-8)):(n=this[t]>>(o-=8)&255,0>=o&&(o+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return 0>this.compareTo(t)?this:t},t.prototype.max=function(t){return 0<this.compareTo(t)?this:t},t.prototype.and=function(t){var n=e();return this.bitwiseTo(t,u,n),n},t.prototype.or=function(t){var n=e();return this.bitwiseTo(t,h,n),n},t.prototype.xor=function(t){var n=e();return this.bitwiseTo(t,d,n),n},t.prototype.andNot=function(t){var n=e();return this.bitwiseTo(t,c,n),n},t.prototype.not=function(){for(var t=e(),n=0;n<this.t;++n)t[n]=this.DM&~this[n];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var n=e();return 0>t?this.rShiftTo(-t,n):this.lShiftTo(t,n),n},t.prototype.shiftRight=function(t){var n=e();return 0>t?this.lShiftTo(-t,n):this.rShiftTo(t,n),n},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t]){var e=t*this.DB;if(t=this[t],0==t)t=-1;else{var n=0;0==(65535&t)&&(t>>=16,n+=16),0==(255&t)&&(t>>=8,n+=8),0==(15&t)&&(t>>=4,n+=4),0==(3&t)&&(t>>=2,n+=2),0==(1&t)&&++n,t=n}return e+t}return 0>this.s?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n){for(var o=this[n]^e,i=0;0!=o;)o&=o-1,++i;t+=i}return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,h)},t.prototype.clearBit=function(t){return this.changeBit(t,c)},t.prototype.flipBit=function(t){return this.changeBit(t,d)},t.prototype.add=function(t){var n=e();return this.addTo(t,n),n},t.prototype.subtract=function(t){var n=e();return this.subTo(t,n),n},t.prototype.multiply=function(t){var n=e();return this.multiplyTo(t,n),n},t.prototype.divide=function(t){var n=e();return this.divRemTo(t,n,null),n},t.prototype.remainder=function(t){var n=e();return this.divRemTo(t,null,n),n},t.prototype.divideAndRemainder=function(t){var n=e(),o=e();return this.divRemTo(t,n,o),[n,o]},t.prototype.modPow=function(t,n){var o,i,r=t.bitLength(),u=s(1);if(0>=r)return u;o=18>r?1:48>r?3:144>r?4:768>r?5:6,i=8>r?new l(n):n.isEven()?new m(n):new p(n);var h=[],d=3,c=o-1,g=(1<<o)-1;if(h[1]=i.convert(this),o>1)for(r=e(),i.sqrTo(h[1],r);g>=d;)h[d]=e(),i.mulTo(r,h[d-2],h[d]),d+=2;for(var f,y=t.t-1,v=!0,x=e(),r=a(t[y])-1;y>=0;){for(r>=c?f=t[y]>>r-c&g:(f=(t[y]&(1<<r+1)-1)<<c-r,y>0&&(f|=t[y-1]>>this.DB+r-c)),d=o;0==(1&f);)f>>=1,--d;if(0>(r-=d)&&(r+=this.DB,--y),v)h[f].copyTo(u),v=!1;else{for(;d>1;)i.sqrTo(u,x),i.sqrTo(x,u),d-=2;d>0?i.sqrTo(u,x):(d=u,u=x,x=d),i.mulTo(x,h[f],u)}for(;y>=0&&0==(t[y]&1<<r);)i.sqrTo(u,x),d=u,u=x,x=d,0>--r&&(r=this.DB-1,--y)}return i.revert(u)},t.prototype.modInverse=function(e){var n=e.isEven();if(this.isEven()&&n||0==e.signum())return t.ZERO;for(var o=e.clone(),i=this.clone(),r=s(1),a=s(0),l=s(0),p=s(1);0!=o.signum();){for(;o.isEven();)o.rShiftTo(1,o),n?(r.isEven()&&a.isEven()||(r.addTo(this,r),a.subTo(e,a)),r.rShiftTo(1,r)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),n?(l.isEven()&&p.isEven()||(l.addTo(this,l),p.subTo(e,p)),l.rShiftTo(1,l)):p.isEven()||p.subTo(e,p),p.rShiftTo(1,p);0<=o.compareTo(i)?(o.subTo(i,o),n&&r.subTo(l,r),a.subTo(p,a)):(i.subTo(o,i),n&&l.subTo(r,l),p.subTo(a,p))}return 0!=i.compareTo(t.ONE)?t.ZERO:0<=p.compareTo(e)?p.subtract(e):0>p.signum()?(p.addTo(e,p),0>p.signum()?p.add(e):p):p},t.prototype.pow=function(t){return this.exp(t,new g)},t.prototype.gcd=function(t){var e=0>this.s?this.negate():this.clone();if(t=0>t.s?t.negate():t.clone(),0>e.compareTo(t)){var n=e,e=t;t=n}var n=e.getLowestSetBit(),o=t.getLowestSetBit();if(0>o)return e;for(o>n&&(o=n),o>0&&(e.rShiftTo(o,e),t.rShiftTo(o,t));0<e.signum();)0<(n=e.getLowestSetBit())&&e.rShiftTo(n,e),0<(n=t.getLowestSetBit())&&t.rShiftTo(n,t),0<=e.compareTo(t)?(e.subTo(t,e),e.rShiftTo(1,e)):(t.subTo(e,t),t.rShiftTo(1,t));return o>0&&t.lShiftTo(o,t),t},t.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=T[T.length-1]){for(e=0;e<T.length;++e)if(n[0]==T[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<T.length;){for(var o=T[e],i=e+1;i<T.length&&O>o;)o*=T[i++];for(o=n.modInt(o);i>e;)if(0==o%T[e++])return!1}return n.millerRabin(t)},t.prototype.square=function(){var t=e();return this.squareTo(t),t};var A=t;if(A.prototype.IsNegative=function(){return-1==this.compareTo(A.ZERO)?!0:!1},A.op_Equality=function(t,e){return 0==t.compareTo(e)?!0:!1},A.op_Inequality=function(t,e){return 0!=t.compareTo(e)?!0:!1},A.op_GreaterThan=function(t,e){return 0<t.compareTo(e)?!0:!1},A.op_LessThan=function(t,e){return 0>t.compareTo(e)?!0:!1},A.op_Addition=function(t,e){return new A(t).add(new A(e))},A.op_Subtraction=function(t,e){return new A(t).subtract(new A(e))},A.Int128Mul=function(t,e){return new A(t).multiply(new A(e))},A.op_Division=function(t,e){return t.divide(e)},A.prototype.ToDouble=function(){return parseFloat(this.toString())},"undefined"==typeof w)var w=function(t,e){var n;if("undefined"==typeof Object.getOwnPropertyNames)for(n in e.prototype)("undefined"==typeof t.prototype[n]||t.prototype[n]==Object.prototype[n])&&(t.prototype[n]=e.prototype[n]);else for(var o=Object.getOwnPropertyNames(e.prototype),i=0;i<o.length;i++)"undefined"==typeof Object.getOwnPropertyDescriptor(t.prototype,o[i])&&Object.defineProperty(t.prototype,o[i],Object.getOwnPropertyDescriptor(e.prototype,o[i]));for(n in e)"undefined"==typeof t[n]&&(t[n]=e[n]);t.$baseCtor=e};y.Path=function(){return[]},y.Paths=function(){return[]},y.DoublePoint=function(){var t=arguments;this.Y=this.X=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},y.DoublePoint0=function(){this.Y=this.X=0},y.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},y.DoublePoint2=function(t,e){this.X=t,this.Y=e},y.PolyNode=function(){this.m_Parent=null,this.m_polygon=new y.Path,this.m_endtype=this.m_jointype=this.m_Index=0,this.m_Childs=[],this.IsOpen=!1},y.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},y.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},y.PolyNode.prototype.Contour=function(){return this.m_polygon},y.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},y.PolyNode.prototype.GetNext=function(){return 0<this.m_Childs.length?this.m_Childs[0]:this.GetNextSiblingUp()},y.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},y.PolyNode.prototype.Childs=function(){return this.m_Childs},y.PolyNode.prototype.Parent=function(){return this.m_Parent},y.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},y.PolyTree=function(){this.m_AllPolys=[],y.PolyNode.call(this)},y.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;e>t;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},y.PolyTree.prototype.GetFirst=function(){return 0<this.m_Childs.length?this.m_Childs[0]:null},y.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},w(y.PolyTree,y.PolyNode),y.Math_Abs_Int64=y.Math_Abs_Int32=y.Math_Abs_Double=function(t){return Math.abs(t)},y.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},y.Cast_Int32=E||C||j?function(t){return 0|t}:function(t){return~~t},y.Cast_Int64=P?function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):~~t}:I&&"function"==typeof Number.toInteger?function(t){return Number.toInteger(t)}:S||L?function(t){return parseInt(t,10)}:E?function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):0|t}:function(t){return 0>t?Math.ceil(t):Math.floor(t)},y.Clear=function(t){t.length=0},y.PI=3.141592653589793,y.PI2=6.283185307179586,y.IntPoint=function(){var t;t=arguments;var e=t.length;this.Y=this.X=0,2==e?(this.X=t[0],this.Y=t[1]):1==e?t[0]instanceof y.DoublePoint?(t=t[0],this.X=y.Clipper.Round(t.X),this.Y=y.Clipper.Round(t.Y)):(t=t[0],this.X=t.X,this.Y=t.Y):this.Y=this.X=0},y.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},y.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},y.IntPoint0=function(){this.Y=this.X=0},y.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},y.IntPoint1dp=function(t){this.X=y.Clipper.Round(t.X),this.Y=y.Clipper.Round(t.Y)},y.IntPoint2=function(t,e){this.X=t,this.Y=e},y.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):this.bottom=this.right=this.top=this.left=0},y.IntRect0=function(){this.bottom=this.right=this.top=this.left=0},y.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},y.IntRect4=function(t,e,n,o){this.left=t,this.top=e,this.right=n,this.bottom=o},y.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},y.PolyType={ptSubject:0,ptClip:1},y.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},y.JoinType={jtSquare:0,jtRound:1,jtMiter:2},y.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},y.EdgeSide={esLeft:0,esRight:1},y.Direction={dRightToLeft:0,dLeftToRight:1},y.TEdge=function(){this.Bot=new y.IntPoint,this.Curr=new y.IntPoint,this.Top=new y.IntPoint,this.Delta=new y.IntPoint,this.Dx=0,this.PolyTyp=y.PolyType.ptSubject,this.Side=y.EdgeSide.esLeft,this.OutIdx=this.WindCnt2=this.WindCnt=this.WindDelta=0,this.PrevInSEL=this.NextInSEL=this.PrevInAEL=this.NextInAEL=this.NextInLML=this.Prev=this.Next=null},y.IntersectNode=function(){this.Edge2=this.Edge1=null,this.Pt=new y.IntPoint},y.MyIntersectNodeSort=function(){},y.MyIntersectNodeSort.Compare=function(t,e){return e.Pt.Y-t.Pt.Y},y.LocalMinima=function(){this.Y=0,this.Next=this.RightBound=this.LeftBound=null},y.Scanbeam=function(){this.Y=0,this.Next=null},y.OutRec=function(){this.Idx=0,this.IsOpen=this.IsHole=!1,this.PolyNode=this.BottomPt=this.Pts=this.FirstLeft=null},y.OutPt=function(){this.Idx=0,this.Pt=new y.IntPoint,this.Prev=this.Next=null},y.Join=function(){this.OutPt2=this.OutPt1=null,this.OffPt=new y.IntPoint},y.ClipperBase=function(){this.m_CurrentLM=this.m_MinimaList=null,this.m_edges=[],this.PreserveCollinear=this.m_HasOpenPaths=this.m_UseFullRange=!1,this.m_CurrentLM=this.m_MinimaList=null,this.m_HasOpenPaths=this.m_UseFullRange=!1},y.ClipperBase.horizontal=-9007199254740992,y.ClipperBase.Skip=-2,y.ClipperBase.Unassigned=-1,y.ClipperBase.tolerance=1e-20,y.ClipperBase.loRange=47453132,y.ClipperBase.hiRange=0xfffffffffffff,y.ClipperBase.near_zero=function(t){return t>-y.ClipperBase.tolerance&&t<y.ClipperBase.tolerance},y.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},y.ClipperBase.prototype.PointIsVertex=function(t,e){var n=e;do{if(y.IntPoint.op_Equality(n.Pt,t))return!0;n=n.Next}while(n!=e);return!1},y.ClipperBase.prototype.PointOnLineSegment=function(t,e,n,o){return o?t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&A.op_Equality(A.Int128Mul(t.X-e.X,n.Y-e.Y),A.Int128Mul(n.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&(t.X-e.X)*(n.Y-e.Y)==(n.X-e.X)*(t.Y-e.Y)},y.ClipperBase.prototype.PointOnPolygon=function(t,e,n){for(var o=e;;){if(this.PointOnLineSegment(t,o.Pt,o.Next.Pt,n))return!0;if(o=o.Next,o==e)break}return!1},y.ClipperBase.prototype.SlopesEqual=y.ClipperBase.SlopesEqual=function(){var t,e,n,o=arguments,i=o.length;return 3==i?(i=o[0],t=o[1],(o=o[2])?A.op_Equality(A.Int128Mul(i.Delta.Y,t.Delta.X),A.Int128Mul(i.Delta.X,t.Delta.Y)):y.Cast_Int64(i.Delta.Y*t.Delta.X)==y.Cast_Int64(i.Delta.X*t.Delta.Y)):4==i?(i=o[0],t=o[1],e=o[2],(o=o[3])?A.op_Equality(A.Int128Mul(i.Y-t.Y,t.X-e.X),A.Int128Mul(i.X-t.X,t.Y-e.Y)):0===y.Cast_Int64((i.Y-t.Y)*(t.X-e.X))-y.Cast_Int64((i.X-t.X)*(t.Y-e.Y))):(i=o[0],t=o[1],e=o[2],n=o[3],(o=o[4])?A.op_Equality(A.Int128Mul(i.Y-t.Y,e.X-n.X),A.Int128Mul(i.X-t.X,e.Y-n.Y)):0===y.Cast_Int64((i.Y-t.Y)*(e.X-n.X))-y.Cast_Int64((i.X-t.X)*(e.Y-n.Y)))},y.ClipperBase.SlopesEqual3=function(t,e,n){return n?A.op_Equality(A.Int128Mul(t.Delta.Y,e.Delta.X),A.Int128Mul(t.Delta.X,e.Delta.Y)):y.Cast_Int64(t.Delta.Y*e.Delta.X)==y.Cast_Int64(t.Delta.X*e.Delta.Y)},y.ClipperBase.SlopesEqual4=function(t,e,n,o){return o?A.op_Equality(A.Int128Mul(t.Y-e.Y,e.X-n.X),A.Int128Mul(t.X-e.X,e.Y-n.Y)):0===y.Cast_Int64((t.Y-e.Y)*(e.X-n.X))-y.Cast_Int64((t.X-e.X)*(e.Y-n.Y))},y.ClipperBase.SlopesEqual5=function(t,e,n,o,i){return i?A.op_Equality(A.Int128Mul(t.Y-e.Y,n.X-o.X),A.Int128Mul(t.X-e.X,n.Y-o.Y)):0===y.Cast_Int64((t.Y-e.Y)*(n.X-o.X))-y.Cast_Int64((t.X-e.X)*(n.Y-o.Y))},y.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;e>t;++t){for(var n=0,o=this.m_edges[t].length;o>n;++n)this.m_edges[t][n]=null;y.Clear(this.m_edges[t])}y.Clear(this.m_edges),this.m_HasOpenPaths=this.m_UseFullRange=!1},y.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},y.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>y.ClipperBase.hiRange||t.Y>y.ClipperBase.hiRange||-t.X>y.ClipperBase.hiRange||-t.Y>y.ClipperBase.hiRange)&&y.Error("Coordinate outside allowed range in RangeTest()."):(t.X>y.ClipperBase.loRange||t.Y>y.ClipperBase.loRange||-t.X>y.ClipperBase.loRange||-t.Y>y.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},y.ClipperBase.prototype.InitEdge=function(t,e,n,o){t.Next=e,t.Prev=n,t.Curr.X=o.X,t.Curr.Y=o.Y,t.OutIdx=-1},y.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y),this.SetDx(t),t.PolyTyp=e},y.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;y.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||y.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=y.ClipperBase.horizontal&&t.Prev.Dx!=y.ClipperBase.horizontal)break;for(;t.Prev.Dx==y.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==y.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},y.ClipperBase.prototype.ProcessBound=function(t,e){var n,o=t,i=t;if(t.Dx==y.ClipperBase.horizontal&&(n=e?t.Prev.Bot.X:t.Next.Bot.X,t.Bot.X!=n&&this.ReverseHorizontal(t)),i.OutIdx!=y.ClipperBase.Skip)if(e){for(;i.Top.Y==i.Next.Bot.Y&&i.Next.OutIdx!=y.ClipperBase.Skip;)i=i.Next;if(i.Dx==y.ClipperBase.horizontal&&i.Next.OutIdx!=y.ClipperBase.Skip){for(n=i;n.Prev.Dx==y.ClipperBase.horizontal;)n=n.Prev;n.Prev.Top.X==i.Next.Top.X?e||(i=n.Prev):n.Prev.Top.X>i.Next.Top.X&&(i=n.Prev)}for(;t!=i;)t.NextInLML=t.Next,t.Dx==y.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==y.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),i=i.Next}else{for(;i.Top.Y==i.Prev.Bot.Y&&i.Prev.OutIdx!=y.ClipperBase.Skip;)i=i.Prev;if(i.Dx==y.ClipperBase.horizontal&&i.Prev.OutIdx!=y.ClipperBase.Skip){for(n=i;n.Next.Dx==y.ClipperBase.horizontal;)n=n.Next;n.Next.Top.X==i.Prev.Top.X?e||(i=n.Next):n.Next.Top.X>i.Prev.Top.X&&(i=n.Next)}for(;t!=i;)t.NextInLML=t.Prev,t.Dx==y.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==y.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),i=i.Prev}if(i.OutIdx==y.ClipperBase.Skip){if(t=i,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=i&&t.Dx==y.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=i&&t.Dx==y.ClipperBase.horizontal;)t=t.Next}t==i?i=e?t.Next:t.Prev:(t=e?i.Next:i.Prev,o=new y.LocalMinima,o.Next=null,o.Y=t.Bot.Y,o.LeftBound=null,o.RightBound=t,o.RightBound.WindDelta=0,i=this.ProcessBound(o.RightBound,e),this.InsertLocalMinima(o))}return i},y.ClipperBase.prototype.AddPath=function(t,e,n){n||e!=y.PolyType.ptClip||y.Error("AddPath: Open paths must be subject.");var o=t.length-1;if(n)for(;o>0&&y.IntPoint.op_Equality(t[o],t[0]);)--o;for(;o>0&&y.IntPoint.op_Equality(t[o],t[o-1]);)--o;if(n&&2>o||!n&&1>o)return!1;for(var i=[],r=0;o>=r;r++)i.push(new y.TEdge);var s=!0;i[1].Curr.X=t[1].X,i[1].Curr.Y=t[1].Y;var a={Value:this.m_UseFullRange};for(this.RangeTest(t[0],a),this.m_UseFullRange=a.Value,a.Value=this.m_UseFullRange,this.RangeTest(t[o],a),this.m_UseFullRange=a.Value,this.InitEdge(i[0],i[1],i[o],t[0]),this.InitEdge(i[o],i[0],i[o-1],t[o]),r=o-1;r>=1;--r)a.Value=this.m_UseFullRange,this.RangeTest(t[r],a),this.m_UseFullRange=a.Value,this.InitEdge(i[r],i[r+1],i[r-1],t[r]);for(r=t=o=i[0];;)if(y.IntPoint.op_Equality(t.Curr,t.Next.Curr)){if(t==t.Next)break;t==o&&(o=t.Next),r=t=this.RemoveEdge(t)}else{if(t.Prev==t.Next)break;if(n&&y.ClipperBase.SlopesEqual(t.Prev.Curr,t.Curr,t.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(t.Prev.Curr,t.Curr,t.Next.Curr))){t==o&&(o=t.Next),t=this.RemoveEdge(t),r=t=t.Prev;continue}if(t=t.Next,t==r)break}if(!n&&t==t.Next||n&&t.Prev==t.Next)return!1;n||(this.m_HasOpenPaths=!0,o.Prev.OutIdx=y.ClipperBase.Skip),t=o;do this.InitEdge2(t,e),t=t.Next,s&&t.Curr.Y!=o.Curr.Y&&(s=!1);while(t!=o);if(s){if(n)return!1;for(t.Prev.OutIdx=y.ClipperBase.Skip,t.Prev.Bot.X<t.Prev.Top.X&&this.ReverseHorizontal(t.Prev),e=new y.LocalMinima,e.Next=null,e.Y=t.Bot.Y,e.LeftBound=null,e.RightBound=t,e.RightBound.Side=y.EdgeSide.esRight,e.RightBound.WindDelta=0;t.Next.OutIdx!=y.ClipperBase.Skip;)t.NextInLML=t.Next,t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;return this.InsertLocalMinima(e),this.m_edges.push(i),!0}for(this.m_edges.push(i),s=null;t=this.FindNextLocMin(t),t!=s;)null==s&&(s=t),e=new y.LocalMinima,e.Next=null,e.Y=t.Bot.Y,t.Dx<t.Prev.Dx?(e.LeftBound=t.Prev,e.RightBound=t,i=!1):(e.LeftBound=t,e.RightBound=t.Prev,i=!0),e.LeftBound.Side=y.EdgeSide.esLeft,e.RightBound.Side=y.EdgeSide.esRight,e.LeftBound.WindDelta=n?e.LeftBound.Next==e.RightBound?-1:1:0,e.RightBound.WindDelta=-e.LeftBound.WindDelta,t=this.ProcessBound(e.LeftBound,i),o=this.ProcessBound(e.RightBound,!i),e.LeftBound.OutIdx==y.ClipperBase.Skip?e.LeftBound=null:e.RightBound.OutIdx==y.ClipperBase.Skip&&(e.RightBound=null),this.InsertLocalMinima(e),i||(t=o);return!0},y.ClipperBase.prototype.AddPaths=function(t,e,n){for(var o=!1,i=0,r=t.length;r>i;++i)this.AddPath(t[i],e,n)&&(o=!0);return o},y.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,n){return y.IntPoint.op_Equality(t,n)||y.IntPoint.op_Equality(t,e)||y.IntPoint.op_Equality(n,e)?!1:t.X!=n.X?e.X>t.X==e.X<n.X:e.Y>t.Y==e.Y<n.Y},y.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;
var e=t.Next;return t.Prev=null,e},y.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,t.Dx=0===t.Delta.Y?y.ClipperBase.horizontal:t.Delta.X/t.Delta.Y},y.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},y.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},y.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e},y.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var e=t.LeftBound;null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=y.EdgeSide.esLeft,e.OutIdx=y.ClipperBase.Unassigned),e=t.RightBound,null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=y.EdgeSide.esRight,e.OutIdx=y.ClipperBase.Unassigned),t=t.Next}},y.Clipper=function(t){"undefined"==typeof t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=y.ClipType.ctIntersection,this.m_IntersectNodeComparer=this.m_IntersectList=this.m_SortedEdges=this.m_ActiveEdges=this.m_Scanbeam=null,this.m_ExecuteLocked=!1,this.m_SubjFillType=this.m_ClipFillType=y.PolyFillType.pftEvenOdd,this.m_GhostJoins=this.m_Joins=null,this.StrictlySimple=this.ReverseSolution=this.m_UsingPolyTree=!1,y.ClipperBase.call(this),this.m_SortedEdges=this.m_ActiveEdges=this.m_Scanbeam=null,this.m_IntersectList=[],this.m_IntersectNodeComparer=y.MyIntersectNodeSort.Compare,this.m_UsingPolyTree=this.m_ExecuteLocked=!1,this.m_PolyOuts=[],this.m_Joins=[],this.m_GhostJoins=[],this.ReverseSolution=0!==(1&t),this.StrictlySimple=0!==(2&t),this.PreserveCollinear=0!==(4&t)},y.Clipper.ioReverseSolution=1,y.Clipper.ioStrictlySimple=2,y.Clipper.ioPreserveCollinear=4,y.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),y.ClipperBase.prototype.Clear.call(this))},y.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},y.Clipper.prototype.Reset=function(){y.ClipperBase.prototype.Reset.call(this),this.m_SortedEdges=this.m_ActiveEdges=this.m_Scanbeam=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},y.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new y.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var e=new y.Scanbeam;e.Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(var n=this.m_Scanbeam;null!==n.Next&&t<=n.Next.Y;)n=n.Next;t!=n.Y&&(e=new y.Scanbeam,e.Y=t,e.Next=n.Next,n.Next=e)}},y.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,n=t[1]instanceof y.PolyTree;if(4==e&&!n){if(e=t[0],i=t[1],n=t[2],t=t[3],this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&y.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,y.Clear(i),this.m_SubjFillType=n,this.m_ClipFillType=t,this.m_ClipType=e,this.m_UsingPolyTree=!1;try{var o=this.ExecuteInternal();o&&this.BuildResult(i)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return o}if(4==e&&n){var e=t[0],i=t[1],n=t[2],t=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=n,this.m_ClipFillType=t,this.m_ClipType=e,this.m_UsingPolyTree=!0;try{(o=this.ExecuteInternal())&&this.BuildResult2(i)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return o}return 2==e&&!n||2==e&&n?(e=t[0],i=t[1],this.Execute(e,i,y.PolyFillType.pftEvenOdd,y.PolyFillType.pftEvenOdd)):void 0},y.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},y.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),y.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(t,e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var t=0,n=this.m_PolyOuts.length;n>t;t++){var o=this.m_PolyOuts[t];null===o.Pts||o.IsOpen||(o.IsHole^this.ReverseSolution)==0<this.Area(o)&&this.ReversePolyPtLinks(o.Pts)}for(this.JoinCommonEdges(),t=0,n=this.m_PolyOuts.length;n>t;t++)o=this.m_PolyOuts[t],null===o.Pts||o.IsOpen||this.FixupOutPolygon(o);return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{y.Clear(this.m_Joins),y.Clear(this.m_GhostJoins)}},y.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y;return this.m_Scanbeam=this.m_Scanbeam.Next,t},y.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;e>t;++t)this.DisposeOutRec(t);y.Clear(this.m_PolyOuts)},y.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];null!==e.Pts&&this.DisposeOutPts(e.Pts),this.m_PolyOuts[t]=null},y.Clipper.prototype.DisposeOutPts=function(t){if(null!==t)for(t.Prev.Next=null;null!==t;)t=t.Next},y.Clipper.prototype.AddJoin=function(t,e,n){var o=new y.Join;o.OutPt1=t,o.OutPt2=e,o.OffPt.X=n.X,o.OffPt.Y=n.Y,this.m_Joins.push(o)},y.Clipper.prototype.AddGhostJoin=function(t,e){var n=new y.Join;n.OutPt1=t,n.OffPt.X=e.X,n.OffPt.Y=e.Y,this.m_GhostJoins.push(n)},y.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,n=this.m_CurrentLM.RightBound;this.PopLocalMinima();var o=null;if(null===e?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(o=this.AddOutPt(n,n.Bot))):(null==n?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(o=this.AddOutPt(e,e.Bot))):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(n,e),this.SetWindingCount(e),n.WindCnt=e.WindCnt,n.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(o=this.AddLocalMinPoly(e,n,e.Bot))),this.InsertScanbeam(e.Top.Y)),null!=n&&(y.ClipperBase.IsHorizontal(n)?this.AddEdgeToSEL(n):this.InsertScanbeam(n.Top.Y)),null!=e&&null!=n){if(null!==o&&y.ClipperBase.IsHorizontal(n)&&0<this.m_GhostJoins.length&&0!==n.WindDelta)for(var i=0,r=this.m_GhostJoins.length;r>i;i++){var s=this.m_GhostJoins[i];this.HorzSegmentsOverlap(s.OutPt1.Pt,s.OffPt,n.Bot,n.Top)&&this.AddJoin(s.OutPt1,o,s.OffPt)}if(0<=e.OutIdx&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X==e.Bot.X&&0<=e.PrevInAEL.OutIdx&&y.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta&&(i=this.AddOutPt(e.PrevInAEL,e.Bot),this.AddJoin(o,i,e.Top)),e.NextInAEL!=n&&(0<=n.OutIdx&&0<=n.PrevInAEL.OutIdx&&y.ClipperBase.SlopesEqual(n.PrevInAEL,n,this.m_UseFullRange)&&0!==n.WindDelta&&0!==n.PrevInAEL.WindDelta&&(i=this.AddOutPt(n.PrevInAEL,n.Bot),this.AddJoin(o,i,n.Top)),o=e.NextInAEL,null!==o))for(;o!=n;)this.IntersectEdges(n,o,e.Curr,!1),o=o.NextInAEL}}},y.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges=this.m_ActiveEdges.PrevInAEL=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},y.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<y.Clipper.TopX(t,e.Top.Y):t.Top.X>y.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},y.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==y.PolyType.ptSubject?this.m_SubjFillType==y.PolyFillType.pftEvenOdd:this.m_ClipFillType==y.PolyFillType.pftEvenOdd},y.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==y.PolyType.ptSubject?this.m_ClipFillType==y.PolyFillType.pftEvenOdd:this.m_SubjFillType==y.PolyFillType.pftEvenOdd},y.Clipper.prototype.IsContributing=function(t){var e,n;switch(t.PolyTyp==y.PolyType.ptSubject?(e=this.m_SubjFillType,n=this.m_ClipFillType):(e=this.m_ClipFillType,n=this.m_SubjFillType),e){case y.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case y.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case y.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case y.ClipType.ctIntersection:switch(n){case y.PolyFillType.pftEvenOdd:case y.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case y.PolyFillType.pftPositive:return 0<t.WindCnt2;default:return 0>t.WindCnt2}case y.ClipType.ctUnion:switch(n){case y.PolyFillType.pftEvenOdd:case y.PolyFillType.pftNonZero:return 0===t.WindCnt2;case y.PolyFillType.pftPositive:return 0>=t.WindCnt2;default:return 0<=t.WindCnt2}case y.ClipType.ctDifference:if(t.PolyTyp==y.PolyType.ptSubject)switch(n){case y.PolyFillType.pftEvenOdd:case y.PolyFillType.pftNonZero:return 0===t.WindCnt2;case y.PolyFillType.pftPositive:return 0>=t.WindCnt2;default:return 0<=t.WindCnt2}else switch(n){case y.PolyFillType.pftEvenOdd:case y.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case y.PolyFillType.pftPositive:return 0<t.WindCnt2;default:return 0>t.WindCnt2}case y.ClipType.ctXor:if(0===t.WindDelta)switch(n){case y.PolyFillType.pftEvenOdd:case y.PolyFillType.pftNonZero:return 0===t.WindCnt2;case y.PolyFillType.pftPositive:return 0>=t.WindCnt2;default:return 0<=t.WindCnt2}}return!0},y.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!=t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else{if(0===t.WindDelta&&this.m_ClipType!=y.ClipType.ctUnion)t.WindCnt=1;else if(this.IsEvenOddFillType(t))if(0===t.WindDelta){for(var n=!0,o=e.PrevInAEL;null!==o;)o.PolyTyp==e.PolyTyp&&0!==o.WindDelta&&(n=!n),o=o.PrevInAEL;t.WindCnt=n?0:1}else t.WindCnt=t.WindDelta;else t.WindCnt=0>e.WindCnt*e.WindDelta?1<Math.abs(e.WindCnt)?0>e.WindDelta*t.WindDelta?e.WindCnt:e.WindCnt+t.WindDelta:0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?0>e.WindCnt?e.WindCnt-1:e.WindCnt+1:0>e.WindDelta*t.WindDelta?e.WindCnt:e.WindCnt+t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}if(this.IsEvenOddAltFillType(t))for(;e!=t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},y.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges=this.m_SortedEdges.PrevInSEL=t)},y.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t=t.NextInSEL=t.NextInAEL},y.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e){var n=e.NextInAEL;null!==n&&(n.PrevInAEL=t);var o=t.PrevInAEL;null!==o&&(o.NextInAEL=e),e.PrevInAEL=o,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=n}else e.NextInAEL==t?(n=t.NextInAEL,null!==n&&(n.PrevInAEL=e),o=e.PrevInAEL,null!==o&&(o.NextInAEL=t),t.PrevInAEL=o,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=n):(n=t.NextInAEL,o=t.PrevInAEL,t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=n,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=o,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e));null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},y.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e){var n=e.NextInSEL;null!==n&&(n.PrevInSEL=t);var o=t.PrevInSEL;null!==o&&(o.NextInSEL=e),e.PrevInSEL=o,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=n}else e.NextInSEL==t?(n=t.NextInSEL,null!==n&&(n.PrevInSEL=e),o=e.PrevInSEL,null!==o&&(o.NextInSEL=t),t.PrevInSEL=o,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=n):(n=t.NextInSEL,o=t.PrevInSEL,t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=n,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=o,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e));null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},y.Clipper.prototype.AddLocalMaxPoly=function(t,e,n){this.AddOutPt(t,n),0==e.WindDelta&&this.AddOutPt(e,n),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},y.Clipper.prototype.AddLocalMinPoly=function(t,e,n){var o,i;return y.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(o=this.AddOutPt(t,n),e.OutIdx=t.OutIdx,t.Side=y.EdgeSide.esLeft,e.Side=y.EdgeSide.esRight,i=t,t=i.PrevInAEL==e?e.PrevInAEL:i.PrevInAEL):(o=this.AddOutPt(e,n),t.OutIdx=e.OutIdx,t.Side=y.EdgeSide.esRight,e.Side=y.EdgeSide.esLeft,i=e,t=i.PrevInAEL==t?t.PrevInAEL:i.PrevInAEL),null!==t&&0<=t.OutIdx&&y.Clipper.TopX(t,n.Y)==y.Clipper.TopX(i,n.Y)&&y.ClipperBase.SlopesEqual(i,t,this.m_UseFullRange)&&0!==i.WindDelta&&0!==t.WindDelta&&(n=this.AddOutPt(t,n),this.AddJoin(o,n,i.Top)),o},y.Clipper.prototype.CreateOutRec=function(){var t=new y.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},y.Clipper.prototype.AddOutPt=function(t,e){var n=t.Side==y.EdgeSide.esLeft;if(0>t.OutIdx){var o=this.CreateOutRec();o.IsOpen=0===t.WindDelta;var i=new y.OutPt;o.Pts=i,i.Idx=o.Idx,i.Pt.X=e.X,i.Pt.Y=e.Y,i.Next=i,i.Prev=i,o.IsOpen||this.SetHoleState(t,o),t.OutIdx=o.Idx}else{var o=this.m_PolyOuts[t.OutIdx],r=o.Pts;if(n&&y.IntPoint.op_Equality(e,r.Pt))return r;if(!n&&y.IntPoint.op_Equality(e,r.Prev.Pt))return r.Prev;i=new y.OutPt,i.Idx=o.Idx,i.Pt.X=e.X,i.Pt.Y=e.Y,i.Next=r,i.Prev=r.Prev,i.Prev.Next=i,r.Prev=i,n&&(o.Pts=i)}return i},y.Clipper.prototype.SwapPoints=function(t,e){var n=new y.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,e.Value.X=n.X,e.Value.Y=n.Y},y.Clipper.prototype.HorzSegmentsOverlap=function(t,e,n,o){return t.X>n.X==t.X<o.X?!0:e.X>n.X==e.X<o.X?!0:n.X>t.X==n.X<e.X?!0:o.X>t.X==o.X<e.X?!0:t.X==n.X&&e.X==o.X?!0:t.X==o.X&&e.X==n.X?!0:!1},y.Clipper.prototype.InsertPolyPtBetween=function(t,e,n){var o=new y.OutPt;return o.Pt.X=n.X,o.Pt.Y=n.Y,e==t.Next?(t.Next=o,e.Prev=o,o.Next=e,o.Prev=t):(e.Next=o,t.Prev=o,o.Next=t,o.Prev=e),o},y.Clipper.prototype.SetHoleState=function(t,e){for(var n=!1,o=t.PrevInAEL;null!==o;)0<=o.OutIdx&&0!=o.WindDelta&&(n=!n,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[o.OutIdx])),o=o.PrevInAEL;n&&(e.IsHole=!0)},y.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?y.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},y.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var n=t.Prev;y.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Prev;for(var o=Math.abs(this.GetDx(t.Pt,n.Pt)),n=t.Next;y.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Next;for(var i=Math.abs(this.GetDx(t.Pt,n.Pt)),n=e.Prev;y.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Prev;for(var r=Math.abs(this.GetDx(e.Pt,n.Pt)),n=e.Next;y.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Next;return n=Math.abs(this.GetDx(e.Pt,n.Pt)),o>=r&&o>=n||i>=r&&i>=n},y.Clipper.prototype.GetBottomPt=function(t){for(var e=null,n=t.Next;n!=t;)n.Pt.Y>t.Pt.Y?(t=n,e=null):n.Pt.Y==t.Pt.Y&&n.Pt.X<=t.Pt.X&&(n.Pt.X<t.Pt.X?(e=null,t=n):n.Next!=t&&n.Prev!=t&&(e=n)),n=n.Next;if(null!==e)for(;e!=n;)for(this.FirstIsBottomPt(n,e)||(t=e),e=e.Next;y.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},y.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var n=t.BottomPt,o=e.BottomPt;return n.Pt.Y>o.Pt.Y?t:n.Pt.Y<o.Pt.Y?e:n.Pt.X<o.Pt.X?t:n.Pt.X>o.Pt.X?e:n.Next==n?e:o.Next==o?t:this.FirstIsBottomPt(n,o)?t:e},y.Clipper.prototype.Param1RightOfParam2=function(t,e){do if(t=t.FirstLeft,t==e)return!0;while(null!==t);return!1},y.Clipper.prototype.GetOutRec=function(t){for(t=this.m_PolyOuts[t];t!=this.m_PolyOuts[t.Idx];)t=this.m_PolyOuts[t.Idx];return t},y.Clipper.prototype.AppendPolygon=function(t,e){var n,o=this.m_PolyOuts[t.OutIdx],i=this.m_PolyOuts[e.OutIdx];n=this.Param1RightOfParam2(o,i)?i:this.Param1RightOfParam2(i,o)?o:this.GetLowermostRec(o,i);var r=o.Pts,s=r.Prev,a=i.Pts,l=a.Prev;for(t.Side==y.EdgeSide.esLeft?(e.Side==y.EdgeSide.esLeft?(this.ReversePolyPtLinks(a),a.Next=r,r.Prev=a,s.Next=l,l.Prev=s,o.Pts=l):(l.Next=r,r.Prev=l,a.Prev=s,s.Next=a,o.Pts=a),r=y.EdgeSide.esLeft):(e.Side==y.EdgeSide.esRight?(this.ReversePolyPtLinks(a),s.Next=l,l.Prev=s,a.Next=r,r.Prev=a):(s.Next=a,a.Prev=s,r.Prev=l,l.Next=r),r=y.EdgeSide.esRight),o.BottomPt=null,n==i&&(i.FirstLeft!=o&&(o.FirstLeft=i.FirstLeft),o.IsHole=i.IsHole),i.Pts=null,i.BottomPt=null,i.FirstLeft=o,n=t.OutIdx,s=e.OutIdx,t.OutIdx=-1,e.OutIdx=-1,a=this.m_ActiveEdges;null!==a;){if(a.OutIdx==s){a.OutIdx=n,a.Side=r;break}a=a.NextInAEL}i.Idx=o.Idx},y.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,n;e=t;do n=e.Next,e.Next=e.Prev,e=e.Prev=n;while(e!=t)}},y.Clipper.SwapSides=function(t,e){var n=t.Side;t.Side=e.Side,e.Side=n},y.Clipper.SwapPolyIndexes=function(t,e){var n=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=n},y.Clipper.prototype.IntersectEdges=function(t,e,n,o){var i=!o&&null===t.NextInLML&&t.Top.X==n.X&&t.Top.Y==n.Y;o=!o&&null===e.NextInLML&&e.Top.X==n.X&&e.Top.Y==n.Y;var r=0<=t.OutIdx,s=0<=e.OutIdx;if(0===t.WindDelta||0===e.WindDelta)0===t.WindDelta&&0===e.WindDelta?(i||o)&&r&&s&&this.AddLocalMaxPoly(t,e,n):t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==y.ClipType.ctUnion?0===t.WindDelta?s&&(this.AddOutPt(t,n),r&&(t.OutIdx=-1)):r&&(this.AddOutPt(e,n),s&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(e.WindCnt)||this.m_ClipType==y.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==y.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,n),s&&(e.OutIdx=-1)):(this.AddOutPt(t,n),r&&(t.OutIdx=-1))),i&&(0>t.OutIdx?this.DeleteFromAEL(t):y.Error("Error intersecting polylines")),o&&(0>e.OutIdx?this.DeleteFromAEL(e):y.Error("Error intersecting polylines"));else{if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var a=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=a}else t.WindCnt=0===t.WindCnt+e.WindDelta?-t.WindCnt:t.WindCnt+e.WindDelta,e.WindCnt=0===e.WindCnt-t.WindDelta?-e.WindCnt:e.WindCnt-t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;var l,p,u;switch(t.PolyTyp==y.PolyType.ptSubject?(l=this.m_SubjFillType,u=this.m_ClipFillType):(l=this.m_ClipFillType,u=this.m_SubjFillType),e.PolyTyp==y.PolyType.ptSubject?(p=this.m_SubjFillType,a=this.m_ClipFillType):(p=this.m_ClipFillType,a=this.m_SubjFillType),l){case y.PolyFillType.pftPositive:l=t.WindCnt;break;case y.PolyFillType.pftNegative:l=-t.WindCnt;break;default:l=Math.abs(t.WindCnt)}switch(p){case y.PolyFillType.pftPositive:p=e.WindCnt;break;case y.PolyFillType.pftNegative:p=-e.WindCnt;break;default:p=Math.abs(e.WindCnt)}if(r&&s)i||o||0!==l&&1!=l||0!==p&&1!=p||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=y.ClipType.ctXor?this.AddLocalMaxPoly(t,e,n):(this.AddOutPt(t,n),this.AddOutPt(e,n),y.Clipper.SwapSides(t,e),y.Clipper.SwapPolyIndexes(t,e));else if(r)(0===p||1==p)&&(this.AddOutPt(t,n),y.Clipper.SwapSides(t,e),y.Clipper.SwapPolyIndexes(t,e));else if(s)(0===l||1==l)&&(this.AddOutPt(e,n),y.Clipper.SwapSides(t,e),y.Clipper.SwapPolyIndexes(t,e));else if(!(0!==l&&1!=l||0!==p&&1!=p||i||o)){switch(u){case y.PolyFillType.pftPositive:r=t.WindCnt2;break;case y.PolyFillType.pftNegative:r=-t.WindCnt2;break;default:r=Math.abs(t.WindCnt2)}switch(a){case y.PolyFillType.pftPositive:s=e.WindCnt2;break;case y.PolyFillType.pftNegative:s=-e.WindCnt2;break;default:s=Math.abs(e.WindCnt2)}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,n);else if(1==l&&1==p)switch(this.m_ClipType){case y.ClipType.ctIntersection:r>0&&s>0&&this.AddLocalMinPoly(t,e,n);break;case y.ClipType.ctUnion:0>=r&&0>=s&&this.AddLocalMinPoly(t,e,n);break;case y.ClipType.ctDifference:(t.PolyTyp==y.PolyType.ptClip&&r>0&&s>0||t.PolyTyp==y.PolyType.ptSubject&&0>=r&&0>=s)&&this.AddLocalMinPoly(t,e,n);break;case y.ClipType.ctXor:this.AddLocalMinPoly(t,e,n)}else y.Clipper.SwapSides(t,e)}i!=o&&(i&&0<=t.OutIdx||o&&0<=e.OutIdx)&&(y.Clipper.SwapSides(t,e),y.Clipper.SwapPolyIndexes(t,e)),i&&this.DeleteFromAEL(t),o&&this.DeleteFromAEL(e)}},y.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,n=t.NextInAEL;(null!==e||null!==n||t==this.m_ActiveEdges)&&(null!==e?e.NextInAEL=n:this.m_ActiveEdges=n,null!==n&&(n.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},y.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,n=t.NextInSEL;(null!==e||null!==n||t==this.m_SortedEdges)&&(null!==e?e.NextInSEL=n:this.m_SortedEdges=n,null!==n&&(n.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},y.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&y.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,n=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==n&&(n.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,t=t.NextInLML,t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=n,y.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},y.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},y.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=y.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=y.Direction.dRightToLeft)},y.Clipper.prototype.PrepareHorzJoins=function(t,e){var n=this.m_PolyOuts[t.OutIdx].Pts;t.Side!=y.EdgeSide.esLeft&&(n=n.Prev),e&&(y.IntPoint.op_Equality(n.Pt,t.Top)?this.AddGhostJoin(n,t.Bot):this.AddGhostJoin(n,t.Top))},y.Clipper.prototype.ProcessHorizontal=function(t,e){var n={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,n);for(var o=n.Dir,i=n.Left,r=n.Right,s=t,a=null;null!==s.NextInLML&&y.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;for(null===s.NextInLML&&(a=this.GetMaximaPair(s));;){for(var l=t==s,p=this.GetNextInAEL(t,o);null!==p&&!(p.Curr.X==t.Top.X&&null!==t.NextInLML&&p.Dx<t.NextInLML.Dx);){if(n=this.GetNextInAEL(p,o),o==y.Direction.dLeftToRight&&p.Curr.X<=r||o==y.Direction.dRightToLeft&&p.Curr.X>=i){if(0<=t.OutIdx&&0!=t.WindDelta&&this.PrepareHorzJoins(t,e),p==a&&l)return o==y.Direction.dLeftToRight?this.IntersectEdges(t,p,p.Top,!1):this.IntersectEdges(p,t,p.Top,!1),void(0<=a.OutIdx&&y.Error("ProcessHorizontal error"));if(o==y.Direction.dLeftToRight){var u=new y.IntPoint(p.Curr.X,t.Curr.Y);this.IntersectEdges(t,p,u,!0)}else u=new y.IntPoint(p.Curr.X,t.Curr.Y),this.IntersectEdges(p,t,u,!0);this.SwapPositionsInAEL(t,p)}else if(o==y.Direction.dLeftToRight&&p.Curr.X>=r||o==y.Direction.dRightToLeft&&p.Curr.X<=i)break;p=n}if(0<=t.OutIdx&&0!==t.WindDelta&&this.PrepareHorzJoins(t,e),null===t.NextInLML||!y.ClipperBase.IsHorizontal(t.NextInLML))break;t=this.UpdateEdgeIntoAEL(t),0<=t.OutIdx&&this.AddOutPt(t,t.Bot),n={Dir:o,Left:i,Right:r},this.GetHorzDirection(t,n),o=n.Dir,i=n.Left,r=n.Right}null!==t.NextInLML?0<=t.OutIdx?(o=this.AddOutPt(t,t.Top),t=this.UpdateEdgeIntoAEL(t),0!==t.WindDelta&&(i=t.PrevInAEL,n=t.NextInAEL,null!==i&&i.Curr.X==t.Bot.X&&i.Curr.Y==t.Bot.Y&&0!==i.WindDelta&&0<=i.OutIdx&&i.Curr.Y>i.Top.Y&&y.ClipperBase.SlopesEqual(t,i,this.m_UseFullRange)?(n=this.AddOutPt(i,t.Bot),this.AddJoin(o,n,t.Top)):null!==n&&n.Curr.X==t.Bot.X&&n.Curr.Y==t.Bot.Y&&0!==n.WindDelta&&0<=n.OutIdx&&n.Curr.Y>n.Top.Y&&y.ClipperBase.SlopesEqual(t,n,this.m_UseFullRange)&&(n=this.AddOutPt(n,t.Bot),this.AddJoin(o,n,t.Top)))):this.UpdateEdgeIntoAEL(t):null!==a?0<=a.OutIdx?(o==y.Direction.dLeftToRight?this.IntersectEdges(t,a,t.Top,!1):this.IntersectEdges(a,t,t.Top,!1),0<=a.OutIdx&&y.Error("ProcessHorizontal error")):(this.DeleteFromAEL(t),this.DeleteFromAEL(a)):(0<=t.OutIdx&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},y.Clipper.prototype.GetNextInAEL=function(t,e){return e==y.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},y.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},y.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},y.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},y.Clipper.prototype.GetMaximaPair=function(t){var e=null;return y.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?e=t.Next:y.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(e=t.Prev),null===e||-2!=e.OutIdx&&(e.NextInAEL!=e.PrevInAEL||y.ClipperBase.IsHorizontal(e))?e:null},y.Clipper.prototype.ProcessIntersections=function(t,e){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,e),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(n){this.m_SortedEdges=null,this.m_IntersectList.length=0,y.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},y.Clipper.prototype.BuildIntersectList=function(t,e){if(null!==this.m_ActiveEdges){var n=this.m_ActiveEdges;for(this.m_SortedEdges=n;null!==n;)n.PrevInSEL=n.PrevInAEL,n.NextInSEL=n.NextInAEL,n.Curr.X=y.Clipper.TopX(n,e),n=n.NextInAEL;for(var o=!0;o&&null!==this.m_SortedEdges;){for(o=!1,n=this.m_SortedEdges;null!==n.NextInSEL;){var i=n.NextInSEL,r=new y.IntPoint;n.Curr.X>i.Curr.X?(!this.IntersectPoint(n,i,r)&&n.Curr.X>i.Curr.X+1&&y.Error("Intersection error"),r.Y>t&&(r.Y=t,r.X=Math.abs(n.Dx)>Math.abs(i.Dx)?y.Clipper.TopX(i,t):y.Clipper.TopX(n,t)),o=new y.IntersectNode,o.Edge1=n,o.Edge2=i,o.Pt.X=r.X,o.Pt.Y=r.Y,this.m_IntersectList.push(o),this.SwapPositionsInSEL(n,i),o=!0):n=i}if(null===n.PrevInSEL)break;n.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},y.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},y.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},y.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;t>e;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var n=e+1;t>n&&!this.EdgesAdjacent(this.m_IntersectList[n]);)n++;if(n==t)return!1;var o=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[n],this.m_IntersectList[n]=o}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},y.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;e>t;t++){var n=this.m_IntersectList[t];this.IntersectEdges(n.Edge1,n.Edge2,n.Pt,!0),this.SwapPositionsInAEL(n.Edge1,n.Edge2)}this.m_IntersectList.length=0},P=function(t){return 0>t?Math.ceil(t-.5):Math.round(t)},I=function(t){return 0>t?Math.ceil(t-.5):Math.floor(t+.5)},C=function(t){return 0>t?-Math.round(Math.abs(t)):Math.round(t)},L=function(t){return 0>t?(t-=.5,-2147483648>t?Math.ceil(t):0|t):(t+=.5,t>2147483647?Math.floor(t):0|t)},y.Clipper.Round=E?P:v?C:j?L:I,y.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+y.Clipper.Round(t.Dx*(e-t.Bot.Y))},y.Clipper.prototype.IntersectPoint=function(t,e,n){n.X=0,n.Y=0;var o,i;if(y.ClipperBase.SlopesEqual(t,e,this.m_UseFullRange)||t.Dx==e.Dx)return e.Bot.Y>t.Bot.Y?(n.X=e.Bot.X,n.Y=e.Bot.Y):(n.X=t.Bot.X,n.Y=t.Bot.Y),!1;if(0===t.Delta.X)n.X=t.Bot.X,y.ClipperBase.IsHorizontal(e)?n.Y=e.Bot.Y:(i=e.Bot.Y-e.Bot.X/e.Dx,n.Y=y.Clipper.Round(n.X/e.Dx+i));else if(0===e.Delta.X)n.X=e.Bot.X,y.ClipperBase.IsHorizontal(t)?n.Y=t.Bot.Y:(o=t.Bot.Y-t.Bot.X/t.Dx,n.Y=y.Clipper.Round(n.X/t.Dx+o));else{o=t.Bot.X-t.Bot.Y*t.Dx,i=e.Bot.X-e.Bot.Y*e.Dx;var r=(i-o)/(t.Dx-e.Dx);n.Y=y.Clipper.Round(r),n.X=y.Clipper.Round(Math.abs(t.Dx)<Math.abs(e.Dx)?t.Dx*r+o:e.Dx*r+i)}if(n.Y<t.Top.Y||n.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return n.Y=t.Top.Y,n.X=y.Clipper.TopX(e,t.Top.Y),n.X<t.Top.X;n.Y=e.Top.Y,n.X=Math.abs(t.Dx)<Math.abs(e.Dx)?y.Clipper.TopX(t,n.Y):y.Clipper.TopX(e,n.Y)}return!0},y.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var n=this.IsMaxima(e,t);if(n&&(n=this.GetMaximaPair(e),n=null===n||!y.ClipperBase.IsHorizontal(n)),n){var o=e.PrevInAEL;this.DoMaxima(e),e=null===o?this.m_ActiveEdges:o.NextInAEL}else this.IsIntermediate(e,t)&&y.ClipperBase.IsHorizontal(e.NextInLML)?(e=this.UpdateEdgeIntoAEL(e),0<=e.OutIdx&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=y.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple&&(o=e.PrevInAEL,0<=e.OutIdx&&0!==e.WindDelta&&null!==o&&0<=o.OutIdx&&o.Curr.X==e.Curr.X&&0!==o.WindDelta&&(n=this.AddOutPt(o,e.Curr),o=this.AddOutPt(e,e.Curr),this.AddJoin(n,o,e.Curr))),e=e.NextInAEL}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){n=null,0<=e.OutIdx&&(n=this.AddOutPt(e,e.Top));var e=this.UpdateEdgeIntoAEL(e),o=e.PrevInAEL,i=e.NextInAEL;null!==o&&o.Curr.X==e.Bot.X&&o.Curr.Y==e.Bot.Y&&null!==n&&0<=o.OutIdx&&o.Curr.Y>o.Top.Y&&y.ClipperBase.SlopesEqual(e,o,this.m_UseFullRange)&&0!==e.WindDelta&&0!==o.WindDelta?(o=this.AddOutPt(o,e.Bot),this.AddJoin(n,o,e.Top)):null!==i&&i.Curr.X==e.Bot.X&&i.Curr.Y==e.Bot.Y&&null!==n&&0<=i.OutIdx&&i.Curr.Y>i.Top.Y&&y.ClipperBase.SlopesEqual(e,i,this.m_UseFullRange)&&0!==e.WindDelta&&0!==i.WindDelta&&(o=this.AddOutPt(i,e.Bot),this.AddJoin(n,o,e.Top))}e=e.NextInAEL}},y.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(null===e)0<=t.OutIdx&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t);else{for(var n=t.NextInAEL;null!==n&&n!=e;)this.IntersectEdges(t,n,t.Top,!0),this.SwapPositionsInAEL(t,n),n=t.NextInAEL;-1==t.OutIdx&&-1==e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):0<=t.OutIdx&&0<=e.OutIdx?this.IntersectEdges(t,e,t.Top,!1):0===t.WindDelta?(0<=t.OutIdx&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),0<=e.OutIdx&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):y.Error("DoMaxima error")}},y.Clipper.ReversePaths=function(t){for(var e=0,n=t.length;n>e;e++)t[e].reverse()},y.Clipper.Orientation=function(t){return 0<=y.Clipper.Area(t)},y.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,n=t;do e++,n=n.Next;while(n!=t);return e},y.Clipper.prototype.BuildResult=function(t){y.Clear(t);for(var e=0,n=this.m_PolyOuts.length;n>e;e++){var o=this.m_PolyOuts[e];if(null!==o.Pts){var o=o.Pts.Prev,i=this.PointCount(o);if(!(2>i)){for(var r=Array(i),s=0;i>s;s++)r[s]=o.Pt,o=o.Prev;t.push(r)}}}},y.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,n=this.m_PolyOuts.length;n>e;e++){var o=this.m_PolyOuts[e],i=this.PointCount(o.Pts);if(!(o.IsOpen&&2>i||!o.IsOpen&&3>i)){this.FixHoleLinkage(o);var r=new y.PolyNode;t.m_AllPolys.push(r),o.PolyNode=r,r.m_polygon.length=i;for(var o=o.Pts.Prev,s=0;i>s;s++)r.m_polygon[s]=o.Pt,o=o.Prev}}for(e=0,n=this.m_PolyOuts.length;n>e;e++)o=this.m_PolyOuts[e],null!==o.PolyNode&&(o.IsOpen?(o.PolyNode.IsOpen=!0,t.AddChild(o.PolyNode)):null!==o.FirstLeft&&null!=o.FirstLeft.PolyNode?o.FirstLeft.PolyNode.AddChild(o.PolyNode):t.AddChild(o.PolyNode))},y.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var n=t.Pts;;){if(n.Prev==n||n.Prev==n.Next)return this.DisposeOutPts(n),void(t.Pts=null);if(y.IntPoint.op_Equality(n.Pt,n.Next.Pt)||y.IntPoint.op_Equality(n.Pt,n.Prev.Pt)||y.ClipperBase.SlopesEqual(n.Prev.Pt,n.Pt,n.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(n.Prev.Pt,n.Pt,n.Next.Pt)))e=null,n.Prev.Next=n.Next,n=n.Next.Prev=n.Prev;else{if(n==e)break;null===e&&(e=n),n=n.Next}}t.Pts=n},y.Clipper.prototype.DupOutPt=function(t,e){var n=new y.OutPt;return n.Pt.X=t.Pt.X,n.Pt.Y=t.Pt.Y,n.Idx=t.Idx,e?(n.Next=t.Next,n.Prev=t,t.Next.Prev=n,t.Next=n):(n.Prev=t.Prev,n.Next=t,t.Prev.Next=n,t.Prev=n),n},y.Clipper.prototype.GetOverlap=function(t,e,n,o,i){return e>t?o>n?(i.Left=Math.max(t,n),i.Right=Math.min(e,o)):(i.Left=Math.max(t,o),i.Right=Math.min(e,n)):o>n?(i.Left=Math.max(e,n),i.Right=Math.min(t,o)):(i.Left=Math.max(e,o),i.Right=Math.min(t,n)),i.Left<i.Right},y.Clipper.prototype.JoinHorz=function(t,e,n,o,i,r){var s=t.Pt.X>e.Pt.X?y.Direction.dRightToLeft:y.Direction.dLeftToRight;
if(o=n.Pt.X>o.Pt.X?y.Direction.dRightToLeft:y.Direction.dLeftToRight,s==o)return!1;if(s==y.Direction.dLeftToRight){for(;t.Next.Pt.X<=i.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==i.Y;)t=t.Next;r&&t.Pt.X!=i.X&&(t=t.Next),e=this.DupOutPt(t,!r),y.IntPoint.op_Inequality(e.Pt,i)&&(t=e,t.Pt.X=i.X,t.Pt.Y=i.Y,e=this.DupOutPt(t,!r))}else{for(;t.Next.Pt.X>=i.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==i.Y;)t=t.Next;r||t.Pt.X==i.X||(t=t.Next),e=this.DupOutPt(t,r),y.IntPoint.op_Inequality(e.Pt,i)&&(t=e,t.Pt.X=i.X,t.Pt.Y=i.Y,e=this.DupOutPt(t,r))}if(o==y.Direction.dLeftToRight){for(;n.Next.Pt.X<=i.X&&n.Next.Pt.X>=n.Pt.X&&n.Next.Pt.Y==i.Y;)n=n.Next;r&&n.Pt.X!=i.X&&(n=n.Next),o=this.DupOutPt(n,!r),y.IntPoint.op_Inequality(o.Pt,i)&&(n=o,n.Pt.X=i.X,n.Pt.Y=i.Y,o=this.DupOutPt(n,!r))}else{for(;n.Next.Pt.X>=i.X&&n.Next.Pt.X<=n.Pt.X&&n.Next.Pt.Y==i.Y;)n=n.Next;r||n.Pt.X==i.X||(n=n.Next),o=this.DupOutPt(n,r),y.IntPoint.op_Inequality(o.Pt,i)&&(n=o,n.Pt.X=i.X,n.Pt.Y=i.Y,o=this.DupOutPt(n,r))}return s==y.Direction.dLeftToRight==r?(t.Prev=n,n.Next=t,e.Next=o,o.Prev=e):(t.Next=n,n.Prev=t,e.Prev=o,o.Next=e),!0},y.Clipper.prototype.JoinPoints=function(t,e,n){var o=t.OutPt1,i=new y.OutPt,r=t.OutPt2,s=new y.OutPt;if((s=t.OutPt1.Pt.Y==t.OffPt.Y)&&y.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&y.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){for(i=t.OutPt1.Next;i!=o&&y.IntPoint.op_Equality(i.Pt,t.OffPt);)i=i.Next;for(i=i.Pt.Y>t.OffPt.Y,s=t.OutPt2.Next;s!=r&&y.IntPoint.op_Equality(s.Pt,t.OffPt);)s=s.Next;return i==s.Pt.Y>t.OffPt.Y?!1:(i?(i=this.DupOutPt(o,!1),s=this.DupOutPt(r,!0),o.Prev=r,r.Next=o,i.Next=s,s.Prev=i):(i=this.DupOutPt(o,!0),s=this.DupOutPt(r,!1),o.Next=r,r.Prev=o,i.Prev=s,s.Next=i),t.OutPt1=o,t.OutPt2=i,!0)}if(s){for(i=o;o.Prev.Pt.Y==o.Pt.Y&&o.Prev!=i&&o.Prev!=r;)o=o.Prev;for(;i.Next.Pt.Y==i.Pt.Y&&i.Next!=o&&i.Next!=r;)i=i.Next;if(i.Next==o||i.Next==r)return!1;for(s=r;r.Prev.Pt.Y==r.Pt.Y&&r.Prev!=s&&r.Prev!=i;)r=r.Prev;for(;s.Next.Pt.Y==s.Pt.Y&&s.Next!=r&&s.Next!=o;)s=s.Next;if(s.Next==r||s.Next==o)return!1;if(n={Left:null,Right:null},!this.GetOverlap(o.Pt.X,i.Pt.X,r.Pt.X,s.Pt.X,n))return!1;e=n.Left;var a=n.Right;return n=new y.IntPoint,o.Pt.X>=e&&o.Pt.X<=a?(n.X=o.Pt.X,n.Y=o.Pt.Y,e=o.Pt.X>i.Pt.X):r.Pt.X>=e&&r.Pt.X<=a?(n.X=r.Pt.X,n.Y=r.Pt.Y,e=r.Pt.X>s.Pt.X):i.Pt.X>=e&&i.Pt.X<=a?(n.X=i.Pt.X,n.Y=i.Pt.Y,e=i.Pt.X>o.Pt.X):(n.X=s.Pt.X,n.Y=s.Pt.Y,e=s.Pt.X>r.Pt.X),t.OutPt1=o,t.OutPt2=r,this.JoinHorz(o,i,r,s,n,e)}for(i=o.Next;y.IntPoint.op_Equality(i.Pt,o.Pt)&&i!=o;)i=i.Next;if(a=i.Pt.Y>o.Pt.Y||!y.ClipperBase.SlopesEqual(o.Pt,i.Pt,t.OffPt,this.m_UseFullRange)){for(i=o.Prev;y.IntPoint.op_Equality(i.Pt,o.Pt)&&i!=o;)i=i.Prev;if(i.Pt.Y>o.Pt.Y||!y.ClipperBase.SlopesEqual(o.Pt,i.Pt,t.OffPt,this.m_UseFullRange))return!1}for(s=r.Next;y.IntPoint.op_Equality(s.Pt,r.Pt)&&s!=r;)s=s.Next;var l=s.Pt.Y>r.Pt.Y||!y.ClipperBase.SlopesEqual(r.Pt,s.Pt,t.OffPt,this.m_UseFullRange);if(l){for(s=r.Prev;y.IntPoint.op_Equality(s.Pt,r.Pt)&&s!=r;)s=s.Prev;if(s.Pt.Y>r.Pt.Y||!y.ClipperBase.SlopesEqual(r.Pt,s.Pt,t.OffPt,this.m_UseFullRange))return!1}return i==o||s==r||i==s||e==n&&a==l?!1:(a?(i=this.DupOutPt(o,!1),s=this.DupOutPt(r,!0),o.Prev=r,r.Next=o,i.Next=s,s.Prev=i):(i=this.DupOutPt(o,!0),s=this.DupOutPt(r,!1),o.Next=r,r.Prev=o,i.Prev=s,s.Next=i),t.OutPt1=o,t.OutPt2=i,!0)},y.Clipper.GetBounds=function(t){for(var e=0,n=t.length;n>e&&0==t[e].length;)e++;if(e==n)return new y.IntRect(0,0,0,0);var o=new y.IntRect;for(o.left=t[e][0].X,o.right=o.left,o.top=t[e][0].Y,o.bottom=o.top;n>e;e++)for(var i=0,r=t[e].length;r>i;i++)t[e][i].X<o.left?o.left=t[e][i].X:t[e][i].X>o.right&&(o.right=t[e][i].X),t[e][i].Y<o.top?o.top=t[e][i].Y:t[e][i].Y>o.bottom&&(o.bottom=t[e][i].Y);return o},y.Clipper.prototype.GetBounds2=function(t){var e=t,n=new y.IntRect;for(n.left=t.Pt.X,n.right=t.Pt.X,n.top=t.Pt.Y,n.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<n.left&&(n.left=t.Pt.X),t.Pt.X>n.right&&(n.right=t.Pt.X),t.Pt.Y<n.top&&(n.top=t.Pt.Y),t.Pt.Y>n.bottom&&(n.bottom=t.Pt.Y),t=t.Next;return n},y.Clipper.PointInPolygon=function(t,e){var n=0,o=e.length;if(3>o)return 0;for(var i=e[0],r=1;o>=r;++r){var s=r==o?e[0]:e[r];if(s.Y==t.Y&&(s.X==t.X||i.Y==t.Y&&s.X>t.X==i.X<t.X))return-1;if(i.Y<t.Y!=s.Y<t.Y)if(i.X>=t.X)if(s.X>t.X)n=1-n;else{var a=(i.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(i.Y-t.Y);if(0==a)return-1;a>0==s.Y>i.Y&&(n=1-n)}else if(s.X>t.X){if(a=(i.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(i.Y-t.Y),0==a)return-1;a>0==s.Y>i.Y&&(n=1-n)}i=s}return n},y.Clipper.prototype.PointInPolygon=function(t,e){for(var n=0,o=e;;){var i=e.Pt.X,r=e.Pt.Y,s=e.Next.Pt.X,a=e.Next.Pt.Y;if(a==t.Y&&(s==t.X||r==t.Y&&s>t.X==i<t.X))return-1;if(r<t.Y!=a<t.Y)if(i>=t.X)if(s>t.X)n=1-n;else{if(i=(i-t.X)*(a-t.Y)-(s-t.X)*(r-t.Y),0==i)return-1;i>0==a>r&&(n=1-n)}else if(s>t.X){if(i=(i-t.X)*(a-t.Y)-(s-t.X)*(r-t.Y),0==i)return-1;i>0==a>r&&(n=1-n)}if(e=e.Next,o==e)break}return n},y.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var n=t;do{var o=this.PointInPolygon(n.Pt,e);if(o>=0)return 0!=o;n=n.Next}while(n!=t);return!0},y.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var n=0,o=this.m_PolyOuts.length;o>n;n++){var i=this.m_PolyOuts[n];null!==i.Pts&&i.FirstLeft==t&&this.Poly2ContainsPoly1(i.Pts,e.Pts)&&(i.FirstLeft=e)}},y.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var n=0,o=this.m_PolyOuts,i=o.length,r=o[n];i>n;n++,r=o[n])r.FirstLeft==t&&(r.FirstLeft=e)},y.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},y.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;e>t;t++){var n=this.m_Joins[t],o=this.GetOutRec(n.OutPt1.Idx),i=this.GetOutRec(n.OutPt2.Idx);if(null!=o.Pts&&null!=i.Pts){var r;if(r=o==i?o:this.Param1RightOfParam2(o,i)?i:this.Param1RightOfParam2(i,o)?o:this.GetLowermostRec(o,i),this.JoinPoints(n,o,i))if(o==i){if(o.Pts=n.OutPt1,o.BottomPt=null,i=this.CreateOutRec(),i.Pts=n.OutPt2,this.UpdateOutPtIdxs(i),this.m_UsingPolyTree){r=0;for(var s=this.m_PolyOuts.length;s-1>r;r++){var a=this.m_PolyOuts[r];null!=a.Pts&&y.Clipper.ParseFirstLeft(a.FirstLeft)==o&&a.IsHole!=o.IsHole&&this.Poly2ContainsPoly1(a.Pts,n.OutPt2)&&(a.FirstLeft=i)}}this.Poly2ContainsPoly1(i.Pts,o.Pts)?(i.IsHole=!o.IsHole,i.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,o),(i.IsHole^this.ReverseSolution)==0<this.Area(i)&&this.ReversePolyPtLinks(i.Pts)):this.Poly2ContainsPoly1(o.Pts,i.Pts)?(i.IsHole=o.IsHole,o.IsHole=!i.IsHole,i.FirstLeft=o.FirstLeft,o.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts2(o,i),(o.IsHole^this.ReverseSolution)==0<this.Area(o)&&this.ReversePolyPtLinks(o.Pts)):(i.IsHole=o.IsHole,i.FirstLeft=o.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(o,i))}else i.Pts=null,i.BottomPt=null,i.Idx=o.Idx,o.IsHole=r.IsHole,r==i&&(o.FirstLeft=i.FirstLeft),i.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,o)}}},y.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do e.Idx=t.Idx,e=e.Prev;while(e!=t.Pts)},y.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],n=e.Pts;if(null!==n)do{for(var o=n.Next;o!=e.Pts;){if(y.IntPoint.op_Equality(n.Pt,o.Pt)&&o.Next!=n&&o.Prev!=n){var i=n.Prev,r=o.Prev;n.Prev=r,r.Next=n,o.Prev=i,i.Next=o,e.Pts=n,i=this.CreateOutRec(),i.Pts=o,this.UpdateOutPtIdxs(i),this.Poly2ContainsPoly1(i.Pts,e.Pts)?(i.IsHole=!e.IsHole,i.FirstLeft=e):this.Poly2ContainsPoly1(e.Pts,i.Pts)?(i.IsHole=e.IsHole,e.IsHole=!i.IsHole,i.FirstLeft=e.FirstLeft,e.FirstLeft=i):(i.IsHole=e.IsHole,i.FirstLeft=e.FirstLeft),o=n}o=o.Next}n=n.Next}while(n!=e.Pts)}},y.Clipper.Area=function(t){var e=t.length;if(3>e)return 0;for(var n=0,o=0,i=e-1;e>o;++o)n+=(t[i].X+t[o].X)*(t[i].Y-t[o].Y),i=o;return.5*-n},y.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;var n=0;do n+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next;while(e!=t.Pts);return.5*n},y.Clipper.SimplifyPolygon=function(t,e){var n=[],o=new y.Clipper(0);return o.StrictlySimple=!0,o.AddPath(t,y.PolyType.ptSubject,!0),o.Execute(y.ClipType.ctUnion,n,e,e),n},y.Clipper.SimplifyPolygons=function(t,e){"undefined"==typeof e&&(e=y.PolyFillType.pftEvenOdd);var n=[],o=new y.Clipper(0);return o.StrictlySimple=!0,o.AddPaths(t,y.PolyType.ptSubject,!0),o.Execute(y.ClipType.ctUnion,n,e,e),n},y.Clipper.DistanceSqrd=function(t,e){var n=t.X-e.X,o=t.Y-e.Y;return n*n+o*o},y.Clipper.DistanceFromLineSqrd=function(t,e,n){var o=e.Y-n.Y;return n=n.X-e.X,e=o*e.X+n*e.Y,e=o*t.X+n*t.Y-e,e*e/(o*o+n*n)},y.Clipper.SlopesNearCollinear=function(t,e,n,o){return y.Clipper.DistanceFromLineSqrd(e,t,n)<o},y.Clipper.PointsAreClose=function(t,e,n){var o=t.X-e.X;return t=t.Y-e.Y,n>=o*o+t*t},y.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},y.Clipper.CleanPolygon=function(t,e){"undefined"==typeof e&&(e=1.415);var n=t.length;if(0==n)return[];for(var o=Array(n),i=0;n>i;++i)o[i]=new y.OutPt;for(i=0;n>i;++i)o[i].Pt=t[i],o[i].Next=o[(i+1)%n],o[i].Next.Prev=o[i],o[i].Idx=0;for(i=e*e,o=o[0];0==o.Idx&&o.Next!=o.Prev;)y.Clipper.PointsAreClose(o.Pt,o.Prev.Pt,i)?(o=y.Clipper.ExcludeOp(o),n--):y.Clipper.PointsAreClose(o.Prev.Pt,o.Next.Pt,i)?(y.Clipper.ExcludeOp(o.Next),o=y.Clipper.ExcludeOp(o),n-=2):y.Clipper.SlopesNearCollinear(o.Prev.Pt,o.Pt,o.Next.Pt,i)?(o=y.Clipper.ExcludeOp(o),n--):(o.Idx=1,o=o.Next);3>n&&(n=0);for(var r=Array(n),i=0;n>i;++i)r[i]=new y.IntPoint(o.Pt),o=o.Next;return r},y.Clipper.CleanPolygons=function(t,e){for(var n=Array(t.length),o=0,i=t.length;i>o;o++)n[o]=y.Clipper.CleanPolygon(t[o],e);return n},y.Clipper.Minkowski=function(t,e,n,o){var i=o?1:0,r=t.length,s=e.length;if(o=[],n)for(n=0;s>n;n++){for(var a=Array(r),l=0,p=t.length,u=t[l];p>l;l++,u=t[l])a[l]=new y.IntPoint(e[n].X+u.X,e[n].Y+u.Y);o.push(a)}else for(n=0;s>n;n++){for(a=Array(r),l=0,p=t.length,u=t[l];p>l;l++,u=t[l])a[l]=new y.IntPoint(e[n].X-u.X,e[n].Y-u.Y);o.push(a)}for(t=[],n=0;s-1+i>n;n++)for(l=0;r>l;l++)e=[],e.push(o[n%s][l%r]),e.push(o[(n+1)%s][l%r]),e.push(o[(n+1)%s][(l+1)%r]),e.push(o[n%s][(l+1)%r]),y.Clipper.Orientation(e)||e.reverse(),t.push(e);return i=new y.Clipper(0),i.AddPaths(t,y.PolyType.ptSubject,!0),i.Execute(y.ClipType.ctUnion,o,y.PolyFillType.pftNonZero,y.PolyFillType.pftNonZero),o},y.Clipper.MinkowskiSum=function(){var t=arguments,e=t.length;if(3==e){var n=t[0],o=t[2];return y.Clipper.Minkowski(n,t[1],!0,o)}if(4==e){for(var i,n=t[0],r=t[1],e=t[2],o=t[3],t=new y.Clipper,s=0,a=r.length;a>s;++s)i=y.Clipper.Minkowski(n,r[s],!0,o),t.AddPaths(i,y.PolyType.ptSubject,!0);return o&&t.AddPaths(r,y.PolyType.ptClip,!0),n=new y.Paths,t.Execute(y.ClipType.ctUnion,n,e,e),n}},y.Clipper.MinkowskiDiff=function(t,e,n){return y.Clipper.Minkowski(t,e,!1,n)},y.Clipper.PolyTreeToPaths=function(t){var e=[];return y.Clipper.AddPolyNodeToPaths(t,y.Clipper.NodeType.ntAny,e),e},y.Clipper.AddPolyNodeToPaths=function(t,e,n){var o=!0;switch(e){case y.Clipper.NodeType.ntOpen:return;case y.Clipper.NodeType.ntClosed:o=!t.IsOpen}0<t.m_polygon.length&&o&&n.push(t.m_polygon),o=0,t=t.Childs();for(var i=t.length,r=t[o];i>o;o++,r=t[o])y.Clipper.AddPolyNodeToPaths(r,e,n)},y.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new y.Paths,n=0,o=t.ChildCount();o>n;n++)t.Childs()[n].IsOpen&&e.push(t.Childs()[n].m_polygon);return e},y.Clipper.ClosedPathsFromPolyTree=function(t){var e=new y.Paths;return y.Clipper.AddPolyNodeToPaths(t,y.Clipper.NodeType.ntClosed,e),e},w(y.Clipper,y.ClipperBase),y.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},y.ClipperOffset=function(t,e){"undefined"==typeof t&&(t=2),"undefined"==typeof e&&(e=y.ClipperOffset.def_arc_tolerance),this.m_destPolys=new y.Paths,this.m_srcPoly=new y.Path,this.m_destPoly=new y.Path,this.m_normals=[],this.m_StepsPerRad=this.m_miterLim=this.m_cos=this.m_sin=this.m_sinA=this.m_delta=0,this.m_lowest=new y.IntPoint,this.m_polyNodes=new y.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},y.ClipperOffset.two_pi=6.28318530717959,y.ClipperOffset.def_arc_tolerance=.25,y.ClipperOffset.prototype.Clear=function(){y.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},y.ClipperOffset.Round=y.Clipper.Round,y.ClipperOffset.prototype.AddPath=function(t,e,n){var o=t.length-1;if(!(0>o)){var i=new y.PolyNode;if(i.m_jointype=e,i.m_endtype=n,n==y.EndType.etClosedLine||n==y.EndType.etClosedPolygon)for(;o>0&&y.IntPoint.op_Equality(t[0],t[o]);)o--;i.m_polygon.push(t[0]);var r=0;e=0;for(var s=1;o>=s;s++)y.IntPoint.op_Inequality(i.m_polygon[r],t[s])&&(r++,i.m_polygon.push(t[s]),t[s].Y>i.m_polygon[e].Y||t[s].Y==i.m_polygon[e].Y&&t[s].X<i.m_polygon[e].X)&&(e=r);n==y.EndType.etClosedPolygon&&2>r||n!=y.EndType.etClosedPolygon&&0>r||(this.m_polyNodes.AddChild(i),n!=y.EndType.etClosedPolygon)||(0>this.m_lowest.X?this.m_lowest=new y.IntPoint(0,e):(t=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y],(i.m_polygon[e].Y>t.Y||i.m_polygon[e].Y==t.Y&&i.m_polygon[e].X<t.X)&&(this.m_lowest=new y.IntPoint(this.m_polyNodes.ChildCount()-1,e))))}},y.ClipperOffset.prototype.AddPaths=function(t,e,n){for(var o=0,i=t.length;i>o;o++)this.AddPath(t[o],e,n)},y.ClipperOffset.prototype.FixOrientations=function(){if(0<=this.m_lowest.X&&!y.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];(e.m_endtype==y.EndType.etClosedPolygon||e.m_endtype==y.EndType.etClosedLine&&y.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(t=0;t<this.m_polyNodes.ChildCount();t++)e=this.m_polyNodes.Childs()[t],e.m_endtype!=y.EndType.etClosedLine||y.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()},y.ClipperOffset.GetUnitNormal=function(t,e){var n=e.X-t.X,o=e.Y-t.Y;if(0==n&&0==o)return new y.DoublePoint(0,0);var i=1/Math.sqrt(n*n+o*o);return new y.DoublePoint(o*i,-(n*i))},y.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=[],this.m_delta=t,y.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var n=this.m_polyNodes.Childs()[e];n.m_endtype==y.EndType.etClosedPolygon&&this.m_destPolys.push(n.m_polygon)}else{this.m_miterLim=2<this.MiterLimit?2/(this.MiterLimit*this.MiterLimit):.5;var e=0>=this.ArcTolerance?y.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*y.ClipperOffset.def_arc_tolerance?Math.abs(t)*y.ClipperOffset.def_arc_tolerance:this.ArcTolerance,o=3.14159265358979/Math.acos(1-e/Math.abs(t));for(this.m_sin=Math.sin(y.ClipperOffset.two_pi/o),this.m_cos=Math.cos(y.ClipperOffset.two_pi/o),this.m_StepsPerRad=o/y.ClipperOffset.two_pi,0>t&&(this.m_sin=-this.m_sin),e=0;e<this.m_polyNodes.ChildCount();e++){n=this.m_polyNodes.Childs()[e],this.m_srcPoly=n.m_polygon;var i=this.m_srcPoly.length;if(!(0==i||0>=t&&(3>i||n.m_endtype!=y.EndType.etClosedPolygon))){if(this.m_destPoly=[],1==i)if(n.m_jointype==y.JoinType.jtRound)for(var n=1,i=0,r=1;o>=r;r++){this.m_destPoly.push(new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[0].X+n*t),y.ClipperOffset.Round(this.m_srcPoly[0].Y+i*t)));var s=n,n=n*this.m_cos-this.m_sin*i,i=s*this.m_sin+i*this.m_cos}else for(i=n=-1,r=0;4>r;++r)this.m_destPoly.push(new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[0].X+n*t),y.ClipperOffset.Round(this.m_srcPoly[0].Y+i*t))),0>n?n=1:0>i?i=1:n=-1;else{for(r=this.m_normals.length=0;i-1>r;r++)this.m_normals.push(y.ClipperOffset.GetUnitNormal(this.m_srcPoly[r],this.m_srcPoly[r+1]));if(this.m_normals.push(n.m_endtype==y.EndType.etClosedLine||n.m_endtype==y.EndType.etClosedPolygon?y.ClipperOffset.GetUnitNormal(this.m_srcPoly[i-1],this.m_srcPoly[0]):new y.DoublePoint(this.m_normals[i-2])),n.m_endtype==y.EndType.etClosedPolygon)for(s=i-1,r=0;i>r;r++)s=this.OffsetPoint(r,s,n.m_jointype);else if(n.m_endtype==y.EndType.etClosedLine){for(s=i-1,r=0;i>r;r++)s=this.OffsetPoint(r,s,n.m_jointype);for(this.m_destPolys.push(this.m_destPoly),this.m_destPoly=[],s=this.m_normals[i-1],r=i-1;r>0;r--)this.m_normals[r]=new y.DoublePoint(-this.m_normals[r-1].X,-this.m_normals[r-1].Y);for(this.m_normals[0]=new y.DoublePoint(-s.X,-s.Y),s=0,r=i-1;r>=0;r--)s=this.OffsetPoint(r,s,n.m_jointype)}else{for(s=0,r=1;i-1>r;++r)s=this.OffsetPoint(r,s,n.m_jointype);for(n.m_endtype==y.EndType.etOpenButt?(r=i-1,s=new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[r].X+this.m_normals[r].X*t),y.ClipperOffset.Round(this.m_srcPoly[r].Y+this.m_normals[r].Y*t)),this.m_destPoly.push(s),s=new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[r].X-this.m_normals[r].X*t),y.ClipperOffset.Round(this.m_srcPoly[r].Y-this.m_normals[r].Y*t)),this.m_destPoly.push(s)):(r=i-1,s=i-2,this.m_sinA=0,this.m_normals[r]=new y.DoublePoint(-this.m_normals[r].X,-this.m_normals[r].Y),n.m_endtype==y.EndType.etOpenSquare?this.DoSquare(r,s):this.DoRound(r,s)),r=i-1;r>0;r--)this.m_normals[r]=new y.DoublePoint(-this.m_normals[r-1].X,-this.m_normals[r-1].Y);for(this.m_normals[0]=new y.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),s=i-1,r=s-1;r>0;--r)s=this.OffsetPoint(r,s,n.m_jointype);n.m_endtype==y.EndType.etOpenButt?(s=new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),y.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(s),s=new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),y.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(s)):(this.m_sinA=0,n.m_endtype==y.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1))}}this.m_destPolys.push(this.m_destPoly)}}}},y.ClipperOffset.prototype.Execute=function(){var t=arguments;if(t[0]instanceof y.PolyTree)if(e=t[0],n=t[1],e.Clear(),this.FixOrientations(),this.DoOffset(n),t=new y.Clipper(0),t.AddPaths(this.m_destPolys,y.PolyType.ptSubject,!0),n>0)t.Execute(y.ClipType.ctUnion,e,y.PolyFillType.pftPositive,y.PolyFillType.pftPositive);else if(n=y.Clipper.GetBounds(this.m_destPolys),o=new y.Path,o.push(new y.IntPoint(n.left-10,n.bottom+10)),o.push(new y.IntPoint(n.right+10,n.bottom+10)),o.push(new y.IntPoint(n.right+10,n.top-10)),o.push(new y.IntPoint(n.left-10,n.top-10)),t.AddPath(o,y.PolyType.ptSubject,!0),t.ReverseSolution=!0,t.Execute(y.ClipType.ctUnion,e,y.PolyFillType.pftNegative,y.PolyFillType.pftNegative),1==e.ChildCount()&&0<e.Childs()[0].ChildCount())for(t=e.Childs()[0],e.Childs()[0]=t.Childs()[0],n=1;n<t.ChildCount();n++)e.AddChild(t.Childs()[n]);else e.Clear();else{var e=t[0],n=t[1];if(y.Clear(e),this.FixOrientations(),this.DoOffset(n),t=new y.Clipper(0),t.AddPaths(this.m_destPolys,y.PolyType.ptSubject,!0),n>0)t.Execute(y.ClipType.ctUnion,e,y.PolyFillType.pftPositive,y.PolyFillType.pftPositive);else{var n=y.Clipper.GetBounds(this.m_destPolys),o=new y.Path;o.push(new y.IntPoint(n.left-10,n.bottom+10)),o.push(new y.IntPoint(n.right+10,n.bottom+10)),o.push(new y.IntPoint(n.right+10,n.top-10)),o.push(new y.IntPoint(n.left-10,n.top-10)),t.AddPath(o,y.PolyType.ptSubject,!0),t.ReverseSolution=!0,t.Execute(y.ClipType.ctUnion,e,y.PolyFillType.pftNegative,y.PolyFillType.pftNegative),0<e.length&&e.splice(0,1)}}},y.ClipperOffset.prototype.OffsetPoint=function(t,e,n){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,5e-5>this.m_sinA&&-5e-5<this.m_sinA)return e;if(1<this.m_sinA?this.m_sinA=1:-1>this.m_sinA&&(this.m_sinA=-1),0>this.m_sinA*this.m_delta)this.m_destPoly.push(new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),y.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new y.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),y.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(n){case y.JoinType.jtMiter:n=1+(this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y),n>=this.m_miterLim?this.DoMiter(t,e,n):this.DoSquare(t,e);break;case y.JoinType.jtSquare:this.DoSquare(t,e);break;case y.JoinType.jtRound:this.DoRound(t,e)}return t},y.ClipperOffset.prototype.DoSquare=function(t,e){var n=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*n)),y.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*n)))),this.m_destPoly.push(new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*n)),y.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*n))))},y.ClipperOffset.prototype.DoMiter=function(t,e,n){n=this.m_delta/n,this.m_destPoly.push(new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*n),y.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*n)))},y.ClipperOffset.prototype.DoRound=function(t,e){for(var n,o=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),o=y.Cast_Int32(y.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(o))),i=this.m_normals[e].X,r=this.m_normals[e].Y,s=0;o>s;++s)this.m_destPoly.push(new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[t].X+i*this.m_delta),y.ClipperOffset.Round(this.m_srcPoly[t].Y+r*this.m_delta))),n=i,i=i*this.m_cos-this.m_sin*r,r=n*this.m_sin+r*this.m_cos;this.m_destPoly.push(new y.IntPoint(y.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),y.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},y.Error=function(t){try{throw Error(t)}catch(e){alert(e.message)}},y.JS={},y.JS.AreaOfPolygon=function(t,e){return e||(e=1),y.Clipper.Area(t)/(e*e)},y.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var n=0,o=0;o<t.length;o++)n+=y.Clipper.Area(t[o]);return n/(e*e)},y.JS.BoundsOfPath=function(t,e){return y.JS.BoundsOfPaths([t],e)},y.JS.BoundsOfPaths=function(t,e){e||(e=1);var n=y.Clipper.GetBounds(t);return n.left/=e,n.bottom/=e,n.right/=e,n.top/=e,n},y.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var n=t[0]instanceof Array;if(t=y.JS.Clone(t),"number"!=typeof e||null===e)return y.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||0>e)return t;n||(t=[t]);for(var o,i,r,s,a,l,p,u=t.length,h=[],d=0;u>d;d++)if(i=t[d],o=i.length,0!==o)if(3>o)r=i,h.push(r);else{for(r=i,s=e*e,a=i[0],p=l=1;o>p;p++)(i[p].X-a.X)*(i[p].X-a.X)+(i[p].Y-a.Y)*(i[p].Y-a.Y)<=s||(r[l]=i[p],a=i[p],l++);a=i[l-1],(i[0].X-a.X)*(i[0].X-a.X)+(i[0].Y-a.Y)*(i[0].Y-a.Y)<=s&&l--,o>l&&r.splice(l,o-l),r.length&&h.push(r)}return!n&&h.length?h=h[0]:n||0!==h.length?n&&0===h.length&&(h=[[]]):h=[],h},y.JS.Clone=function(t){if(!(t instanceof Array)||0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var n,o,i,r,s=t.length,a=Array(s);for(o=0;s>o;o++){for(n=t[o].length,r=Array(n),i=0;n>i;i++)r[i]={X:t[o][i].X,Y:t[o][i].Y};a[o]=r}return e||(a=a[0]),a},y.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return y.Error("Tolerance is not a number in Lighten()."),y.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||0>e)return y.JS.Clone(t);t[0]instanceof Array||(t=[t]);var n,o,i,r,s,a,l,p,u,h,d,c,g,f,m,v=t.length,x=e*e,E=[];for(n=0;v>n;n++)if(i=t[n],a=i.length,0!=a){for(r=0;1e6>r;r++){for(s=[],a=i.length,i[a-1].X!=i[0].X||i[a-1].Y!=i[0].Y?(d=1,i.push({X:i[0].X,Y:i[0].Y}),a=i.length):d=0,h=[],o=0;a-2>o;o++)l=i[o],u=i[o+1],p=i[o+2],f=l.X,m=l.Y,l=p.X-f,c=p.Y-m,(0!==l||0!==c)&&(g=((u.X-f)*l+(u.Y-m)*c)/(l*l+c*c),g>1?(f=p.X,m=p.Y):g>0&&(f+=l*g,m+=c*g)),l=u.X-f,c=u.Y-m,p=l*l+c*c,x>=p&&(h[o+1]=1,o++);for(s.push({X:i[0].X,Y:i[0].Y}),o=1;a-1>o;o++)h[o]||s.push({X:i[o].X,Y:i[o].Y});if(s.push({X:i[a-1].X,Y:i[a-1].Y}),d&&i.pop(),!h.length)break;i=s}a=s.length,s[a-1].X==s[0].X&&s[a-1].Y==s[0].Y&&s.pop(),2<s.length&&E.push(s)}return!t[0]instanceof Array&&(E=E[0]),"undefined"==typeof E&&(E=[[]]),E},y.JS.PerimeterOfPath=function(t,e,n){if("undefined"==typeof t)return 0;var o,i,r=Math.sqrt,s=0,a=0,l=o=0;i=0;var p=t.length;if(2>p)return 0;for(e&&(t[p]=t[0],p++);--p;)o=t[p],a=o.X,o=o.Y,i=t[p-1],l=i.X,i=i.Y,s+=r((a-l)*(a-l)+(o-i)*(o-i));return e&&t.pop(),s/n},y.JS.PerimeterOfPaths=function(t,e,n){n||(n=1);for(var o=0,i=0;i<t.length;i++)o+=y.JS.PerimeterOfPath(t[i],e,n);return o},y.JS.ScaleDownPath=function(t,e){var n,o;for(e||(e=1),n=t.length;n--;)o=t[n],o.X/=e,o.Y/=e},y.JS.ScaleDownPaths=function(t,e){var n,o,i;for(e||(e=1),n=t.length;n--;)for(o=t[n].length;o--;)i=t[n][o],i.X/=e,i.Y/=e},y.JS.ScaleUpPath=function(t,e){var n,o,i=Math.round;for(e||(e=1),n=t.length;n--;)o=t[n],o.X=i(o.X*e),o.Y=i(o.Y*e)},y.JS.ScaleUpPaths=function(t,e){var n,o,i,r=Math.round;for(e||(e=1),n=t.length;n--;)for(o=t[n].length;o--;)i=t[n][o],i.X=r(i.X*e),i.Y=r(i.Y*e)},y.ExPolygons=function(){return[]},y.ExPolygon=function(){this.holes=this.outer=null},y.JS.AddOuterPolyNodeToExPolygons=function(t,e){var n=new y.ExPolygon;n.outer=t.Contour();var o=t.Childs(),i=o.length;n.holes=Array(i);var r,s,a,l,p;for(s=0;i>s;s++)for(r=o[s],n.holes[s]=r.Contour(),a=0,l=r.Childs(),p=l.length;p>a;a++)r=l[a],y.JS.AddOuterPolyNodeToExPolygons(r,e);e.push(n)},y.JS.ExPolygonsToPaths=function(t){var e,n,o,i,r=new y.Paths;for(e=0,o=t.length;o>e;e++)for(r.push(t[e].outer),n=0,i=t[e].holes.length;i>n;n++)r.push(t[e].holes[n]);return r},y.JS.PolyTreeToExPolygons=function(t){var e,n,o,i=new y.ExPolygons;for(e=0,n=t.Childs(),o=n.length;o>e;e++)t=n[e],y.JS.AddOuterPolyNodeToExPolygons(t,i);return i}}(),/********************************************************************************
 *                                                                              *
 * Author    :  Angus Johnson                                                   *
 * Version   :  6.1.3a                                                          *
 * Date      :  22 January 2014                                                 *
 * Website   :  http://www.angusj.com                                           *
 * Copyright :  Angus Johnson 2010-2014                                         *
 *                                                                              *
 * License:                                                                     *
 * Use, modification & distribution is subject to Boost Software License Ver 1. *
 * http://www.boost.org/LICENSE_1_0.txt                                         *
 *                                                                              *
 * Attributions:                                                                *
 * The code in this library is an extension of Bala Vatti's clipping algorithm: *
 * "A generic solution to polygon clipping"                                     *
 * Communications of the ACM, Vol 35, Issue 7 (July 1992) pp 56-63.             *
 * http://portal.acm.org/citation.cfm?id=129906                                 *
 *                                                                              *
 * Computer graphics and geometric modeling: implementation and algorithms      *
 * By Max K. Agoston                                                            *
 * Springer; 1 edition (January 4, 2005)                                        *
 * http://books.google.com/books?q=vatti+clipping+agoston                       *
 *                                                                              *
 * See also:                                                                    *
 * "Polygon Offsetting by Computing Winding Numbers"                            *
 * Paper no. DETC2005-85513 pp. 565-575                                         *
 * ASME 2005 International Design Engineering Technical Conferences             *
 * and Computers and Information in Engineering Conference (IDETC/CIE2005)      *
 * September 24-28, 2005 , Long Beach, California, USA                          *
 * http://www.me.berkeley.edu/~mcmains/pubs/DAC05OffsetPolygon.pdf              *
 *                                                                              *
 *******************************************************************************/
/*******************************************************************************
 *                                                                              *
 * Basic JavaScript BN library - subset useful for RSA encryption.              *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/                               *
 * Copyright (c) 2005  Tom Wu                                                   *
 * All Rights Reserved.                                                         *
 * See "LICENSE" for details:                                                   *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/LICENSE                        *
 *                                                                              *
 *******************************************************************************/
function(){"use strict";function t(t,e,n){nn.biginteger_used=1,null!=t&&("number"==typeof t&&"undefined"==typeof e?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function e(){return new t(null)}function n(t,e,n,o,i,r){for(;--r>=0;){var s=e*this[t++]+n[o]+i;i=Math.floor(s/67108864),n[o++]=67108863&s}return i}function o(t,e,n,o,i,r){for(var s=32767&e,a=e>>15;--r>=0;){var l=32767&this[t],p=this[t++]>>15,u=a*l+p*s;l=s*l+((32767&u)<<15)+n[o]+(1073741823&i),i=(l>>>30)+(u>>>15)+a*p+(i>>>30),n[o++]=1073741823&l}return i}function i(t,e,n,o,i,r){for(var s=16383&e,a=e>>14;--r>=0;){var l=16383&this[t],p=this[t++]>>14,u=a*l+p*s;l=s*l+((16383&u)<<14)+n[o]+i,i=(l>>28)+(u>>14)+a*p,n[o++]=268435455&l}return i}function r(t){return gn.charAt(t)}function s(t,e){var n=fn[t.charCodeAt(e)];return null==n?-1:n}function a(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function l(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0}function p(t){var n=e();return n.fromInt(t),n}function u(e,n){var o;if(16==n)o=4;else if(8==n)o=3;else if(256==n)o=8;else if(2==n)o=1;else if(32==n)o=5;else{if(4!=n)return void this.fromRadix(e,n);o=2}this.t=0,this.s=0;for(var i=e.length,r=!1,a=0;--i>=0;){var l=8==o?255&e[i]:s(e,i);0>l?"-"==e.charAt(i)&&(r=!0):(r=!1,0==a?this[this.t++]=l:a+o>this.DB?(this[this.t-1]|=(l&(1<<this.DB-a)-1)<<a,this[this.t++]=l>>this.DB-a):this[this.t-1]|=l<<a,a+=o,a>=this.DB&&(a-=this.DB))}8==o&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),r&&t.ZERO.subTo(this,this)}function h(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function d(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,o=(1<<e)-1,i=!1,s="",a=this.t,l=this.DB-a*this.DB%e;if(a-->0)for(l<this.DB&&(n=this[a]>>l)>0&&(i=!0,s=r(n));a>=0;)e>l?(n=(this[a]&(1<<l)-1)<<e-l,n|=this[--a]>>(l+=this.DB-e)):(n=this[a]>>(l-=e)&o,0>=l&&(l+=this.DB,--a)),n>0&&(i=!0),i&&(s+=r(n));return i?s:"0"}function c(){var n=e();return t.ZERO.subTo(this,n),n}function g(){return this.s<0?this.negate():this}function f(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(e=n-t.t,0!=e)return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0}function m(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function y(){return this.t<=0?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)}function v(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function x(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function E(t,e){var n,o=t%this.DB,i=this.DB-o,r=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<o&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>i|a,a=(this[n]&r)<<o;for(n=s-1;n>=0;--n)e[n]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function P(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)return void(e.t=0);var o=t%this.DB,i=this.DB-o,r=(1<<o)-1;e[0]=this[n]>>o;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&r)<<i,e[s-n]=this[s]>>o;o>0&&(e[this.t-n-1]|=(this.s&r)<<i),e.t=this.t-n,e.clamp()}function j(t,e){for(var n=0,o=0,i=Math.min(t.t,this.t);i>n;)o+=this[n]-t[n],e[n++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o-=t.s;n<this.t;)o+=this[n],e[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<t.t;)o-=t[n],e[n++]=o&this.DM,o>>=this.DB;o-=t.s}e.s=0>o?-1:0,-1>o?e[n++]=this.DV+o:o>0&&(e[n++]=o),e.t=n,e.clamp()}function I(e,n){var o=this.abs(),i=e.abs(),r=o.t;for(n.t=r+i.t;--r>=0;)n[r]=0;for(r=0;r<i.t;++r)n[r+o.t]=o.am(0,i[r],n,r,0,o.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)}function C(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var o=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,o,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function L(n,o,i){var r=n.abs();if(!(r.t<=0)){var s=this.abs();if(s.t<r.t)return null!=o&&o.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=e());var a=e(),l=this.s,p=n.s,u=this.DB-m(r[r.t-1]);u>0?(r.lShiftTo(u,a),s.lShiftTo(u,i)):(r.copyTo(a),s.copyTo(i));var h=a.t,d=a[h-1];if(0!=d){var c=d*(1<<this.F1)+(h>1?a[h-2]>>this.F2:0),g=this.FV/c,f=(1<<this.F1)/c,y=1<<this.F2,v=i.t,x=v-h,E=null==o?e():o;for(a.dlShiftTo(x,E),i.compareTo(E)>=0&&(i[i.t++]=1,i.subTo(E,i)),t.ONE.dlShiftTo(h,E),E.subTo(a,a);a.t<h;)a[a.t++]=0;for(;--x>=0;){var P=i[--v]==d?this.DM:Math.floor(i[v]*g+(i[v-1]+y)*f);if((i[v]+=a.am(0,P,i,x,0,h))<P)for(a.dlShiftTo(x,E),i.subTo(E,i);i[v]<--P;)i.subTo(E,i)}null!=o&&(i.drShiftTo(h,o),l!=p&&t.ZERO.subTo(o,o)),i.t=h,i.clamp(),u>0&&i.rShiftTo(u,i),0>l&&t.ZERO.subTo(i,i)}}}function S(n){var o=e();return this.abs().divRemTo(n,null,o),this.s<0&&o.compareTo(t.ZERO)>0&&n.subTo(o,o),o}function b(t){this.m=t}function N(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function T(t){return t}function O(t){t.divRemTo(this.m,null,t)}function A(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function w(t,e){t.squareTo(e),this.reduce(e)}function _(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function R(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function D(n){var o=e();return n.abs().dlShiftTo(this.m.t,o),o.divRemTo(this.m,null,o),n.s<0&&o.compareTo(t.ZERO)>0&&this.m.subTo(o,o),o}function M(t){var n=e();return t.copyTo(n),this.reduce(n),n}function B(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],o=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,o,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function F(t,e){t.squareTo(e),this.reduce(e)}function X(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function Y(){return 0==(this.t>0?1&this[0]:this.s)}function G(n,o){if(n>4294967295||1>n)return t.ONE;var i=e(),r=e(),s=o.convert(this),a=m(n)-1;for(s.copyTo(i);--a>=0;)if(o.sqrTo(i,r),(n&1<<a)>0)o.mulTo(r,s,i);else{var l=i;i=r,r=l}return o.revert(i)}function q(t,e){var n;return n=256>t||e.isEven()?new b(e):new R(e),this.exp(t,n)}// Copyright (c) 2005-2009  Tom Wu
function k(){var t=e();return this.copyTo(t),t}function V(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function H(){return 0==this.t?this.s:this[0]<<24>>24}function W(){return 0==this.t?this.s:this[0]<<16>>16}function U(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function z(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function J(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var n=this.chunkSize(t),o=Math.pow(t,n),i=p(o),r=e(),s=e(),a="";for(this.divRemTo(i,r,s);r.signum()>0;)a=(o+s.intValue()).toString(t).substr(1)+a,r.divRemTo(i,r,s);return s.intValue().toString(t)+a}function Q(e,n){this.fromInt(0),null==n&&(n=10);for(var o=this.chunkSize(n),i=Math.pow(n,o),r=!1,a=0,l=0,p=0;p<e.length;++p){var u=s(e,p);0>u?"-"==e.charAt(p)&&0==this.signum()&&(r=!0):(l=n*l+u,++a>=o&&(this.dMultiply(i),this.dAddOffset(l,0),a=0,l=0))}a>0&&(this.dMultiply(Math.pow(n,a)),this.dAddOffset(l,0)),r&&t.ZERO.subTo(this,this)}function K(e,n,o){if("number"==typeof n)if(2>e)this.fromInt(1);else for(this.fromNumber(e,o),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),re,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var i=new Array,r=7&e;i.length=(e>>3)+1,n.nextBytes(i),r>0?i[0]&=(1<<r)-1:i[0]=0,this.fromString(i,256)}}function $(){var t=this.t,e=new Array;e[0]=this.s;var n,o=this.DB-t*this.DB%8,i=0;if(t-->0)for(o<this.DB&&(n=this[t]>>o)!=(this.s&this.DM)>>o&&(e[i++]=n|this.s<<this.DB-o);t>=0;)8>o?(n=(this[t]&(1<<o)-1)<<8-o,n|=this[--t]>>(o+=this.DB-8)):(n=this[t]>>(o-=8)&255,0>=o&&(o+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function Z(t){return 0==this.compareTo(t)}function te(t){return this.compareTo(t)<0?this:t}function ee(t){return this.compareTo(t)>0?this:t}function ne(t,e,n){var o,i,r=Math.min(t.t,this.t);for(o=0;r>o;++o)n[o]=e(this[o],t[o]);if(t.t<this.t){for(i=t.s&this.DM,o=r;o<this.t;++o)n[o]=e(this[o],i);n.t=this.t}else{for(i=this.s&this.DM,o=r;o<t.t;++o)n[o]=e(i,t[o]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function oe(t,e){return t&e}function ie(t){var n=e();return this.bitwiseTo(t,oe,n),n}function re(t,e){return t|e}function se(t){var n=e();return this.bitwiseTo(t,re,n),n}function ae(t,e){return t^e}function le(t){var n=e();return this.bitwiseTo(t,ae,n),n}function pe(t,e){return t&~e}function ue(t){var n=e();return this.bitwiseTo(t,pe,n),n}function he(){for(var t=e(),n=0;n<this.t;++n)t[n]=this.DM&~this[n];return t.t=this.t,t.s=~this.s,t}function de(t){var n=e();return 0>t?this.rShiftTo(-t,n):this.lShiftTo(t,n),n}function ce(t){var n=e();return 0>t?this.lShiftTo(-t,n):this.rShiftTo(t,n),n}function ge(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function fe(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+ge(this[t]);return this.s<0?this.t*this.DB:-1}function me(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function ye(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=me(this[n]^e);return t}function ve(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function xe(e,n){var o=t.ONE.shiftLeft(e);return this.bitwiseTo(o,n,o),o}function Ee(t){return this.changeBit(t,re)}function Pe(t){return this.changeBit(t,pe)}function je(t){return this.changeBit(t,ae)}function Ie(t,e){for(var n=0,o=0,i=Math.min(t.t,this.t);i>n;)o+=this[n]+t[n],e[n++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o+=t.s;n<this.t;)o+=this[n],e[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<t.t;)o+=t[n],e[n++]=o&this.DM,o>>=this.DB;o+=t.s}e.s=0>o?-1:0,o>0?e[n++]=o:-1>o&&(e[n++]=this.DV+o),e.t=n,e.clamp()}function Ce(t){var n=e();return this.addTo(t,n),n}function Le(t){var n=e();return this.subTo(t,n),n}function Se(t){var n=e();return this.multiplyTo(t,n),n}function be(){var t=e();return this.squareTo(t),t}function Ne(t){var n=e();return this.divRemTo(t,n,null),n}function Te(t){var n=e();return this.divRemTo(t,null,n),n}function Oe(t){var n=e(),o=e();return this.divRemTo(t,n,o),new Array(n,o)}function Ae(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function we(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function _e(){}function Re(t){return t}function De(t,e,n){t.multiplyTo(e,n)}function Me(t,e){t.squareTo(e)}function Be(t){return this.exp(t,new _e)}function Fe(t,e,n){var o=Math.min(this.t+t.t,e);for(n.s=0,n.t=o;o>0;)n[--o]=0;var i;for(i=n.t-this.t;i>o;++o)n[o+this.t]=this.am(0,t[o],n,o,0,this.t);for(i=Math.min(t.t,e);i>o;++o)this.am(0,t[o],n,o,0,e-o);n.clamp()}function Xe(t,e,n){--e;var o=n.t=this.t+t.t-e;for(n.s=0;--o>=0;)n[o]=0;for(o=Math.max(e-this.t,0);o<t.t;++o)n[this.t+o-e]=this.am(e-o,t[o],n,0,0,this.t+o-e);n.clamp(),n.drShiftTo(1,n)}function Ye(n){this.r2=e(),this.q3=e(),t.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n),this.m=n}function Ge(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var n=e();return t.copyTo(n),this.reduce(n),n}function qe(t){return t}function ke(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Ve(t,e){t.squareTo(e),this.reduce(e)}function He(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function We(t,n){var o,i,r=t.bitLength(),s=p(1);if(0>=r)return s;o=18>r?1:48>r?3:144>r?4:768>r?5:6,i=8>r?new b(n):n.isEven()?new Ye(n):new R(n);var a=new Array,l=3,u=o-1,h=(1<<o)-1;if(a[1]=i.convert(this),o>1){var d=e();for(i.sqrTo(a[1],d);h>=l;)a[l]=e(),i.mulTo(d,a[l-2],a[l]),l+=2}var c,g,f=t.t-1,y=!0,v=e();for(r=m(t[f])-1;f>=0;){for(r>=u?c=t[f]>>r-u&h:(c=(t[f]&(1<<r+1)-1)<<u-r,f>0&&(c|=t[f-1]>>this.DB+r-u)),l=o;0==(1&c);)c>>=1,--l;if((r-=l)<0&&(r+=this.DB,--f),y)a[c].copyTo(s),y=!1;else{for(;l>1;)i.sqrTo(s,v),i.sqrTo(v,s),l-=2;l>0?i.sqrTo(s,v):(g=s,s=v,v=g),i.mulTo(v,a[c],s)}for(;f>=0&&0==(t[f]&1<<r);)i.sqrTo(s,v),g=s,s=v,v=g,--r<0&&(r=this.DB-1,--f)}return i.revert(s)}function Ue(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var o=e;e=n,n=o}var i=e.getLowestSetBit(),r=n.getLowestSetBit();if(0>r)return e;for(r>i&&(r=i),r>0&&(e.rShiftTo(r,e),n.rShiftTo(r,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return r>0&&n.lShiftTo(r,n),n}function ze(t){if(0>=t)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var o=this.t-1;o>=0;--o)n=(e*n+this[o])%t;return n}function Je(e){var n=e.isEven();if(this.isEven()&&n||0==e.signum())return t.ZERO;for(var o=e.clone(),i=this.clone(),r=p(1),s=p(0),a=p(0),l=p(1);0!=o.signum();){for(;o.isEven();)o.rShiftTo(1,o),n?(r.isEven()&&s.isEven()||(r.addTo(this,r),s.subTo(e,s)),r.rShiftTo(1,r)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),n?(a.isEven()&&l.isEven()||(a.addTo(this,a),l.subTo(e,l)),a.rShiftTo(1,a)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);o.compareTo(i)>=0?(o.subTo(i,o),n&&r.subTo(a,r),s.subTo(l,s)):(i.subTo(o,i),n&&a.subTo(r,a),l.subTo(s,l))}return 0!=i.compareTo(t.ONE)?t.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l}function Qe(t){var e,n=this.abs();if(1==n.t&&n[0]<=mn[mn.length-1]){for(e=0;e<mn.length;++e)if(n[0]==mn[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<mn.length;){for(var o=mn[e],i=e+1;i<mn.length&&yn>o;)o*=mn[i++];for(o=n.modInt(o);i>e;)if(o%mn[e++]==0)return!1}return n.millerRabin(t)}function Ke(n){var o=this.subtract(t.ONE),i=o.getLowestSetBit();if(0>=i)return!1;var r=o.shiftRight(i);n=n+1>>1,n>mn.length&&(n=mn.length);for(var s=e(),a=0;n>a;++a){s.fromInt(mn[Math.floor(Math.random()*mn.length)]);var l=s.modPow(r,this);if(0!=l.compareTo(t.ONE)&&0!=l.compareTo(o)){for(var p=1;p++<i&&0!=l.compareTo(o);)if(l=l.modPowInt(2,this),0==l.compareTo(t.ONE))return!1;if(0!=l.compareTo(o))return!1}}return!0}var $e=!1,Ze=!1,tn=!0,en=!1,nn={},on=!1;"undefined"!=typeof module&&module.exports?(module.exports=nn,on=!0):"undefined"!=typeof document?window.ClipperLib=nn:self.ClipperLib=nn;var rn;if(on){var sn="chrome";rn="Netscape"}else{var sn=navigator.userAgent.toString().toLowerCase();rn=navigator.appName}var an={};an.chrome=-1!=sn.indexOf("chrome")&&-1==sn.indexOf("chromium")?1:0,an.chromium=-1!=sn.indexOf("chromium")?1:0,an.safari=-1!=sn.indexOf("safari")&&-1==sn.indexOf("chrome")&&-1==sn.indexOf("chromium")?1:0,an.firefox=-1!=sn.indexOf("firefox")?1:0,an.firefox17=-1!=sn.indexOf("firefox/17")?1:0,an.firefox15=-1!=sn.indexOf("firefox/15")?1:0,an.firefox3=-1!=sn.indexOf("firefox/3")?1:0,an.opera=-1!=sn.indexOf("opera")?1:0,an.msie10=-1!=sn.indexOf("msie 10")?1:0,an.msie9=-1!=sn.indexOf("msie 9")?1:0,an.msie8=-1!=sn.indexOf("msie 8")?1:0,an.msie7=-1!=sn.indexOf("msie 7")?1:0,an.msie=-1!=sn.indexOf("msie ")?1:0,nn.biginteger_used=null;// Copyright (c) 2005  Tom Wu
var ln,pn=0xdeadbeefcafe,un=15715070==(16777215&pn);un&&"Microsoft Internet Explorer"==rn?(t.prototype.am=o,ln=30):un&&"Netscape"!=rn?(t.prototype.am=n,ln=26):(t.prototype.am=i,ln=28),t.prototype.DB=ln,t.prototype.DM=(1<<ln)-1,t.prototype.DV=1<<ln;var hn=52;t.prototype.FV=Math.pow(2,hn),t.prototype.F1=hn-ln,t.prototype.F2=2*ln-hn;var dn,cn,gn="0123456789abcdefghijklmnopqrstuvwxyz",fn=new Array;for(dn="0".charCodeAt(0),cn=0;9>=cn;++cn)fn[dn++]=cn;for(dn="a".charCodeAt(0),cn=10;36>cn;++cn)fn[dn++]=cn;for(dn="A".charCodeAt(0),cn=10;36>cn;++cn)fn[dn++]=cn;b.prototype.convert=N,b.prototype.revert=T,b.prototype.reduce=O,b.prototype.mulTo=A,b.prototype.sqrTo=w,R.prototype.convert=D,R.prototype.revert=M,R.prototype.reduce=B,R.prototype.mulTo=X,R.prototype.sqrTo=F,t.prototype.copyTo=a,t.prototype.fromInt=l,t.prototype.fromString=u,t.prototype.clamp=h,t.prototype.dlShiftTo=v,t.prototype.drShiftTo=x,t.prototype.lShiftTo=E,t.prototype.rShiftTo=P,t.prototype.subTo=j,t.prototype.multiplyTo=I,t.prototype.squareTo=C,t.prototype.divRemTo=L,t.prototype.invDigit=_,t.prototype.isEven=Y,t.prototype.exp=G,t.prototype.toString=d,t.prototype.negate=c,t.prototype.abs=g,t.prototype.compareTo=f,t.prototype.bitLength=y,t.prototype.mod=S,t.prototype.modPowInt=q,t.ZERO=p(0),t.ONE=p(1),_e.prototype.convert=Re,_e.prototype.revert=Re,_e.prototype.mulTo=De,_e.prototype.sqrTo=Me,Ye.prototype.convert=Ge,Ye.prototype.revert=qe,Ye.prototype.reduce=ke,Ye.prototype.mulTo=He,Ye.prototype.sqrTo=Ve;var mn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],yn=(1<<26)/mn[mn.length-1];t.prototype.chunkSize=U,t.prototype.toRadix=J,t.prototype.fromRadix=Q,t.prototype.fromNumber=K,t.prototype.bitwiseTo=ne,t.prototype.changeBit=xe,t.prototype.addTo=Ie,t.prototype.dMultiply=Ae,t.prototype.dAddOffset=we,t.prototype.multiplyLowerTo=Fe,t.prototype.multiplyUpperTo=Xe,t.prototype.modInt=ze,t.prototype.millerRabin=Ke,t.prototype.clone=k,t.prototype.intValue=V,t.prototype.byteValue=H,t.prototype.shortValue=W,t.prototype.signum=z,t.prototype.toByteArray=$,t.prototype.equals=Z,t.prototype.min=te,t.prototype.max=ee,t.prototype.and=ie,t.prototype.or=se,t.prototype.xor=le,t.prototype.andNot=ue,t.prototype.not=he,t.prototype.shiftLeft=de,t.prototype.shiftRight=ce,t.prototype.getLowestSetBit=fe,t.prototype.bitCount=ye,t.prototype.testBit=ve,t.prototype.setBit=Ee,t.prototype.clearBit=Pe,t.prototype.flipBit=je,t.prototype.add=Ce,t.prototype.subtract=Le,t.prototype.multiply=Se,t.prototype.divide=Ne,t.prototype.remainder=Te,t.prototype.divideAndRemainder=Oe,t.prototype.modPow=We,t.prototype.modInverse=Je,t.prototype.pow=Be,t.prototype.gcd=Ue,t.prototype.isProbablePrime=Qe,t.prototype.square=be;var vn=t;if(vn.prototype.IsNegative=function(){return-1==this.compareTo(vn.ZERO)?!0:!1},vn.op_Equality=function(t,e){return 0==t.compareTo(e)?!0:!1},vn.op_Inequality=function(t,e){return 0!=t.compareTo(e)?!0:!1},vn.op_GreaterThan=function(t,e){return t.compareTo(e)>0?!0:!1},vn.op_LessThan=function(t,e){return t.compareTo(e)<0?!0:!1},vn.op_Addition=function(t,e){return new vn(t).add(new vn(e))},vn.op_Subtraction=function(t,e){return new vn(t).subtract(new vn(e))},vn.Int128Mul=function(t,e){return new vn(t).multiply(new vn(e))},vn.op_Division=function(t,e){return t.divide(e)},vn.prototype.ToDouble=function(){return parseFloat(this.toString())},"undefined"==typeof xn)var xn=function(t,e){var n;if("undefined"==typeof Object.getOwnPropertyNames){for(n in e.prototype)("undefined"==typeof t.prototype[n]||t.prototype[n]==Object.prototype[n])&&(t.prototype[n]=e.prototype[n]);for(n in e)"undefined"==typeof t[n]&&(t[n]=e[n]);t.$baseCtor=e}else{for(var o=Object.getOwnPropertyNames(e.prototype),i=0;i<o.length;i++)"undefined"==typeof Object.getOwnPropertyDescriptor(t.prototype,o[i])&&Object.defineProperty(t.prototype,o[i],Object.getOwnPropertyDescriptor(e.prototype,o[i]));for(n in e)"undefined"==typeof t[n]&&(t[n]=e[n]);t.$baseCtor=e}};nn.Path=function(){return[]},nn.Paths=function(){return[]},nn.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},nn.DoublePoint0=function(){this.X=0,this.Y=0},nn.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},nn.DoublePoint2=function(t,e){this.X=t,this.Y=e},nn.PolyNode=function(){this.m_Parent=null,this.m_polygon=new nn.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},nn.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},nn.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},nn.PolyNode.prototype.Contour=function(){return this.m_polygon},nn.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},nn.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},nn.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},nn.PolyNode.prototype.Childs=function(){return this.m_Childs},nn.PolyNode.prototype.Parent=function(){return this.m_Parent},nn.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},nn.PolyTree=function(){this.m_AllPolys=[],nn.PolyNode.call(this)},nn.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;e>t;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},nn.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},nn.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},xn(nn.PolyTree,nn.PolyNode),nn.Math_Abs_Int64=nn.Math_Abs_Int32=nn.Math_Abs_Double=function(t){return Math.abs(t)},nn.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},nn.Cast_Int32=an.msie||an.opera||an.safari?function(t){return 0|t}:function(t){return~~t},nn.Cast_Int64=an.chrome?function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):~~t}:an.firefox&&"function"==typeof Number.toInteger?function(t){return Number.toInteger(t)}:an.msie7||an.msie8?function(t){return parseInt(t,10)}:an.msie?function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):0|t}:function(t){return 0>t?Math.ceil(t):Math.floor(t)},nn.Clear=function(t){t.length=0},nn.PI=3.141592653589793,nn.PI2=6.283185307179586,nn.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,Ze)if(this.Z=0,3==e)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(2==e)this.X=t[0],this.Y=t[1],this.Z=0;else if(1==e)if(t[0]instanceof nn.DoublePoint){var n=t[0];this.X=nn.Clipper.Round(n.X),this.Y=nn.Clipper.Round(n.Y),this.Z=0}else{var o=t[0];"undefined"==typeof o.Z&&(o.Z=0),this.X=o.X,this.Y=o.Y,this.Z=o.Z}else this.X=0,this.Y=0,this.Z=0;else if(2==e)this.X=t[0],this.Y=t[1];else if(1==e)if(t[0]instanceof nn.DoublePoint){var n=t[0];this.X=nn.Clipper.Round(n.X),this.Y=nn.Clipper.Round(n.Y)}else{var o=t[0];this.X=o.X,this.Y=o.Y}else this.X=0,this.Y=0},nn.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},nn.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},Ze?(nn.IntPoint0=function(){this.X=0,this.Y=0,this.Z=0},nn.IntPoint1=function(t){this.X=t.X,this.Y=t.Y,this.Z=t.Z},nn.IntPoint1dp=function(t){this.X=nn.Clipper.Round(t.X),this.Y=nn.Clipper.Round(t.Y),this.Z=0},nn.IntPoint2=function(t,e){this.X=t,this.Y=e,this.Z=0},nn.IntPoint3=function(t,e,n){this.X=t,this.Y=e,this.Z=n}):(nn.IntPoint0=function(){this.X=0,this.Y=0},nn.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},nn.IntPoint1dp=function(t){this.X=nn.Clipper.Round(t.X),this.Y=nn.Clipper.Round(t.Y)},nn.IntPoint2=function(t,e){this.X=t,this.Y=e}),nn.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},nn.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},nn.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},nn.IntRect4=function(t,e,n,o){this.left=t,this.top=e,this.right=n,this.bottom=o},nn.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},nn.PolyType={ptSubject:0,ptClip:1},nn.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},nn.JoinType={jtSquare:0,jtRound:1,jtMiter:2},nn.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},en&&(nn.EndType_={etSquare:0,etRound:1,etButt:2,etClosed:3}),nn.EdgeSide={esLeft:0,esRight:1},nn.Direction={dRightToLeft:0,dLeftToRight:1},nn.TEdge=function(){this.Bot=new nn.IntPoint,this.Curr=new nn.IntPoint,this.Top=new nn.IntPoint,this.Delta=new nn.IntPoint,this.Dx=0,this.PolyTyp=nn.PolyType.ptSubject,this.Side=nn.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},nn.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new nn.IntPoint},nn.MyIntersectNodeSort=function(){},nn.MyIntersectNodeSort.Compare=function(t,e){return e.Pt.Y-t.Pt.Y},nn.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},nn.Scanbeam=function(){this.Y=0,this.Next=null},nn.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},nn.OutPt=function(){this.Idx=0,this.Pt=new nn.IntPoint,this.Next=null,this.Prev=null},nn.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new nn.IntPoint},nn.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},nn.ClipperBase.horizontal=-9007199254740992,nn.ClipperBase.Skip=-2,nn.ClipperBase.Unassigned=-1,nn.ClipperBase.tolerance=1e-20,$e?(nn.ClipperBase.loRange=46340,nn.ClipperBase.hiRange=46340):(nn.ClipperBase.loRange=47453132,nn.ClipperBase.hiRange=0xfffffffffffff),nn.ClipperBase.near_zero=function(t){return t>-nn.ClipperBase.tolerance&&t<nn.ClipperBase.tolerance},nn.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},nn.ClipperBase.prototype.PointIsVertex=function(t,e){var n=e;do{if(nn.IntPoint.op_Equality(n.Pt,t))return!0;n=n.Next}while(n!=e);return!1},nn.ClipperBase.prototype.PointOnLineSegment=function(t,e,n,o){return o?t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&vn.op_Equality(vn.Int128Mul(t.X-e.X,n.Y-e.Y),vn.Int128Mul(n.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==n.X&&t.Y==n.Y||t.X>e.X==t.X<n.X&&t.Y>e.Y==t.Y<n.Y&&(t.X-e.X)*(n.Y-e.Y)==(n.X-e.X)*(t.Y-e.Y)},nn.ClipperBase.prototype.PointOnPolygon=function(t,e,n){for(var o=e;;){if(this.PointOnLineSegment(t,o.Pt,o.Next.Pt,n))return!0;if(o=o.Next,o==e)break}return!1},nn.ClipperBase.prototype.SlopesEqual=nn.ClipperBase.SlopesEqual=function(){var t,e,n,o,i,r,s,a=arguments,l=a.length;return 3==l?(t=a[0],e=a[1],s=a[2],s?vn.op_Equality(vn.Int128Mul(t.Delta.Y,e.Delta.X),vn.Int128Mul(t.Delta.X,e.Delta.Y)):nn.Cast_Int64(t.Delta.Y*e.Delta.X)==nn.Cast_Int64(t.Delta.X*e.Delta.Y)):4==l?(n=a[0],o=a[1],i=a[2],s=a[3],s?vn.op_Equality(vn.Int128Mul(n.Y-o.Y,o.X-i.X),vn.Int128Mul(n.X-o.X,o.Y-i.Y)):nn.Cast_Int64((n.Y-o.Y)*(o.X-i.X))-nn.Cast_Int64((n.X-o.X)*(o.Y-i.Y))===0):(n=a[0],o=a[1],i=a[2],r=a[3],s=a[4],s?vn.op_Equality(vn.Int128Mul(n.Y-o.Y,i.X-r.X),vn.Int128Mul(n.X-o.X,i.Y-r.Y)):nn.Cast_Int64((n.Y-o.Y)*(i.X-r.X))-nn.Cast_Int64((n.X-o.X)*(i.Y-r.Y))===0)},nn.ClipperBase.SlopesEqual3=function(t,e,n){return n?vn.op_Equality(vn.Int128Mul(t.Delta.Y,e.Delta.X),vn.Int128Mul(t.Delta.X,e.Delta.Y)):nn.Cast_Int64(t.Delta.Y*e.Delta.X)==nn.Cast_Int64(t.Delta.X*e.Delta.Y)},nn.ClipperBase.SlopesEqual4=function(t,e,n,o){return o?vn.op_Equality(vn.Int128Mul(t.Y-e.Y,e.X-n.X),vn.Int128Mul(t.X-e.X,e.Y-n.Y)):nn.Cast_Int64((t.Y-e.Y)*(e.X-n.X))-nn.Cast_Int64((t.X-e.X)*(e.Y-n.Y))===0},nn.ClipperBase.SlopesEqual5=function(t,e,n,o,i){return i?vn.op_Equality(vn.Int128Mul(t.Y-e.Y,n.X-o.X),vn.Int128Mul(t.X-e.X,n.Y-o.Y)):nn.Cast_Int64((t.Y-e.Y)*(n.X-o.X))-nn.Cast_Int64((t.X-e.X)*(n.Y-o.Y))===0},nn.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;e>t;++t){for(var n=0,o=this.m_edges[t].length;o>n;++n)this.m_edges[t][n]=null;nn.Clear(this.m_edges[t])}nn.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},nn.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},nn.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>nn.ClipperBase.hiRange||t.Y>nn.ClipperBase.hiRange||-t.X>nn.ClipperBase.hiRange||-t.Y>nn.ClipperBase.hiRange)&&nn.Error("Coordinate outside allowed range in RangeTest()."):(t.X>nn.ClipperBase.loRange||t.Y>nn.ClipperBase.loRange||-t.X>nn.ClipperBase.loRange||-t.Y>nn.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},nn.ClipperBase.prototype.InitEdge=function(t,e,n,o){t.Next=e,t.Prev=n,t.Curr.X=o.X,t.Curr.Y=o.Y,t.OutIdx=-1},nn.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y),this.SetDx(t),t.PolyTyp=e},nn.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;nn.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||nn.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=nn.ClipperBase.horizontal&&t.Prev.Dx!=nn.ClipperBase.horizontal)break;for(;t.Prev.Dx==nn.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==nn.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},nn.ClipperBase.prototype.ProcessBound=function(t,e){var n,o,i=t,r=t;if(t.Dx==nn.ClipperBase.horizontal&&(o=e?t.Prev.Bot.X:t.Next.Bot.X,t.Bot.X!=o&&this.ReverseHorizontal(t)),r.OutIdx!=nn.ClipperBase.Skip)if(e){for(;r.Top.Y==r.Next.Bot.Y&&r.Next.OutIdx!=nn.ClipperBase.Skip;)r=r.Next;if(r.Dx==nn.ClipperBase.horizontal&&r.Next.OutIdx!=nn.ClipperBase.Skip){for(n=r;n.Prev.Dx==nn.ClipperBase.horizontal;)n=n.Prev;n.Prev.Top.X==r.Next.Top.X?e||(r=n.Prev):n.Prev.Top.X>r.Next.Top.X&&(r=n.Prev)}for(;t!=r;)t.NextInLML=t.Next,t.Dx==nn.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==nn.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),r=r.Next}else{for(;r.Top.Y==r.Prev.Bot.Y&&r.Prev.OutIdx!=nn.ClipperBase.Skip;)r=r.Prev;if(r.Dx==nn.ClipperBase.horizontal&&r.Prev.OutIdx!=nn.ClipperBase.Skip){for(n=r;n.Next.Dx==nn.ClipperBase.horizontal;)n=n.Next;n.Next.Top.X==r.Prev.Top.X?e||(r=n.Next):n.Next.Top.X>r.Prev.Top.X&&(r=n.Next)}for(;t!=r;)t.NextInLML=t.Prev,t.Dx==nn.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==nn.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),r=r.Prev}if(r.OutIdx==nn.ClipperBase.Skip){if(t=r,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=r&&t.Dx==nn.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=r&&t.Dx==nn.ClipperBase.horizontal;)t=t.Next}if(t==r)r=e?t.Next:t.Prev;else{t=e?r.Next:r.Prev;var s=new nn.LocalMinima;s.Next=null,s.Y=t.Bot.Y,s.LeftBound=null,s.RightBound=t,s.RightBound.WindDelta=0,r=this.ProcessBound(s.RightBound,e),this.InsertLocalMinima(s)}}return r},nn.ClipperBase.prototype.AddPath=function(t,e,n){tn?n||e!=nn.PolyType.ptClip||nn.Error("AddPath: Open paths must be subject."):n||nn.Error("AddPath: Open paths have been disabled.");var o=t.length-1;if(n)for(;o>0&&nn.IntPoint.op_Equality(t[o],t[0]);)--o;for(;o>0&&nn.IntPoint.op_Equality(t[o],t[o-1]);)--o;if(n&&2>o||!n&&1>o)return!1;for(var i=new Array,r=0;o>=r;r++)i.push(new nn.TEdge);var s=!0;i[1].Curr.X=t[1].X,i[1].Curr.Y=t[1].Y;var a={Value:this.m_UseFullRange};this.RangeTest(t[0],a),this.m_UseFullRange=a.Value,a.Value=this.m_UseFullRange,this.RangeTest(t[o],a),this.m_UseFullRange=a.Value,this.InitEdge(i[0],i[1],i[o],t[0]),this.InitEdge(i[o],i[0],i[o-1],t[o]);for(var r=o-1;r>=1;--r)a.Value=this.m_UseFullRange,this.RangeTest(t[r],a),this.m_UseFullRange=a.Value,this.InitEdge(i[r],i[r+1],i[r-1],t[r]);for(var l=i[0],p=l,u=l;;)if(nn.IntPoint.op_Equality(p.Curr,p.Next.Curr)){if(p==p.Next)break;p==l&&(l=p.Next),p=this.RemoveEdge(p),u=p}else{if(p.Prev==p.Next)break;if(!n||!nn.ClipperBase.SlopesEqual(p.Prev.Curr,p.Curr,p.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(p.Prev.Curr,p.Curr,p.Next.Curr)){if(p=p.Next,p==u)break}else p==l&&(l=p.Next),p=this.RemoveEdge(p),p=p.Prev,u=p}if(!n&&p==p.Next||n&&p.Prev==p.Next)return!1;n||(this.m_HasOpenPaths=!0,l.Prev.OutIdx=nn.ClipperBase.Skip);p=l;do this.InitEdge2(p,e),p=p.Next,s&&p.Curr.Y!=l.Curr.Y&&(s=!1);while(p!=l);if(s){if(n)return!1;p.Prev.OutIdx=nn.ClipperBase.Skip,p.Prev.Bot.X<p.Prev.Top.X&&this.ReverseHorizontal(p.Prev);var h=new nn.LocalMinima;for(h.Next=null,h.Y=p.Bot.Y,h.LeftBound=null,h.RightBound=p,h.RightBound.Side=nn.EdgeSide.esRight,h.RightBound.WindDelta=0;p.Next.OutIdx!=nn.ClipperBase.Skip;)p.NextInLML=p.Next,p.Bot.X!=p.Prev.Top.X&&this.ReverseHorizontal(p),p=p.Next;return this.InsertLocalMinima(h),this.m_edges.push(i),!0}this.m_edges.push(i);for(var d,c=null;p=this.FindNextLocMin(p),p!=c;){null==c&&(c=p);var h=new nn.LocalMinima;h.Next=null,h.Y=p.Bot.Y,p.Dx<p.Prev.Dx?(h.LeftBound=p.Prev,h.RightBound=p,d=!1):(h.LeftBound=p,h.RightBound=p.Prev,d=!0),h.LeftBound.Side=nn.EdgeSide.esLeft,h.RightBound.Side=nn.EdgeSide.esRight,h.LeftBound.WindDelta=n?h.LeftBound.Next==h.RightBound?-1:1:0,h.RightBound.WindDelta=-h.LeftBound.WindDelta,p=this.ProcessBound(h.LeftBound,d);var g=this.ProcessBound(h.RightBound,!d);h.LeftBound.OutIdx==nn.ClipperBase.Skip?h.LeftBound=null:h.RightBound.OutIdx==nn.ClipperBase.Skip&&(h.RightBound=null),this.InsertLocalMinima(h),d||(p=g)}return!0},nn.ClipperBase.prototype.AddPaths=function(t,e,n){for(var o=!1,i=0,r=t.length;r>i;++i)this.AddPath(t[i],e,n)&&(o=!0);return o},nn.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,n){return nn.IntPoint.op_Equality(t,n)||nn.IntPoint.op_Equality(t,e)||nn.IntPoint.op_Equality(n,e)?!1:t.X!=n.X?e.X>t.X==e.X<n.X:e.Y>t.Y==e.Y<n.Y},nn.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},nn.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,t.Dx=0===t.Delta.Y?nn.ClipperBase.horizontal:t.Delta.X/t.Delta.Y},nn.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},nn.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},nn.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e,Ze&&(e=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=e)},nn.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var e=t.LeftBound;null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=nn.EdgeSide.esLeft,e.OutIdx=nn.ClipperBase.Unassigned),e=t.RightBound,null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=nn.EdgeSide.esRight,e.OutIdx=nn.ClipperBase.Unassigned),t=t.Next}},nn.Clipper=function(t){"undefined"==typeof t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=nn.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=nn.PolyFillType.pftEvenOdd,this.m_SubjFillType=nn.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,nn.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=nn.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!==(1&t),this.StrictlySimple=0!==(2&t),this.PreserveCollinear=0!==(4&t),Ze&&(this.ZFillFunction=null)},nn.Clipper.ioReverseSolution=1,nn.Clipper.ioStrictlySimple=2,nn.Clipper.ioPreserveCollinear=4,nn.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),nn.ClipperBase.prototype.Clear.call(this))},nn.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},nn.Clipper.prototype.Reset=function(){nn.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},nn.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new nn.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var e=new nn.Scanbeam;e.Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(var n=this.m_Scanbeam;null!==n.Next&&t<=n.Next.Y;)n=n.Next;if(t==n.Y)return;var e=new nn.Scanbeam;e.Y=t,e.Next=n.Next,n.Next=e}},nn.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,n=t[1]instanceof nn.PolyTree;if(4==e&&!n){var o=t[0],i=t[1],r=t[2],s=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&nn.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,nn.Clear(i),this.m_SubjFillType=r,this.m_ClipFillType=s,this.m_ClipType=o,this.m_UsingPolyTree=!1;try{var a=this.ExecuteInternal();a&&this.BuildResult(i)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return a}if(4==e&&n){var o=t[0],l=t[1],r=t[2],s=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=r,this.m_ClipFillType=s,this.m_ClipType=o,this.m_UsingPolyTree=!0;try{var a=this.ExecuteInternal();a&&this.BuildResult2(l)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return a}if(2==e&&!n){var o=t[0],i=t[1];return this.Execute(o,i,nn.PolyFillType.pftEvenOdd,nn.PolyFillType.pftEvenOdd)}if(2==e&&n){var o=t[0],l=t[1];return this.Execute(o,l,nn.PolyFillType.pftEvenOdd,nn.PolyFillType.pftEvenOdd)}},nn.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},nn.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),nn.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(t,e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var n=0,o=this.m_PolyOuts.length;o>n;n++){var i=this.m_PolyOuts[n];null===i.Pts||i.IsOpen||(i.IsHole^this.ReverseSolution)==this.Area(i)>0&&this.ReversePolyPtLinks(i.Pts)}this.JoinCommonEdges();for(var n=0,o=this.m_PolyOuts.length;o>n;n++){var i=this.m_PolyOuts[n];null===i.Pts||i.IsOpen||this.FixupOutPolygon(i)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{nn.Clear(this.m_Joins),nn.Clear(this.m_GhostJoins)}},nn.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y,e=this.m_Scanbeam;return this.m_Scanbeam=this.m_Scanbeam.Next,e=null,t},nn.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;e>t;++t)this.DisposeOutRec(t);nn.Clear(this.m_PolyOuts)},nn.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];null!==e.Pts&&this.DisposeOutPts(e.Pts),e=null,this.m_PolyOuts[t]=null},nn.Clipper.prototype.DisposeOutPts=function(t){if(null!==t){var e=null;for(t.Prev.Next=null;null!==t;)e=t,t=t.Next,e=null}},nn.Clipper.prototype.AddJoin=function(t,e,n){var o=new nn.Join;o.OutPt1=t,o.OutPt2=e,o.OffPt.X=n.X,o.OffPt.Y=n.Y,this.m_Joins.push(o)},nn.Clipper.prototype.AddGhostJoin=function(t,e){var n=new nn.Join;n.OutPt1=t,n.OffPt.X=e.X,n.OffPt.Y=e.Y,this.m_GhostJoins.push(n)},Ze&&(nn.Clipper.prototype.SetZ=function(t,e){t.Z=0,null!==this.ZFillFunction&&(e.OutIdx<0?this.ZFillFunction(e.Bot,e.Top,t):this.ZFillFunction(e.Top,e.Bot,t))}),nn.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,n=this.m_CurrentLM.RightBound;this.PopLocalMinima();var o=null;if(null===e?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(o=this.AddOutPt(n,n.Bot))):null==n?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(o=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(n,e),this.SetWindingCount(e),n.WindCnt=e.WindCnt,n.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(o=this.AddLocalMinPoly(e,n,e.Bot)),this.InsertScanbeam(e.Top.Y)),null!=n&&(nn.ClipperBase.IsHorizontal(n)?this.AddEdgeToSEL(n):this.InsertScanbeam(n.Top.Y)),null!=e&&null!=n){if(null!==o&&nn.ClipperBase.IsHorizontal(n)&&this.m_GhostJoins.length>0&&0!==n.WindDelta)for(var i=0,r=this.m_GhostJoins.length;r>i;i++){var s=this.m_GhostJoins[i];this.HorzSegmentsOverlap(s.OutPt1.Pt,s.OffPt,n.Bot,n.Top)&&this.AddJoin(s.OutPt1,o,s.OffPt)}if(e.OutIdx>=0&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X==e.Bot.X&&e.PrevInAEL.OutIdx>=0&&nn.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var a=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(o,a,e.Top)}if(e.NextInAEL!=n){if(n.OutIdx>=0&&n.PrevInAEL.OutIdx>=0&&nn.ClipperBase.SlopesEqual(n.PrevInAEL,n,this.m_UseFullRange)&&0!==n.WindDelta&&0!==n.PrevInAEL.WindDelta){var a=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(o,a,n.Top)}var l=e.NextInAEL;if(null!==l)for(;l!=n;)this.IntersectEdges(n,l,e.Curr,!1),l=l.NextInAEL}}}},nn.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},nn.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<nn.Clipper.TopX(t,e.Top.Y):t.Top.X>nn.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},nn.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==nn.PolyType.ptSubject?this.m_SubjFillType==nn.PolyFillType.pftEvenOdd:this.m_ClipFillType==nn.PolyFillType.pftEvenOdd},nn.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==nn.PolyType.ptSubject?this.m_ClipFillType==nn.PolyFillType.pftEvenOdd:this.m_SubjFillType==nn.PolyFillType.pftEvenOdd},nn.Clipper.prototype.IsContributing=function(t){var e,n;switch(t.PolyTyp==nn.PolyType.ptSubject?(e=this.m_SubjFillType,n=this.m_ClipFillType):(e=this.m_ClipFillType,n=this.m_SubjFillType),e){case nn.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case nn.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case nn.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case nn.ClipType.ctIntersection:switch(n){case nn.PolyFillType.pftEvenOdd:case nn.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case nn.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case nn.ClipType.ctUnion:switch(n){case nn.PolyFillType.pftEvenOdd:case nn.PolyFillType.pftNonZero:return 0===t.WindCnt2;case nn.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case nn.ClipType.ctDifference:if(t.PolyTyp==nn.PolyType.ptSubject)switch(n){case nn.PolyFillType.pftEvenOdd:case nn.PolyFillType.pftNonZero:return 0===t.WindCnt2;case nn.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(n){case nn.PolyFillType.pftEvenOdd:case nn.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case nn.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case nn.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(n){case nn.PolyFillType.pftEvenOdd:case nn.PolyFillType.pftNonZero:return 0===t.WindCnt2;case nn.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},nn.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!=t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=nn.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var n=!0,o=e.PrevInAEL;null!==o;)o.PolyTyp==e.PolyTyp&&0!==o.WindDelta&&(n=!n),o=o.PrevInAEL;t.WindCnt=n?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else t.WindCnt=e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?e.WindCnt:e.WindCnt+t.WindDelta:0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?e.WindCnt:e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!=t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},nn.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},nn.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},nn.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e){var n=e.NextInAEL;null!==n&&(n.PrevInAEL=t);var o=t.PrevInAEL;null!==o&&(o.NextInAEL=e),e.PrevInAEL=o,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=n}else if(e.NextInAEL==t){var n=t.NextInAEL;null!==n&&(n.PrevInAEL=e);var o=e.PrevInAEL;null!==o&&(o.NextInAEL=t),t.PrevInAEL=o,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=n}else{var n=t.NextInAEL,o=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=n,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=o,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},nn.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e){var n=e.NextInSEL;null!==n&&(n.PrevInSEL=t);var o=t.PrevInSEL;null!==o&&(o.NextInSEL=e),e.PrevInSEL=o,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=n}else if(e.NextInSEL==t){var n=t.NextInSEL;null!==n&&(n.PrevInSEL=e);var o=e.PrevInSEL;null!==o&&(o.NextInSEL=t),t.PrevInSEL=o,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=n}else{var n=t.NextInSEL,o=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=n,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=o,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},nn.Clipper.prototype.AddLocalMaxPoly=function(t,e,n){this.AddOutPt(t,n),0==e.WindDelta&&this.AddOutPt(e,n),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)
},nn.Clipper.prototype.AddLocalMinPoly=function(t,e,n){var o,i,r;if(nn.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(o=this.AddOutPt(t,n),e.OutIdx=t.OutIdx,t.Side=nn.EdgeSide.esLeft,e.Side=nn.EdgeSide.esRight,i=t,r=i.PrevInAEL==e?e.PrevInAEL:i.PrevInAEL):(o=this.AddOutPt(e,n),t.OutIdx=e.OutIdx,t.Side=nn.EdgeSide.esRight,e.Side=nn.EdgeSide.esLeft,i=e,r=i.PrevInAEL==t?t.PrevInAEL:i.PrevInAEL),null!==r&&r.OutIdx>=0&&nn.Clipper.TopX(r,n.Y)==nn.Clipper.TopX(i,n.Y)&&nn.ClipperBase.SlopesEqual(i,r,this.m_UseFullRange)&&0!==i.WindDelta&&0!==r.WindDelta){var s=this.AddOutPt(r,n);this.AddJoin(o,s,i.Top)}return o},nn.Clipper.prototype.CreateOutRec=function(){var t=new nn.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},nn.Clipper.prototype.AddOutPt=function(t,e){var n=t.Side==nn.EdgeSide.esLeft;if(t.OutIdx<0){var o=this.CreateOutRec();o.IsOpen=0===t.WindDelta;var i=new nn.OutPt;return o.Pts=i,i.Idx=o.Idx,i.Pt.X=e.X,i.Pt.Y=e.Y,i.Next=i,i.Prev=i,o.IsOpen||this.SetHoleState(t,o),Ze&&(nn.IntPoint.op_Equality(e,t.Bot)?(i.Pt.X=t.Bot.X,i.Pt.Y=t.Bot.Y,i.Pt.Z=t.Bot.Z):nn.IntPoint.op_Equality(e,t.Top)?(i.Pt.X=t.Top.X,i.Pt.Y=t.Top.Y,i.Pt.Z=t.Top.Z):this.SetZ(i.Pt,t)),t.OutIdx=o.Idx,i}var o=this.m_PolyOuts[t.OutIdx],r=o.Pts;if(n&&nn.IntPoint.op_Equality(e,r.Pt))return r;if(!n&&nn.IntPoint.op_Equality(e,r.Prev.Pt))return r.Prev;var i=new nn.OutPt;return i.Idx=o.Idx,i.Pt.X=e.X,i.Pt.Y=e.Y,i.Next=r,i.Prev=r.Prev,i.Prev.Next=i,r.Prev=i,n&&(o.Pts=i),Ze&&(nn.IntPoint.op_Equality(e,t.Bot)?(i.Pt.X=t.Bot.X,i.Pt.Y=t.Bot.Y,i.Pt.Z=t.Bot.Z):nn.IntPoint.op_Equality(e,t.Top)?(i.Pt.X=t.Top.X,i.Pt.Y=t.Top.Y,i.Pt.Z=t.Top.Z):this.SetZ(i.Pt,t)),i},nn.Clipper.prototype.SwapPoints=function(t,e){var n=new nn.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,e.Value.X=n.X,e.Value.Y=n.Y},nn.Clipper.prototype.HorzSegmentsOverlap=function(t,e,n,o){return t.X>n.X==t.X<o.X?!0:e.X>n.X==e.X<o.X?!0:n.X>t.X==n.X<e.X?!0:o.X>t.X==o.X<e.X?!0:t.X==n.X&&e.X==o.X?!0:t.X==o.X&&e.X==n.X?!0:!1},nn.Clipper.prototype.InsertPolyPtBetween=function(t,e,n){var o=new nn.OutPt;return o.Pt.X=n.X,o.Pt.Y=n.Y,e==t.Next?(t.Next=o,e.Prev=o,o.Next=e,o.Prev=t):(e.Next=o,t.Prev=o,o.Next=t,o.Prev=e),o},nn.Clipper.prototype.SetHoleState=function(t,e){for(var n=!1,o=t.PrevInAEL;null!==o;)o.OutIdx>=0&&0!=o.WindDelta&&(n=!n,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[o.OutIdx])),o=o.PrevInAEL;n&&(e.IsHole=!0)},nn.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?nn.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},nn.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var n=t.Prev;nn.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Prev;var o=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=t.Next;nn.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Next;var i=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=e.Prev;nn.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Prev;var r=Math.abs(this.GetDx(e.Pt,n.Pt));for(n=e.Next;nn.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Next;var s=Math.abs(this.GetDx(e.Pt,n.Pt));return o>=r&&o>=s||i>=r&&i>=s},nn.Clipper.prototype.GetBottomPt=function(t){for(var e=null,n=t.Next;n!=t;)n.Pt.Y>t.Pt.Y?(t=n,e=null):n.Pt.Y==t.Pt.Y&&n.Pt.X<=t.Pt.X&&(n.Pt.X<t.Pt.X?(e=null,t=n):n.Next!=t&&n.Prev!=t&&(e=n)),n=n.Next;if(null!==e)for(;e!=n;)for(this.FirstIsBottomPt(n,e)||(t=e),e=e.Next;nn.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},nn.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var n=t.BottomPt,o=e.BottomPt;return n.Pt.Y>o.Pt.Y?t:n.Pt.Y<o.Pt.Y?e:n.Pt.X<o.Pt.X?t:n.Pt.X>o.Pt.X?e:n.Next==n?e:o.Next==o?t:this.FirstIsBottomPt(n,o)?t:e},nn.Clipper.prototype.Param1RightOfParam2=function(t,e){do if(t=t.FirstLeft,t==e)return!0;while(null!==t);return!1},nn.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},nn.Clipper.prototype.AppendPolygon=function(t,e){var n,o=this.m_PolyOuts[t.OutIdx],i=this.m_PolyOuts[e.OutIdx];n=this.Param1RightOfParam2(o,i)?i:this.Param1RightOfParam2(i,o)?o:this.GetLowermostRec(o,i);var r,s=o.Pts,a=s.Prev,l=i.Pts,p=l.Prev;t.Side==nn.EdgeSide.esLeft?(e.Side==nn.EdgeSide.esLeft?(this.ReversePolyPtLinks(l),l.Next=s,s.Prev=l,a.Next=p,p.Prev=a,o.Pts=p):(p.Next=s,s.Prev=p,l.Prev=a,a.Next=l,o.Pts=l),r=nn.EdgeSide.esLeft):(e.Side==nn.EdgeSide.esRight?(this.ReversePolyPtLinks(l),a.Next=p,p.Prev=a,l.Next=s,s.Prev=l):(a.Next=l,l.Prev=a,s.Prev=p,p.Next=s),r=nn.EdgeSide.esRight),o.BottomPt=null,n==i&&(i.FirstLeft!=o&&(o.FirstLeft=i.FirstLeft),o.IsHole=i.IsHole),i.Pts=null,i.BottomPt=null,i.FirstLeft=o;var u=t.OutIdx,h=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var d=this.m_ActiveEdges;null!==d;){if(d.OutIdx==h){d.OutIdx=u,d.Side=r;break}d=d.NextInAEL}i.Idx=o.Idx},nn.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,n;e=t;do n=e.Next,e.Next=e.Prev,e.Prev=n,e=n;while(e!=t)}},nn.Clipper.SwapSides=function(t,e){var n=t.Side;t.Side=e.Side,e.Side=n},nn.Clipper.SwapPolyIndexes=function(t,e){var n=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=n},nn.Clipper.prototype.IntersectEdges=function(t,e,n,o){var i=!o&&null===t.NextInLML&&t.Top.X==n.X&&t.Top.Y==n.Y,r=!o&&null===e.NextInLML&&e.Top.X==n.X&&e.Top.Y==n.Y,s=t.OutIdx>=0,a=e.OutIdx>=0;if(tn&&(0===t.WindDelta||0===e.WindDelta))return 0===t.WindDelta&&0===e.WindDelta?(i||r)&&s&&a&&this.AddLocalMaxPoly(t,e,n):t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==nn.ClipType.ctUnion?0===t.WindDelta?a&&(this.AddOutPt(t,n),s&&(t.OutIdx=-1)):s&&(this.AddOutPt(e,n),a&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(e.WindCnt)||this.m_ClipType==nn.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==nn.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,n),a&&(e.OutIdx=-1)):(this.AddOutPt(t,n),s&&(t.OutIdx=-1))),i&&(t.OutIdx<0?this.DeleteFromAEL(t):nn.Error("Error intersecting polylines")),void(r&&(e.OutIdx<0?this.DeleteFromAEL(e):nn.Error("Error intersecting polylines")));if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var l=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=l}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;var p,u,h,d;t.PolyTyp==nn.PolyType.ptSubject?(p=this.m_SubjFillType,h=this.m_ClipFillType):(p=this.m_ClipFillType,h=this.m_SubjFillType),e.PolyTyp==nn.PolyType.ptSubject?(u=this.m_SubjFillType,d=this.m_ClipFillType):(u=this.m_ClipFillType,d=this.m_SubjFillType);var c,g;switch(p){case nn.PolyFillType.pftPositive:c=t.WindCnt;break;case nn.PolyFillType.pftNegative:c=-t.WindCnt;break;default:c=Math.abs(t.WindCnt)}switch(u){case nn.PolyFillType.pftPositive:g=e.WindCnt;break;case nn.PolyFillType.pftNegative:g=-e.WindCnt;break;default:g=Math.abs(e.WindCnt)}if(s&&a)i||r||0!==c&&1!=c||0!==g&&1!=g||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=nn.ClipType.ctXor?this.AddLocalMaxPoly(t,e,n):(this.AddOutPt(t,n),this.AddOutPt(e,n),nn.Clipper.SwapSides(t,e),nn.Clipper.SwapPolyIndexes(t,e));else if(s)(0===g||1==g)&&(this.AddOutPt(t,n),nn.Clipper.SwapSides(t,e),nn.Clipper.SwapPolyIndexes(t,e));else if(a)(0===c||1==c)&&(this.AddOutPt(e,n),nn.Clipper.SwapSides(t,e),nn.Clipper.SwapPolyIndexes(t,e));else if(!(0!==c&&1!=c||0!==g&&1!=g||i||r)){var f,m;switch(h){case nn.PolyFillType.pftPositive:f=t.WindCnt2;break;case nn.PolyFillType.pftNegative:f=-t.WindCnt2;break;default:f=Math.abs(t.WindCnt2)}switch(d){case nn.PolyFillType.pftPositive:m=e.WindCnt2;break;case nn.PolyFillType.pftNegative:m=-e.WindCnt2;break;default:m=Math.abs(e.WindCnt2)}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,n);else if(1==c&&1==g)switch(this.m_ClipType){case nn.ClipType.ctIntersection:f>0&&m>0&&this.AddLocalMinPoly(t,e,n);break;case nn.ClipType.ctUnion:0>=f&&0>=m&&this.AddLocalMinPoly(t,e,n);break;case nn.ClipType.ctDifference:(t.PolyTyp==nn.PolyType.ptClip&&f>0&&m>0||t.PolyTyp==nn.PolyType.ptSubject&&0>=f&&0>=m)&&this.AddLocalMinPoly(t,e,n);break;case nn.ClipType.ctXor:this.AddLocalMinPoly(t,e,n)}else nn.Clipper.SwapSides(t,e)}i!=r&&(i&&t.OutIdx>=0||r&&e.OutIdx>=0)&&(nn.Clipper.SwapSides(t,e),nn.Clipper.SwapPolyIndexes(t,e)),i&&this.DeleteFromAEL(t),r&&this.DeleteFromAEL(e)},nn.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,n=t.NextInAEL;(null!==e||null!==n||t==this.m_ActiveEdges)&&(null!==e?e.NextInAEL=n:this.m_ActiveEdges=n,null!==n&&(n.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},nn.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,n=t.NextInSEL;(null!==e||null!==n||t==this.m_SortedEdges)&&(null!==e?e.NextInSEL=n:this.m_SortedEdges=n,null!==n&&(n.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},nn.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&nn.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,n=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==n&&(n.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,t=t.NextInLML,t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=n,nn.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},nn.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},nn.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=nn.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=nn.Direction.dRightToLeft)},nn.Clipper.prototype.PrepareHorzJoins=function(t,e){var n=this.m_PolyOuts[t.OutIdx].Pts;t.Side!=nn.EdgeSide.esLeft&&(n=n.Prev),e&&(nn.IntPoint.op_Equality(n.Pt,t.Top)?this.AddGhostJoin(n,t.Bot):this.AddGhostJoin(n,t.Top))},nn.Clipper.prototype.ProcessHorizontal=function(t,e){var n={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,n);for(var o=n.Dir,i=n.Left,r=n.Right,s=t,a=null;null!==s.NextInLML&&nn.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;for(null===s.NextInLML&&(a=this.GetMaximaPair(s));;){for(var l=t==s,p=this.GetNextInAEL(t,o);null!==p&&!(p.Curr.X==t.Top.X&&null!==t.NextInLML&&p.Dx<t.NextInLML.Dx);){var u=this.GetNextInAEL(p,o);if(o==nn.Direction.dLeftToRight&&p.Curr.X<=r||o==nn.Direction.dRightToLeft&&p.Curr.X>=i){if(t.OutIdx>=0&&0!=t.WindDelta&&this.PrepareHorzJoins(t,e),p==a&&l)return o==nn.Direction.dLeftToRight?this.IntersectEdges(t,p,p.Top,!1):this.IntersectEdges(p,t,p.Top,!1),void(a.OutIdx>=0&&nn.Error("ProcessHorizontal error"));if(o==nn.Direction.dLeftToRight){var h=new nn.IntPoint(p.Curr.X,t.Curr.Y);this.IntersectEdges(t,p,h,!0)}else{var h=new nn.IntPoint(p.Curr.X,t.Curr.Y);this.IntersectEdges(p,t,h,!0)}this.SwapPositionsInAEL(t,p)}else if(o==nn.Direction.dLeftToRight&&p.Curr.X>=r||o==nn.Direction.dRightToLeft&&p.Curr.X<=i)break;p=u}if(t.OutIdx>=0&&0!==t.WindDelta&&this.PrepareHorzJoins(t,e),null===t.NextInLML||!nn.ClipperBase.IsHorizontal(t.NextInLML))break;t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot);var n={Dir:o,Left:i,Right:r};this.GetHorzDirection(t,n),o=n.Dir,i=n.Left,r=n.Right}if(null!==t.NextInLML)if(t.OutIdx>=0){var d=this.AddOutPt(t,t.Top);if(t=this.UpdateEdgeIntoAEL(t),0===t.WindDelta)return;var c=t.PrevInAEL,u=t.NextInAEL;if(null!==c&&c.Curr.X==t.Bot.X&&c.Curr.Y==t.Bot.Y&&0!==c.WindDelta&&c.OutIdx>=0&&c.Curr.Y>c.Top.Y&&nn.ClipperBase.SlopesEqual(t,c,this.m_UseFullRange)){var g=this.AddOutPt(c,t.Bot);this.AddJoin(d,g,t.Top)}else if(null!==u&&u.Curr.X==t.Bot.X&&u.Curr.Y==t.Bot.Y&&0!==u.WindDelta&&u.OutIdx>=0&&u.Curr.Y>u.Top.Y&&nn.ClipperBase.SlopesEqual(t,u,this.m_UseFullRange)){var g=this.AddOutPt(u,t.Bot);this.AddJoin(d,g,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else null!==a?a.OutIdx>=0?(o==nn.Direction.dLeftToRight?this.IntersectEdges(t,a,t.Top,!1):this.IntersectEdges(a,t,t.Top,!1),a.OutIdx>=0&&nn.Error("ProcessHorizontal error")):(this.DeleteFromAEL(t),this.DeleteFromAEL(a)):(t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},nn.Clipper.prototype.GetNextInAEL=function(t,e){return e==nn.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},nn.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},nn.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},nn.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},nn.Clipper.prototype.GetMaximaPair=function(t){var e=null;return nn.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?e=t.Next:nn.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(e=t.Prev),null===e||-2!=e.OutIdx&&(e.NextInAEL!=e.PrevInAEL||nn.ClipperBase.IsHorizontal(e))?e:null},nn.Clipper.prototype.ProcessIntersections=function(t,e){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,e),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(n){this.m_SortedEdges=null,this.m_IntersectList.length=0,nn.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},nn.Clipper.prototype.BuildIntersectList=function(t,e){if(null!==this.m_ActiveEdges){var n=this.m_ActiveEdges;for(this.m_SortedEdges=n;null!==n;)n.PrevInSEL=n.PrevInAEL,n.NextInSEL=n.NextInAEL,n.Curr.X=nn.Clipper.TopX(n,e),n=n.NextInAEL;for(var o=!0;o&&null!==this.m_SortedEdges;){for(o=!1,n=this.m_SortedEdges;null!==n.NextInSEL;){var i=n.NextInSEL,r=new nn.IntPoint;if(n.Curr.X>i.Curr.X){!this.IntersectPoint(n,i,r)&&n.Curr.X>i.Curr.X+1&&nn.Error("Intersection error"),r.Y>t&&(r.Y=t,r.X=Math.abs(n.Dx)>Math.abs(i.Dx)?nn.Clipper.TopX(i,t):nn.Clipper.TopX(n,t));var s=new nn.IntersectNode;s.Edge1=n,s.Edge2=i,s.Pt.X=r.X,s.Pt.Y=r.Y,this.m_IntersectList.push(s),this.SwapPositionsInSEL(n,i),o=!0}else n=i}if(null===n.PrevInSEL)break;n.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},nn.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},nn.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},nn.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;t>e;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var n=e+1;t>n&&!this.EdgesAdjacent(this.m_IntersectList[n]);)n++;if(n==t)return!1;var o=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[n],this.m_IntersectList[n]=o}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},nn.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;e>t;t++){var n=this.m_IntersectList[t];this.IntersectEdges(n.Edge1,n.Edge2,n.Pt,!0),this.SwapPositionsInAEL(n.Edge1,n.Edge2)}this.m_IntersectList.length=0};var En=function(t){return 0>t?Math.ceil(t-.5):Math.round(t)},Pn=function(t){return 0>t?Math.ceil(t-.5):Math.floor(t+.5)},jn=function(t){return 0>t?-Math.round(Math.abs(t)):Math.round(t)},In=function(t){return 0>t?(t-=.5,-2147483648>t?Math.ceil(t):0|t):(t+=.5,t>2147483647?Math.floor(t):0|t)};nn.Clipper.Round=an.msie?En:an.chromium?jn:an.safari?In:Pn,nn.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+nn.Clipper.Round(t.Dx*(e-t.Bot.Y))},nn.Clipper.prototype.IntersectPoint=function(t,e,n){n.X=0,n.Y=0;var o,i;if(nn.ClipperBase.SlopesEqual(t,e,this.m_UseFullRange)||t.Dx==e.Dx)return e.Bot.Y>t.Bot.Y?(n.X=e.Bot.X,n.Y=e.Bot.Y):(n.X=t.Bot.X,n.Y=t.Bot.Y),!1;if(0===t.Delta.X)n.X=t.Bot.X,nn.ClipperBase.IsHorizontal(e)?n.Y=e.Bot.Y:(i=e.Bot.Y-e.Bot.X/e.Dx,n.Y=nn.Clipper.Round(n.X/e.Dx+i));else if(0===e.Delta.X)n.X=e.Bot.X,nn.ClipperBase.IsHorizontal(t)?n.Y=t.Bot.Y:(o=t.Bot.Y-t.Bot.X/t.Dx,n.Y=nn.Clipper.Round(n.X/t.Dx+o));else{o=t.Bot.X-t.Bot.Y*t.Dx,i=e.Bot.X-e.Bot.Y*e.Dx;var r=(i-o)/(t.Dx-e.Dx);n.Y=nn.Clipper.Round(r),n.X=nn.Clipper.Round(Math.abs(t.Dx)<Math.abs(e.Dx)?t.Dx*r+o:e.Dx*r+i)}if(n.Y<t.Top.Y||n.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return n.Y=t.Top.Y,n.X=nn.Clipper.TopX(e,t.Top.Y),n.X<t.Top.X;n.Y=e.Top.Y,n.X=Math.abs(t.Dx)<Math.abs(e.Dx)?nn.Clipper.TopX(t,n.Y):nn.Clipper.TopX(e,n.Y)}return!0},nn.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var n=this.IsMaxima(e,t);if(n){var o=this.GetMaximaPair(e);n=null===o||!nn.ClipperBase.IsHorizontal(o)}if(n){var i=e.PrevInAEL;this.DoMaxima(e),e=null===i?this.m_ActiveEdges:i.NextInAEL}else{if(this.IsIntermediate(e,t)&&nn.ClipperBase.IsHorizontal(e.NextInLML)?(e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=nn.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple){var i=e.PrevInAEL;if(e.OutIdx>=0&&0!==e.WindDelta&&null!==i&&i.OutIdx>=0&&i.Curr.X==e.Curr.X&&0!==i.WindDelta){var r=this.AddOutPt(i,e.Curr),s=this.AddOutPt(e,e.Curr);this.AddJoin(r,s,e.Curr)}}e=e.NextInAEL}}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){var r=null;e.OutIdx>=0&&(r=this.AddOutPt(e,e.Top)),e=this.UpdateEdgeIntoAEL(e);var i=e.PrevInAEL,a=e.NextInAEL;if(null!==i&&i.Curr.X==e.Bot.X&&i.Curr.Y==e.Bot.Y&&null!==r&&i.OutIdx>=0&&i.Curr.Y>i.Top.Y&&nn.ClipperBase.SlopesEqual(e,i,this.m_UseFullRange)&&0!==e.WindDelta&&0!==i.WindDelta){var s=this.AddOutPt(i,e.Bot);this.AddJoin(r,s,e.Top)}else if(null!==a&&a.Curr.X==e.Bot.X&&a.Curr.Y==e.Bot.Y&&null!==r&&a.OutIdx>=0&&a.Curr.Y>a.Top.Y&&nn.ClipperBase.SlopesEqual(e,a,this.m_UseFullRange)&&0!==e.WindDelta&&0!==a.WindDelta){var s=this.AddOutPt(a,e.Bot);this.AddJoin(r,s,e.Top)}}e=e.NextInAEL}},nn.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(null===e)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var n=t.NextInAEL,o=!0;null!==n&&n!=e;)this.IntersectEdges(t,n,t.Top,!0),this.SwapPositionsInAEL(t,n),n=t.NextInAEL;-1==t.OutIdx&&-1==e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?this.IntersectEdges(t,e,t.Top,!1):o&&0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):nn.Error("DoMaxima error")},nn.Clipper.ReversePaths=function(t){for(var e=0,n=t.length;n>e;e++)t[e].reverse()},nn.Clipper.Orientation=function(t){return nn.Clipper.Area(t)>=0},nn.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,n=t;do e++,n=n.Next;while(n!=t);return e},nn.Clipper.prototype.BuildResult=function(t){nn.Clear(t);for(var e=0,n=this.m_PolyOuts.length;n>e;e++){var o=this.m_PolyOuts[e];if(null!==o.Pts){var i=o.Pts.Prev,r=this.PointCount(i);if(!(2>r)){for(var s=new Array(r),a=0;r>a;a++)s[a]=i.Pt,i=i.Prev;t.push(s)}}}},nn.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,n=this.m_PolyOuts.length;n>e;e++){var o=this.m_PolyOuts[e],i=this.PointCount(o.Pts);if(!(o.IsOpen&&2>i||!o.IsOpen&&3>i)){this.FixHoleLinkage(o);var r=new nn.PolyNode;t.m_AllPolys.push(r),o.PolyNode=r,r.m_polygon.length=i;for(var s=o.Pts.Prev,a=0;i>a;a++)r.m_polygon[a]=s.Pt,s=s.Prev}}for(var e=0,n=this.m_PolyOuts.length;n>e;e++){var o=this.m_PolyOuts[e];null!==o.PolyNode&&(o.IsOpen?(o.PolyNode.IsOpen=!0,t.AddChild(o.PolyNode)):null!==o.FirstLeft&&null!=o.FirstLeft.PolyNode?o.FirstLeft.PolyNode.AddChild(o.PolyNode):t.AddChild(o.PolyNode))}},nn.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var n=t.Pts;;){if(n.Prev==n||n.Prev==n.Next)return this.DisposeOutPts(n),void(t.Pts=null);if(nn.IntPoint.op_Equality(n.Pt,n.Next.Pt)||nn.IntPoint.op_Equality(n.Pt,n.Prev.Pt)||nn.ClipperBase.SlopesEqual(n.Prev.Pt,n.Pt,n.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(n.Prev.Pt,n.Pt,n.Next.Pt))){e=null;var o=n;n.Prev.Next=n.Next,n.Next.Prev=n.Prev,n=n.Prev,o=null}else{if(n==e)break;null===e&&(e=n),n=n.Next}}t.Pts=n},nn.Clipper.prototype.DupOutPt=function(t,e){var n=new nn.OutPt;return n.Pt.X=t.Pt.X,n.Pt.Y=t.Pt.Y,n.Idx=t.Idx,e?(n.Next=t.Next,n.Prev=t,t.Next.Prev=n,t.Next=n):(n.Prev=t.Prev,n.Next=t,t.Prev.Next=n,t.Prev=n),n},nn.Clipper.prototype.GetOverlap=function(t,e,n,o,i){return e>t?o>n?(i.Left=Math.max(t,n),i.Right=Math.min(e,o)):(i.Left=Math.max(t,o),i.Right=Math.min(e,n)):o>n?(i.Left=Math.max(e,n),i.Right=Math.min(t,o)):(i.Left=Math.max(e,o),i.Right=Math.min(t,n)),i.Left<i.Right},nn.Clipper.prototype.JoinHorz=function(t,e,n,o,i,r){var s=t.Pt.X>e.Pt.X?nn.Direction.dRightToLeft:nn.Direction.dLeftToRight,a=n.Pt.X>o.Pt.X?nn.Direction.dRightToLeft:nn.Direction.dLeftToRight;if(s==a)return!1;if(s==nn.Direction.dLeftToRight){for(;t.Next.Pt.X<=i.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==i.Y;)t=t.Next;r&&t.Pt.X!=i.X&&(t=t.Next),e=this.DupOutPt(t,!r),nn.IntPoint.op_Inequality(e.Pt,i)&&(t=e,t.Pt.X=i.X,t.Pt.Y=i.Y,e=this.DupOutPt(t,!r))}else{for(;t.Next.Pt.X>=i.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==i.Y;)t=t.Next;r||t.Pt.X==i.X||(t=t.Next),e=this.DupOutPt(t,r),nn.IntPoint.op_Inequality(e.Pt,i)&&(t=e,t.Pt.X=i.X,t.Pt.Y=i.Y,e=this.DupOutPt(t,r))}if(a==nn.Direction.dLeftToRight){for(;n.Next.Pt.X<=i.X&&n.Next.Pt.X>=n.Pt.X&&n.Next.Pt.Y==i.Y;)n=n.Next;r&&n.Pt.X!=i.X&&(n=n.Next),o=this.DupOutPt(n,!r),nn.IntPoint.op_Inequality(o.Pt,i)&&(n=o,n.Pt.X=i.X,n.Pt.Y=i.Y,o=this.DupOutPt(n,!r))}else{for(;n.Next.Pt.X>=i.X&&n.Next.Pt.X<=n.Pt.X&&n.Next.Pt.Y==i.Y;)n=n.Next;r||n.Pt.X==i.X||(n=n.Next),o=this.DupOutPt(n,r),nn.IntPoint.op_Inequality(o.Pt,i)&&(n=o,n.Pt.X=i.X,n.Pt.Y=i.Y,o=this.DupOutPt(n,r))}return s==nn.Direction.dLeftToRight==r?(t.Prev=n,n.Next=t,e.Next=o,o.Prev=e):(t.Next=n,n.Prev=t,e.Prev=o,o.Next=e),!0},nn.Clipper.prototype.JoinPoints=function(t,e,n){var o=t.OutPt1,i=new nn.OutPt,r=t.OutPt2,s=new nn.OutPt,a=t.OutPt1.Pt.Y==t.OffPt.Y;if(a&&nn.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&nn.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){for(i=t.OutPt1.Next;i!=o&&nn.IntPoint.op_Equality(i.Pt,t.OffPt);)i=i.Next;var l=i.Pt.Y>t.OffPt.Y;for(s=t.OutPt2.Next;s!=r&&nn.IntPoint.op_Equality(s.Pt,t.OffPt);)s=s.Next;var p=s.Pt.Y>t.OffPt.Y;return l==p?!1:l?(i=this.DupOutPt(o,!1),s=this.DupOutPt(r,!0),o.Prev=r,r.Next=o,i.Next=s,s.Prev=i,t.OutPt1=o,t.OutPt2=i,!0):(i=this.DupOutPt(o,!0),s=this.DupOutPt(r,!1),o.Next=r,r.Prev=o,i.Prev=s,s.Next=i,t.OutPt1=o,t.OutPt2=i,!0)}if(a){for(i=o;o.Prev.Pt.Y==o.Pt.Y&&o.Prev!=i&&o.Prev!=r;)o=o.Prev;for(;i.Next.Pt.Y==i.Pt.Y&&i.Next!=o&&i.Next!=r;)i=i.Next;if(i.Next==o||i.Next==r)return!1;for(s=r;r.Prev.Pt.Y==r.Pt.Y&&r.Prev!=s&&r.Prev!=i;)r=r.Prev;for(;s.Next.Pt.Y==s.Pt.Y&&s.Next!=r&&s.Next!=o;)s=s.Next;if(s.Next==r||s.Next==o)return!1;var u={Left:null,Right:null};if(!this.GetOverlap(o.Pt.X,i.Pt.X,r.Pt.X,s.Pt.X,u))return!1;var h,d=u.Left,c=u.Right,g=new nn.IntPoint;return o.Pt.X>=d&&o.Pt.X<=c?(g.X=o.Pt.X,g.Y=o.Pt.Y,h=o.Pt.X>i.Pt.X):r.Pt.X>=d&&r.Pt.X<=c?(g.X=r.Pt.X,g.Y=r.Pt.Y,h=r.Pt.X>s.Pt.X):i.Pt.X>=d&&i.Pt.X<=c?(g.X=i.Pt.X,g.Y=i.Pt.Y,h=i.Pt.X>o.Pt.X):(g.X=s.Pt.X,g.Y=s.Pt.Y,h=s.Pt.X>r.Pt.X),t.OutPt1=o,t.OutPt2=r,this.JoinHorz(o,i,r,s,g,h)}for(i=o.Next;nn.IntPoint.op_Equality(i.Pt,o.Pt)&&i!=o;)i=i.Next;var f=i.Pt.Y>o.Pt.Y||!nn.ClipperBase.SlopesEqual(o.Pt,i.Pt,t.OffPt,this.m_UseFullRange);if(f){for(i=o.Prev;nn.IntPoint.op_Equality(i.Pt,o.Pt)&&i!=o;)i=i.Prev;if(i.Pt.Y>o.Pt.Y||!nn.ClipperBase.SlopesEqual(o.Pt,i.Pt,t.OffPt,this.m_UseFullRange))return!1}for(s=r.Next;nn.IntPoint.op_Equality(s.Pt,r.Pt)&&s!=r;)s=s.Next;var m=s.Pt.Y>r.Pt.Y||!nn.ClipperBase.SlopesEqual(r.Pt,s.Pt,t.OffPt,this.m_UseFullRange);if(m){for(s=r.Prev;nn.IntPoint.op_Equality(s.Pt,r.Pt)&&s!=r;)s=s.Prev;if(s.Pt.Y>r.Pt.Y||!nn.ClipperBase.SlopesEqual(r.Pt,s.Pt,t.OffPt,this.m_UseFullRange))return!1}return i==o||s==r||i==s||e==n&&f==m?!1:f?(i=this.DupOutPt(o,!1),s=this.DupOutPt(r,!0),o.Prev=r,r.Next=o,i.Next=s,s.Prev=i,t.OutPt1=o,t.OutPt2=i,!0):(i=this.DupOutPt(o,!0),s=this.DupOutPt(r,!1),o.Next=r,r.Prev=o,i.Prev=s,s.Next=i,t.OutPt1=o,t.OutPt2=i,!0)},nn.Clipper.GetBounds=function(t){for(var e=0,n=t.length;n>e&&0==t[e].length;)e++;if(e==n)return new nn.IntRect(0,0,0,0);var o=new nn.IntRect;for(o.left=t[e][0].X,o.right=o.left,o.top=t[e][0].Y,o.bottom=o.top;n>e;e++)for(var i=0,r=t[e].length;r>i;i++)t[e][i].X<o.left?o.left=t[e][i].X:t[e][i].X>o.right&&(o.right=t[e][i].X),t[e][i].Y<o.top?o.top=t[e][i].Y:t[e][i].Y>o.bottom&&(o.bottom=t[e][i].Y);return o},nn.Clipper.prototype.GetBounds2=function(t){var e=t,n=new nn.IntRect;for(n.left=t.Pt.X,n.right=t.Pt.X,n.top=t.Pt.Y,n.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<n.left&&(n.left=t.Pt.X),t.Pt.X>n.right&&(n.right=t.Pt.X),t.Pt.Y<n.top&&(n.top=t.Pt.Y),t.Pt.Y>n.bottom&&(n.bottom=t.Pt.Y),t=t.Next;return n},nn.Clipper.PointInPolygon=function(t,e){var n=0,o=e.length;if(3>o)return 0;for(var i=e[0],r=1;o>=r;++r){var s=r==o?e[0]:e[r];if(s.Y==t.Y&&(s.X==t.X||i.Y==t.Y&&s.X>t.X==i.X<t.X))return-1;if(i.Y<t.Y!=s.Y<t.Y)if(i.X>=t.X)if(s.X>t.X)n=1-n;else{var a=(i.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(i.Y-t.Y);if(0==a)return-1;a>0==s.Y>i.Y&&(n=1-n)}else if(s.X>t.X){var a=(i.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(i.Y-t.Y);if(0==a)return-1;a>0==s.Y>i.Y&&(n=1-n)}i=s}return n},nn.Clipper.prototype.PointInPolygon=function(t,e){for(var n=0,o=e;;){var i=e.Pt.X,r=e.Pt.Y,s=e.Next.Pt.X,a=e.Next.Pt.Y;if(a==t.Y&&(s==t.X||r==t.Y&&s>t.X==i<t.X))return-1;if(r<t.Y!=a<t.Y)if(i>=t.X)if(s>t.X)n=1-n;else{var l=(i-t.X)*(a-t.Y)-(s-t.X)*(r-t.Y);if(0==l)return-1;l>0==a>r&&(n=1-n)}else if(s>t.X){var l=(i-t.X)*(a-t.Y)-(s-t.X)*(r-t.Y);if(0==l)return-1;l>0==a>r&&(n=1-n)}if(e=e.Next,o==e)break}return n},nn.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var n=t;do{var o=this.PointInPolygon(n.Pt,e);if(o>=0)return 0!=o;n=n.Next}while(n!=t);return!0},nn.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var n=0,o=this.m_PolyOuts.length;o>n;n++){var i=this.m_PolyOuts[n];null!==i.Pts&&i.FirstLeft==t&&this.Poly2ContainsPoly1(i.Pts,e.Pts)&&(i.FirstLeft=e)}},nn.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var n=0,o=this.m_PolyOuts,i=o.length,r=o[n];i>n;n++,r=o[n])r.FirstLeft==t&&(r.FirstLeft=e)},nn.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},nn.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;e>t;t++){var n=this.m_Joins[t],o=this.GetOutRec(n.OutPt1.Idx),i=this.GetOutRec(n.OutPt2.Idx);if(null!=o.Pts&&null!=i.Pts){var r;if(r=o==i?o:this.Param1RightOfParam2(o,i)?i:this.Param1RightOfParam2(i,o)?o:this.GetLowermostRec(o,i),this.JoinPoints(n,o,i))if(o==i){if(o.Pts=n.OutPt1,o.BottomPt=null,i=this.CreateOutRec(),i.Pts=n.OutPt2,this.UpdateOutPtIdxs(i),this.m_UsingPolyTree)for(var s=0,a=this.m_PolyOuts.length;a-1>s;s++){var l=this.m_PolyOuts[s];null!=l.Pts&&nn.Clipper.ParseFirstLeft(l.FirstLeft)==o&&l.IsHole!=o.IsHole&&this.Poly2ContainsPoly1(l.Pts,n.OutPt2)&&(l.FirstLeft=i)}this.Poly2ContainsPoly1(i.Pts,o.Pts)?(i.IsHole=!o.IsHole,i.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,o),(i.IsHole^this.ReverseSolution)==this.Area(i)>0&&this.ReversePolyPtLinks(i.Pts)):this.Poly2ContainsPoly1(o.Pts,i.Pts)?(i.IsHole=o.IsHole,o.IsHole=!i.IsHole,i.FirstLeft=o.FirstLeft,o.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts2(o,i),(o.IsHole^this.ReverseSolution)==this.Area(o)>0&&this.ReversePolyPtLinks(o.Pts)):(i.IsHole=o.IsHole,i.FirstLeft=o.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(o,i))}else i.Pts=null,i.BottomPt=null,i.Idx=o.Idx,o.IsHole=r.IsHole,r==i&&(o.FirstLeft=i.FirstLeft),i.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,o)}}},nn.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do e.Idx=t.Idx,e=e.Prev;while(e!=t.Pts)},nn.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],n=e.Pts;if(null!==n)do{for(var o=n.Next;o!=e.Pts;){if(nn.IntPoint.op_Equality(n.Pt,o.Pt)&&o.Next!=n&&o.Prev!=n){var i=n.Prev,r=o.Prev;n.Prev=r,r.Next=n,o.Prev=i,i.Next=o,e.Pts=n;var s=this.CreateOutRec();s.Pts=o,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,e.Pts)?(s.IsHole=!e.IsHole,s.FirstLeft=e):this.Poly2ContainsPoly1(e.Pts,s.Pts)?(s.IsHole=e.IsHole,e.IsHole=!s.IsHole,s.FirstLeft=e.FirstLeft,e.FirstLeft=s):(s.IsHole=e.IsHole,s.FirstLeft=e.FirstLeft),o=n}o=o.Next}n=n.Next}while(n!=e.Pts)}},nn.Clipper.Area=function(t){var e=t.length;if(3>e)return 0;for(var n=0,o=0,i=e-1;e>o;++o)n+=(t[i].X+t[o].X)*(t[i].Y-t[o].Y),i=o;return.5*-n},nn.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;var n=0;do n+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next;while(e!=t.Pts);return.5*n},en&&(nn.Clipper.OffsetPaths=function(t,e,n,o,i){var r=new nn.Paths,s=new nn.ClipperOffset(i,i);return s.AddPaths(t,n,o),s.Execute(r,e),r}),nn.Clipper.SimplifyPolygon=function(t,e){var n=new Array,o=new nn.Clipper(0);return o.StrictlySimple=!0,o.AddPath(t,nn.PolyType.ptSubject,!0),o.Execute(nn.ClipType.ctUnion,n,e,e),n},nn.Clipper.SimplifyPolygons=function(t,e){"undefined"==typeof e&&(e=nn.PolyFillType.pftEvenOdd);var n=new Array,o=new nn.Clipper(0);return o.StrictlySimple=!0,o.AddPaths(t,nn.PolyType.ptSubject,!0),o.Execute(nn.ClipType.ctUnion,n,e,e),n},nn.Clipper.DistanceSqrd=function(t,e){var n=t.X-e.X,o=t.Y-e.Y;return n*n+o*o},nn.Clipper.DistanceFromLineSqrd=function(t,e,n){var o=e.Y-n.Y,i=n.X-e.X,r=o*e.X+i*e.Y;return r=o*t.X+i*t.Y-r,r*r/(o*o+i*i)},nn.Clipper.SlopesNearCollinear=function(t,e,n,o){return nn.Clipper.DistanceFromLineSqrd(e,t,n)<o},nn.Clipper.PointsAreClose=function(t,e,n){var o=t.X-e.X,i=t.Y-e.Y;return n>=o*o+i*i},nn.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},nn.Clipper.CleanPolygon=function(t,e){"undefined"==typeof e&&(e=1.415);var n=t.length;if(0==n)return new Array;for(var o=new Array(n),i=0;n>i;++i)o[i]=new nn.OutPt;for(var i=0;n>i;++i)o[i].Pt=t[i],o[i].Next=o[(i+1)%n],o[i].Next.Prev=o[i],o[i].Idx=0;for(var r=e*e,s=o[0];0==s.Idx&&s.Next!=s.Prev;)nn.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,r)?(s=nn.Clipper.ExcludeOp(s),n--):nn.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,r)?(nn.Clipper.ExcludeOp(s.Next),s=nn.Clipper.ExcludeOp(s),n-=2):nn.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,r)?(s=nn.Clipper.ExcludeOp(s),n--):(s.Idx=1,s=s.Next);3>n&&(n=0);for(var a=new Array(n),i=0;n>i;++i)a[i]=new nn.IntPoint(s.Pt),s=s.Next;return o=null,a},nn.Clipper.CleanPolygons=function(t,e){for(var n=new Array(t.length),o=0,i=t.length;i>o;o++)n[o]=nn.Clipper.CleanPolygon(t[o],e);return n},nn.Clipper.Minkowski=function(t,e,n,o){var i=o?1:0,r=t.length,s=e.length,a=new Array;if(n)for(var l=0;s>l;l++){for(var p=new Array(r),u=0,h=t.length,d=t[u];h>u;u++,d=t[u])p[u]=new nn.IntPoint(e[l].X+d.X,e[l].Y+d.Y);a.push(p)}else for(var l=0;s>l;l++){for(var p=new Array(r),u=0,h=t.length,d=t[u];h>u;u++,d=t[u])p[u]=new nn.IntPoint(e[l].X-d.X,e[l].Y-d.Y);a.push(p)}for(var c=new Array,l=0;s-1+i>l;l++)for(var u=0;r>u;u++){var g=new Array;g.push(a[l%s][u%r]),g.push(a[(l+1)%s][u%r]),g.push(a[(l+1)%s][(u+1)%r]),g.push(a[l%s][(u+1)%r]),nn.Clipper.Orientation(g)||g.reverse(),c.push(g)}var f=new nn.Clipper(0);return f.AddPaths(c,nn.PolyType.ptSubject,!0),f.Execute(nn.ClipType.ctUnion,a,nn.PolyFillType.pftNonZero,nn.PolyFillType.pftNonZero),a},nn.Clipper.MinkowskiSum=function(){var t=arguments,e=t.length;if(3==e){var n=t[0],o=t[1],i=t[2];return nn.Clipper.Minkowski(n,o,!0,i)}if(4==e){for(var r,n=t[0],s=t[1],a=t[2],i=t[3],l=new nn.Clipper,p=0,u=s.length;u>p;++p){var r=nn.Clipper.Minkowski(n,s[p],!0,i);l.AddPaths(r,nn.PolyType.ptSubject,!0)}i&&l.AddPaths(s,nn.PolyType.ptClip,!0);var h=new nn.Paths;return l.Execute(nn.ClipType.ctUnion,h,a,a),h}},nn.Clipper.MinkowskiDiff=function(t,e,n){return nn.Clipper.Minkowski(t,e,!1,n)},nn.Clipper.PolyTreeToPaths=function(t){var e=new Array;return nn.Clipper.AddPolyNodeToPaths(t,nn.Clipper.NodeType.ntAny,e),e},nn.Clipper.AddPolyNodeToPaths=function(t,e,n){var o=!0;switch(e){case nn.Clipper.NodeType.ntOpen:return;case nn.Clipper.NodeType.ntClosed:o=!t.IsOpen}t.m_polygon.length>0&&o&&n.push(t.m_polygon);for(var i=0,r=t.Childs(),s=r.length,a=r[i];s>i;i++,a=r[i])nn.Clipper.AddPolyNodeToPaths(a,e,n)},nn.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new nn.Paths,n=0,o=t.ChildCount();o>n;n++)t.Childs()[n].IsOpen&&e.push(t.Childs()[n].m_polygon);return e},nn.Clipper.ClosedPathsFromPolyTree=function(t){var e=new nn.Paths;return nn.Clipper.AddPolyNodeToPaths(t,nn.Clipper.NodeType.ntClosed,e),e},xn(nn.Clipper,nn.ClipperBase),nn.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},nn.ClipperOffset=function(t,e){"undefined"==typeof t&&(t=2),"undefined"==typeof e&&(e=nn.ClipperOffset.def_arc_tolerance),this.m_destPolys=new nn.Paths,this.m_srcPoly=new nn.Path,this.m_destPoly=new nn.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new nn.IntPoint,this.m_polyNodes=new nn.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1
},nn.ClipperOffset.two_pi=6.28318530717959,nn.ClipperOffset.def_arc_tolerance=.25,nn.ClipperOffset.prototype.Clear=function(){nn.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},nn.ClipperOffset.Round=nn.Clipper.Round,nn.ClipperOffset.prototype.AddPath=function(t,e,n){var o=t.length-1;if(!(0>o)){var i=new nn.PolyNode;if(i.m_jointype=e,i.m_endtype=n,n==nn.EndType.etClosedLine||n==nn.EndType.etClosedPolygon)for(;o>0&&nn.IntPoint.op_Equality(t[0],t[o]);)o--;i.m_polygon.push(t[0]);for(var r=0,s=0,a=1;o>=a;a++)nn.IntPoint.op_Inequality(i.m_polygon[r],t[a])&&(r++,i.m_polygon.push(t[a]),(t[a].Y>i.m_polygon[s].Y||t[a].Y==i.m_polygon[s].Y&&t[a].X<i.m_polygon[s].X)&&(s=r));if(!(n==nn.EndType.etClosedPolygon&&2>r||n!=nn.EndType.etClosedPolygon&&0>r)&&(this.m_polyNodes.AddChild(i),n==nn.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new nn.IntPoint(0,s);else{var l=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(i.m_polygon[s].Y>l.Y||i.m_polygon[s].Y==l.Y&&i.m_polygon[s].X<l.X)&&(this.m_lowest=new nn.IntPoint(this.m_polyNodes.ChildCount()-1,s))}}},nn.ClipperOffset.prototype.AddPaths=function(t,e,n){for(var o=0,i=t.length;i>o;o++)this.AddPath(t[o],e,n)},nn.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!nn.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];(e.m_endtype==nn.EndType.etClosedPolygon||e.m_endtype==nn.EndType.etClosedLine&&nn.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];e.m_endtype!=nn.EndType.etClosedLine||nn.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()}},nn.ClipperOffset.GetUnitNormal=function(t,e){var n=e.X-t.X,o=e.Y-t.Y;if(0==n&&0==o)return new nn.DoublePoint(0,0);var i=1/Math.sqrt(n*n+o*o);return n*=i,o*=i,new nn.DoublePoint(o,-n)},nn.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,nn.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var n=this.m_polyNodes.Childs()[e];n.m_endtype==nn.EndType.etClosedPolygon&&this.m_destPolys.push(n.m_polygon)}else{this.m_miterLim=this.MiterLimit>2?2/(this.MiterLimit*this.MiterLimit):.5;var o;o=this.ArcTolerance<=0?nn.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*nn.ClipperOffset.def_arc_tolerance?Math.abs(t)*nn.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var i=3.14159265358979/Math.acos(1-o/Math.abs(t));this.m_sin=Math.sin(nn.ClipperOffset.two_pi/i),this.m_cos=Math.cos(nn.ClipperOffset.two_pi/i),this.m_StepsPerRad=i/nn.ClipperOffset.two_pi,0>t&&(this.m_sin=-this.m_sin);for(var e=0;e<this.m_polyNodes.ChildCount();e++){var n=this.m_polyNodes.Childs()[e];this.m_srcPoly=n.m_polygon;var r=this.m_srcPoly.length;if(!(0==r||0>=t&&(3>r||n.m_endtype!=nn.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!=r){this.m_normals.length=0;for(var s=0;r-1>s;s++)this.m_normals.push(nn.ClipperOffset.GetUnitNormal(this.m_srcPoly[s],this.m_srcPoly[s+1]));if(this.m_normals.push(n.m_endtype==nn.EndType.etClosedLine||n.m_endtype==nn.EndType.etClosedPolygon?nn.ClipperOffset.GetUnitNormal(this.m_srcPoly[r-1],this.m_srcPoly[0]):new nn.DoublePoint(this.m_normals[r-2])),n.m_endtype==nn.EndType.etClosedPolygon){for(var a=r-1,s=0;r>s;s++)a=this.OffsetPoint(s,a,n.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(n.m_endtype==nn.EndType.etClosedLine){for(var a=r-1,s=0;r>s;s++)a=this.OffsetPoint(s,a,n.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var l=this.m_normals[r-1],s=r-1;s>0;s--)this.m_normals[s]=new nn.DoublePoint(-this.m_normals[s-1].X,-this.m_normals[s-1].Y);this.m_normals[0]=new nn.DoublePoint(-l.X,-l.Y),a=0;for(var s=r-1;s>=0;s--)a=this.OffsetPoint(s,a,n.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var a=0,s=1;r-1>s;++s)a=this.OffsetPoint(s,a,n.m_jointype);var p;if(n.m_endtype==nn.EndType.etOpenButt){var s=r-1;p=new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[s].X+this.m_normals[s].X*t),nn.ClipperOffset.Round(this.m_srcPoly[s].Y+this.m_normals[s].Y*t)),this.m_destPoly.push(p),p=new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[s].X-this.m_normals[s].X*t),nn.ClipperOffset.Round(this.m_srcPoly[s].Y-this.m_normals[s].Y*t)),this.m_destPoly.push(p)}else{var s=r-1;a=r-2,this.m_sinA=0,this.m_normals[s]=new nn.DoublePoint(-this.m_normals[s].X,-this.m_normals[s].Y),n.m_endtype==nn.EndType.etOpenSquare?this.DoSquare(s,a):this.DoRound(s,a)}for(var s=r-1;s>0;s--)this.m_normals[s]=new nn.DoublePoint(-this.m_normals[s-1].X,-this.m_normals[s-1].Y);this.m_normals[0]=new nn.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),a=r-1;for(var s=a-1;s>0;--s)a=this.OffsetPoint(s,a,n.m_jointype);n.m_endtype==nn.EndType.etOpenButt?(p=new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),nn.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(p),p=new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),nn.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(p)):(a=1,this.m_sinA=0,n.m_endtype==nn.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(n.m_jointype==nn.JoinType.jtRound)for(var u=1,h=0,s=1;i>=s;s++){this.m_destPoly.push(new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[0].X+u*t),nn.ClipperOffset.Round(this.m_srcPoly[0].Y+h*t)));var d=u;u=u*this.m_cos-this.m_sin*h,h=d*this.m_sin+h*this.m_cos}else for(var u=-1,h=-1,s=0;4>s;++s)this.m_destPoly.push(new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[0].X+u*t),nn.ClipperOffset.Round(this.m_srcPoly[0].Y+h*t))),0>u?u=1:0>h?h=1:u=-1;this.m_destPolys.push(this.m_destPoly)}}}},nn.ClipperOffset.prototype.Execute=function(){var t=arguments,e=t[0]instanceof nn.PolyTree;if(e){var n=t[0],o=t[1];n.Clear(),this.FixOrientations(),this.DoOffset(o);var i=new nn.Clipper(0);if(i.AddPaths(this.m_destPolys,nn.PolyType.ptSubject,!0),o>0)i.Execute(nn.ClipType.ctUnion,n,nn.PolyFillType.pftPositive,nn.PolyFillType.pftPositive);else{var r=nn.Clipper.GetBounds(this.m_destPolys),s=new nn.Path;if(s.push(new nn.IntPoint(r.left-10,r.bottom+10)),s.push(new nn.IntPoint(r.right+10,r.bottom+10)),s.push(new nn.IntPoint(r.right+10,r.top-10)),s.push(new nn.IntPoint(r.left-10,r.top-10)),i.AddPath(s,nn.PolyType.ptSubject,!0),i.ReverseSolution=!0,i.Execute(nn.ClipType.ctUnion,n,nn.PolyFillType.pftNegative,nn.PolyFillType.pftNegative),1==n.ChildCount()&&n.Childs()[0].ChildCount()>0){var a=n.Childs()[0];n.Childs()[0]=a.Childs()[0];for(var l=1;l<a.ChildCount();l++)n.AddChild(a.Childs()[l])}else n.Clear()}}else{var n=t[0],o=t[1];nn.Clear(n),this.FixOrientations(),this.DoOffset(o);var i=new nn.Clipper(0);if(i.AddPaths(this.m_destPolys,nn.PolyType.ptSubject,!0),o>0)i.Execute(nn.ClipType.ctUnion,n,nn.PolyFillType.pftPositive,nn.PolyFillType.pftPositive);else{var r=nn.Clipper.GetBounds(this.m_destPolys),s=new nn.Path;s.push(new nn.IntPoint(r.left-10,r.bottom+10)),s.push(new nn.IntPoint(r.right+10,r.bottom+10)),s.push(new nn.IntPoint(r.right+10,r.top-10)),s.push(new nn.IntPoint(r.left-10,r.top-10)),i.AddPath(s,nn.PolyType.ptSubject,!0),i.ReverseSolution=!0,i.Execute(nn.ClipType.ctUnion,n,nn.PolyFillType.pftNegative,nn.PolyFillType.pftNegative),n.length>0&&n.splice(0,1)}}},nn.ClipperOffset.prototype.OffsetPoint=function(t,e,n){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return e;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),nn.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new nn.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),nn.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(n){case nn.JoinType.jtMiter:var o=1+(this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y);o>=this.m_miterLim?this.DoMiter(t,e,o):this.DoSquare(t,e);break;case nn.JoinType.jtSquare:this.DoSquare(t,e);break;case nn.JoinType.jtRound:this.DoRound(t,e)}return e=t},nn.ClipperOffset.prototype.DoSquare=function(t,e){var n=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*n)),nn.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*n)))),this.m_destPoly.push(new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*n)),nn.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*n))))},nn.ClipperOffset.prototype.DoMiter=function(t,e,n){var o=this.m_delta/n;this.m_destPoly.push(new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*o),nn.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*o)))},nn.ClipperOffset.prototype.DoRound=function(t,e){for(var n,o=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),i=nn.Cast_Int32(nn.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(o))),r=this.m_normals[e].X,s=this.m_normals[e].Y,a=0;i>a;++a)this.m_destPoly.push(new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[t].X+r*this.m_delta),nn.ClipperOffset.Round(this.m_srcPoly[t].Y+s*this.m_delta))),n=r,r=r*this.m_cos-this.m_sin*s,s=n*this.m_sin+s*this.m_cos;this.m_destPoly.push(new nn.IntPoint(nn.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),nn.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},nn.Error=function(t){try{throw new Error(t)}catch(e){alert(e.message)}},nn.JS={},nn.JS.AreaOfPolygon=function(t,e){return e||(e=1),nn.Clipper.Area(t)/(e*e)},nn.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var n=0,o=0;o<t.length;o++)n+=nn.Clipper.Area(t[o]);return n/(e*e)},nn.JS.BoundsOfPath=function(t,e){return nn.JS.BoundsOfPaths([t],e)},nn.JS.BoundsOfPaths=function(t,e){e||(e=1);var n=nn.Clipper.GetBounds(t);return n.left/=e,n.bottom/=e,n.right/=e,n.top/=e,n},nn.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var n=t[0]instanceof Array,t=nn.JS.Clone(t);if("number"!=typeof e||null===e)return nn.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||0>e)return t;n||(t=[t]);for(var o,i,r,s,a,l,p,u=t.length,h=[],d=0;u>d;d++)if(i=t[d],o=i.length,0!==o)if(3>o)r=i,h.push(r);else{for(r=i,s=e*e,a=i[0],l=1,p=1;o>p;p++)(i[p].X-a.X)*(i[p].X-a.X)+(i[p].Y-a.Y)*(i[p].Y-a.Y)<=s||(r[l]=i[p],a=i[p],l++);a=i[l-1],(i[0].X-a.X)*(i[0].X-a.X)+(i[0].Y-a.Y)*(i[0].Y-a.Y)<=s&&l--,o>l&&r.splice(l,o-l),r.length&&h.push(r)}return!n&&h.length?h=h[0]:n||0!==h.length?n&&0===h.length&&(h=[[]]):h=[],h},nn.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var n,o,i,r,s=t.length,a=new Array(s);for(o=0;s>o;o++){for(n=t[o].length,r=new Array(n),i=0;n>i;i++)r[i]={X:t[o][i].X,Y:t[o][i].Y};a[o]=r}return e||(a=a[0]),a},nn.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return nn.Error("Tolerance is not a number in Lighten()."),nn.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||0>e)return nn.JS.Clone(t);t[0]instanceof Array||(t=[t]);var n,o,i,r,s,a,l,p,u,h,d,c,g,f,m,y,v,x=t.length,E=e*e,P=[];for(n=0;x>n;n++)if(i=t[n],a=i.length,0!=a){for(r=0;1e6>r;r++){for(s=[],a=i.length,i[a-1].X!=i[0].X||i[a-1].Y!=i[0].Y?(c=1,i.push({X:i[0].X,Y:i[0].Y}),a=i.length):c=0,d=[],o=0;a-2>o;o++)l=i[o],u=i[o+1],p=i[o+2],y=l.X,v=l.Y,g=p.X-y,f=p.Y-v,(0!==g||0!==f)&&(m=((u.X-y)*g+(u.Y-v)*f)/(g*g+f*f),m>1?(y=p.X,v=p.Y):m>0&&(y+=g*m,v+=f*m)),g=u.X-y,f=u.Y-v,h=g*g+f*f,E>=h&&(d[o+1]=1,o++);for(s.push({X:i[0].X,Y:i[0].Y}),o=1;a-1>o;o++)d[o]||s.push({X:i[o].X,Y:i[o].Y});if(s.push({X:i[a-1].X,Y:i[a-1].Y}),c&&i.pop(),!d.length)break;i=s}a=s.length,s[a-1].X==s[0].X&&s[a-1].Y==s[0].Y&&s.pop(),s.length>2&&P.push(s)}return!t[0]instanceof Array&&(P=P[0]),"undefined"==typeof P&&(P=[[]]),P},nn.JS.PerimeterOfPath=function(t,e,n){if("undefined"==typeof t)return 0;var o,i,r=Math.sqrt,s=0,a=0,l=0,p=0,u=0,h=t.length;if(2>h)return 0;for(e&&(t[h]=t[0],h++);--h;)o=t[h],a=o.X,l=o.Y,i=t[h-1],p=i.X,u=i.Y,s+=r((a-p)*(a-p)+(l-u)*(l-u));return e&&t.pop(),s/n},nn.JS.PerimeterOfPaths=function(t,e,n){n||(n=1);for(var o=0,i=0;i<t.length;i++)o+=nn.JS.PerimeterOfPath(t[i],e,n);return o},nn.JS.ScaleDownPath=function(t,e){var n,o;for(e||(e=1),n=t.length;n--;)o=t[n],o.X=o.X/e,o.Y=o.Y/e},nn.JS.ScaleDownPaths=function(t,e){{var n,o,i;Math.round}for(e||(e=1),n=t.length;n--;)for(o=t[n].length;o--;)i=t[n][o],i.X=i.X/e,i.Y=i.Y/e},nn.JS.ScaleUpPath=function(t,e){var n,o,i=Math.round;for(e||(e=1),n=t.length;n--;)o=t[n],o.X=i(o.X*e),o.Y=i(o.Y*e)},nn.JS.ScaleUpPaths=function(t,e){var n,o,i,r=Math.round;for(e||(e=1),n=t.length;n--;)for(o=t[n].length;o--;)i=t[n][o],i.X=r(i.X*e),i.Y=r(i.Y*e)},nn.ExPolygons=function(){return[]},nn.ExPolygon=function(){this.outer=null,this.holes=null},nn.JS.AddOuterPolyNodeToExPolygons=function(t,e){var n=new nn.ExPolygon;n.outer=t.Contour();var o=t.Childs(),i=o.length;n.holes=new Array(i);var r,s,a,l,p,u;for(a=0;i>a;a++)for(r=o[a],n.holes[a]=r.Contour(),l=0,p=r.Childs(),u=p.length;u>l;l++)s=p[l],nn.JS.AddOuterPolyNodeToExPolygons(s,e);e.push(n)},nn.JS.ExPolygonsToPaths=function(t){var e,n,o,i,r=new nn.Paths;for(e=0,o=t.length;o>e;e++)for(r.push(t[e].outer),n=0,i=t[e].holes.length;i>n;n++)r.push(t[e].holes[n]);return r},nn.JS.PolyTreeToExPolygons=function(t){var e,n,o,i,r=new nn.ExPolygons;for(n=0,o=t.Childs(),i=o.length;i>n;n++)e=o[n],nn.JS.AddOuterPolyNodeToExPolygons(e,r);return r}}(),/*******************************************************************************
*                                                                              *
* Author    :  Angus Johnson                                                   *
* Version   :  5.0.2                                                           *
* Date      :  30 December 2012                                                *
* Website   :  http://www.angusj.com                                           *
* Copyright :  Angus Johnson 2010-2012                                         *
*                                                                              *
* License:                                                                     *
* Use, modification & distribution is subject to Boost Software License Ver 1. *
* http://www.boost.org/LICENSE_1_0.txt                                         *
*                                                                              *
* Attributions:                                                                *
* The code in this library is an extension of Bala Vatti's clipping algorithm: *
* "A generic solution to polygon clipping"                                     *
* Communications of the ACM, Vol 35, Issue 7 (July 1992) pp 56-63.             *
* http://portal.acm.org/citation.cfm?id=129906                                 *
*                                                                              *
* Computer graphics and geometric modeling: implementation and algorithms      *
* By Max K. Agoston                                                            *
* Springer; 1 edition (January 4, 2005)                                        *
* http://books.google.com/books?q=vatti+clipping+agoston                       *
*                                                                              *
* See also:                                                                    *
* "Polygon Offsetting by Computing Winding Numbers"                            *
* Paper no. DETC2005-85513 pp. 565-575                                         *
* ASME 2005 International Design Engineering Technical Conferences             *
* and Computers and Information in Engineering Conference (IDETC/CIE2005)      *
* September 2428, 2005 , Long Beach, California, USA                          *
* http://www.me.berkeley.edu/~mcmains/pubs/DAC05OffsetPolygon.pdf              *
*                                                                              *
*******************************************************************************/
/*******************************************************************************
*                                                                              *
* Basic JavaScript BN library - subset useful for RSA encryption.              *
* http://www-cs-students.stanford.edu/~tjw/jsbn/                               *
* Copyright (c) 2005  Tom Wu                                                   *
* All Rights Reserved.                                                         *
* See "LICENSE" for details:                                                   *
* http://www-cs-students.stanford.edu/~tjw/jsbn/LICENSE                        *
*                                                                              *
*******************************************************************************/
function(){function t(t,e){tn.biginteger_used=1,null!=t&&("number"==typeof t?this.fromString(Math.floor(t).toString(),10):null==e&&"string"!=typeof t?this.fromString(t,256):(-1!=t.indexOf(".")&&(t=t.substring(0,t.indexOf("."))),this.fromString(t,e)))}function e(){return new t(null)}function n(t,e,n,o,i,r){for(;--r>=0;){var s=e*this[t++]+n[o]+i;i=Math.floor(s/67108864),n[o++]=67108863&s}return i}function o(t,e,n,o,i,r){for(var s=32767&e,a=e>>15;--r>=0;){var l=32767&this[t],p=this[t++]>>15,u=a*l+p*s;l=s*l+((32767&u)<<15)+n[o]+(1073741823&i),i=(l>>>30)+(u>>>15)+a*p+(i>>>30),n[o++]=1073741823&l}return i}function i(t,e,n,o,i,r){for(var s=16383&e,a=e>>14;--r>=0;){var l=16383&this[t],p=this[t++]>>14,u=a*l+p*s;l=s*l+((16383&u)<<14)+n[o]+i,i=(l>>28)+(u>>14)+a*p,n[o++]=268435455&l}return i}function r(t){return ln.charAt(t)}function s(t,e){var n=pn[t.charCodeAt(e)];return null==n?-1:n}function a(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function l(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0}function p(t){var n=e();return n.fromInt(t),n}function u(e,n){var o;if(16==n)o=4;else if(8==n)o=3;else if(256==n)o=8;else if(2==n)o=1;else if(32==n)o=5;else{if(4!=n)return void this.fromRadix(e,n);o=2}this.t=0,this.s=0;for(var i=e.length,r=!1,a=0;--i>=0;){var l=8==o?255&e[i]:s(e,i);0>l?"-"==e.charAt(i)&&(r=!0):(r=!1,0==a?this[this.t++]=l:a+o>this.DB?(this[this.t-1]|=(l&(1<<this.DB-a)-1)<<a,this[this.t++]=l>>this.DB-a):this[this.t-1]|=l<<a,a+=o,a>=this.DB&&(a-=this.DB))}8==o&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),r&&t.ZERO.subTo(this,this)}function h(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function d(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,o=(1<<e)-1,i=!1,s="",a=this.t,l=this.DB-a*this.DB%e;if(a-->0)for(l<this.DB&&(n=this[a]>>l)>0&&(i=!0,s=r(n));a>=0;)e>l?(n=(this[a]&(1<<l)-1)<<e-l,n|=this[--a]>>(l+=this.DB-e)):(n=this[a]>>(l-=e)&o,0>=l&&(l+=this.DB,--a)),n>0&&(i=!0),i&&(s+=r(n));return i?s:"0"}function c(){var n=e();return t.ZERO.subTo(this,n),n}function g(){return this.s<0?this.negate():this}function f(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(e=n-t.t,0!=e)return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0}function m(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function y(){return this.t<=0?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)}function v(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function x(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function E(t,e){var n,o=t%this.DB,i=this.DB-o,r=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<o&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>i|a,a=(this[n]&r)<<o;for(n=s-1;n>=0;--n)e[n]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function P(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)return void(e.t=0);var o=t%this.DB,i=this.DB-o,r=(1<<o)-1;e[0]=this[n]>>o;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&r)<<i,e[s-n]=this[s]>>o;o>0&&(e[this.t-n-1]|=(this.s&r)<<i),e.t=this.t-n,e.clamp()}function j(t,e){for(var n=0,o=0,i=Math.min(t.t,this.t);i>n;)o+=this[n]-t[n],e[n++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o-=t.s;n<this.t;)o+=this[n],e[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<t.t;)o-=t[n],e[n++]=o&this.DM,o>>=this.DB;o-=t.s}e.s=0>o?-1:0,-1>o?e[n++]=this.DV+o:o>0&&(e[n++]=o),e.t=n,e.clamp()}function I(e,n){var o=this.abs(),i=e.abs(),r=o.t;for(n.t=r+i.t;--r>=0;)n[r]=0;for(r=0;r<i.t;++r)n[r+o.t]=o.am(0,i[r],n,r,0,o.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)}function C(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var o=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,o,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function L(n,o,i){var r=n.abs();if(!(r.t<=0)){var s=this.abs();if(s.t<r.t)return null!=o&&o.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=e());var a=e(),l=this.s,p=n.s,u=this.DB-m(r[r.t-1]);u>0?(r.lShiftTo(u,a),s.lShiftTo(u,i)):(r.copyTo(a),s.copyTo(i));var h=a.t,d=a[h-1];if(0!=d){var c=d*(1<<this.F1)+(h>1?a[h-2]>>this.F2:0),g=this.FV/c,f=(1<<this.F1)/c,y=1<<this.F2,v=i.t,x=v-h,E=null==o?e():o;for(a.dlShiftTo(x,E),i.compareTo(E)>=0&&(i[i.t++]=1,i.subTo(E,i)),t.ONE.dlShiftTo(h,E),E.subTo(a,a);a.t<h;)a[a.t++]=0;for(;--x>=0;){var P=i[--v]==d?this.DM:Math.floor(i[v]*g+(i[v-1]+y)*f);if((i[v]+=a.am(0,P,i,x,0,h))<P)for(a.dlShiftTo(x,E),i.subTo(E,i);i[v]<--P;)i.subTo(E,i)}null!=o&&(i.drShiftTo(h,o),l!=p&&t.ZERO.subTo(o,o)),i.t=h,i.clamp(),u>0&&i.rShiftTo(u,i),0>l&&t.ZERO.subTo(i,i)}}}function S(n){var o=e();return this.abs().divRemTo(n,null,o),this.s<0&&o.compareTo(t.ZERO)>0&&n.subTo(o,o),o}function b(t){this.m=t}function N(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function T(t){return t}function O(t){t.divRemTo(this.m,null,t)}function A(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function w(t,e){t.squareTo(e),this.reduce(e)}function _(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function R(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function D(n){var o=e();return n.abs().dlShiftTo(this.m.t,o),o.divRemTo(this.m,null,o),n.s<0&&o.compareTo(t.ZERO)>0&&this.m.subTo(o,o),o}function M(t){var n=e();return t.copyTo(n),this.reduce(n),n}function B(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],o=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,o,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function F(t,e){t.squareTo(e),this.reduce(e)}function X(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function Y(){return 0==(this.t>0?1&this[0]:this.s)}function G(n,o){if(n>4294967295||1>n)return t.ONE;var i=e(),r=e(),s=o.convert(this),a=m(n)-1;for(s.copyTo(i);--a>=0;)if(o.sqrTo(i,r),(n&1<<a)>0)o.mulTo(r,s,i);else{var l=i;i=r,r=l}return o.revert(i)}function q(t,e){var n;return n=256>t||e.isEven()?new b(e):new R(e),this.exp(t,n)}// Copyright (c) 2005-2009  Tom Wu
function k(){var t=e();return this.copyTo(t),t}function V(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function H(){return 0==this.t?this.s:this[0]<<24>>24}function W(){return 0==this.t?this.s:this[0]<<16>>16}function U(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function z(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function J(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var n=this.chunkSize(t),o=Math.pow(t,n),i=p(o),r=e(),s=e(),a="";for(this.divRemTo(i,r,s);r.signum()>0;)a=(o+s.intValue()).toString(t).substr(1)+a,r.divRemTo(i,r,s);return s.intValue().toString(t)+a}function Q(e,n){this.fromInt(0),null==n&&(n=10);for(var o=this.chunkSize(n),i=Math.pow(n,o),r=!1,a=0,l=0,p=0;p<e.length;++p){var u=s(e,p);0>u?"-"==e.charAt(p)&&0==this.signum()&&(r=!0):(l=n*l+u,++a>=o&&(this.dMultiply(i),this.dAddOffset(l,0),a=0,l=0))}a>0&&(this.dMultiply(Math.pow(n,a)),this.dAddOffset(l,0)),r&&t.ZERO.subTo(this,this)}function K(e,n,o){if("number"==typeof n)if(2>e)this.fromInt(1);else for(this.fromNumber(e,o),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),re,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var i=[],r=7&e;i.length=(e>>3)+1,n.nextBytes(i),r>0?i[0]&=(1<<r)-1:i[0]=0,this.fromString(i,256)}}function $(){var t=this.t,e=[];e[0]=this.s;var n,o=this.DB-t*this.DB%8,i=0;if(t-->0)for(o<this.DB&&(n=this[t]>>o)!=(this.s&this.DM)>>o&&(e[i++]=n|this.s<<this.DB-o);t>=0;)8>o?(n=(this[t]&(1<<o)-1)<<8-o,n|=this[--t]>>(o+=this.DB-8)):(n=this[t]>>(o-=8)&255,0>=o&&(o+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function Z(t){return 0==this.compareTo(t)}function te(t){return this.compareTo(t)<0?this:t}function ee(t){return this.compareTo(t)>0?this:t}function ne(t,e,n){var o,i,r=Math.min(t.t,this.t);for(o=0;r>o;++o)n[o]=e(this[o],t[o]);if(t.t<this.t){for(i=t.s&this.DM,o=r;o<this.t;++o)n[o]=e(this[o],i);n.t=this.t}else{for(i=this.s&this.DM,o=r;o<t.t;++o)n[o]=e(i,t[o]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function oe(t,e){return t&e}function ie(t){var n=e();return this.bitwiseTo(t,oe,n),n}function re(t,e){return t|e}function se(t){var n=e();return this.bitwiseTo(t,re,n),n}function ae(t,e){return t^e}function le(t){var n=e();return this.bitwiseTo(t,ae,n),n}function pe(t,e){return t&~e}function ue(t){var n=e();return this.bitwiseTo(t,pe,n),n}function he(){for(var t=e(),n=0;n<this.t;++n)t[n]=this.DM&~this[n];return t.t=this.t,t.s=~this.s,t}function de(t){var n=e();return 0>t?this.rShiftTo(-t,n):this.lShiftTo(t,n),n}function ce(t){var n=e();return 0>t?this.lShiftTo(-t,n):this.rShiftTo(t,n),n}function ge(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function fe(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+ge(this[t]);return this.s<0?this.t*this.DB:-1}function me(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function ye(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=me(this[n]^e);return t}function ve(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function xe(e,n){var o=t.ONE.shiftLeft(e);return this.bitwiseTo(o,n,o),o}function Ee(t){return this.changeBit(t,re)}function Pe(t){return this.changeBit(t,pe)}function je(t){return this.changeBit(t,ae)}function Ie(t,e){for(var n=0,o=0,i=Math.min(t.t,this.t);i>n;)o+=this[n]+t[n],e[n++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o+=t.s;n<this.t;)o+=this[n],e[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<t.t;)o+=t[n],e[n++]=o&this.DM,o>>=this.DB;o+=t.s}e.s=0>o?-1:0,o>0?e[n++]=o:-1>o&&(e[n++]=this.DV+o),e.t=n,e.clamp()}function Ce(t){var n=e();return this.addTo(t,n),n}function Le(t){var n=e();return this.subTo(t,n),n}function Se(t){var n=e();return this.multiplyTo(t,n),n}function be(){var t=e();return this.squareTo(t),t}function Ne(t){var n=e();return this.divRemTo(t,n,null),n}function Te(t){var n=e();return this.divRemTo(t,null,n),n}function Oe(t){var n=e(),o=e();return this.divRemTo(t,n,o),new Array(n,o)}function Ae(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function we(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function _e(){}function Re(t){return t}function De(t,e,n){t.multiplyTo(e,n)}function Me(t,e){t.squareTo(e)}function Be(t){return this.exp(t,new _e)}function Fe(t,e,n){var o=Math.min(this.t+t.t,e);for(n.s=0,n.t=o;o>0;)n[--o]=0;var i;for(i=n.t-this.t;i>o;++o)n[o+this.t]=this.am(0,t[o],n,o,0,this.t);for(i=Math.min(t.t,e);i>o;++o)this.am(0,t[o],n,o,0,e-o);n.clamp()}function Xe(t,e,n){--e;var o=n.t=this.t+t.t-e;for(n.s=0;--o>=0;)n[o]=0;for(o=Math.max(e-this.t,0);o<t.t;++o)n[this.t+o-e]=this.am(e-o,t[o],n,0,0,this.t+o-e);n.clamp(),n.drShiftTo(1,n)}function Ye(n){this.r2=e(),this.q3=e(),t.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n),this.m=n}function Ge(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var n=e();return t.copyTo(n),this.reduce(n),n}function qe(t){return t}function ke(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Ve(t,e){t.squareTo(e),this.reduce(e)}function He(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function We(t,n){var o,i,r=t.bitLength(),s=p(1);if(0>=r)return s;o=18>r?1:48>r?3:144>r?4:768>r?5:6,i=8>r?new b(n):n.isEven()?new Ye(n):new R(n);var a=[],l=3,u=o-1,h=(1<<o)-1;if(a[1]=i.convert(this),o>1){var d=e();for(i.sqrTo(a[1],d);h>=l;)a[l]=e(),i.mulTo(d,a[l-2],a[l]),l+=2}var c,g,f=t.t-1,y=!0,v=e();for(r=m(t[f])-1;f>=0;){for(r>=u?c=t[f]>>r-u&h:(c=(t[f]&(1<<r+1)-1)<<u-r,f>0&&(c|=t[f-1]>>this.DB+r-u)),l=o;0==(1&c);)c>>=1,--l;if((r-=l)<0&&(r+=this.DB,--f),y)a[c].copyTo(s),y=!1;else{for(;l>1;)i.sqrTo(s,v),i.sqrTo(v,s),l-=2;l>0?i.sqrTo(s,v):(g=s,s=v,v=g),i.mulTo(v,a[c],s)}for(;f>=0&&0==(t[f]&1<<r);)i.sqrTo(s,v),g=s,s=v,v=g,--r<0&&(r=this.DB-1,--f)}return i.revert(s)}function Ue(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var o=e;e=n,n=o}var i=e.getLowestSetBit(),r=n.getLowestSetBit();if(0>r)return e;for(r>i&&(r=i),r>0&&(e.rShiftTo(r,e),n.rShiftTo(r,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return r>0&&n.lShiftTo(r,n),n}function ze(t){if(0>=t)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var o=this.t-1;o>=0;--o)n=(e*n+this[o])%t;return n}function Je(e){var n=e.isEven();if(this.isEven()&&n||0==e.signum())return t.ZERO;for(var o=e.clone(),i=this.clone(),r=p(1),s=p(0),a=p(0),l=p(1);0!=o.signum();){for(;o.isEven();)o.rShiftTo(1,o),n?(r.isEven()&&s.isEven()||(r.addTo(this,r),s.subTo(e,s)),r.rShiftTo(1,r)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),n?(a.isEven()&&l.isEven()||(a.addTo(this,a),l.subTo(e,l)),a.rShiftTo(1,a)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);o.compareTo(i)>=0?(o.subTo(i,o),n&&r.subTo(a,r),s.subTo(l,s)):(i.subTo(o,i),n&&a.subTo(r,a),l.subTo(s,l))}return 0!=i.compareTo(t.ONE)?t.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l}function Qe(t){var e,n=this.abs();if(1==n.t&&n[0]<=un[un.length-1]){for(e=0;e<un.length;++e)if(n[0]==un[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<un.length;){for(var o=un[e],i=e+1;i<un.length&&hn>o;)o*=un[i++];for(o=n.modInt(o);i>e;)if(o%un[e++]==0)return!1}return n.millerRabin(t)}function Ke(n){var o=this.subtract(t.ONE),i=o.getLowestSetBit();if(0>=i)return!1;var r=o.shiftRight(i);n=n+1>>1,n>un.length&&(n=un.length);for(var s=e(),a=0;n>a;++a){s.fromInt(un[Math.floor(Math.random()*un.length)]);var l=s.modPow(r,this);if(0!=l.compareTo(t.ONE)&&0!=l.compareTo(o)){for(var p=1;p++<i&&0!=l.compareTo(o);)if(l=l.modPowInt(2,this),0==l.compareTo(t.ONE))return!1;if(0!=l.compareTo(o))return!1}}return!0}var $e=navigator.userAgent.toString().toLowerCase(),Ze={};Ze.chrome=-1!=$e.indexOf("chrome")&&-1==$e.indexOf("chromium")?1:0,Ze.chromium=-1!=$e.indexOf("chromium")?1:0,Ze.safari=-1!=$e.indexOf("safari")&&-1==$e.indexOf("chrome")&&-1==$e.indexOf("chromium")?1:0,Ze.firefox=-1!=$e.indexOf("firefox")?1:0,Ze.firefox17=-1!=$e.indexOf("firefox/17")?1:0,Ze.firefox15=-1!=$e.indexOf("firefox/15")?1:0,Ze.firefox3=-1!=$e.indexOf("firefox/3")?1:0,Ze.opera=-1!=$e.indexOf("opera")?1:0,Ze.msie10=-1!=$e.indexOf("msie 10")?1:0,Ze.msie9=-1!=$e.indexOf("msie 9")?1:0,Ze.msie8=-1!=$e.indexOf("msie 8")?1:0,Ze.msie7=-1!=$e.indexOf("msie 7")?1:0,Ze.msie=-1!=$e.indexOf("msie ")?1:0;var tn={};tn.biginteger_used=null;var en,nn=0xdeadbeefcafe,on=15715070==(16777215&nn);on&&"Microsoft Internet Explorer"==navigator.appName?(t.prototype.am=o,en=30):on&&"Netscape"!=navigator.appName?(t.prototype.am=n,en=26):(t.prototype.am=i,en=28),t.prototype.DB=en,t.prototype.DM=(1<<en)-1,t.prototype.DV=1<<en;var rn=52;t.prototype.FV=Math.pow(2,rn),t.prototype.F1=rn-en,t.prototype.F2=2*en-rn;var sn,an,ln="0123456789abcdefghijklmnopqrstuvwxyz",pn=[];for(sn="0".charCodeAt(0),an=0;9>=an;++an)pn[sn++]=an;for(sn="a".charCodeAt(0),an=10;36>an;++an)pn[sn++]=an;for(sn="A".charCodeAt(0),an=10;36>an;++an)pn[sn++]=an;b.prototype.convert=N,b.prototype.revert=T,b.prototype.reduce=O,b.prototype.mulTo=A,b.prototype.sqrTo=w,R.prototype.convert=D,R.prototype.revert=M,R.prototype.reduce=B,R.prototype.mulTo=X,R.prototype.sqrTo=F,t.prototype.copyTo=a,t.prototype.fromInt=l,t.prototype.fromString=u,t.prototype.clamp=h,t.prototype.dlShiftTo=v,t.prototype.drShiftTo=x,t.prototype.lShiftTo=E,t.prototype.rShiftTo=P,t.prototype.subTo=j,t.prototype.multiplyTo=I,t.prototype.squareTo=C,t.prototype.divRemTo=L,t.prototype.invDigit=_,t.prototype.isEven=Y,t.prototype.exp=G,t.prototype.toString=d,t.prototype.negate=c,t.prototype.abs=g,t.prototype.compareTo=f,t.prototype.bitLength=y,t.prototype.mod=S,t.prototype.modPowInt=q,t.ZERO=p(0),t.ONE=p(1),_e.prototype.convert=Re,_e.prototype.revert=Re,_e.prototype.mulTo=De,_e.prototype.sqrTo=Me,Ye.prototype.convert=Ge,Ye.prototype.revert=qe,Ye.prototype.reduce=ke,Ye.prototype.mulTo=He,Ye.prototype.sqrTo=Ve;var un=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],hn=(1<<26)/un[un.length-1];t.prototype.chunkSize=U,t.prototype.toRadix=J,t.prototype.fromRadix=Q,t.prototype.fromNumber=K,t.prototype.bitwiseTo=ne,t.prototype.changeBit=xe,t.prototype.addTo=Ie,t.prototype.dMultiply=Ae,t.prototype.dAddOffset=we,t.prototype.multiplyLowerTo=Fe,t.prototype.multiplyUpperTo=Xe,t.prototype.modInt=ze,t.prototype.millerRabin=Ke,t.prototype.clone=k,t.prototype.intValue=V,t.prototype.byteValue=H,t.prototype.shortValue=W,t.prototype.signum=z,t.prototype.toByteArray=$,t.prototype.equals=Z,t.prototype.min=te,t.prototype.max=ee,t.prototype.and=ie,t.prototype.or=se,t.prototype.xor=le,t.prototype.andNot=ue,t.prototype.not=he,t.prototype.shiftLeft=de,t.prototype.shiftRight=ce,t.prototype.getLowestSetBit=fe,t.prototype.bitCount=ye,t.prototype.testBit=ve,t.prototype.setBit=Ee,t.prototype.clearBit=Pe,t.prototype.flipBit=je,t.prototype.add=Ce,t.prototype.subtract=Le,t.prototype.multiply=Se,t.prototype.divide=Ne,t.prototype.remainder=Te,t.prototype.divideAndRemainder=Oe,t.prototype.modPow=We,t.prototype.modInverse=Je,t.prototype.pow=Be,t.prototype.gcd=Ue,t.prototype.isProbablePrime=Qe,t.prototype.square=be,tn.Math_Abs_Int64=tn.Math_Abs_Int32=tn.Math_Abs_Double=function(t){return Math.abs(t)},tn.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},tn.Cast_Int32=Ze.msie||Ze.opera||Ze.safari?function(t){return 0|t}:function(t){return~~t},tn.Cast_Int64=Ze.chrome?function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):~~t}:Ze.firefox&&"function"==typeof Number.toInteger?function(t){return Number.toInteger(t)}:Ze.msie7||Ze.msie8?function(t){return parseInt(t,10)}:Ze.msie?function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):0|t}:function(t){return 0>t?Math.ceil(t):Math.floor(t)},tn.Clear=function(t){t.length=0},tn.MaxSteps=64,tn.PI=3.141592653589793,tn.PI2=6.283185307179586,tn.IntPoint=function(){var t=arguments;1==t.length&&(this.X=t[0].X,this.Y=t[0].Y),2==t.length&&(this.X=t[0],this.Y=t[1])},tn.IntRect=function(){var t=arguments;if(4==t.length){var e=t[0],n=t[1],o=t[2],i=t[3];this.left=e,this.top=n,this.right=o,this.bottom=i}else this.left=0,this.top=0,this.right=0,this.bottom=0},tn.Polygon=function(){return[]},tn.Polygons=function(){return[]},tn.ExPolygons=function(){var t=[];return t.exPolygons=!0,t},tn.ExPolygon=function(){this.outer=null,this.holes=null},tn.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},tn.PolyType={ptSubject:0,ptClip:1},tn.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},tn.JoinType={jtSquare:0,jtRound:1,jtMiter:2},tn.EdgeSide={esLeft:1,esRight:2},tn.Protects={ipNone:0,ipLeft:1,ipRight:2,ipBoth:3},tn.Direction={dRightToLeft:0,dLeftToRight:1},tn.TEdge=function(){this.xbot=0,this.ybot=0,this.xcurr=0,this.ycurr=0,this.xtop=0,this.ytop=0,this.dx=0,this.deltaX=0,this.deltaY=0,this.tmpX=0,this.polyType=tn.PolyType.ptSubject,this.side=null,this.windDelta=0,this.windCnt=0,this.windCnt2=0,this.outIdx=0,this.next=null,this.prev=null,this.nextInLML=null,this.nextInAEL=null,this.prevInAEL=null,this.nextInSEL=null,this.prevInSEL=null},tn.IntersectNode=function(){this.edge1=null,this.edge2=null,this.pt=null,this.next=null},tn.LocalMinima=function(){this.Y=0,this.leftBound=null,this.rightBound=null,this.next=null},tn.Scanbeam=function(){this.Y=0,this.next=null},tn.OutRec=function(){this.idx=0,this.isHole=!1,this.FirstLeft=null,this.AppendLink=null,this.pts=null,this.bottomPt=null},tn.OutPt=function(){this.idx=0,this.pt=null,this.next=null,this.prev=null},tn.JoinRec=function(){this.pt1a=null,this.pt1b=null,this.poly1Idx=0,this.pt2a=null,this.pt2b=null,this.poly2Idx=0},tn.HorzJoinRec=function(){this.edge=null,this.savedIdx=0},tn.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=[[]],this.m_UseFullRange=!1},tn.ClipperBase.horizontal=-9007199254740992,tn.ClipperBase.loRange=47453132,tn.ClipperBase.hiRange=0xfffffffffffff,tn.ClipperBase.PointsEqual=function(t,e){return t.X==e.X&&t.Y==e.Y},tn.ClipperBase.prototype.PointIsVertex=function(t,e){var n=e;do{if(tn.ClipperBase.PointsEqual(n.pt,t))return!0;n=n.next}while(n!=e);return!1},tn.ClipperBase.prototype.PointInPolygon=function(e,n,o){var i=n,r=!1;if(o){do(i.pt.Y<=e.Y&&e.Y<i.prev.pt.Y||i.prev.pt.Y<=e.Y&&e.Y<i.pt.Y)&&new t(e.X-i.pt.X).compareTo(new t(i.prev.pt.X-i.pt.X).multiply(new t(e.Y-i.pt.Y)).divide(new t(i.prev.pt.Y-i.pt.Y)))<0&&(r=!r),i=i.next;while(i!=n)}else do(i.pt.Y<=e.Y&&e.Y<i.prev.pt.Y||i.prev.pt.Y<=e.Y&&e.Y<i.pt.Y)&&e.X-i.pt.X<(i.prev.pt.X-i.pt.X)*(e.Y-i.pt.Y)/(i.prev.pt.Y-i.pt.Y)&&(r=!r),i=i.next;while(i!=n);return r},tn.ClipperBase.prototype.SlopesEqual=tn.ClipperBase.SlopesEqual=function(){var e,n,o,i,r,s,a,l=arguments;return 3==l.length?(e=l[0],n=l[1],a=l[2],a?new t(e.deltaY).multiply(new t(n.deltaX)).toString()==new t(e.deltaX).multiply(new t(n.deltaY)).toString():e.deltaY*n.deltaX==e.deltaX*n.deltaY):4==l.length?(o=l[0],i=l[1],r=l[2],a=l[3],a?new t(o.Y-i.Y).multiply(new t(i.X-r.X)).toString()==new t(o.X-i.X).multiply(new t(i.Y-r.Y)).toString():(o.Y-i.Y)*(i.X-r.X)-(o.X-i.X)*(i.Y-r.Y)==0):5==l.length?(o=l[0],i=l[1],r=l[2],s=l[3],a=l[4],a?new t(o.Y-i.Y).multiply(new t(r.X-s.X)).toString()==new t(o.X-i.X).multiply(new t(r.Y-s.Y)).toString():(o.Y-i.Y)*(r.X-s.X)-(o.X-i.X)*(r.Y-s.Y)==0):void 0},tn.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0;t<this.m_edges.length;++t){for(var e=0;e<this.m_edges[t].length;++e)this.m_edges[t][e]=null;tn.Clear(this.m_edges[t])}tn.Clear(this.m_edges),this.m_UseFullRange=!1},tn.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!=this.m_MinimaList;){var t=this.m_MinimaList.next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},tn.ClipperBase.prototype.AddPolygons=function(t,e){var n=!1,o=!1;if(!(t instanceof Array))return n;for(var i=0;i<t.length;++i)if(o=this.AddPolygon(t[i],e,!0),o&&"exceed"!=o)n=!0;else if("exceed"==o)break;return"exceed"==o&&tn.Error("Coordinate exceeds range bounds in AddPolygons()."),n},tn.ClipperBase.prototype.AddPolygon=function(t,e,n){if(!(t instanceof Array))return!1;var o=t.length;if(3>o)return!1;var i=new tn.Polygon;i.push(new tn.IntPoint(t[0].X,t[0].Y));var r,s=0,a=!1;for(r=1;o>r;++r){var l;if(l=this.m_UseFullRange?tn.ClipperBase.hiRange:tn.ClipperBase.loRange,tn.Math_Abs_Int64(t[r].X)>l||tn.Math_Abs_Int64(t[r].Y)>l){if(tn.Math_Abs_Int64(t[r].X)>tn.ClipperBase.hiRange||tn.Math_Abs_Int64(t[r].Y)>tn.ClipperBase.hiRange){if("undefined"!=typeof n)return"exceed";a=!0;break}l=tn.ClipperBase.hiRange,this.m_UseFullRange=!0}tn.ClipperBase.PointsEqual(i[s],t[r])||(s>0&&this.SlopesEqual(i[s-1],i[s],t[r],this.m_UseFullRange)?tn.ClipperBase.PointsEqual(i[s-1],t[r])&&s--:s++,s<i.length?i[s]=t[r]:i.push(new tn.IntPoint(t[r].X,t[r].Y)))}if(a&&"undefined"==typeof n&&tn.Error("Coordinate exceeds range bounds in AddPolygon()"),2>s)return!1;for(o=s+1;o>2;){if(tn.ClipperBase.PointsEqual(i[s],i[0]))s--;else if(tn.ClipperBase.PointsEqual(i[0],i[1])||this.SlopesEqual(i[s],i[0],i[1],this.m_UseFullRange))i[0]=i[s--];else if(this.SlopesEqual(i[s-1],i[s],i[0],this.m_UseFullRange))s--;else{if(!this.SlopesEqual(i[0],i[1],i[2],this.m_UseFullRange))break;for(r=2;s>=r;++r)i[r-1]=i[r];s--}o--}if(3>o)return!1;var p=[];for(r=0;o>r;r++)p.push(new tn.TEdge);for(this.m_edges.push(p),p[0].xcurr=i[0].X,p[0].ycurr=i[0].Y,this.InitEdge(p[o-1],p[0],p[o-2],i[o-1],e),r=o-2;r>0;--r)this.InitEdge(p[r],p[r+1],p[r-1],i[r],e);this.InitEdge(p[0],p[1],p[o-1],i[0],e);var u=p[0],h=u;do u.xcurr=u.xbot,u.ycurr=u.ybot,u.ytop<h.ytop&&(h=u),u=u.next;while(u!=p[0]);h.windDelta>0&&(h=h.next),h.dx==tn.ClipperBase.horizontal&&(h=h.next),u=h;do u=this.AddBoundsToLML(u);while(u!=h);return!0},tn.ClipperBase.prototype.InitEdge=function(t,e,n,o,i){t.next=e,t.prev=n,t.xcurr=o.X,t.ycurr=o.Y,t.ycurr>=t.next.ycurr?(t.xbot=t.xcurr,t.ybot=t.ycurr,t.xtop=t.next.xcurr,t.ytop=t.next.ycurr,t.windDelta=1):(t.xtop=t.xcurr,t.ytop=t.ycurr,t.xbot=t.next.xcurr,t.ybot=t.next.ycurr,t.windDelta=-1),this.SetDx(t),t.polyType=i,t.outIdx=-1},tn.ClipperBase.prototype.SetDx=function(t){t.deltaX=t.xtop-t.xbot,t.deltaY=t.ytop-t.ybot,t.dx=0==t.deltaY?tn.ClipperBase.horizontal:t.deltaX/t.deltaY},tn.ClipperBase.prototype.AddBoundsToLML=function(t){for(t.nextInLML=null,t=t.next;;){if(t.dx==tn.ClipperBase.horizontal){if(t.next.ytop<t.ytop&&t.next.xbot>t.prev.xbot)break;t.xtop!=t.prev.xbot&&this.SwapX(t),t.nextInLML=t.prev}else{if(t.ycurr==t.prev.ycurr)break;t.nextInLML=t.prev}t=t.next}var e=new tn.LocalMinima;for(e.next=null,e.Y=t.prev.ybot,t.dx==tn.ClipperBase.horizontal?(t.xbot!=t.prev.xbot&&this.SwapX(t),e.leftBound=t.prev,e.rightBound=t):t.dx<t.prev.dx?(e.leftBound=t.prev,e.rightBound=t):(e.leftBound=t,e.rightBound=t.prev),e.leftBound.side=tn.EdgeSide.esLeft,e.rightBound.side=tn.EdgeSide.esRight,this.InsertLocalMinima(e);t.next.ytop!=t.ytop||t.next.dx==tn.ClipperBase.horizontal;)t.nextInLML=t.next,t=t.next,t.dx==tn.ClipperBase.horizontal&&t.xbot!=t.prev.xtop&&this.SwapX(t);return t.next},tn.ClipperBase.prototype.InsertLocalMinima=function(t){if(null==this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!=e.next&&t.Y<e.next.Y;)e=e.next;t.next=e.next,e.next=t}},tn.ClipperBase.prototype.PopLocalMinima=function(){null!=this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.next)},tn.ClipperBase.prototype.SwapX=function(t){t.xcurr=t.xtop,t.xtop=t.xbot,t.xbot=t.xcurr},tn.ClipperBase.prototype.Reset=function(){this.m_CurrentLM=this.m_MinimaList;for(var t=this.m_MinimaList;null!=t;){for(var e=t.leftBound;null!=e;)e.xcurr=e.xbot,e.ycurr=e.ybot,e.side=tn.EdgeSide.esLeft,e.outIdx=-1,e=e.nextInLML;for(e=t.rightBound;null!=e;)e.xcurr=e.xbot,e.ycurr=e.ybot,e.side=tn.EdgeSide.esRight,e.outIdx=-1,e=e.nextInLML;t=t.next}},tn.ClipperBase.prototype.GetBounds=function(){var t=new tn.IntRect,e=this.m_MinimaList;if(null==e)return t;for(t.left=e.leftBound.xbot,t.top=e.leftBound.ybot,t.right=e.leftBound.xbot,t.bottom=e.leftBound.ybot;null!=e;){e.leftBound.ybot>t.bottom&&(t.bottom=e.leftBound.ybot);for(var n=e.leftBound;;){for(var o=n;null!=n.nextInLML;)n.xbot<t.left&&(t.left=n.xbot),n.xbot>t.right&&(t.right=n.xbot),n=n.nextInLML;if(n.xbot<t.left&&(t.left=n.xbot),n.xbot>t.right&&(t.right=n.xbot),n.xtop<t.left&&(t.left=n.xtop),n.xtop>t.right&&(t.right=n.xtop),n.ytop<t.top&&(t.top=n.ytop),o!=e.leftBound)break;n=e.rightBound}e=e.next}return t},tn.Clipper=function(){this.m_PolyOuts=null,this.m_ClipType=tn.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectNodes=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=tn.PolyFillType.pftEvenOdd,this.m_SubjFillType=tn.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_HorizJoins=null,this.m_ReverseOutput=!1,this.m_UsingExPolygons=!1,tn.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectNodes=null,this.m_ExecuteLocked=!1,this.m_PolyOuts=[],this.m_Joins=[],this.m_HorizJoins=[],this.m_ReverseOutput=!1,this.m_UsingExPolygons=!1},tn.Clipper.prototype.Clear=function(){0!=this.m_edges.length&&(this.DisposeAllPolyPts(),tn.ClipperBase.prototype.Clear.call(this))},tn.Clipper.prototype.DisposeScanbeamList=function(){for(;null!=this.m_Scanbeam;){var t=this.m_Scanbeam.next;this.m_Scanbeam=null,this.m_Scanbeam=t}},tn.Clipper.prototype.Reset=function(){tn.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.DisposeAllPolyPts();for(var t=this.m_MinimaList;null!=t;)this.InsertScanbeam(t.Y),this.InsertScanbeam(t.leftBound.ytop),t=t.next},tn.Clipper.prototype.get_ReverseSolution=function(){return this.m_ReverseOutput},tn.Clipper.prototype.set_ReverseSolution=function(t){this.m_ReverseOutput=t},tn.Clipper.prototype.InsertScanbeam=function(t){var e;if(null==this.m_Scanbeam)this.m_Scanbeam=new tn.Scanbeam,this.m_Scanbeam.next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y)e=new tn.Scanbeam,e.Y=t,e.next=this.m_Scanbeam,this.m_Scanbeam=e;else{for(var n=this.m_Scanbeam;null!=n.next&&t<=n.next.Y;)n=n.next;if(t==n.Y)return;e=new tn.Scanbeam,e.Y=t,e.next=n.next,n.next=e}},tn.Clipper.prototype.Execute=function(t,e,n,o){var i;return 2==arguments.length&&(n=tn.PolyFillType.pftEvenOdd,o=tn.PolyFillType.pftEvenOdd),"undefined"==typeof e.exPolygons?this.m_ExecuteLocked?!1:(this.m_ExecuteLocked=!0,tn.Clear(e),this.m_SubjFillType=n,this.m_ClipFillType=o,this.m_ClipType=t,this.m_UsingExPolygons=!1,i=this.ExecuteInternal(),i&&this.BuildResult(e),this.m_ExecuteLocked=!1,i):this.m_ExecuteLocked?!1:(this.m_ExecuteLocked=!0,tn.Clear(e),this.m_SubjFillType=n,this.m_ClipFillType=o,this.m_ClipType=t,this.m_UsingExPolygons=!0,i=this.ExecuteInternal(),i&&this.BuildResultEx(e),this.m_ExecuteLocked=!1,i)},tn.Clipper.prototype.PolySort=function(t,e){if(t==e)return 0;if(null==t.pts||null==e.pts)return null==t.pts!=(null==e.pts)?null==t.pts?1:-1:0;var n,o;n=t.isHole?t.FirstLeft.idx:t.idx,o=e.isHole?e.FirstLeft.idx:e.idx;var i=n-o;return 0==i&&t.isHole!=e.isHole?t.isHole?1:-1:i},tn.Clipper.prototype.FindAppendLinkEnd=function(t){for(;null!=t.AppendLink;)t=t.AppendLink;return t},tn.Clipper.prototype.FixHoleLinkage=function(t){var e;e=null!=t.bottomPt?this.m_PolyOuts[t.bottomPt.idx].FirstLeft:t.FirstLeft,t==e&&tn.Error("HoleLinkage error"),null!=e&&(null!=e.AppendLink&&(e=this.FindAppendLinkEnd(e)),e==t?e=null:e.isHole&&(this.FixHoleLinkage(e),e=e.FirstLeft)),t.FirstLeft=e,null==e&&(t.isHole=!1),t.AppendLink=null},tn.Clipper.prototype.ExecuteInternal=function(){var t;try{if(this.Reset(),null==this.m_CurrentLM)return!0;var e=this.PopScanbeam();do{this.InsertLocalMinimaIntoAEL(e),tn.Clear(this.m_HorizJoins),this.ProcessHorizontals();var n=this.PopScanbeam();if(t=this.ProcessIntersections(e,n),!t)break;this.ProcessEdgesAtTopOfScanbeam(n),e=n}while(null!=this.m_Scanbeam)}catch(o){t=!1}if(t){for(var i,r=0;r<this.m_PolyOuts.length;r++)i=this.m_PolyOuts[r],null!=i.pts&&(this.FixupOutPolygon(i),null!=i.pts&&(i.isHole&&this.m_UsingExPolygons&&this.FixHoleLinkage(i),(i.isHole^this.m_ReverseOutput)==this.Area(i,this.m_UseFullRange)>0&&this.ReversePolyPtLinks(i.pts)));this.JoinCommonEdges(),this.m_UsingExPolygons&&this.m_PolyOuts.sort(this.PolySort)}return tn.Clear(this.m_Joins),tn.Clear(this.m_HorizJoins),t},tn.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y,e=this.m_Scanbeam;return this.m_Scanbeam=this.m_Scanbeam.next,e=null,t},tn.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0;t<this.m_PolyOuts.length;++t)this.DisposeOutRec(t);tn.Clear(this.m_PolyOuts)},tn.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];null!=e.pts&&this.DisposeOutPts(e.pts),e=null,this.m_PolyOuts[t]=null},tn.Clipper.prototype.DisposeOutPts=function(t){if(null!=t){var e=null;for(t.prev.next=null;null!=t;)e=t,t=t.next,e=null}},tn.Clipper.prototype.AddJoin=function(t,e,n,o){var i=new tn.JoinRec;i.poly1Idx=n>=0?n:t.outIdx,i.pt1a=new tn.IntPoint(t.xcurr,t.ycurr),i.pt1b=new tn.IntPoint(t.xtop,t.ytop),i.poly2Idx=o>=0?o:e.outIdx,i.pt2a=new tn.IntPoint(e.xcurr,e.ycurr),i.pt2b=new tn.IntPoint(e.xtop,e.ytop),this.m_Joins.push(i)},tn.Clipper.prototype.AddHorzJoin=function(t,e){var n=new tn.HorzJoinRec;n.edge=t,n.savedIdx=e,this.m_HorizJoins.push(n)},tn.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(var e,n;null!=this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var o=this.m_CurrentLM.leftBound,i=this.m_CurrentLM.rightBound;if(this.InsertEdgeIntoAEL(o),this.InsertScanbeam(o.ytop),this.InsertEdgeIntoAEL(i),this.IsEvenOddFillType(o)?(o.windDelta=1,i.windDelta=1):i.windDelta=-o.windDelta,this.SetWindingCount(o),i.windCnt=o.windCnt,i.windCnt2=o.windCnt2,i.dx==tn.ClipperBase.horizontal?(this.AddEdgeToSEL(i),this.InsertScanbeam(i.nextInLML.ytop)):this.InsertScanbeam(i.ytop),this.IsContributing(o)&&this.AddLocalMinPoly(o,i,new tn.IntPoint(o.xcurr,this.m_CurrentLM.Y)),i.outIdx>=0&&i.dx==tn.ClipperBase.horizontal)for(var r=0;r<this.m_HorizJoins.length;r++){e=new tn.IntPoint,n=new tn.IntPoint;var s=this.m_HorizJoins[r];(function(){e={Value:e},n={Value:n};var t=this.GetOverlapSegment(new tn.IntPoint(s.edge.xbot,s.edge.ybot),new tn.IntPoint(s.edge.xtop,s.edge.ytop),new tn.IntPoint(i.xbot,i.ybot),new tn.IntPoint(i.xtop,i.ytop),e,n);return e=e.Value,n=n.Value,t}).call(this)&&this.AddJoin(s.edge,i,s.savedIdx,-1)}if(o.nextInAEL!=i){i.outIdx>=0&&i.prevInAEL.outIdx>=0&&this.SlopesEqual(i.prevInAEL,i,this.m_UseFullRange)&&this.AddJoin(i,i.prevInAEL,-1,-1);var a=o.nextInAEL;for(e=new tn.IntPoint(o.xcurr,o.ycurr);a!=i;)null==a&&tn.Error("InsertLocalMinimaIntoAEL: missing rightbound!"),this.IntersectEdges(i,a,e,tn.Protects.ipNone),a=a.nextInAEL}this.PopLocalMinima()}},tn.Clipper.prototype.InsertEdgeIntoAEL=function(t){if(t.prevInAEL=null,t.nextInAEL=null,null==this.m_ActiveEdges)this.m_ActiveEdges=t;else if(this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.nextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.prevInAEL=t,this.m_ActiveEdges=t;else{for(var e=this.m_ActiveEdges;null!=e.nextInAEL&&!this.E2InsertsBeforeE1(e.nextInAEL,t);)e=e.nextInAEL;t.nextInAEL=e.nextInAEL,null!=e.nextInAEL&&(e.nextInAEL.prevInAEL=t),t.prevInAEL=e,e.nextInAEL=t}},tn.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.xcurr==t.xcurr?e.dx>t.dx:e.xcurr<t.xcurr},tn.Clipper.prototype.IsEvenOddFillType=function(t){return t.polyType==tn.PolyType.ptSubject?this.m_SubjFillType==tn.PolyFillType.pftEvenOdd:this.m_ClipFillType==tn.PolyFillType.pftEvenOdd},tn.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.polyType==tn.PolyType.ptSubject?this.m_ClipFillType==tn.PolyFillType.pftEvenOdd:this.m_SubjFillType==tn.PolyFillType.pftEvenOdd},tn.Clipper.prototype.IsContributing=function(t){var e,n;switch(t.polyType==tn.PolyType.ptSubject?(e=this.m_SubjFillType,n=this.m_ClipFillType):(e=this.m_ClipFillType,n=this.m_SubjFillType),e){case tn.PolyFillType.pftEvenOdd:case tn.PolyFillType.pftNonZero:if(1!=tn.Math_Abs_Int32(t.windCnt))return!1;break;case tn.PolyFillType.pftPositive:if(1!=t.windCnt)return!1;break;default:if(-1!=t.windCnt)return!1}switch(this.m_ClipType){case tn.ClipType.ctIntersection:switch(n){case tn.PolyFillType.pftEvenOdd:case tn.PolyFillType.pftNonZero:return 0!=t.windCnt2;case tn.PolyFillType.pftPositive:return t.windCnt2>0;default:return t.windCnt2<0}break;case tn.ClipType.ctUnion:switch(n){case tn.PolyFillType.pftEvenOdd:case tn.PolyFillType.pftNonZero:return 0==t.windCnt2;case tn.PolyFillType.pftPositive:return t.windCnt2<=0;default:return t.windCnt2>=0}break;case tn.ClipType.ctDifference:if(t.polyType==tn.PolyType.ptSubject)switch(n){case tn.PolyFillType.pftEvenOdd:case tn.PolyFillType.pftNonZero:return 0==t.windCnt2;case tn.PolyFillType.pftPositive:return t.windCnt2<=0;default:return t.windCnt2>=0}else switch(n){case tn.PolyFillType.pftEvenOdd:case tn.PolyFillType.pftNonZero:return 0!=t.windCnt2;case tn.PolyFillType.pftPositive:return t.windCnt2>0;default:return t.windCnt2<0}}return!0},tn.Clipper.prototype.SetWindingCount=function(t){for(var e=t.prevInAEL;null!=e&&e.polyType!=t.polyType;)e=e.prevInAEL;if(null==e?(t.windCnt=t.windDelta,t.windCnt2=0,e=this.m_ActiveEdges):this.IsEvenOddFillType(t)?(t.windCnt=1,t.windCnt2=e.windCnt2,e=e.nextInAEL):(t.windCnt=e.windCnt*e.windDelta<0?tn.Math_Abs_Int32(e.windCnt)>1?e.windDelta*t.windDelta<0?e.windCnt:e.windCnt+t.windDelta:e.windCnt+e.windDelta+t.windDelta:tn.Math_Abs_Int32(e.windCnt)>1&&e.windDelta*t.windDelta<0?e.windCnt:e.windCnt+t.windDelta==0?e.windCnt:e.windCnt+t.windDelta,t.windCnt2=e.windCnt2,e=e.nextInAEL),this.IsEvenOddAltFillType(t))for(;e!=t;)t.windCnt2=0==t.windCnt2?1:0,e=e.nextInAEL;else for(;e!=t;)t.windCnt2+=e.windDelta,e=e.nextInAEL},tn.Clipper.prototype.AddEdgeToSEL=function(t){null==this.m_SortedEdges?(this.m_SortedEdges=t,t.prevInSEL=null,t.nextInSEL=null):(t.nextInSEL=this.m_SortedEdges,t.prevInSEL=null,this.m_SortedEdges.prevInSEL=t,this.m_SortedEdges=t)},tn.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;if(this.m_SortedEdges=t,null!=this.m_ActiveEdges)for(this.m_SortedEdges.prevInSEL=null,t=t.nextInAEL;null!=t;)t.prevInSEL=t.prevInAEL,t.prevInSEL.nextInSEL=t,t.nextInSEL=null,t=t.nextInAEL},tn.Clipper.prototype.SwapPositionsInAEL=function(t,e){var n,o;(null!=t.nextInAEL||null!=t.prevInAEL)&&(null!=e.nextInAEL||null!=e.prevInAEL)&&(t.nextInAEL==e?(n=e.nextInAEL,null!=n&&(n.prevInAEL=t),o=t.prevInAEL,null!=o&&(o.nextInAEL=e),e.prevInAEL=o,e.nextInAEL=t,t.prevInAEL=e,t.nextInAEL=n):e.nextInAEL==t?(n=t.nextInAEL,null!=n&&(n.prevInAEL=e),o=e.prevInAEL,null!=o&&(o.nextInAEL=t),t.prevInAEL=o,t.nextInAEL=e,e.prevInAEL=t,e.nextInAEL=n):(n=t.nextInAEL,o=t.prevInAEL,t.nextInAEL=e.nextInAEL,null!=t.nextInAEL&&(t.nextInAEL.prevInAEL=t),t.prevInAEL=e.prevInAEL,null!=t.prevInAEL&&(t.prevInAEL.nextInAEL=t),e.nextInAEL=n,null!=e.nextInAEL&&(e.nextInAEL.prevInAEL=e),e.prevInAEL=o,null!=e.prevInAEL&&(e.prevInAEL.nextInAEL=e)),null==t.prevInAEL?this.m_ActiveEdges=t:null==e.prevInAEL&&(this.m_ActiveEdges=e))},tn.Clipper.prototype.SwapPositionsInSEL=function(t,e){var n,o;(null!=t.nextInSEL||null!=t.prevInSEL)&&(null!=e.nextInSEL||null!=e.prevInSEL)&&(t.nextInSEL==e?(n=e.nextInSEL,null!=n&&(n.prevInSEL=t),o=t.prevInSEL,null!=o&&(o.nextInSEL=e),e.prevInSEL=o,e.nextInSEL=t,t.prevInSEL=e,t.nextInSEL=n):e.nextInSEL==t?(n=t.nextInSEL,null!=n&&(n.prevInSEL=e),o=e.prevInSEL,null!=o&&(o.nextInSEL=t),t.prevInSEL=o,t.nextInSEL=e,e.prevInSEL=t,e.nextInSEL=n):(n=t.nextInSEL,o=t.prevInSEL,t.nextInSEL=e.nextInSEL,null!=t.nextInSEL&&(t.nextInSEL.prevInSEL=t),t.prevInSEL=e.prevInSEL,null!=t.prevInSEL&&(t.prevInSEL.nextInSEL=t),e.nextInSEL=n,null!=e.nextInSEL&&(e.nextInSEL.prevInSEL=e),e.prevInSEL=o,null!=e.prevInSEL&&(e.prevInSEL.nextInSEL=e)),null==t.prevInSEL?this.m_SortedEdges=t:null==e.prevInSEL&&(this.m_SortedEdges=e))
},tn.Clipper.prototype.AddLocalMaxPoly=function(t,e,n){this.AddOutPt(t,n),t.outIdx==e.outIdx?(t.outIdx=-1,e.outIdx=-1):t.outIdx<e.outIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},tn.Clipper.prototype.AddLocalMinPoly=function(t,e,n){var o,i;e.dx==tn.ClipperBase.horizontal||t.dx>e.dx?(this.AddOutPt(t,n),e.outIdx=t.outIdx,t.side=tn.EdgeSide.esLeft,e.side=tn.EdgeSide.esRight,o=t,i=o.prevInAEL==e?e.prevInAEL:o.prevInAEL):(this.AddOutPt(e,n),t.outIdx=e.outIdx,t.side=tn.EdgeSide.esRight,e.side=tn.EdgeSide.esLeft,o=e,i=o.prevInAEL==t?t.prevInAEL:o.prevInAEL),null!=i&&i.outIdx>=0&&tn.Clipper.TopX(i,n.Y)==tn.Clipper.TopX(o,n.Y)&&this.SlopesEqual(o,i,this.m_UseFullRange)&&this.AddJoin(o,i,-1,-1)},tn.Clipper.prototype.CreateOutRec=function(){var t=new tn.OutRec;return t.idx=-1,t.isHole=!1,t.FirstLeft=null,t.AppendLink=null,t.pts=null,t.bottomPt=null,t},tn.Clipper.prototype.AddOutPt=function(t,e){var n,o,i=t.side==tn.EdgeSide.esLeft;if(t.outIdx<0)n=this.CreateOutRec(),this.m_PolyOuts.push(n),n.idx=this.m_PolyOuts.length-1,t.outIdx=n.idx,o=new tn.OutPt,n.pts=o,n.bottomPt=o,o.pt=e,o.idx=n.idx,o.next=o,o.prev=o,this.SetHoleState(t,n);else{n=this.m_PolyOuts[t.outIdx],o=n.pts;var r;if(i&&tn.ClipperBase.PointsEqual(e,o.pt)||!i&&tn.ClipperBase.PointsEqual(e,o.prev.pt))return;r=new tn.OutPt,r.pt=e,r.idx=n.idx,r.pt.Y==n.bottomPt.pt.Y&&r.pt.X<n.bottomPt.pt.X&&(n.bottomPt=r),r.next=o,r.prev=o.prev,r.prev.next=r,o.prev=r,i&&(n.pts=r)}},tn.Clipper.prototype.SwapPoints=function(t,e){var n=t.Value;t.Value=e.Value,e.Value=n},tn.Clipper.prototype.GetOverlapSegment=function(t,e,n,o,i,r){return tn.Math_Abs_Int64(t.X-e.X)>tn.Math_Abs_Int64(t.Y-e.Y)?(t.X>e.X&&function(){t={Value:t},e={Value:e};var n=this.SwapPoints(t,e);return t=t.Value,e=e.Value,n}.call(this),n.X>o.X&&function(){n={Value:n},o={Value:o};var t=this.SwapPoints(n,o);return n=n.Value,o=o.Value,t}.call(this),i.Value=t.X>n.X?t:n,r.Value=e.X<o.X?e:o,i.Value.X<r.Value.X):(t.Y<e.Y&&function(){t={Value:t},e={Value:e};var n=this.SwapPoints(t,e);return t=t.Value,e=e.Value,n}.call(this),n.Y<o.Y&&function(){n={Value:n},o={Value:o};var t=this.SwapPoints(n,o);return n=n.Value,o=o.Value,t}.call(this),i.Value=t.Y<n.Y?t:n,r.Value=e.Y>o.Y?e:o,i.Value.Y>r.Value.Y)},tn.Clipper.prototype.FindSegment=function(t,e,n,o){if(null==t.Value)return!1;var i=t.Value,r=new tn.IntPoint(n.Value),s=new tn.IntPoint(o.Value);do{if(this.SlopesEqual(r,s,t.Value.pt,t.Value.prev.pt,e)&&this.SlopesEqual(r,s,t.Value.pt,e)&&this.GetOverlapSegment(r,s,t.Value.pt,t.Value.prev.pt,n,o))return!0;t.Value=t.Value.next}while(t.Value!=i);return!1},tn.Clipper.prototype.Pt3IsBetweenPt1AndPt2=function(t,e,n){return tn.ClipperBase.PointsEqual(t,n)||tn.ClipperBase.PointsEqual(e,n)?!0:t.X!=e.X?t.X<n.X==n.X<e.X:t.Y<n.Y==n.Y<e.Y},tn.Clipper.prototype.InsertPolyPtBetween=function(t,e,n){var o=new tn.OutPt;return o.pt=n,e==t.next?(t.next=o,e.prev=o,o.next=e,o.prev=t):(e.next=o,t.prev=o,o.next=t,o.prev=e),o},tn.Clipper.prototype.SetHoleState=function(t,e){for(var n=!1,o=t.prevInAEL;null!=o;)o.outIdx>=0&&(n=!n,null==e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[o.outIdx])),o=o.prevInAEL;n&&(e.isHole=!0)},tn.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?tn.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},tn.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var n=t.prev;tn.ClipperBase.PointsEqual(n.pt,t.pt)&&n!=t;)n=n.prev;var o=tn.Math_Abs_Double(this.GetDx(t.pt,n.pt));for(n=t.next;tn.ClipperBase.PointsEqual(n.pt,t.pt)&&n!=t;)n=n.next;var i=tn.Math_Abs_Double(this.GetDx(t.pt,n.pt));for(n=e.prev;tn.ClipperBase.PointsEqual(n.pt,e.pt)&&n!=e;)n=n.prev;var r=tn.Math_Abs_Double(this.GetDx(e.pt,n.pt));for(n=e.next;tn.ClipperBase.PointsEqual(n.pt,e.pt)&&n!=e;)n=n.next;var s=tn.Math_Abs_Double(this.GetDx(e.pt,n.pt));return o>=r&&o>=s||i>=r&&i>=s},tn.Clipper.prototype.GetBottomPt=function(t){for(var e=null,n=t.next;n!=t;)n.pt.Y>t.pt.Y?(t=n,e=null):n.pt.Y==t.pt.Y&&n.pt.X<=t.pt.X&&(n.pt.X<t.pt.X?(e=null,t=n):n.next!=t&&n.prev!=t&&(e=n)),n=n.next;if(null!=e)for(;e!=n;)for(this.FirstIsBottomPt(n,e)||(t=e),e=e.next;!tn.ClipperBase.PointsEqual(e.pt,t.pt);)e=e.next;return t},tn.Clipper.prototype.GetLowermostRec=function(t,e){var n=t.bottomPt,o=e.bottomPt;return n.pt.Y>o.pt.Y?t:n.pt.Y<o.pt.Y?e:n.pt.X<o.pt.X?t:n.pt.X>o.pt.X?e:n.next==n?e:o.next==o?t:this.FirstIsBottomPt(n,o)?t:e},tn.Clipper.prototype.Param1RightOfParam2=function(t,e){do if(t=t.FirstLeft,t==e)return!0;while(null!=t);return!1},tn.Clipper.prototype.AppendPolygon=function(t,e){var n,o=this.m_PolyOuts[t.outIdx],i=this.m_PolyOuts[e.outIdx];n=this.Param1RightOfParam2(o,i)?i:this.Param1RightOfParam2(i,o)?o:this.GetLowermostRec(o,i);var r,s,a=o.pts,l=a.prev,p=i.pts,u=p.prev;t.side==tn.EdgeSide.esLeft?(e.side==tn.EdgeSide.esLeft?(this.ReversePolyPtLinks(p),p.next=a,a.prev=p,l.next=u,u.prev=l,o.pts=u):(u.next=a,a.prev=u,p.prev=l,l.next=p,o.pts=p),r=tn.EdgeSide.esLeft):(e.side==tn.EdgeSide.esRight?(this.ReversePolyPtLinks(p),l.next=u,u.prev=l,p.next=a,a.prev=p):(l.next=p,p.prev=l,a.prev=u,u.next=a),r=tn.EdgeSide.esRight),n==i&&(o.bottomPt=i.bottomPt,o.bottomPt.idx=o.idx,i.FirstLeft!=o&&(o.FirstLeft=i.FirstLeft),o.isHole=i.isHole),i.pts=null,i.bottomPt=null,i.AppendLink=o;var h=t.outIdx,d=e.outIdx;t.outIdx=-1,e.outIdx=-1;for(var c=this.m_ActiveEdges;null!=c;){if(c.outIdx==d){c.outIdx=h,c.side=r;break}c=c.nextInAEL}for(s=0;s<this.m_Joins.length;++s)this.m_Joins[s].poly1Idx==d&&(this.m_Joins[s].poly1Idx=h),this.m_Joins[s].poly2Idx==d&&(this.m_Joins[s].poly2Idx=h);for(s=0;s<this.m_HorizJoins.length;++s)this.m_HorizJoins[s].savedIdx==d&&(this.m_HorizJoins[s].savedIdx=h)},tn.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!=t){var e,n;e=t;do n=e.next,e.next=e.prev,e.prev=n,e=n;while(e!=t)}},tn.Clipper.SwapSides=function(t,e){var n=t.side;t.side=e.side,e.side=n},tn.Clipper.SwapPolyIndexes=function(t,e){var n=t.outIdx;t.outIdx=e.outIdx,e.outIdx=n},tn.Clipper.prototype.DoEdge1=function(t,e,n){this.AddOutPt(t,n),tn.Clipper.SwapSides(t,e),tn.Clipper.SwapPolyIndexes(t,e)},tn.Clipper.prototype.DoEdge2=function(t,e,n){this.AddOutPt(e,n),tn.Clipper.SwapSides(t,e),tn.Clipper.SwapPolyIndexes(t,e)},tn.Clipper.prototype.DoBothEdges=function(t,e,n){this.AddOutPt(t,n),this.AddOutPt(e,n),tn.Clipper.SwapSides(t,e),tn.Clipper.SwapPolyIndexes(t,e)},tn.Clipper.prototype.IntersectEdges=function(t,e,n,o){var i=0==(tn.Protects.ipLeft&o)&&null==t.nextInLML&&t.xtop==n.X&&t.ytop==n.Y,r=0==(tn.Protects.ipRight&o)&&null==e.nextInLML&&e.xtop==n.X&&e.ytop==n.Y,s=t.outIdx>=0,a=e.outIdx>=0;if(t.polyType==e.polyType)if(this.IsEvenOddFillType(t)){var l=t.windCnt;t.windCnt=e.windCnt,e.windCnt=l}else t.windCnt+e.windDelta==0?t.windCnt=-t.windCnt:t.windCnt+=e.windDelta,e.windCnt-t.windDelta==0?e.windCnt=-e.windCnt:e.windCnt-=t.windDelta;else this.IsEvenOddFillType(e)?t.windCnt2=0==t.windCnt2?1:0:t.windCnt2+=e.windDelta,this.IsEvenOddFillType(t)?e.windCnt2=0==e.windCnt2?1:0:e.windCnt2-=t.windDelta;var p,u,h,d;t.polyType==tn.PolyType.ptSubject?(p=this.m_SubjFillType,h=this.m_ClipFillType):(p=this.m_ClipFillType,h=this.m_SubjFillType),e.polyType==tn.PolyType.ptSubject?(u=this.m_SubjFillType,d=this.m_ClipFillType):(u=this.m_ClipFillType,d=this.m_SubjFillType);var c,g;switch(p){case tn.PolyFillType.pftPositive:c=t.windCnt;break;case tn.PolyFillType.pftNegative:c=-t.windCnt;break;default:c=tn.Math_Abs_Int32(t.windCnt)}switch(u){case tn.PolyFillType.pftPositive:g=e.windCnt;break;case tn.PolyFillType.pftNegative:g=-e.windCnt;break;default:g=tn.Math_Abs_Int32(e.windCnt)}if(s&&a)i||r||0!=c&&1!=c||0!=g&&1!=g||t.polyType!=e.polyType&&this.m_ClipType!=tn.ClipType.ctXor?this.AddLocalMaxPoly(t,e,n):this.DoBothEdges(t,e,n);else if(s)0!=g&&1!=g||this.m_ClipType==tn.ClipType.ctIntersection&&e.polyType!=tn.PolyType.ptSubject&&0==e.windCnt2||this.DoEdge1(t,e,n);else if(a)0!=c&&1!=c||this.m_ClipType==tn.ClipType.ctIntersection&&t.polyType!=tn.PolyType.ptSubject&&0==t.windCnt2||this.DoEdge2(t,e,n);else if(!(0!=c&&1!=c||0!=g&&1!=g||i||r)){var f,m;switch(h){case tn.PolyFillType.pftPositive:f=t.windCnt2;break;case tn.PolyFillType.pftNegative:f=-t.windCnt2;break;default:f=tn.Math_Abs_Int32(t.windCnt2)}switch(d){case tn.PolyFillType.pftPositive:m=e.windCnt2;break;case tn.PolyFillType.pftNegative:m=-e.windCnt2;break;default:m=tn.Math_Abs_Int32(e.windCnt2)}if(t.polyType!=e.polyType)this.AddLocalMinPoly(t,e,n);else if(1==c&&1==g)switch(this.m_ClipType){case tn.ClipType.ctIntersection:f>0&&m>0&&this.AddLocalMinPoly(t,e,n);break;case tn.ClipType.ctUnion:0>=f&&0>=m&&this.AddLocalMinPoly(t,e,n);break;case tn.ClipType.ctDifference:(t.polyType==tn.PolyType.ptClip&&f>0&&m>0||t.polyType==tn.PolyType.ptSubject&&0>=f&&0>=m)&&this.AddLocalMinPoly(t,e,n);break;case tn.ClipType.ctXor:this.AddLocalMinPoly(t,e,n)}else tn.Clipper.SwapSides(t,e)}i!=r&&(i&&t.outIdx>=0||r&&e.outIdx>=0)&&(tn.Clipper.SwapSides(t,e),tn.Clipper.SwapPolyIndexes(t,e)),i&&this.DeleteFromAEL(t),r&&this.DeleteFromAEL(e)},tn.Clipper.prototype.DeleteFromAEL=function(t){var e=t.prevInAEL,n=t.nextInAEL;(null!=e||null!=n||t==this.m_ActiveEdges)&&(null!=e?e.nextInAEL=n:this.m_ActiveEdges=n,null!=n&&(n.prevInAEL=e),t.nextInAEL=null,t.prevInAEL=null)},tn.Clipper.prototype.DeleteFromSEL=function(t){var e=t.prevInSEL,n=t.nextInSEL;(null!=e||null!=n||t==this.m_SortedEdges)&&(null!=e?e.nextInSEL=n:this.m_SortedEdges=n,null!=n&&(n.prevInSEL=e),t.nextInSEL=null,t.prevInSEL=null)},tn.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null==t.Value.nextInLML&&tn.Error("UpdateEdgeIntoAEL: invalid call");var e=t.Value.prevInAEL,n=t.Value.nextInAEL;t.Value.nextInLML.outIdx=t.Value.outIdx,null!=e?e.nextInAEL=t.Value.nextInLML:this.m_ActiveEdges=t.Value.nextInLML,null!=n&&(n.prevInAEL=t.Value.nextInLML),t.Value.nextInLML.side=t.Value.side,t.Value.nextInLML.windDelta=t.Value.windDelta,t.Value.nextInLML.windCnt=t.Value.windCnt,t.Value.nextInLML.windCnt2=t.Value.windCnt2,t.Value=t.Value.nextInLML,t.Value.prevInAEL=e,t.Value.nextInAEL=n,t.Value.dx!=tn.ClipperBase.horizontal&&this.InsertScanbeam(t.Value.ytop)},tn.Clipper.prototype.ProcessHorizontals=function(){for(var t=this.m_SortedEdges;null!=t;)this.DeleteFromSEL(t),this.ProcessHorizontal(t),t=this.m_SortedEdges},tn.Clipper.prototype.ProcessHorizontal=function(t){var e,n,o;t.xcurr<t.xtop?(n=t.xcurr,o=t.xtop,e=tn.Direction.dLeftToRight):(n=t.xtop,o=t.xcurr,e=tn.Direction.dRightToLeft);var i;i=null!=t.nextInLML?null:this.GetMaximaPair(t);for(var r=this.GetNextInAEL(t,e);null!=r;){var s=this.GetNextInAEL(r,e);if(null!=i||e==tn.Direction.dLeftToRight&&r.xcurr<=o||e==tn.Direction.dRightToLeft&&r.xcurr>=n){if(r.xcurr==t.xtop&&null==i){if(this.SlopesEqual(r,t.nextInLML,this.m_UseFullRange)){t.outIdx>=0&&r.outIdx>=0&&this.AddJoin(t.nextInLML,r,t.outIdx,-1);break}if(r.dx<t.nextInLML.dx)break}if(r==i)return e==tn.Direction.dLeftToRight?this.IntersectEdges(t,r,new tn.IntPoint(r.xcurr,t.ycurr),0):this.IntersectEdges(r,t,new tn.IntPoint(r.xcurr,t.ycurr),0),void(i.outIdx>=0&&tn.Error("ProcessHorizontal error"));r.dx!=tn.ClipperBase.horizontal||this.IsMinima(r)||r.xcurr>r.xtop?e==tn.Direction.dLeftToRight?this.IntersectEdges(t,r,new tn.IntPoint(r.xcurr,t.ycurr),this.IsTopHorz(t,r.xcurr)?tn.Protects.ipLeft:tn.Protects.ipBoth):this.IntersectEdges(r,t,new tn.IntPoint(r.xcurr,t.ycurr),this.IsTopHorz(t,r.xcurr)?tn.Protects.ipRight:tn.Protects.ipBoth):e==tn.Direction.dLeftToRight?this.IntersectEdges(t,r,new tn.IntPoint(r.xcurr,t.ycurr),this.IsTopHorz(t,r.xcurr)?tn.Protects.ipLeft:tn.Protects.ipBoth):this.IntersectEdges(r,t,new tn.IntPoint(r.xcurr,t.ycurr),this.IsTopHorz(t,r.xcurr)?tn.Protects.ipRight:tn.Protects.ipBoth),this.SwapPositionsInAEL(t,r)}else if(e==tn.Direction.dLeftToRight&&r.xcurr>o&&null==t.nextInSEL||e==tn.Direction.dRightToLeft&&r.xcurr<n&&null==t.nextInSEL)break;r=s}null!=t.nextInLML?(t.outIdx>=0&&this.AddOutPt(t,new tn.IntPoint(t.xtop,t.ytop)),function(){t={Value:t};var e=this.UpdateEdgeIntoAEL(t);return t=t.Value,e}.call(this)):(t.outIdx>=0&&this.IntersectEdges(t,i,new tn.IntPoint(t.xtop,t.ycurr),tn.Protects.ipBoth),this.DeleteFromAEL(i),this.DeleteFromAEL(t))},tn.Clipper.prototype.IsTopHorz=function(t,e){for(var n=this.m_SortedEdges;null!=n;){if(e>=Math.min(n.xcurr,n.xtop)&&e<=Math.max(n.xcurr,n.xtop))return!1;n=n.nextInSEL}return!0},tn.Clipper.prototype.GetNextInAEL=function(t,e){return e==tn.Direction.dLeftToRight?t.nextInAEL:t.prevInAEL},tn.Clipper.prototype.IsMinima=function(t){return null!=t&&t.prev.nextInLML!=t&&t.next.nextInLML!=t},tn.Clipper.prototype.IsMaxima=function(t,e){return null!=t&&t.ytop==e&&null==t.nextInLML},tn.Clipper.prototype.IsIntermediate=function(t,e){return t.ytop==e&&null!=t.nextInLML},tn.Clipper.prototype.GetMaximaPair=function(t){return this.IsMaxima(t.next,t.ytop)&&t.next.xtop==t.xtop?t.next:t.prev},tn.Clipper.prototype.ProcessIntersections=function(t,e){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,e),null==this.m_IntersectNodes)return!0;if(!this.FixupIntersections())return!1;this.ProcessIntersectList()}catch(n){this.m_SortedEdges=null,this.DisposeIntersectNodes(),tn.Error("ProcessIntersections error")}return!0},tn.Clipper.prototype.BuildIntersectList=function(t,e){if(null!=this.m_ActiveEdges){var n=this.m_ActiveEdges;for(n.tmpX=tn.Clipper.TopX(n,e),this.m_SortedEdges=n,this.m_SortedEdges.prevInSEL=null,n=n.nextInAEL;null!=n;)n.prevInSEL=n.prevInAEL,n.prevInSEL.nextInSEL=n,n.nextInSEL=null,n.tmpX=tn.Clipper.TopX(n,e),n=n.nextInAEL;for(var o=!0;o&&null!=this.m_SortedEdges;){for(o=!1,n=this.m_SortedEdges;null!=n.nextInSEL;){var i=n.nextInSEL,r=new tn.IntPoint;n.tmpX>i.tmpX&&function(){r={Value:r};var t=this.IntersectPoint(n,i,r);return r=r.Value,t}.call(this)?(r.Y>t&&(r.Y=t,r.X=tn.Clipper.TopX(n,r.Y)),this.AddIntersectNode(n,i,r),this.SwapPositionsInSEL(n,i),o=!0):n=i}if(null==n.prevInSEL)break;n.prevInSEL.nextInSEL=null}this.m_SortedEdges=null}},tn.Clipper.prototype.FixupIntersections=function(){if(null==this.m_IntersectNodes.next)return!0;this.CopyAELToSEL();for(var t=this.m_IntersectNodes,e=this.m_IntersectNodes.next;null!=e;){var n,o=t.edge1;if(o.prevInSEL==t.edge2)n=o.prevInSEL;else if(o.nextInSEL==t.edge2)n=o.nextInSEL;else{for(;null!=e&&e.edge1.nextInSEL!=e.edge2&&e.edge1.prevInSEL!=e.edge2;)e=e.next;if(null==e)return!1;this.SwapIntersectNodes(t,e),o=t.edge1,n=t.edge2}this.SwapPositionsInSEL(o,n),t=t.next,e=t.next}return this.m_SortedEdges=null,t.edge1.prevInSEL==t.edge2||t.edge1.nextInSEL==t.edge2},tn.Clipper.prototype.ProcessIntersectList=function(){for(;null!=this.m_IntersectNodes;){var t=this.m_IntersectNodes.next;this.IntersectEdges(this.m_IntersectNodes.edge1,this.m_IntersectNodes.edge2,this.m_IntersectNodes.pt,tn.Protects.ipBoth),this.SwapPositionsInAEL(this.m_IntersectNodes.edge1,this.m_IntersectNodes.edge2),this.m_IntersectNodes=null,this.m_IntersectNodes=t}};var dn=function(t){return 0>t?Math.ceil(t-.5):Math.round(t)},cn=function(t){return 0>t?Math.ceil(t-.5):Math.floor(t+.5)},gn=function(t){return 0>t?-Math.round(Math.abs(t)):Math.round(t)},fn=function(t){return 0>t?(t-=.5,-2147483648>t?Math.ceil(t):0|t):(t+=.5,t>2147483647?Math.floor(t):0|t)};tn.Clipper.Round=Ze.msie?dn:Ze.chromium?gn:Ze.safari?fn:cn,tn.Clipper.TopX=function(t,e){return e==t.ytop?t.xtop:t.xbot+tn.Clipper.Round(t.dx*(e-t.ybot))},tn.Clipper.prototype.AddIntersectNode=function(t,e,n){var o=new tn.IntersectNode;if(o.edge1=t,o.edge2=e,o.pt=n,o.next=null,null==this.m_IntersectNodes)this.m_IntersectNodes=o;else if(this.ProcessParam1BeforeParam2(o,this.m_IntersectNodes))o.next=this.m_IntersectNodes,this.m_IntersectNodes=o;else{for(var i=this.m_IntersectNodes;null!=i.next&&this.ProcessParam1BeforeParam2(i.next,o);)i=i.next;o.next=i.next,i.next=o}},tn.Clipper.prototype.ProcessParam1BeforeParam2=function(t,e){var n;return t.pt.Y==e.pt.Y?t.edge1==e.edge1||t.edge2==e.edge1?(n=e.pt.X>t.pt.X,e.edge1.dx>0?!n:n):t.edge1==e.edge2||t.edge2==e.edge2?(n=e.pt.X>t.pt.X,e.edge2.dx>0?!n:n):e.pt.X>t.pt.X:t.pt.Y>e.pt.Y},tn.Clipper.prototype.SwapIntersectNodes=function(t,e){var n=t.edge1,o=t.edge2,i=t.pt;t.edge1=e.edge1,t.edge2=e.edge2,t.pt=e.pt,e.edge1=n,e.edge2=o,e.pt=i},tn.Clipper.prototype.IntersectPoint=function(t,e,n){var o,i;if(this.SlopesEqual(t,e,this.m_UseFullRange))return!1;if(0==t.dx)n.Value.X=t.xbot,e.dx==tn.ClipperBase.horizontal?n.Value.Y=e.ybot:(i=e.ybot-e.xbot/e.dx,n.Value.Y=tn.Clipper.Round(n.Value.X/e.dx+i));else if(0==e.dx)n.Value.X=e.xbot,t.dx==tn.ClipperBase.horizontal?n.Value.Y=t.ybot:(o=t.ybot-t.xbot/t.dx,n.Value.Y=tn.Clipper.Round(n.Value.X/t.dx+o));else{o=t.xbot-t.ybot*t.dx,i=e.xbot-e.ybot*e.dx;var r=(i-o)/(t.dx-e.dx);n.Value.Y=tn.Clipper.Round(r),n.Value.X=tn.Clipper.Round(tn.Math_Abs_Double(t.dx)<tn.Math_Abs_Double(e.dx)?t.dx*r+o:e.dx*r+i)}return n.Value.Y<t.ytop||n.Value.Y<e.ytop?t.ytop>e.ytop?(n.Value.X=t.xtop,n.Value.Y=t.ytop,tn.Clipper.TopX(e,t.ytop)<t.xtop):(n.Value.X=e.xtop,n.Value.Y=e.ytop,tn.Clipper.TopX(t,e.ytop)>e.xtop):!0},tn.Clipper.prototype.DisposeIntersectNodes=function(){for(;null!=this.m_IntersectNodes;){var t=this.m_IntersectNodes.next;this.m_IntersectNodes=null,this.m_IntersectNodes=t}},tn.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e,n=this.m_ActiveEdges;null!=n;)if(this.IsMaxima(n,t)&&this.GetMaximaPair(n).dx!=tn.ClipperBase.horizontal)e=n.prevInAEL,this.DoMaxima(n,t),n=null==e?this.m_ActiveEdges:e.nextInAEL;else{if(this.IsIntermediate(n,t)&&n.nextInLML.dx==tn.ClipperBase.horizontal){if(n.outIdx>=0){this.AddOutPt(n,new tn.IntPoint(n.xtop,n.ytop));for(var o=0;o<this.m_HorizJoins.length;++o){var i=new tn.IntPoint,r=new tn.IntPoint,s=this.m_HorizJoins[o];(function(){i={Value:i},r={Value:r};var t=this.GetOverlapSegment(new tn.IntPoint(s.edge.xbot,s.edge.ybot),new tn.IntPoint(s.edge.xtop,s.edge.ytop),new tn.IntPoint(n.nextInLML.xbot,n.nextInLML.ybot),new tn.IntPoint(n.nextInLML.xtop,n.nextInLML.ytop),i,r);return i=i.Value,r=r.Value,t}).call(this)&&this.AddJoin(s.edge,n.nextInLML,s.savedIdx,n.outIdx)}this.AddHorzJoin(n.nextInLML,n.outIdx)}(function(){n={Value:n};var t=this.UpdateEdgeIntoAEL(n);return n=n.Value,t}).call(this),this.AddEdgeToSEL(n)}else n.xcurr=tn.Clipper.TopX(n,t),n.ycurr=t;n=n.nextInAEL}for(this.ProcessHorizontals(),n=this.m_ActiveEdges;null!=n;){if(this.IsIntermediate(n,t)){n.outIdx>=0&&this.AddOutPt(n,new tn.IntPoint(n.xtop,n.ytop)),function(){n={Value:n};var t=this.UpdateEdgeIntoAEL(n);return n=n.Value,t}.call(this),e=n.prevInAEL;var a=n.nextInAEL;null!=e&&e.xcurr==n.xbot&&e.ycurr==n.ybot&&n.outIdx>=0&&e.outIdx>=0&&e.ycurr>e.ytop&&this.SlopesEqual(n,e,this.m_UseFullRange)?(this.AddOutPt(e,new tn.IntPoint(n.xbot,n.ybot)),this.AddJoin(n,e,-1,-1)):null!=a&&a.xcurr==n.xbot&&a.ycurr==n.ybot&&n.outIdx>=0&&a.outIdx>=0&&a.ycurr>a.ytop&&this.SlopesEqual(n,a,this.m_UseFullRange)&&(this.AddOutPt(a,new tn.IntPoint(n.xbot,n.ybot)),this.AddJoin(n,a,-1,-1))}n=n.nextInAEL}},tn.Clipper.prototype.DoMaxima=function(t,e){for(var n=this.GetMaximaPair(t),o=t.xtop,i=t.nextInAEL;i!=n;)null==i&&tn.Error("DoMaxima error"),this.IntersectEdges(t,i,new tn.IntPoint(o,e),tn.Protects.ipBoth),i=i.nextInAEL;t.outIdx<0&&n.outIdx<0?(this.DeleteFromAEL(t),this.DeleteFromAEL(n)):t.outIdx>=0&&n.outIdx>=0?this.IntersectEdges(t,n,new tn.IntPoint(o,e),tn.Protects.ipNone):tn.Error("DoMaxima error")},tn.Clipper.ReversePolygons=function(t){for(var e=t.length,n=0;e>n;n++)t[n]instanceof Array&&t[n].reverse()},tn.Clipper.Orientation=function(t){return this.Area(t)>=0},tn.Clipper.prototype.PointCount=function(t){if(null==t)return 0;var e=0,n=t;do e++,n=n.next;while(n!=t);return e},tn.Clipper.prototype.BuildResult=function(t){tn.Clear(t);for(var e,n=this.m_PolyOuts.length,o=0;n>o;o++)if(e=this.m_PolyOuts[o],null!=e.pts){var i=e.pts,r=this.PointCount(i);if(!(3>r)){for(var s=new tn.Polygon(r),a=0;r>a;a++)s.push(new tn.IntPoint(i.pt.X,i.pt.Y)),i=i.prev;t.push(s)}}},tn.Clipper.prototype.BuildResultEx=function(t){tn.Clear(t);for(var e=0;e<this.m_PolyOuts.length;){var n=this.m_PolyOuts[e++];if(null==n.pts)break;var o=n.pts,i=this.PointCount(o);if(!(3>i)){var r=new tn.ExPolygon;r.outer=new tn.Polygon,r.holes=new tn.Polygons;for(var s=0;i>s;s++)r.outer.push(new tn.IntPoint(o.pt.X,o.pt.Y)),o=o.prev;for(;e<this.m_PolyOuts.length&&(n=this.m_PolyOuts[e],null!=n.pts&&n.isHole);){var a=new tn.Polygon;o=n.pts;do a.push(new tn.IntPoint(o.pt.X,o.pt.Y)),o=o.prev;while(o!=n.pts);r.holes.push(a),e++}t.push(r)}}},tn.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.pts=t.bottomPt;for(var n=t.bottomPt;;){if(n.prev==n||n.prev==n.next)return this.DisposeOutPts(n),t.pts=null,void(t.bottomPt=null);if(tn.ClipperBase.PointsEqual(n.pt,n.next.pt)||this.SlopesEqual(n.prev.pt,n.pt,n.next.pt,this.m_UseFullRange)){e=null;var o=n;n==t.bottomPt&&(t.bottomPt=null),n.prev.next=n.next,n.next.prev=n.prev,n=n.prev,o=null}else{if(n==e)break;null==e&&(e=n),n=n.next}}null==t.bottomPt&&(t.bottomPt=this.GetBottomPt(n),t.bottomPt.idx=t.idx,t.pts=t.bottomPt)},tn.Clipper.prototype.JoinPoints=function(t,e,n){e.Value=null,n.Value=null;var o=this.m_PolyOuts[t.poly1Idx],i=this.m_PolyOuts[t.poly2Idx];if(null==o||null==i)return!1;var r=o.pts,s=i.pts,a=t.pt2a,l=t.pt2b,p=t.pt1a,u=t.pt1b;if(!function(){r={Value:r},a={Value:a},l={Value:l};var t=this.FindSegment(r,this.m_UseFullRange,a,l);return r=r.Value,a=a.Value,l=l.Value,t}.call(this))return!1;if(o==i){if(s=r.next,!function(){s={Value:s},p={Value:p},u={Value:u};var t=this.FindSegment(s,this.m_UseFullRange,p,u);return s=s.Value,p=p.Value,u=u.Value,t}.call(this)||s==r)return!1}else if(!function(){s={Value:s},p={Value:p},u={Value:u};var t=this.FindSegment(s,this.m_UseFullRange,p,u);return s=s.Value,p=p.Value,u=u.Value,t}.call(this))return!1;if(!function(){a={Value:a},l={Value:l};var t=this.GetOverlapSegment(a.Value,l.Value,p,u,a,l);return a=a.Value,l=l.Value,t}.call(this))return!1;var h,d,c=r.prev;return e.Value=tn.ClipperBase.PointsEqual(r.pt,a)?r:tn.ClipperBase.PointsEqual(c.pt,a)?c:this.InsertPolyPtBetween(r,c,a),n.Value=tn.ClipperBase.PointsEqual(r.pt,l)?r:tn.ClipperBase.PointsEqual(c.pt,l)?c:e.Value==r||e.Value==c?this.InsertPolyPtBetween(r,c,l):this.Pt3IsBetweenPt1AndPt2(r.pt,e.Value.pt,l)?this.InsertPolyPtBetween(r,e.Value,l):this.InsertPolyPtBetween(e.Value,c,l),c=s.prev,h=tn.ClipperBase.PointsEqual(s.pt,a)?s:tn.ClipperBase.PointsEqual(c.pt,a)?c:this.InsertPolyPtBetween(s,c,a),d=tn.ClipperBase.PointsEqual(s.pt,l)?s:tn.ClipperBase.PointsEqual(c.pt,l)?c:h==s||h==c?this.InsertPolyPtBetween(s,c,l):this.Pt3IsBetweenPt1AndPt2(s.pt,h.pt,l)?this.InsertPolyPtBetween(s,h,l):this.InsertPolyPtBetween(h,c,l),e.Value.next==n.Value&&h.prev==d?(e.Value.next=h,h.prev=e.Value,n.Value.prev=d,d.next=n.Value,!0):e.Value.prev==n.Value&&h.next==d?(e.Value.prev=h,h.next=e.Value,n.Value.next=d,d.prev=n.Value,!0):!1},tn.Clipper.prototype.FixupJoinRecs=function(t,e,n){for(var o=n;o<this.m_Joins.length;o++){var i=this.m_Joins[o];i.poly1Idx==t.poly1Idx&&this.PointIsVertex(i.pt1a,e)&&(i.poly1Idx=t.poly2Idx),i.poly2Idx==t.poly1Idx&&this.PointIsVertex(i.pt2a,e)&&(i.poly2Idx=t.poly2Idx)}},tn.Clipper.prototype.JoinCommonEdges=function(){for(var t,e,n=0;n<this.m_Joins.length;n++){var o,i,r=this.m_Joins[n];if(function(){o={Value:o},i={Value:i};var t=this.JoinPoints(r,o,i);return o=o.Value,i=i.Value,t}.call(this)){var s=this.m_PolyOuts[r.poly1Idx],a=this.m_PolyOuts[r.poly2Idx];if(s==a){if(s.pts=this.GetBottomPt(o),s.bottomPt=s.pts,s.bottomPt.idx=s.idx,a=this.CreateOutRec(),this.m_PolyOuts.push(a),a.idx=this.m_PolyOuts.length-1,r.poly2Idx=a.idx,a.pts=this.GetBottomPt(i),a.bottomPt=a.pts,a.bottomPt.idx=a.idx,this.PointInPolygon(a.pts.pt,s.pts,this.m_UseFullRange))a.isHole=!s.isHole,a.FirstLeft=s,this.FixupJoinRecs(r,i,n+1),this.FixupOutPolygon(s),this.FixupOutPolygon(a),(a.isHole^this.m_ReverseOutput)==this.Area(a,this.m_UseFullRange)>0&&this.ReversePolyPtLinks(a.pts);else if(this.PointInPolygon(s.pts.pt,a.pts,this.m_UseFullRange)){if(a.isHole=s.isHole,s.isHole=!a.isHole,a.FirstLeft=s.FirstLeft,s.FirstLeft=a,this.FixupJoinRecs(r,i,n+1),this.FixupOutPolygon(s),this.FixupOutPolygon(a),(s.isHole^this.m_ReverseOutput)==this.Area(s,this.m_UseFullRange)>0&&this.ReversePolyPtLinks(s.pts),this.m_UsingExPolygons&&s.isHole)for(t=0;t<this.m_PolyOuts.length;++t)e=this.m_PolyOuts[t],e.isHole&&null!=e.bottomPt&&e.FirstLeft==s&&(e.FirstLeft=a)}else if(a.isHole=s.isHole,a.FirstLeft=s.FirstLeft,this.FixupJoinRecs(r,i,n+1),this.FixupOutPolygon(s),this.FixupOutPolygon(a),this.m_UsingExPolygons&&null!=a.pts)for(t=0;t<this.m_PolyOuts.length;++t)e=this.m_PolyOuts[t],e.isHole&&null!=e.bottomPt&&e.FirstLeft==s&&this.PointInPolygon(e.bottomPt.pt,a.pts,this.m_UseFullRange)&&(e.FirstLeft=a)}else{if(this.m_UsingExPolygons)for(t=0;t<this.m_PolyOuts.length;++t)this.m_PolyOuts[t].isHole&&null!=this.m_PolyOuts[t].bottomPt&&this.m_PolyOuts[t].FirstLeft==a&&(this.m_PolyOuts[t].FirstLeft=s);this.FixupOutPolygon(s),null!=s.pts&&(s.isHole=this.Area(s,this.m_UseFullRange)<0,s.isHole&&null==s.FirstLeft&&(s.FirstLeft=a.FirstLeft));var l=s.idx,p=a.idx;for(a.pts=null,a.bottomPt=null,a.AppendLink=s,t=n+1;t<this.m_Joins.length;t++){var u=this.m_Joins[t];u.poly1Idx==p&&(u.poly1Idx=l),u.poly2Idx==p&&(u.poly2Idx=l)}}}}},tn.Clipper.FullRangeNeeded=function(t){for(var e=!1,n=0;n<t.length;n++)tn.Math_Abs_Int64(t[n].X)>tn.ClipperBase.hiRange||tn.Math_Abs_Int64(t[n].Y)>tn.ClipperBase.hiRange?tn.Error("Coordinate exceeds range bounds in FullRangeNeeded()."):(tn.Math_Abs_Int64(t[n].X)>tn.ClipperBase.loRange||tn.Math_Abs_Int64(t[n].Y)>tn.ClipperBase.loRange)&&(e=!0);return e},tn.Clipper.prototype.Area=tn.Clipper.Area=function(){var e,n,o=arguments;if(1==o.length){var i=o[0],r=i.length-1;if(2>r)return 0;if(tn.Clipper.FullRangeNeeded(i)){for(n=new t(i[r].X+i[0].X).multiply(new t(i[0].Y-i[r].Y)),e=1;r>=e;++e)n=n.add(new t(i[e-1].X+i[e].X).multiply(new t(i[e].Y-i[e-1].Y)));return parseFloat(n.toString())/2}var s=(i[r].X+i[0].X)*(i[0].Y-i[r].Y);for(e=1;r>=e;++e)s+=(i[e-1].X+i[e].X)*(i[e].Y-i[e-1].Y);return s/2}if(2==o.length){var a=o[0],l=o[1],p=a.pts;if(null==p)return 0;if(l){n=new t(t.ZERO);do n=n.add(new t(p.pt.X+p.prev.pt.X).multiply(new t(p.prev.pt.Y-p.pt.Y))),p=p.next;while(p!=a.pts);return parseFloat(n.toString())/2}n=0;do n+=(p.pt.X+p.prev.pt.X)*(p.prev.pt.Y-p.pt.Y),p=p.next;while(p!=a.pts);return n/2}},tn.Clipper.BuildArc=function(t,e,n,o){var i=Math.sqrt(tn.Math_Abs_Double(o))*tn.Math_Abs_Double(n-e);i/=4,6>i&&(i=6),i>64&&(i=tn.MaxSteps);for(var r=tn.Cast_Int32(i),s=new tn.Polygon,a=(n-e)/(r-1),l=e,p=0;r>p;++p)s.push(new tn.IntPoint(t.X+tn.Clipper.Round(Math.cos(l)*o),t.Y+tn.Clipper.Round(Math.sin(l)*o))),l+=a;return s},tn.Clipper.GetUnitNormal=function(t,e){var n=e.X-t.X,o=e.Y-t.Y;if(0==n&&0==o)return new tn.Clipper.DoublePoint(0,0);var i=1/Math.sqrt(n*n+o*o);return n*=i,o*=i,new tn.Clipper.DoublePoint(o,-n)},tn.Clipper.prototype.OffsetPolygons=function(t,e,n,o,i){var r=arguments;4==r.length?i=!0:3==r.length?(o=2,i=!0):2==r.length&&(n=tn.JoinType.jtSquare,o=2,i=!0),isNaN(e)?tn.Error("Delta is not a number"):isNaN(o)&&tn.Error("MiterLimit is not a number");var s={};return new tn.Clipper.PolyOffsetBuilder(t,s,e,n,o,i),s=s.Value?s.Value:[[]]},tn.Clipper.prototype.SimplifyPolygon=function(t,e){var n=new tn.Polygons,o=new tn.Clipper;return o.AddPolygon(t,tn.PolyType.ptSubject)&&o.Execute(tn.ClipType.ctUnion,n,e,e),n},tn.Clipper.prototype.SimplifyPolygons=function(t,e){var n=new tn.Polygons,o=new tn.Clipper;return o.AddPolygons(t,tn.PolyType.ptSubject)&&o.Execute(tn.ClipType.ctUnion,n,e,e),n};var mn,yn=tn.Clipper,vn=tn.ClipperBase;if("undefined"==typeof Object.getOwnPropertyNames){for(mn in vn.prototype)("undefined"==typeof yn.prototype[mn]||yn.prototype[mn]==Object.prototype[mn])&&(yn.prototype[mn]=vn.prototype[mn]);for(mn in vn)"undefined"==typeof yn[mn]&&(yn[mn]=vn[mn]);yn.$baseCtor=vn}else{for(var xn=Object.getOwnPropertyNames(vn.prototype),En=0;En<xn.length;En++)"undefined"==typeof Object.getOwnPropertyDescriptor(yn.prototype,xn[En])&&Object.defineProperty(yn.prototype,xn[En],Object.getOwnPropertyDescriptor(vn.prototype,xn[En]));for(mn in vn)"undefined"==typeof yn[mn]&&(yn[mn]=vn[mn]);yn.$baseCtor=vn}tn.Clipper.DoublePoint=function(t,e){this.X=t,this.Y=e},tn.Clipper.PolyOffsetBuilder=function(t,e,n,o,i,r){if(this.pts=null,this.currentPoly=null,this.normals=null,this.delta=0,this.m_R=0,this.m_i=0,this.m_j=0,this.m_k=0,this.botPt=null,0==n)return void(e.Value=t);this.pts=t,this.delta=n;var s,a;if(r){for(var l=this.pts.length,p=0;l>p&&0==this.pts[p].length;)p++;if(p==l)return;for(this.botPt=this.pts[p][0],s=p;l>s;++s)for(this.UpdateBotPt(this.pts[s][0])&&(p=s),a=this.pts[s].length-1;a>0;a--)tn.ClipperBase.PointsEqual(this.pts[s][a],this.pts[s][a-1])?this.pts[s].splice(a,1):this.UpdateBotPt(this.pts[s][a])&&(p=s);tn.Clipper.Orientation(this.pts[p])||tn.Clipper.ReversePolygons(this.pts)}1>=i&&(i=1);var u=2/(i*i);this.normals=[];e.Value=new tn.Polygons;var h;for(this.m_i=0;this.m_i<this.pts.length;this.m_i++)if(h=this.pts[this.m_i].length,h>1&&this.pts[this.m_i][0].X==this.pts[this.m_i][h-1].X&&this.pts[this.m_i][0].Y==this.pts[this.m_i][h-1].Y&&h--,!(0==h||3>h&&0>=n))if(1!=h){for(tn.Clear(this.normals),a=0;h-1>a;++a)this.normals.push(tn.Clipper.GetUnitNormal(this.pts[this.m_i][a],this.pts[this.m_i][a+1]));for(this.normals.push(tn.Clipper.GetUnitNormal(this.pts[this.m_i][h-1],this.pts[this.m_i][0])),this.currentPoly=new tn.Polygon,this.m_k=h-1,this.m_j=0;this.m_j<h;++this.m_j){switch(o){case tn.JoinType.jtMiter:this.m_R=1+(this.normals[this.m_j].X*this.normals[this.m_k].X+this.normals[this.m_j].Y*this.normals[this.m_k].Y),this.m_R>=u?this.DoMiter():this.DoSquare(i);break;case tn.JoinType.jtRound:this.DoRound();break;case tn.JoinType.jtSquare:this.DoSquare(1)}this.m_k=this.m_j}e.Value.push(this.currentPoly)}else{var d;d=tn.Clipper.BuildArc(this.pts[this.m_i][h-1],0,tn.PI2,n),e.Value.push(d)}var c=new tn.Clipper;if(c.AddPolygons(e.Value,tn.PolyType.ptSubject),n>0)c.Execute(tn.ClipType.ctUnion,e.Value,tn.PolyFillType.pftPositive,tn.PolyFillType.pftPositive);else{var g=c.GetBounds(),f=new tn.Polygon;if(f.push(new tn.IntPoint(g.left-10,g.bottom+10)),f.push(new tn.IntPoint(g.right+10,g.bottom+10)),f.push(new tn.IntPoint(g.right+10,g.top-10)),f.push(new tn.IntPoint(g.left-10,g.top-10)),c.AddPolygon(f,tn.PolyType.ptSubject),c.Execute(tn.ClipType.ctUnion,e.Value,tn.PolyFillType.pftNegative,tn.PolyFillType.pftNegative),e.Value.length>0)for(e.Value.splice(0,1),s=0;s<e.Value.length;s++)e.Value[s].reverse()}},tn.Clipper.PolyOffsetBuilder.prototype.UpdateBotPt=function(t){return t.Y>this.botPt.Y||t.Y==this.botPt.Y&&t.X<this.botPt.X?(this.botPt=t,!0):!1},tn.Clipper.PolyOffsetBuilder.prototype.AddPoint=function(t){this.currentPoly.push(t)},tn.Clipper.PolyOffsetBuilder.prototype.DoSquare=function(t){var e=new tn.IntPoint(tn.Cast_Int64(tn.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_k].X*this.delta)),tn.Cast_Int64(tn.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_k].Y*this.delta))),n=new tn.IntPoint(tn.Cast_Int64(tn.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_j].X*this.delta)),tn.Cast_Int64(tn.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_j].Y*this.delta)));if((this.normals[this.m_k].X*this.normals[this.m_j].Y-this.normals[this.m_j].X*this.normals[this.m_k].Y)*this.delta>=0){var o=Math.atan2(this.normals[this.m_k].Y,this.normals[this.m_k].X),i=Math.atan2(-this.normals[this.m_j].Y,-this.normals[this.m_j].X);o=Math.abs(i-o),o>tn.PI&&(o=tn.PI2-o);var r=Math.tan((tn.PI-o)/4)*Math.abs(this.delta*t);e=new tn.IntPoint(tn.Cast_Int64(e.X-this.normals[this.m_k].Y*r),tn.Cast_Int64(e.Y+this.normals[this.m_k].X*r)),this.AddPoint(e),n=new tn.IntPoint(tn.Cast_Int64(n.X+this.normals[this.m_j].Y*r),tn.Cast_Int64(n.Y-this.normals[this.m_j].X*r)),this.AddPoint(n)}else this.AddPoint(e),this.AddPoint(this.pts[this.m_i][this.m_j]),this.AddPoint(n)},tn.Clipper.PolyOffsetBuilder.prototype.DoMiter=function(){if((this.normals[this.m_k].X*this.normals[this.m_j].Y-this.normals[this.m_j].X*this.normals[this.m_k].Y)*this.delta>=0){var t=this.delta/this.m_R;this.AddPoint(new tn.IntPoint(tn.Cast_Int64(tn.Clipper.Round(this.pts[this.m_i][this.m_j].X+(this.normals[this.m_k].X+this.normals[this.m_j].X)*t)),tn.Cast_Int64(tn.Clipper.Round(this.pts[this.m_i][this.m_j].Y+(this.normals[this.m_k].Y+this.normals[this.m_j].Y)*t))))}else{var e=new tn.IntPoint(tn.Cast_Int64(tn.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_k].X*this.delta)),tn.Cast_Int64(tn.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_k].Y*this.delta))),n=new tn.IntPoint(tn.Cast_Int64(tn.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_j].X*this.delta)),tn.Cast_Int64(tn.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_j].Y*this.delta)));this.AddPoint(e),this.AddPoint(this.pts[this.m_i][this.m_j]),this.AddPoint(n)}},tn.Clipper.PolyOffsetBuilder.prototype.DoRound=function(){var t=new tn.IntPoint(tn.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_k].X*this.delta),tn.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_k].Y*this.delta)),e=new tn.IntPoint(tn.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_j].X*this.delta),tn.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_j].Y*this.delta));
if(this.AddPoint(t),(this.normals[this.m_k].X*this.normals[this.m_j].Y-this.normals[this.m_j].X*this.normals[this.m_k].Y)*this.delta>=0){if(this.normals[this.m_j].X*this.normals[this.m_k].X+this.normals[this.m_j].Y*this.normals[this.m_k].Y<.985){var n=Math.atan2(this.normals[this.m_k].Y,this.normals[this.m_k].X),o=Math.atan2(this.normals[this.m_j].Y,this.normals[this.m_j].X);this.delta>0&&n>o?o+=tn.PI2:this.delta<0&&o>n&&(o-=tn.PI2);for(var i=tn.Clipper.BuildArc(this.pts[this.m_i][this.m_j],n,o,this.delta),r=0;r<i.length;r++)this.AddPoint(i[r])}}else this.AddPoint(this.pts[this.m_i][this.m_j]);this.AddPoint(e)},tn.Error=function(t){try{throw new Error(t)}catch(e){alert(e.message)}},tn.Clone=function(t){if(!(t instanceof Array))return[];if(0==t.length)return[];if(1==t.length&&0==t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var n,o,i,r,s=t.length,a=[];for(o=0;s>o;o++){for(n=t[o].length,r=[],i=0;n>i;i++)r.push({X:t[o][i].X,Y:t[o][i].Y});a.push(r)}return e||(a=a[0]),a},tn.Clean=function(t,e){if(!(t instanceof Array))return[];var n=t[0]instanceof Array,t=tn.Clone(t);if("number"!=typeof e||null===e)return tn.Error("Delta is not a number in Clean()."),t;if(0==t.length||1==t.length&&0==t[0].length||0>e)return t;n||(t=[t]);for(var o,i,r,s,a,l,p,u=t.length,h=[],d=0;u>d;d++)if(i=t[d],o=i.length,0!=o)if(3>o)r=i,h.push(r);else{for(r=i,s=e*e,a=i[0],l=1,p=1;o>p;p++)(i[p].X-a.X)*(i[p].X-a.X)+(i[p].Y-a.Y)*(i[p].Y-a.Y)<=s||(r[l]=i[p],a=i[p],l++);a=i[l-1],(i[0].X-a.X)*(i[0].X-a.X)+(i[0].Y-a.Y)*(i[0].Y-a.Y)<=s&&l--,o>l&&r.splice(l,o-l),r.length&&h.push(r)}return!n&&h.length?h=h[0]:n||0!=h.length?n&&0==h.length&&(h=[[]]):h=[],h},tn.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return tn.Error("Tolerance is not a number in Lighten()."),tn.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||0>e)return tn.Clone(t);t[0]instanceof Array||(t=[t]);var n,o,i,r,s,a,l,p,u,h,d,c,g,f,m,y=t.length,v=[];for(n=0;y>n;n++){for(i=t[n],r=0;1e6>r;r++){for(s=[],a=i.length,i[a-1].X!=i[0].X||i[a-1].Y!=i[0].Y?(c=1,i.push({X:i[0].X,Y:i[0].Y}),a=i.length):c=0,d=[],o=0;a-2>o;o++)l=i[o],u=i[o+1],p=i[o+2],g=p.X-l.X,f=p.Y-l.Y,h=0,(0!==g||0!==f)&&(m=Math.sqrt(g*g+f*f),h=Math.abs((u.X-l.X)*f-(u.Y-l.Y)*g)/m),e>=h&&(d[o+1]=1,o++);for(s.push({X:i[0].X,Y:i[0].Y}),o=1;a-1>o;o++)d[o]||s.push({X:i[o].X,Y:i[o].Y});if(s.push({X:i[a-1].X,Y:i[a-1].Y}),c&&i.pop(),!d.length)break;i=s}a=s.length,s[a-1].X==s[0].X&&s[a-1].Y==s[0].Y&&s.pop(),s.length>2&&v.push(s)}return!t[0]instanceof Array&&(v=v[0]),"undefined"==typeof v&&(v=[[]]),v},"undefined"!=typeof document?window.ClipperLib=tn:self.ClipperLib=tn}(),/*
  javascript.util is a port of selected parts of java.util to JavaScript which
  main purpose is to ease porting Java code to JavaScript.
  
  The MIT License (MIT)

  Copyright (C) 2011,2012 by The Authors

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
function(t){var e,n,o,i,r,s={".js":[],".json":[],".css":[],".html":[]};return i=function(t){return t=Error("Could not find module '"+t+"'"),t.code="MODULE_NOT_FOUND",t},r=function(t,e,n){var o,i;if("function"==typeof t[e+n])return e+n;for(o=0;i=s[n][o];++o)if("function"==typeof t[e+i])return e+i;return null},e=function(t,o,s,a,l){var p,u;for(s=s.split("/"),p=s.pop(),("."===p||".."===p)&&(s.push(p),p="");null!=(u=s.shift());)if(u&&"."!==u&&(".."===u?t=o.pop():(o.push(t),t=t[u]),!t))throw i(a);if(p&&"function"!=typeof t[p]&&((s=r(t,p,".js"))||(s=r(t,p,".json")),s||(s=r(t,p,".css")),s||(s=r(t,p,".html")),s?p=s:2!==l&&"object"==typeof t[p]&&(o.push(t),t=t[p],p="")),!p)return 1!==l&&t[":mainpath:"]?e(t,o,t[":mainpath:"],a,1):e(t,o,"index",a,2);if(l=t[p],!l)throw i(a);return l.hasOwnProperty("module")?l.module.exports:(a={},l.module=p={exports:a},l.call(a,a,p,n(t,o)),p.exports)},o=function(n,o,r){var s,a=r;s=r.charAt(0);var l=0;if("/"===s)a=a.slice(1),n=t["/"],o=[];else if("."!==s){if(s=a.split("/",1)[0],n=t[s],!n)throw i(r);o=[],a=a.slice(s.length+1),a||((a=n[":mainpath:"])?l=1:(a="index",l=2))}return e(n,o,a,r,l)},(n=function(t,e){return function(n){return o(t,[].concat(e),n)}})(t,[])}({"javascript.util":{lib:{"ArrayList.js":function(t,e,n){function o(t){this.array=[],t instanceof i&&this.addAll(t)}var i=n("./Collection");t=n("./List");var r=n("./OperationNotSupported"),s=n("./NoSuchElementException"),a=n("./IndexOutOfBoundsException");o.prototype=new t,o.prototype.array=null,o.prototype.add=function(t){return this.array.push(t),!0},o.prototype.addAll=function(t){for(t=t.iterator();t.hasNext();)this.add(t.next());return!0},o.prototype.set=function(t,e){var n=this.array[t];return this.array[t]=e,n},o.prototype.iterator=function(){return new o.Iterator(this)},o.prototype.get=function(t){if(0>t||t>=this.size())throw new a;return this.array[t]},o.prototype.isEmpty=function(){return 0===this.array.length},o.prototype.size=function(){return this.array.length},o.prototype.toArray=function(){for(var t=[],e=0,n=this.array.length;n>e;e++)t.push(this.array[e]);return t},o.prototype.remove=function(t){for(var e=!1,n=0,o=this.array.length;o>n;n++)if(this.array[n]===t){this.array.splice(n,1),e=!0;break}return e},o.Iterator=function(t){this.arrayList=t},o.Iterator.prototype.arrayList=null,o.Iterator.prototype.position=0,o.Iterator.prototype.next=function(){if(this.position===this.arrayList.size())throw new s;return this.arrayList.get(this.position++)},o.Iterator.prototype.hasNext=function(){return this.position<this.arrayList.size()?!0:!1},o.Iterator.prototype.remove=function(){throw new r},e.exports=o},"Arrays.js":function(t,e){function n(){}n.sort=function(){var t,e,n,o=arguments[0];if(1===arguments.length)o.sort();else if(2===arguments.length)e=arguments[1],n=function(t,n){return e.compare(t,n)},o.sort(n);else if(3===arguments.length)for(t=o.slice(arguments[1],arguments[2]),t.sort(),n=o.slice(0,arguments[1]).concat(t,o.slice(arguments[2],o.length)),o.splice(0,o.length),t=0;t<n.length;t++)o.push(n[t]);else if(4===arguments.length)for(t=o.slice(arguments[1],arguments[2]),e=arguments[3],n=function(t,n){return e.compare(t,n)},t.sort(n),n=o.slice(0,arguments[1]).concat(t,o.slice(arguments[2],o.length)),o.splice(0,o.length),t=0;t<n.length;t++)o.push(n[t])},n.asList=function(t){for(var e=new javascript.util.ArrayList,n=0,o=t.length;o>n;n++)e.add(t[n]);return e},e.exports=n},"Collection.js":function(t,e,n){function o(){}n("./Iterator"),o.prototype.add=function(){},o.prototype.addAll=function(){},o.prototype.isEmpty=function(){},o.prototype.iterator=function(){},o.prototype.size=function(){},o.prototype.toArray=function(){},o.prototype.remove=function(){},e.exports=o},"EmptyStackException.js":function(t,e){function n(t){this.message=t||""}n.prototype=Error(),n.prototype.name="EmptyStackException",e.exports=n},"HashMap.js":function(t,e,n){function o(){this.object={}}t=n("./Map");var i=n("./ArrayList");o.prototype=new t,o.prototype.object=null,o.prototype.get=function(t){return this.object[t]||null},o.prototype.put=function(t,e){return this.object[t]=e},o.prototype.values=function(){var t,e=new i;for(t in this.object)this.object.hasOwnProperty(t)&&e.add(this.object[t]);return e},o.prototype.size=function(){return this.values().size()},e.exports=o},"HashSet.js":function(t,e,n){function o(t){this.array=[],t instanceof i&&this.addAll(t)}var i=n("./Collection");t=n("./Set");var r=n("./OperationNotSupported"),s=n("./NoSuchElementException");o.prototype=new t,o.prototype.array=null,o.prototype.contains=function(t){for(var e=0,n=this.array.length;n>e;e++)if(this.array[e]===t)return!0;return!1},o.prototype.add=function(t){return this.contains(t)?!1:(this.array.push(t),!0)},o.prototype.addAll=function(t){for(t=t.iterator();t.hasNext();)this.add(t.next());return!0},o.prototype.remove=function(){throw new r},o.prototype.size=function(){return this.array.length},o.prototype.isEmpty=function(){return 0===this.array.length},o.prototype.toArray=function(){for(var t=[],e=0,n=this.array.length;n>e;e++)t.push(this.array[e]);return t},o.prototype.iterator=function(){return new o.Iterator(this)},o.Iterator=function(t){this.hashSet=t},o.Iterator.prototype.hashSet=null,o.Iterator.prototype.position=0,o.Iterator.prototype.next=function(){if(this.position===this.hashSet.size())throw new s;return this.hashSet.array[this.position++]},o.Iterator.prototype.hasNext=function(){return this.position<this.hashSet.size()?!0:!1},o.Iterator.prototype.remove=function(){throw new javascript.util.OperationNotSupported},e.exports=o},"IndexOutOfBoundsException.js":function(t,e){function n(t){this.message=t||""}n.prototype=Error(),n.prototype.name="IndexOutOfBoundsException",e.exports=n},"Iterator.js":function(t,e){function n(){}n.prototype.hasNext=function(){},n.prototype.next=function(){},n.prototype.remove=function(){},e.exports=n},"List.js":function(t,e,n){function o(){}t=n("./Collection"),o.prototype=new t,o.prototype.get=function(){},o.prototype.set=function(){},o.prototype.isEmpty=function(){},e.exports=o},"Map.js":function(t,e){function n(){}n.prototype.get=function(){},n.prototype.put=function(){},n.prototype.size=function(){},n.prototype.values=function(){},e.exports=n},"NoSuchElementException.js":function(t,e){function n(t){this.message=t||""}n.prototype=Error(),n.prototype.name="NoSuchElementException",e.exports=n},"OperationNotSupported.js":function(t,e){function n(t){this.message=t||""}n.prototype=Error(),n.prototype.name="OperationNotSupported",e.exports=n},"Set.js":function(t,e,n){function o(){}t=n("./Collection"),o.prototype=new t,o.prototype.contains=function(){},e.exports=o},"SortedMap.js":function(t,e,n){function o(){}t=n("./Map"),o.prototype=new t,e.exports=o},"SortedSet.js":function(t,e,n){function o(){}t=n("./Set"),o.prototype=new t,e.exports=o},"Stack.js":function(t,e,n){function o(){this.array=[]}t=n("./List");var i=n("./EmptyStackException");o.prototype=new t,o.prototype.array=null,o.prototype.push=function(t){return this.array.push(t),t},o.prototype.pop=function(){if(0===this.array.length)throw new i;return this.array.pop()},o.prototype.peek=function(){if(0===this.array.length)throw new i;return this.array[this.array.length-1]},o.prototype.empty=function(){return 0===this.array.length?!0:!1},o.prototype.isEmpty=function(){return this.empty()},o.prototype.search=function(t){return this.array.indexOf(t)},o.prototype.size=function(){return this.array.length},o.prototype.toArray=function(){for(var t=[],e=0,n=this.array.length;n>e;e++)t.push(this.array[e]);return t},e.exports=o},"TreeMap.js":function(t,e,n){function o(){this.array=[]}t=n("./Map"),n("./SortedMap");var i=n("./ArrayList");o.prototype=new t,o.prototype.array=null,o.prototype.get=function(t){for(var e=0,n=this.array.length;n>e;e++){var o=this.array[e];if(0===o.key.compareTo(t))return o.value}return null},o.prototype.put=function(t,e){var n=this.get(t);if(n){var o=n.value;return n.value=e,o}for(var o={key:t,value:e},i=0,r=this.array.length;r>i;i++)if(n=this.array[i],1===n.key.compareTo(t))return this.array.splice(i,0,o),null;return this.array.push({key:t,value:e}),null},o.prototype.values=function(){for(var t=new i,e=0,n=this.array.length;n>e;e++)t.add(this.array[e].value);return t},o.prototype.size=function(){return this.values().size()},e.exports=o},"TreeSet.js":function(t,e,n){function o(t){this.array=[],t instanceof i&&this.addAll(t)}var i=n("./Collection");t=n("./SortedSet");var r=n("./OperationNotSupported"),s=n("./NoSuchElementException");o.prototype=new t,o.prototype.array=null,o.prototype.contains=function(t){for(var e=0,n=this.array.length;n>e;e++)if(0===this.array[e].compareTo(t))return!0;return!1},o.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array.length;n>e;e++)if(1===this.array[e].compareTo(t))return this.array.splice(e,0,t),!0;return this.array.push(t),!0},o.prototype.addAll=function(t){for(t=t.iterator();t.hasNext();)this.add(t.next());return!0},o.prototype.remove=function(){throw new r},o.prototype.size=function(){return this.array.length},o.prototype.isEmpty=function(){return 0===this.array.length},o.prototype.toArray=function(){for(var t=[],e=0,n=this.array.length;n>e;e++)t.push(this.array[e]);return t},o.prototype.iterator=function(){return new o.Iterator(this)},o.Iterator=function(t){this.treeSet=t},o.Iterator.prototype.treeSet=null,o.Iterator.prototype.position=0,o.Iterator.prototype.next=function(){if(this.position===this.treeSet.size())throw new s;return this.treeSet.array[this.position++]},o.Iterator.prototype.hasNext=function(){return this.position<this.treeSet.size()?!0:!1},o.Iterator.prototype.remove=function(){throw new r},e.exports=o},"browser.js":function(t,e,n){javascript={util:n("./")}},"index.js":function(t,e,n){e.exports={ArrayList:n("./ArrayList"),Arrays:n("./Arrays"),Collection:n("./Collection"),HashMap:n("./HashMap"),HashSet:n("./HashSet"),Iterator:n("./Iterator"),List:n("./List"),Map:n("./Map"),Set:n("./Set"),SortedMap:n("./SortedMap"),SortedSet:n("./SortedSet"),Stack:n("./Stack"),TreeMap:n("./TreeMap"),TreeSet:n("./TreeSet")}}}}})("javascript.util/lib/browser"),/* The JSTS Topology Suite is a collection of JavaScript classes that
implement the fundamental operations required to validate a given
geo-spatial data set to a known topological specification.

Copyright (C) 2011 The Authors

This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA */
jsts={version:"0.13.2",algorithm:{distance:{},locate:{}},error:{},geom:{util:{}},geomgraph:{index:{}},index:{bintree:{},chain:{},kdtree:{},quadtree:{},strtree:{}},io:{},noding:{snapround:{}},operation:{buffer:{},distance:{},overlay:{snap:{}},polygonize:{},relate:{},union:{},valid:{}},planargraph:{},simplify:{},triangulate:{quadedge:{}},util:{}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),jsts.abstractFunc=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.error={},jsts.error.IllegalArgumentError=function(t){this.name="IllegalArgumentError",this.message=t},jsts.error.IllegalArgumentError.prototype=new Error,jsts.error.TopologyError=function(t,e){this.name="TopologyError",this.message=e?t+" [ "+e+" ]":t},jsts.error.TopologyError.prototype=new Error,jsts.error.AbstractMethodInvocationError=function(){this.name="AbstractMethodInvocationError",this.message="Abstract method called, should be implemented in subclass."},jsts.error.AbstractMethodInvocationError.prototype=new Error,jsts.error.NotImplementedError=function(){this.name="NotImplementedError",this.message="This method has not yet been implemented."},jsts.error.NotImplementedError.prototype=new Error,jsts.error.NotRepresentableError=function(t){this.name="NotRepresentableError",this.message=t},jsts.error.NotRepresentableError.prototype=new Error,jsts.error.LocateFailureError=function(t){this.name="LocateFailureError",this.message=t},jsts.error.LocateFailureError.prototype=new Error,"undefined"!=typeof module&&(module.exports=jsts),jsts.geom.GeometryFilter=function(){},jsts.geom.GeometryFilter.prototype.filter=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.util.PolygonExtracter=function(t){this.comps=t},jsts.geom.util.PolygonExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.PolygonExtracter.prototype.comps=null,jsts.geom.util.PolygonExtracter.getPolygons=function(t,e){return void 0===e&&(e=[]),t instanceof jsts.geom.Polygon?e.push(t):t instanceof jsts.geom.GeometryCollection&&t.apply(new jsts.geom.util.PolygonExtracter(e)),e},jsts.geom.util.PolygonExtracter.prototype.filter=function(t){t instanceof jsts.geom.Polygon&&this.comps.push(t)},jsts.io.WKTParser=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/}},jsts.io.WKTParser.prototype.read=function(t){var e,n,o;t=t.replace(/[\n\r]/g," ");var i=this.regExes.typeStr.exec(t);if(-1!==t.search("EMPTY")&&(i=this.regExes.emptyTypeStr.exec(t),i[2]=void 0),i&&(n=i[1].toLowerCase(),o=i[2],this.parse[n]&&(e=this.parse[n].apply(this,[o]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},jsts.io.WKTParser.prototype.write=function(t){return this.extractGeometry(t)},jsts.io.WKTParser.prototype.extractGeometry=function(t){var e=t.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[e])return null;var n,o=e.toUpperCase();return n=t.isEmpty()?o+" EMPTY":o+"("+this.extract[e].apply(this,[t])+")"},jsts.io.WKTParser.prototype.extract={coordinate:function(t){return t.x+" "+t.y},point:function(t){return t.coordinate.x+" "+t.coordinate.y},multipoint:function(t){for(var e=[],n=0,o=t.geometries.length;o>n;++n)e.push("("+this.extract.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,o=t.points.length;o>n;++n)e.push(this.extract.coordinate.apply(this,[t.points[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,o=t.geometries.length;o>n;++n)e.push("("+this.extract.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+this.extract.linestring.apply(this,[t.shell])+")");for(var n=0,o=t.holes.length;o>n;++n)e.push("("+this.extract.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,o=t.geometries.length;o>n;++n)e.push("("+this.extract.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,o=t.geometries.length;o>n;++n)e.push(this.extractGeometry.apply(this,[t.geometries[n]]));return e.join(",")}},jsts.io.WKTParser.prototype.parse={point:function(t){if(void 0===t)return this.geometryFactory.createPoint(null);var e=t.trim().split(this.regExes.spaces);return this.geometryFactory.createPoint(new jsts.geom.Coordinate(e[0],e[1]))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint(null);for(var e,n=t.trim().split(","),o=[],i=0,r=n.length;r>i;++i)e=n[i].replace(this.regExes.trimParens,"$1"),o.push(this.parse.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(o)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString(null);for(var e,n=t.trim().split(","),o=[],i=0,r=n.length;r>i;++i)e=n[i].trim().split(this.regExes.spaces),o.push(new jsts.geom.Coordinate(e[0],e[1]));return this.geometryFactory.createLineString(o)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing(null);for(var e,n=t.trim().split(","),o=[],i=0,r=n.length;r>i;++i)e=n[i].trim().split(this.regExes.spaces),o.push(new jsts.geom.Coordinate(e[0],e[1]));return this.geometryFactory.createLinearRing(o)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString(null);for(var e,n=t.trim().split(this.regExes.parenComma),o=[],i=0,r=n.length;r>i;++i)e=n[i].replace(this.regExes.trimParens,"$1"),o.push(this.parse.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(o)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon(null);for(var e,n,o,i,r=t.trim().split(this.regExes.parenComma),s=[],a=0,l=r.length;l>a;++a)e=r[a].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[e]),o=this.geometryFactory.createLinearRing(n.points),0===a?i=o:s.push(o);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon(null);for(var e,n=t.trim().split(this.regExes.doubleParenComma),o=[],i=0,r=n.length;r>i;++i)e=n[i].replace(this.regExes.trimParens,"$1"),o.push(this.parse.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(o)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection(null);t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],o=0,i=e.length;i>o;++o)n.push(jsts.io.WKTParser.prototype.read.apply(this,[e[o]]));return this.geometryFactory.createGeometryCollection(n)}},jsts.index.ItemVisitor=function(){},jsts.index.ItemVisitor.prototype.visitItem=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.CGAlgorithms=function(){},jsts.algorithm.CGAlgorithms.CLOCKWISE=-1,jsts.algorithm.CGAlgorithms.RIGHT=jsts.algorithm.CGAlgorithms.CLOCKWISE,jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE=1,jsts.algorithm.CGAlgorithms.LEFT=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.algorithm.CGAlgorithms.COLLINEAR=0,jsts.algorithm.CGAlgorithms.STRAIGHT=jsts.algorithm.CGAlgorithms.COLLINEAR,jsts.algorithm.CGAlgorithms.orientationIndex=function(t,e,n){var o,i,r,s;return o=e.x-t.x,i=e.y-t.y,r=n.x-e.x,s=n.y-e.y,jsts.algorithm.RobustDeterminant.signOfDet2x2(o,i,r,s)},jsts.algorithm.CGAlgorithms.isPointInRing=function(t,e){return jsts.algorithm.CGAlgorithms.locatePointInRing(t,e)!==jsts.geom.Location.EXTERIOR},jsts.algorithm.CGAlgorithms.locatePointInRing=function(t,e){return jsts.algorithm.RayCrossingCounter.locatePointInRing(t,e)},jsts.algorithm.CGAlgorithms.isOnLine=function(t,e){var n,o,i,r,s;for(n=new jsts.algorithm.RobustLineIntersector,o=1,i=e.length;i>o;o++)if(r=e[o-1],s=e[o],n.computeIntersection(t,r,s),n.hasIntersection())return!0;return!1},jsts.algorithm.CGAlgorithms.isCCW=function(t){var e,n,o,i,r,s,a,l,p,u,h;if(e=t.length-1,3>e)throw new jsts.IllegalArgumentError("Ring has fewer than 3 points, so orientation cannot be determined");for(n=t[0],o=0,p=1;e>=p;p++)i=t[p],i.y>n.y&&(n=i,o=p);r=o;do r-=1,0>r&&(r=e);while(t[r].equals2D(n)&&r!==o);s=o;do s=(s+1)%e;while(t[s].equals2D(n)&&s!==o);return a=t[r],l=t[s],a.equals2D(n)||l.equals2D(n)||a.equals2D(l)?!1:(u=jsts.algorithm.CGAlgorithms.computeOrientation(a,n,l),h=!1,h=0===u?a.x>l.x:u>0)},jsts.algorithm.CGAlgorithms.computeOrientation=function(t,e,n){return jsts.algorithm.CGAlgorithms.orientationIndex(t,e,n)},jsts.algorithm.CGAlgorithms.distancePointLine=function(t,e,n){if(e instanceof jsts.geom.Coordinate||jsts.algorithm.CGAlgorithms.distancePointLine2.apply(this,arguments),e.x===n.x&&e.y===n.y)return t.distance(e);var o,i;return o=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)),0>=o?t.distance(e):o>=1?t.distance(n):(i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)),Math.abs(i)*Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)))},jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular=function(t,e,n){var o=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y));return Math.abs(o)*Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y))},jsts.algorithm.CGAlgorithms.distancePointLine2=function(t,e){var n,o,i,r;if(0===e.length)throw new jsts.error.IllegalArgumentError("Line array must contain at least one vertex");for(n=t.distance(e[0]),o=0,i=e.length-1;i>o;o++)r=jsts.algorithm.CGAlgorithms.distancePointLine(t,e[o],e[o+1]),n>r&&(n=r);return n},jsts.algorithm.CGAlgorithms.distanceLineLine=function(t,e,n,o){if(t.equals(e))return jsts.algorithm.CGAlgorithms.distancePointLine(t,n,o);if(n.equals(o))return jsts.algorithm.CGAlgorithms.distancePointLine(o,t,e);var i,r,s,a,l,p;return i=(t.y-n.y)*(o.x-n.x)-(t.x-n.x)*(o.y-n.y),r=(e.x-t.x)*(o.y-n.y)-(e.y-t.y)*(o.x-n.x),s=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),a=(e.x-t.x)*(o.y-n.y)-(e.y-t.y)*(o.x-n.x),0===r||0===a?Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(t,n,o),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,n,o),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(n,t,e),jsts.algorithm.CGAlgorithms.distancePointLine(o,t,e)))):(l=s/a,p=i/r,0>p||p>1||0>l||l>1?Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(t,n,o),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,n,o),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(n,t,e),jsts.algorithm.CGAlgorithms.distancePointLine(o,t,e)))):0)},jsts.algorithm.CGAlgorithms.signedArea=function(t){if(t.length<3)return 0;var e,n,o,i,r,s,a;for(e=0,n=0,o=t.length-1;o>n;n++)i=t[n].x,r=t[n].y,s=t[n+1].x,a=t[n+1].y,e+=(i+s)*(a-r);return-e/2},jsts.algorithm.CGAlgorithms.signedArea=function(t){var e,n,o,i,r,s,a,l;if(e=t.length,3>e)return 0;for(n=0,o=t[0],i=o.x,r=o.y,s=1;e>s;s++)o=t[s],a=o.x,l=o.y,n+=(i+a)*(l-r),i=a,r=l;return-n/2},jsts.algorithm.CGAlgorithms.computeLength=function(t){var e,n,o,i,r,s,a,l,p,u,h=t.length;if(1>=h)return 0;for(e=0,l=t[0],n=l.x,o=l.y,p=1,u=h,p;h>p;p++)l=t[p],i=l.x,r=l.y,s=i-n,a=r-o,e+=Math.sqrt(s*s+a*a),n=i,o=r;return e},jsts.algorithm.CGAlgorithms.length=function(){},jsts.algorithm.Angle=function(){},jsts.algorithm.Angle.PI_TIMES_2=2*Math.PI,jsts.algorithm.Angle.PI_OVER_2=Math.PI/2,jsts.algorithm.Angle.PI_OVER_4=Math.PI/4,jsts.algorithm.Angle.COUNTERCLOCKWISE=jsts.algorithm.CGAlgorithms.prototype.COUNTERCLOCKWISE,jsts.algorithm.Angle.CLOCKWISE=jsts.algorithm.CGAlgorithms.prototype.CLOCKWISE,jsts.algorithm.Angle.NONE=jsts.algorithm.CGAlgorithms.prototype.COLLINEAR,jsts.algorithm.Angle.toDegrees=function(t){return 180*t/Math.PI},jsts.algorithm.Angle.toRadians=function(t){return t*Math.PI/180},jsts.algorithm.Angle.angle=function(){return 1===arguments.length?jsts.algorithm.Angle.angleFromOrigo(arguments[0]):jsts.algorithm.Angle.angleBetweenCoords(arguments[0],arguments[1])},jsts.algorithm.Angle.angleBetweenCoords=function(t,e){var n,o;return n=e.x-t.x,o=e.y-t.y,Math.atan2(o,n)},jsts.algorithm.Angle.angleFromOrigo=function(t){return Math.atan2(t.y,t.x)},jsts.algorithm.Angle.isAcute=function(t,e,n){var o,i,r,s,a;return o=t.x-e.x,i=t.y-e.y,r=n.x-e.x,s=n.y-e.y,a=o*r+i*s,a>0},jsts.algorithm.Angle.isObtuse=function(t,e,n){var o,i,r,s,a;return o=t.x-e.x,i=t.y-e.y,r=n.x-e.x,s=n.y-e.y,a=o*r+i*s,0>a},jsts.algorithm.Angle.angleBetween=function(t,e,n){var o,i;return o=jsts.algorithm.Angle.angle(e,t),i=jsts.algorithm.Angle.angle(e,n),jsts.algorithm.Angle.diff(o,i)},jsts.algorithm.Angle.angleBetweenOriented=function(t,e,n){var o,i,r;return o=jsts.algorithm.Angle.angle(e,t),i=jsts.algorithm.Angle.angle(e,n),r=i-o,r<=-Math.PI?r+jsts.algorithm.Angle.PI_TIMES_2:r>Math.PI?r-jsts.algorithm.Angle.PI_TIMES_2:r},jsts.algorithm.Angle.interiorAngle=function(t,e,n){var o,i;return o=jsts.algorithm.Angle.angle(e,t),i=jsts.algorithm.Angle.angle(e,n),Math.abs(i-o)},jsts.algorithm.Angle.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?jsts.algorithm.Angle.COUNTERCLOCKWISE:0>n?jsts.algorithm.Angle.CLOCKWISE:jsts.algorithm.Angle.NONE},jsts.algorithm.Angle.normalize=function(t){for(;t>Math.PI;)t-=jsts.algorithm.Angle.PI_TIMES_2;for(;t<=-Math.PI;)t+=jsts.algorithm.Angle.PI_TIMES_2;return t},jsts.algorithm.Angle.normalizePositive=function(t){if(0>t){for(;0>t;)t+=jsts.algorithm.Angle.PI_TIMES_2;t>=jsts.algorithm.Angle.PI_TIMES_2&&(t=0)}else{for(;t>=jsts.algorithm.Angle.PI_TIMES_2;)t-=jsts.algorithm.Angle.PI_TIMES_2;0>t&&(t=0)}return t},jsts.algorithm.Angle.diff=function(t,e){var n;return n=e>t?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},jsts.geom.GeometryComponentFilter=function(){},jsts.geom.GeometryComponentFilter.prototype.filter=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.util.LinearComponentExtracter=function(t,e){this.lines=t,this.isForcedToLineString=e},jsts.geom.util.LinearComponentExtracter.prototype=new jsts.geom.GeometryComponentFilter,jsts.geom.util.LinearComponentExtracter.prototype.lines=null,jsts.geom.util.LinearComponentExtracter.prototype.isForcedToLineString=!1,jsts.geom.util.LinearComponentExtracter.getLines=function(t,e){if(1==arguments.length)return jsts.geom.util.LinearComponentExtracter.getLines5.apply(this,arguments);if(2==arguments.length&&"boolean"==typeof e)return jsts.geom.util.LinearComponentExtracter.getLines6.apply(this,arguments);if(2==arguments.length&&t instanceof jsts.geom.Geometry)return jsts.geom.util.LinearComponentExtracter.getLines3.apply(this,arguments);if(3==arguments.length&&t instanceof jsts.geom.Geometry)return jsts.geom.util.LinearComponentExtracter.getLines4.apply(this,arguments);if(3==arguments.length)return jsts.geom.util.LinearComponentExtracter.getLines2.apply(this,arguments);for(var n=0;n<t.length;n++){var o=t[n];jsts.geom.util.LinearComponentExtracter.getLines3(o,e)}return e},jsts.geom.util.LinearComponentExtracter.getLines2=function(t,e,n){for(var o=0;o<t.length;o++){var i=t[o];jsts.geom.util.LinearComponentExtracter.getLines4(i,e,n)}return e},jsts.geom.util.LinearComponentExtracter.getLines3=function(t,e){return t instanceof LineString?e.add(t):t.apply(new jsts.geom.util.LinearComponentExtracter(e)),e},jsts.geom.util.LinearComponentExtracter.getLines4=function(t,e,n){return t.apply(new jsts.geom.util.LinearComponentExtracter(e,n)),e},jsts.geom.util.LinearComponentExtracter.getLines5=function(t){return jsts.geom.util.LinearComponentExtracter.getLines6(t,!1)},jsts.geom.util.LinearComponentExtracter.getLines6=function(t,e){var n=[];return t.apply(new jsts.geom.util.LinearComponentExtracter(n,e)),n},jsts.geom.util.LinearComponentExtracter.prototype.setForceToLineString=function(t){this.isForcedToLineString=t},jsts.geom.util.LinearComponentExtracter.prototype.filter=function(t){if(this.isForcedToLineString&&t instanceof jsts.geom.LinearRing){var e=t.getFactory().createLineString(t.getCoordinateSequence());return void this.lines.push(e)}(t instanceof jsts.geom.LineString||t instanceof jsts.geom.LinearRing)&&this.lines.push(t)},jsts.geom.Location=function(){},jsts.geom.Location.INTERIOR=0,jsts.geom.Location.BOUNDARY=1,jsts.geom.Location.EXTERIOR=2,jsts.geom.Location.NONE=-1,jsts.geom.Location.toLocationSymbol=function(t){switch(t){case jsts.geom.Location.EXTERIOR:return"e";case jsts.geom.Location.BOUNDARY:return"b";case jsts.geom.Location.INTERIOR:return"i";case jsts.geom.Location.NONE:return"-"}throw new jsts.IllegalArgumentError("Unknown location value: "+t)},function(){jsts.io.GeoJSONReader=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new jsts.io.GeoJSONParser(this.geometryFactory)},jsts.io.GeoJSONReader.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED&&this.reducePrecision(e),e},jsts.io.GeoJSONReader.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;n>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;n>e;e++)this.reducePrecision(t.geometries[e])}}(),jsts.geom.Geometry=function(t){this.factory=t},jsts.geom.Geometry.prototype.envelope=null,jsts.geom.Geometry.prototype.factory=null,jsts.geom.Geometry.prototype.getGeometryType=function(){return"Geometry"},jsts.geom.Geometry.hasNonEmptyElements=function(t){var e;for(e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},jsts.geom.Geometry.hasNullElements=function(t){var e;for(e=0;e<t.length;e++)if(null===t[e])return!0;return!1},jsts.geom.Geometry.prototype.getFactory=function(){return(null===this.factory||void 0===this.factory)&&(this.factory=new jsts.geom.GeometryFactory),this.factory},jsts.geom.Geometry.prototype.getNumGeometries=function(){return 1},jsts.geom.Geometry.prototype.getGeometryN=function(){return this},jsts.geom.Geometry.prototype.getPrecisionModel=function(){return this.getFactory().getPrecisionModel()},jsts.geom.Geometry.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getCoordinates=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getNumPoints=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.isSimple=function(){this.checkNotGeometryCollection(this);var t=new jsts.operation.IsSimpleOp(this);return t.isSimple()},jsts.geom.Geometry.prototype.isValid=function(){var t=new jsts.operation.valid.IsValidOp(this);return t.isValid()},jsts.geom.Geometry.prototype.isEmpty=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.distance=function(t){return jsts.operation.distance.DistanceOp.distance(this,t)},jsts.geom.Geometry.prototype.isWithinDistance=function(t,e){var n=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return n>e?!1:DistanceOp.isWithinDistance(this,t,e)},jsts.geom.Geometry.prototype.isRectangle=function(){return!1},jsts.geom.Geometry.prototype.getArea=function(){return 0},jsts.geom.Geometry.prototype.getLength=function(){return 0},jsts.geom.Geometry.prototype.getCentroid=function(){if(this.isEmpty())return null;var t,e=null,n=this.getDimension();return 0===n?(t=new jsts.algorithm.CentroidPoint,t.add(this),e=t.getCentroid()):1===n?(t=new jsts.algorithm.CentroidLine,t.add(this),e=t.getCentroid()):(t=new jsts.algorithm.CentroidArea,t.add(this),e=t.getCentroid()),this.createPointFromInternalCoord(e,this)},jsts.geom.Geometry.prototype.getInteriorPoint=function(){var t,e=null,n=this.getDimension();return 0===n?(t=new jsts.algorithm.InteriorPointPoint(this),e=t.getInteriorPoint()):1===n?(t=new jsts.algorithm.InteriorPointLine(this),e=t.getInteriorPoint()):(t=new jsts.algorithm.InteriorPointArea(this),e=t.getInteriorPoint()),this.createPointFromInternalCoord(e,this)},jsts.geom.Geometry.prototype.getDimension=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getBoundary=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getBoundaryDimension=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},jsts.geom.Geometry.prototype.getEnvelopeInternal=function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),this.envelope},jsts.geom.Geometry.prototype.disjoint=function(t){return!this.intersects(t)},jsts.geom.Geometry.prototype.touches=function(t){return this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())?this.relate(t).isTouches(this.getDimension(),t.getDimension()):!1},jsts.geom.Geometry.prototype.intersects=function(t){return this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())?this.isRectangle()?RectangleIntersects.intersects(this,t):t.isRectangle()?RectangleIntersects.intersects(t,this):this.relate(t).isIntersects():!1},jsts.geom.Geometry.prototype.crosses=function(t){return this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())?this.relate(t).isCrosses(this.getDimension(),t.getDimension()):!1},jsts.geom.Geometry.prototype.within=function(t){return t.contains(this)},jsts.geom.Geometry.prototype.contains=function(t){return this.getEnvelopeInternal().contains(t.getEnvelopeInternal())?this.isRectangle()?RectangleContains.contains(this,t):this.relate(t).isContains():!1},jsts.geom.Geometry.prototype.overlaps=function(t){return this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())?this.relate(t).isOverlaps(this.getDimension(),t.getDimension()):!1},jsts.geom.Geometry.prototype.covers=function(t){return this.getEnvelopeInternal().covers(t.getEnvelopeInternal())?this.isRectangle()?!0:this.relate(t).isCovers():!1},jsts.geom.Geometry.prototype.coveredBy=function(t){return t.covers(this)},jsts.geom.Geometry.prototype.relate=function(t,e){return 1===arguments.length?this.relate2.apply(this,arguments):this.relate2(t).matches(e)},jsts.geom.Geometry.prototype.relate2=function(t){return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.relate.RelateOp.relate(this,t)},jsts.geom.Geometry.prototype.equalsTopo=function(t){return this.getEnvelopeInternal().equals(t.getEnvelopeInternal())?this.relate(t).isEquals(this.getDimension(),t.getDimension()):!1},jsts.geom.Geometry.prototype.equals=function(t){return t instanceof jsts.geom.Geometry||t instanceof jsts.geom.LinearRing||t instanceof jsts.geom.Polygon||t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon?this.equalsExact(t):!1},jsts.geom.Geometry.prototype.buffer=function(t,e,n){var o=new jsts.operation.buffer.BufferParameters(e,n);return jsts.operation.buffer.BufferOp.bufferOp2(this,t,o)},jsts.geom.Geometry.prototype.convexHull=function(){return new jsts.algorithm.ConvexHull(this).getConvexHull()},jsts.geom.Geometry.prototype.intersection=function(t){if(this.isEmpty())return this.getFactory().createGeometryCollection(null);if(t.isEmpty())return this.getFactory().createGeometryCollection(null);if(this.isGeometryCollection(this));return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.INTERSECTION)},jsts.geom.Geometry.prototype.union=function(t){return 0===arguments.length?jsts.operation.union.UnaryUnionOp.union(this):this.isEmpty()?t.clone():t.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.UNION))},jsts.geom.Geometry.prototype.difference=function(t){return this.isEmpty()?this.getFactory().createGeometryCollection(null):t.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.DIFFERENCE))},jsts.geom.Geometry.prototype.symDifference=function(t){return this.isEmpty()?t.clone():t.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE))},jsts.geom.Geometry.prototype.equalsExact=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.equalsNorm=function(t){return null===t||void 0===t?!1:this.norm().equalsExact(t.norm())},jsts.geom.Geometry.prototype.apply=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.clone=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.normalize=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.norm=function(){var t=this.clone();return t.normalize(),t},jsts.geom.Geometry.prototype.compareTo=function(t){var e=t;return this.getClassSortIndex()!==e.getClassSortIndex()?this.getClassSortIndex()-e.getClassSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)},jsts.geom.Geometry.prototype.isEquivalentClass=function(t){return this instanceof jsts.geom.Point&&t instanceof jsts.geom.Point?!0:this instanceof jsts.geom.LineString&&t instanceof jsts.geom.LineString|t instanceof jsts.geom.LinearRing?!0:this instanceof jsts.geom.LinearRing&&t instanceof jsts.geom.LineString|t instanceof jsts.geom.LinearRing?!0:this instanceof jsts.geom.Polygon&&t instanceof jsts.geom.Polygon?!0:this instanceof jsts.geom.MultiPoint&&t instanceof jsts.geom.MultiPoint?!0:this instanceof jsts.geom.MultiLineString&&t instanceof jsts.geom.MultiLineString?!0:this instanceof jsts.geom.MultiPolygon&&t instanceof jsts.geom.MultiPolygon?!0:this instanceof jsts.geom.GeometryCollection&&t instanceof jsts.geom.GeometryCollection?!0:!1},jsts.geom.Geometry.prototype.checkNotGeometryCollection=function(t){if(t.isGeometryCollectionBase())throw new jsts.error.IllegalArgumentError("This method does not support GeometryCollection")},jsts.geom.Geometry.prototype.isGeometryCollection=function(){return this instanceof jsts.geom.GeometryCollection},jsts.geom.Geometry.prototype.isGeometryCollectionBase=function(){return"jsts.geom.GeometryCollection"===this.CLASS_NAME},jsts.geom.Geometry.prototype.computeEnvelopeInternal=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.compareToSameClass=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.compare=function(t,e){for(var n=t.iterator(),o=e.iterator();n.hasNext()&&o.hasNext();){var i=n.next(),r=o.next(),s=i.compareTo(r);if(0!==s)return s}return n.hasNext()?1:o.hasNext()?-1:0},jsts.geom.Geometry.prototype.equal=function(t,e,n){return void 0===n||null===n||0===n?t.equals(e):t.distance(e)<=n},jsts.geom.Geometry.prototype.getClassSortIndex=function(){for(var t=[jsts.geom.Point,jsts.geom.MultiPoint,jsts.geom.LineString,jsts.geom.LinearRing,jsts.geom.MultiLineString,jsts.geom.Polygon,jsts.geom.MultiPolygon,jsts.geom.GeometryCollection],e=0;e<t.length;e++)if(this instanceof t[e])return e;return jsts.util.Assert.shouldNeverReachHere("Class not supported: "+this),-1},jsts.geom.Geometry.prototype.toString=function(){return(new jsts.io.WKTWriter).write(this)},jsts.geom.Geometry.prototype.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},function(){jsts.geom.Coordinate=function(t,e){"number"==typeof t?(this.x=t,this.y=e):t instanceof jsts.geom.Coordinate?(this.x=parseFloat(t.x),this.y=parseFloat(t.y)):void 0===t||null===t?(this.x=0,this.y=0):"string"==typeof t&&(this.x=parseFloat(t),this.y=parseFloat(e))},jsts.geom.Coordinate.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y},jsts.geom.Coordinate.prototype.clone=function(){return new jsts.geom.Coordinate(this.x,this.y)},jsts.geom.Coordinate.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},jsts.geom.Coordinate.prototype.equals2D=function(t){return this.x!==t.x?!1:this.y!==t.y?!1:!0},jsts.geom.Coordinate.prototype.equals=function(t){return!t instanceof jsts.geom.Coordinate||void 0===t?!1:this.equals2D(t)},jsts.geom.Coordinate.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},jsts.geom.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}}(),jsts.geom.Envelope=function(){jsts.geom.Envelope.prototype.init.apply(this,arguments)},jsts.geom.Envelope.prototype.minx=null,jsts.geom.Envelope.prototype.maxx=null,jsts.geom.Envelope.prototype.miny=null,jsts.geom.Envelope.prototype.maxy=null,jsts.geom.Envelope.prototype.init=function(){"number"==typeof arguments[0]&&4===arguments.length?this.initFromValues(arguments[0],arguments[1],arguments[2],arguments[3]):arguments[0]instanceof jsts.geom.Coordinate&&1===arguments.length?this.initFromCoordinate(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate&&2===arguments.length?this.initFromCoordinates(arguments[0],arguments[1]):arguments[0]instanceof jsts.geom.Envelope&&1===arguments.length?this.initFromEnvelope(arguments[0]):this.setToNull()},jsts.geom.Envelope.prototype.initFromValues=function(t,e,n,o){e>t?(this.minx=t,this.maxx=e):(this.minx=e,this.maxx=t),o>n?(this.miny=n,this.maxy=o):(this.miny=o,this.maxy=n)},jsts.geom.Envelope.prototype.initFromCoordinates=function(t,e){this.initFromValues(t.x,e.x,t.y,e.y)},jsts.geom.Envelope.prototype.initFromCoordinate=function(t){this.initFromValues(t.x,t.x,t.y,t.y)},jsts.geom.Envelope.prototype.initFromEnvelope=function(t){this.minx=t.minx,this.maxx=t.maxx,this.miny=t.miny,this.maxy=t.maxy},jsts.geom.Envelope.prototype.setToNull=function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},jsts.geom.Envelope.prototype.isNull=function(){return this.maxx<this.minx},jsts.geom.Envelope.prototype.getHeight=function(){return this.isNull()?0:this.maxy-this.miny},jsts.geom.Envelope.prototype.getWidth=function(){return this.isNull()?0:this.maxx-this.minx},jsts.geom.Envelope.prototype.getMinX=function(){return this.minx},jsts.geom.Envelope.prototype.getMaxX=function(){return this.maxx},jsts.geom.Envelope.prototype.getMinY=function(){return this.miny},jsts.geom.Envelope.prototype.getMaxY=function(){return this.maxy},jsts.geom.Envelope.prototype.getArea=function(){return this.getWidth()*this.getHeight()},jsts.geom.Envelope.prototype.expandToInclude=function(){arguments[0]instanceof jsts.geom.Coordinate?this.expandToIncludeCoordinate(arguments[0]):arguments[0]instanceof jsts.geom.Envelope?this.expandToIncludeEnvelope(arguments[0]):this.expandToIncludeValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.expandToIncludeCoordinate=function(t){this.expandToIncludeValues(t.x,t.y)},jsts.geom.Envelope.prototype.expandToIncludeValues=function(t,e){this.isNull()?(this.minx=t,this.maxx=t,this.miny=e,this.maxy=e):(t<this.minx&&(this.minx=t),t>this.maxx&&(this.maxx=t),e<this.miny&&(this.miny=e),e>this.maxy&&(this.maxy=e))},jsts.geom.Envelope.prototype.expandToIncludeEnvelope=function(t){t.isNull()||(this.isNull()?(this.minx=t.getMinX(),this.maxx=t.getMaxX(),this.miny=t.getMinY(),this.maxy=t.getMaxY()):(t.minx<this.minx&&(this.minx=t.minx),t.maxx>this.maxx&&(this.maxx=t.maxx),t.miny<this.miny&&(this.miny=t.miny),t.maxy>this.maxy&&(this.maxy=t.maxy)))},jsts.geom.Envelope.prototype.expandBy=function(){1===arguments.length?this.expandByDistance(arguments[0]):this.expandByDistances(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.expandByDistance=function(t){this.expandByDistances(t,t)},jsts.geom.Envelope.prototype.expandByDistances=function(t,e){this.isNull()||(this.minx-=t,this.maxx+=t,this.miny-=e,this.maxy+=e,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull())},jsts.geom.Envelope.prototype.translate=function(t,e){this.isNull()||this.init(this.minx+t,this.maxx+t,this.miny+e,this.maxy+e)},jsts.geom.Envelope.prototype.centre=function(){return this.isNull()?null:new jsts.geom.Coordinate((this.minx+this.maxx)/2,(this.miny+this.maxy)/2)},jsts.geom.Envelope.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new jsts.geom.Envelope;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny,o=this.maxx<t.maxx?this.maxx:t.maxx,i=this.maxy<t.maxy?this.maxy:t.maxy;return new jsts.geom.Envelope(e,o,n,i)},jsts.geom.Envelope.prototype.intersects=function(){return arguments[0]instanceof jsts.geom.Envelope?this.intersectsEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.intersectsCoordinate(arguments[0]):this.intersectsValues(arguments[0],arguments[1])
},jsts.geom.Envelope.prototype.intersectsEnvelope=function(t){if(this.isNull()||t.isNull())return!1;var e=!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny);return e},jsts.geom.Envelope.prototype.intersectsCoordinate=function(t){return this.intersectsValues(t.x,t.y)},jsts.geom.Envelope.prototype.intersectsValues=function(t,e){return this.isNull()?!1:!(t>this.maxx||t<this.minx||e>this.maxy||e<this.miny)},jsts.geom.Envelope.prototype.contains=function(){return arguments[0]instanceof jsts.geom.Envelope?this.containsEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.containsCoordinate(arguments[0]):this.containsValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.containsEnvelope=function(t){return this.coversEnvelope(t)},jsts.geom.Envelope.prototype.containsCoordinate=function(t){return this.coversCoordinate(t)},jsts.geom.Envelope.prototype.containsValues=function(t,e){return this.coversValues(t,e)},jsts.geom.Envelope.prototype.covers=function(){p instanceof jsts.geom.Envelope?this.coversEnvelope(arguments[0]):p instanceof jsts.geom.Coordinate?this.coversCoordinate(arguments[0]):this.coversValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.coversValues=function(t,e){return this.isNull()?!1:t>=this.minx&&t<=this.maxx&&e>=this.miny&&e<=this.maxy},jsts.geom.Envelope.prototype.coversCoordinate=function(t){return this.coversValues(t.x,t.y)},jsts.geom.Envelope.prototype.coversEnvelope=function(t){return this.isNull()||t.isNull()?!1:t.minx>=this.minx&&t.maxx<=this.maxx&&t.miny>=this.miny&&t.maxy<=this.maxy},jsts.geom.Envelope.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx&&(e=t.minx-this.maxx),this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny&&(n=t.miny-this.maxy),this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},jsts.geom.Envelope.prototype.equals=function(t){return this.isNull()?t.isNull():this.maxx===t.maxx&&this.maxy===t.maxy&&this.minx===t.minx&&this.miny===t.miny},jsts.geom.Envelope.prototype.toString=function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},jsts.geom.Envelope.intersects=function(t,e,n){if(4===arguments.length)return jsts.geom.Envelope.intersectsEnvelope(arguments[0],arguments[1],arguments[2],arguments[3]);var o=t.x<e.x?t.x:e.x,i=t.x>e.x?t.x:e.x,r=t.y<e.y?t.y:e.y,s=t.y>e.y?t.y:e.y;return n.x>=o&&n.x<=i&&n.y>=r&&n.y<=s?!0:!1},jsts.geom.Envelope.intersectsEnvelope=function(t,e,n,o){var i=Math.min(n.x,o.x),r=Math.max(n.x,o.x),s=Math.min(t.x,e.x),a=Math.max(t.x,e.x);return s>r?!1:i>a?!1:(i=Math.min(n.y,o.y),r=Math.max(n.y,o.y),s=Math.min(t.y,e.y),a=Math.max(t.y,e.y),s>r?!1:i>a?!1:!0)},jsts.geom.Envelope.prototype.clone=function(){return new jsts.geom.Envelope(this.minx,this.maxx,this.miny,this.maxy)},jsts.geom.util.GeometryCombiner=function(t){this.geomFactory=jsts.geom.util.GeometryCombiner.extractFactory(t),this.inputGeoms=t},jsts.geom.util.GeometryCombiner.combine=function(t){if(arguments.length>1)return this.combine2.apply(this,arguments);var e=new jsts.geom.util.GeometryCombiner(t);return e.combine()},jsts.geom.util.GeometryCombiner.combine2=function(){var t=new javascript.util.ArrayList;Array.prototype.slice.call(arguments).forEach(function(e){t.add(e)});var e=new jsts.geom.util.GeometryCombiner(t);return e.combine()},jsts.geom.util.GeometryCombiner.prototype.geomFactory=null,jsts.geom.util.GeometryCombiner.prototype.skipEmpty=!1,jsts.geom.util.GeometryCombiner.prototype.inputGeoms,jsts.geom.util.GeometryCombiner.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},jsts.geom.util.GeometryCombiner.prototype.combine=function(){var t,e=new javascript.util.ArrayList;for(t=this.inputGeoms.iterator();t.hasNext();){var n=t.next();this.extractElements(n,e)}return 0===e.size()?null!==this.geomFactory?geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(e)},jsts.geom.util.GeometryCombiner.prototype.extractElements=function(t,e){if(null!==t)for(var n=0;n<t.getNumGeometries();n++){var o=t.getGeometryN(n);this.skipEmpty&&o.isEmpty()||e.add(o)}},jsts.geom.PrecisionModel=function(t){return"number"==typeof t?(this.modelType=jsts.geom.PrecisionModel.FIXED,void(this.scale=t)):(this.modelType=t||jsts.geom.PrecisionModel.FLOATING,void(this.modelType===jsts.geom.PrecisionModel.FIXED&&(this.scale=1)))},jsts.geom.PrecisionModel.FLOATING="FLOATING",jsts.geom.PrecisionModel.FIXED="FIXED",jsts.geom.PrecisionModel.FLOATING_SINGLE="FLOATING_SINGLE",jsts.geom.PrecisionModel.prototype.scale=null,jsts.geom.PrecisionModel.prototype.modelType=null,jsts.geom.PrecisionModel.prototype.isFloating=function(){return this.modelType===jsts.geom.PrecisionModel.FLOATING||this.modelType===jsts.geom.PrecisionModel.FLOATING_SINLGE},jsts.geom.PrecisionModel.prototype.getScale=function(){return this.scale},jsts.geom.PrecisionModel.prototype.getType=function(){return this.modelType},jsts.geom.PrecisionModel.prototype.equals=function(t){return!0},jsts.geom.PrecisionModel.prototype.makePrecise=function(t){return t instanceof jsts.geom.Coordinate?void this.makePrecise2(t):isNaN(t)?t:this.modelType===jsts.geom.PrecisionModel.FIXED?Math.round(t*this.scale)/this.scale:t},jsts.geom.PrecisionModel.prototype.makePrecise2=function(t){this.modelType!==jsts.geom.PrecisionModel.FLOATING&&(t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y))},jsts.geom.PrecisionModel.prototype.compareTo=function(t){return 0},jsts.geom.CoordinateFilter=function(){},jsts.geom.CoordinateFilter.prototype.filter=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Point=function(t,e){this.factory=e,void 0!==t&&(this.coordinate=t)},jsts.geom.Point.prototype=new jsts.geom.Geometry,jsts.geom.Point.constructor=jsts.geom.Point,jsts.geom.Point.CLASS_NAME="jsts.geom.Point",jsts.geom.Point.prototype.coordinate=null,jsts.geom.Point.prototype.getX=function(){return this.coordinate.x},jsts.geom.Point.prototype.getY=function(){return this.coordinate.y},jsts.geom.Point.prototype.getCoordinate=function(){return this.coordinate},jsts.geom.Point.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.coordinate]},jsts.geom.Point.prototype.isEmpty=function(){return null===this.coordinate},jsts.geom.Point.prototype.equalsExact=function(t,e){return this.isEquivalentClass(t)?this.isEmpty()&&t.isEmpty()?!0:this.equal(t.getCoordinate(),this.getCoordinate(),e):!1},jsts.geom.Point.prototype.getNumPoints=function(){return this.isEmpty()?0:1},jsts.geom.Point.prototype.isSimple=function(){return!0},jsts.geom.Point.prototype.getBoundary=function(){return new jsts.geom.GeometryCollection(null)},jsts.geom.Point.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new jsts.geom.Envelope:new jsts.geom.Envelope(this.coordinate)},jsts.geom.Point.prototype.apply=function(t){if(t instanceof jsts.geom.GeometryFilter||t instanceof jsts.geom.GeometryComponentFilter)t.filter(this);else if(t instanceof jsts.geom.CoordinateFilter){if(this.isEmpty())return;t.filter(this.getCoordinate())}},jsts.geom.Point.prototype.clone=function(){return new jsts.geom.Point(this.coordinate.clone(),this.factory)},jsts.geom.Point.prototype.getDimension=function(){return 0},jsts.geom.Point.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE},jsts.geom.Point.prototype.reverse=function(){return this.clone()},jsts.geom.Point.prototype.isValid=function(){return jsts.operation.valid.IsValidOp.isValid(this.getCoordinate())?!0:!1},jsts.geom.Point.prototype.normalize=function(){},jsts.geom.Point.prototype.compareToSameClass=function(t){var e=t;return this.getCoordinate().compareTo(e.getCoordinate())},jsts.geom.Point.prototype.getGeometryType=function(){return"Point"},jsts.geom.Point.prototype.hashCode=function(){return"Point_"+this.coordinate.hashCode()},jsts.geom.Point.prototype.CLASS_NAME="jsts.geom.Point",jsts.geomgraph.EdgeIntersection=function(t,e,n){this.coord=new jsts.geom.Coordinate(t),this.segmentIndex=e,this.dist=n},jsts.geomgraph.EdgeIntersection.prototype.coord=null,jsts.geomgraph.EdgeIntersection.prototype.segmentIndex=null,jsts.geomgraph.EdgeIntersection.prototype.dist=null,jsts.geomgraph.EdgeIntersection.prototype.getCoordinate=function(){return this.coord},jsts.geomgraph.EdgeIntersection.prototype.getSegmentIndex=function(){return this.segmentIndex},jsts.geomgraph.EdgeIntersection.prototype.getDistance=function(){return this.dist},jsts.geomgraph.EdgeIntersection.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},jsts.geomgraph.EdgeIntersection.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},jsts.geomgraph.EdgeIntersection.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist?!0:this.segmentIndex===t?!0:!1},jsts.geomgraph.EdgeIntersection.prototype.toString=function(){return""+this.segmentIndex+this.dist},function(){var t=jsts.geomgraph.EdgeIntersection,e=javascript.util.TreeMap;jsts.geomgraph.EdgeIntersectionList=function(t){this.nodeMap=new e,this.edge=t},jsts.geomgraph.EdgeIntersectionList.prototype.nodeMap=null,jsts.geomgraph.EdgeIntersectionList.prototype.edge=null,jsts.geomgraph.EdgeIntersectionList.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},jsts.geomgraph.EdgeIntersectionList.prototype.add=function(e,n,o){var i=new t(e,n,o),r=this.nodeMap.get(i);return null!==r?r:(this.nodeMap.put(i,i),i)},jsts.geomgraph.EdgeIntersectionList.prototype.iterator=function(){return this.nodeMap.values().iterator()},jsts.geomgraph.EdgeIntersectionList.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},jsts.geomgraph.EdgeIntersectionList.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var o=e.next(),i=this.createSplitEdge(n,o);t.add(i),n=o}},jsts.geomgraph.EdgeIntersectionList.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,o=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(o);i||n--;var r=[],s=0;r[s++]=new jsts.geom.Coordinate(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)r[s++]=this.edge.pts[a];return i&&(r[s]=e.coord),new jsts.geomgraph.Edge(r,new jsts.geomgraph.Label(this.edge.label))}}(),function(){var t=function(t){this.message=t};t.prototype=new Error,t.prototype.name="AssertionFailedException",jsts.util.AssertionFailedException=t}(),function(){var t=jsts.util.AssertionFailedException;jsts.util.Assert=function(){},jsts.util.Assert.isTrue=function(e,n){if(!e)throw null===n?new t:new t(n)},jsts.util.Assert.equals=function(e,n,o){if(!n.equals(e))throw new t("Expected "+e+" but encountered "+n+(null!=o?": "+o:""))},jsts.util.Assert.shouldNeverReachHere=function(e){throw new t("Should never reach here"+(null!=e?": "+e:""))}}(),function(){var t=jsts.geom.Location,e=jsts.util.Assert,n=javascript.util.ArrayList;jsts.operation.relate.RelateComputer=function(t){this.li=new jsts.algorithm.RobustLineIntersector,this.ptLocator=new jsts.algorithm.PointLocator,this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory),this.isolatedEdges=new n,this.arg=t},jsts.operation.relate.RelateComputer.prototype.li=null,jsts.operation.relate.RelateComputer.prototype.ptLocator=null,jsts.operation.relate.RelateComputer.prototype.arg=null,jsts.operation.relate.RelateComputer.prototype.nodes=null,jsts.operation.relate.RelateComputer.prototype.im=null,jsts.operation.relate.RelateComputer.prototype.isolatedEdges=null,jsts.operation.relate.RelateComputer.prototype.invalidPoint=null,jsts.operation.relate.RelateComputer.prototype.computeIM=function(){var e=new jsts.geom.IntersectionMatrix;if(e.set(t.EXTERIOR,t.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(e),e;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var n=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(n,e);var o=new jsts.operation.relate.EdgeEndBuilder,i=o.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=o.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(e),e},jsts.operation.relate.RelateComputer.prototype.insertEdgeEnds=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},jsts.operation.relate.RelateComputer.prototype.computeProperIntersectionIM=function(t,e){var n=this.arg[0].getGeometry().getDimension(),o=this.arg[1].getGeometry().getDimension(),i=t.hasProperIntersection(),r=t.hasProperInteriorIntersection();2===n&&2===o?i&&e.setAtLeast("212101212"):2===n&&1===o?(i&&e.setAtLeast("FFF0FFFF2"),r&&e.setAtLeast("1FFFFF1FF")):1===n&&2===o?(i&&e.setAtLeast("F0FFFFFF2"),r&&e.setAtLeast("1F1FFFFFF")):1===n&&1===o&&r&&e.setAtLeast("0FFFFFFFF")},jsts.operation.relate.RelateComputer.prototype.copyNodesAndLabels=function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),o=this.nodes.addNode(n.getCoordinate());o.setLabel(t,n.getLabel().getLocation(t))}},jsts.operation.relate.RelateComputer.prototype.computeIntersectionNodes=function(e){for(var n=this.arg[e].getEdgeIterator();n.hasNext();)for(var o=n.next(),i=o.getLabel().getLocation(e),r=o.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),a=this.nodes.addNode(s.coord);i===t.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,t.INTERIOR)}},jsts.operation.relate.RelateComputer.prototype.labelIntersectionNodes=function(e){for(var n=this.arg[e].getEdgeIterator();n.hasNext();)for(var o=n.next(),i=o.getLabel().getLocation(e),r=o.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),a=this.nodes.find(s.coord);a.getLabel().isNull(e)&&(i===t.BOUNDARY?a.setLabelBoundary(e):a.setLabel(e,t.INTERIOR))}},jsts.operation.relate.RelateComputer.prototype.computeDisjointIM=function(e){var n=this.arg[0].getGeometry();n.isEmpty()||(e.set(t.INTERIOR,t.EXTERIOR,n.getDimension()),e.set(t.BOUNDARY,t.EXTERIOR,n.getBoundaryDimension()));var o=this.arg[1].getGeometry();o.isEmpty()||(e.set(t.EXTERIOR,t.INTERIOR,o.getDimension()),e.set(t.EXTERIOR,t.BOUNDARY,o.getBoundaryDimension()))},jsts.operation.relate.RelateComputer.prototype.labelNodeEdges=function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},jsts.operation.relate.RelateComputer.prototype.updateIM=function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}for(var o=this.nodes.iterator();o.hasNext();){var i=o.next();i.updateIM(t),i.updateIMFromEdges(t)}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdges=function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var o=n.next();o.isIsolated()&&(this.labelIsolatedEdge(o,e,this.arg[e].getGeometry()),this.isolatedEdges.add(o))}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdge=function(e,n,o){if(o.getDimension()>0){var i=this.ptLocator.locate(e.getCoordinate(),o);e.getLabel().setAllLocations(n,i)}else e.getLabel().setAllLocations(n,t.EXTERIOR)},jsts.operation.relate.RelateComputer.prototype.labelIsolatedNodes=function(){for(var t=this.nodes.iterator();t.hasNext();){var n=t.next(),o=n.getLabel();e.isTrue(o.getGeometryCount()>0,"node with empty label found"),n.isIsolated()&&(o.isNull(0)?this.labelIsolatedNode(n,0):this.labelIsolatedNode(n,1))}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedNode=function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)}}(),function(){var t=jsts.util.Assert;jsts.geomgraph.GraphComponent=function(t){this.label=t},jsts.geomgraph.GraphComponent.prototype.label=null,jsts.geomgraph.GraphComponent.prototype._isInResult=!1,jsts.geomgraph.GraphComponent.prototype._isCovered=!1,jsts.geomgraph.GraphComponent.prototype._isCoveredSet=!1,jsts.geomgraph.GraphComponent.prototype._isVisited=!1,jsts.geomgraph.GraphComponent.prototype.getLabel=function(){return this.label},jsts.geomgraph.GraphComponent.prototype.setLabel=function(t){return 2===arguments.length?void this.setLabel2.apply(this,arguments):void(this.label=t)},jsts.geomgraph.GraphComponent.prototype.setInResult=function(t){this._isInResult=t},jsts.geomgraph.GraphComponent.prototype.isInResult=function(){return this._isInResult},jsts.geomgraph.GraphComponent.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},jsts.geomgraph.GraphComponent.prototype.isCovered=function(){return this._isCovered},jsts.geomgraph.GraphComponent.prototype.isCoveredSet=function(){return this._isCoveredSet},jsts.geomgraph.GraphComponent.prototype.isVisited=function(){return this._isVisited},jsts.geomgraph.GraphComponent.prototype.setVisited=function(t){this._isVisited=t},jsts.geomgraph.GraphComponent.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.computeIM=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.isIsolated=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.updateIM=function(e){t.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}}(),jsts.geomgraph.Node=function(t,e){this.coord=t,this.edges=e,this.label=new jsts.geomgraph.Label(0,jsts.geom.Location.NONE)},jsts.geomgraph.Node.prototype=new jsts.geomgraph.GraphComponent,jsts.geomgraph.Node.prototype.coord=null,jsts.geomgraph.Node.prototype.edges=null,jsts.geomgraph.Node.prototype.isIsolated=function(){return 1==this.label.getGeometryCount()},jsts.geomgraph.Node.prototype.setLabel2=function(t,e){null===this.label?this.label=new jsts.geomgraph.Label(t,e):this.label.setLocation(t,e)},jsts.geomgraph.Node.prototype.setLabelBoundary=function(t){var e=jsts.geom.Location.NONE;null!==this.label&&(e=this.label.getLocation(t));var n;switch(e){case jsts.geom.Location.BOUNDARY:n=jsts.geom.Location.INTERIOR;break;case jsts.geom.Location.INTERIOR:n=jsts.geom.Location.BOUNDARY;break;default:n=jsts.geom.Location.BOUNDARY}this.label.setLocation(t,n)},jsts.geomgraph.Node.prototype.add=function(t){this.edges.insert(t),t.setNode(this)},jsts.geomgraph.Node.prototype.getCoordinate=function(){return this.coord},jsts.geomgraph.Node.prototype.getEdges=function(){return this.edges},jsts.geomgraph.Node.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},function(){var t=function(t){this.deList=new javascript.util.ArrayList,this.factory=t};t.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),o=n.getEnvelopeInternal(),i=n.getCoordinateN(0),r=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),p=l.getRing(),u=p.getEnvelopeInternal();null!=r&&(s=r.getRing().getEnvelopeInternal());var h=!1;u.equals(o)||(i=jsts.geom.CoordinateArrays.ptNotInList(n.getCoordinates(),p.getCoordinates()),u.contains(o)&&jsts.algorithm.CGAlgorithms.isPointInRing(i,p.getCoordinates())&&(h=!0),h&&(null==r||s.contains(u))&&(r=l))}return r},t.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(!isInList(o,e))return o}return null},t.isInList=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return!0;return!1},t.prototype.factory=null,t.prototype.deList=null,t.prototype.ring=null,t.prototype.ringPts=null,t.prototype.holes=null,t.prototype.add=function(t){this.deList.add(t)},t.prototype.isHole=function(){var t=this.getRing();return jsts.algorithm.CGAlgorithms.isCCW(t.getCoordinates())},t.prototype.addHole=function(t){null==this.holes&&(this.holes=new javascript.util.ArrayList),this.holes.add(t)},t.prototype.getPolygon=function(){var t=null;if(null!=this.holes){t=[];for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var n=this.factory.createPolygon(this.ring,t);return n},t.prototype.isValid=function(){return this.getCoordinates(),this.ringPts.length<=3?!1:(this.getRing(),this.ring.isValid())},t.prototype.getCoordinates=function(){if(null==this.ringPts){for(var e=new jsts.geom.CoordinateList,n=this.deList.iterator();n.hasNext();){var o=n.next(),i=o.getEdge();t.addEdge(i.getLine().getCoordinates(),o.getEdgeDirection(),e)}this.ringPts=e.toCoordinateArray()}return this.ringPts},t.prototype.getLineString=function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},t.prototype.getRing=function(){if(null!=this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&console.log(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){console.log(this.ringPts)}return this.ring},t.addEdge=function(t,e,n){if(e)for(var o=0;o<t.length;o++)n.add(t[o],!1);else for(var o=t.length-1;o>=0;o--)n.add(t[o],!1)},jsts.operation.polygonize.EdgeRing=t}(),function(){var t=function(){};t.setVisited=function(t,e){for(;t.hasNext();){var n=t.next();n.setVisited(e)}},t.setMarked=function(t,e){for(;t.hasNext();){var n=t.next();n.setMarked(e)}},t.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()==e)return n}return null},t.prototype._isMarked=!1,t.prototype._isVisited=!1,t.prototype.data,t.prototype.isVisited=function(){return this._isVisited},t.prototype.setVisited=function(t){this._isVisited=t},t.prototype.isMarked=function(){return this._isMarked},t.prototype.setMarked=function(t){this._isMarked=t},t.prototype.setContext=function(t){this.data=t},t.prototype.getContext=function(){return data},t.prototype.setData=function(t){this.data=t},t.prototype.getData=function(){return data},t.prototype.isRemoved=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.planargraph.GraphComponent=t}(),function(){var t=jsts.planargraph.GraphComponent,e=function(t,e){void 0!==t&&this.setDirectedEdges(t,e)};e.prototype=new t,e.prototype.dirEdge=null,e.prototype.setDirectedEdges=function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},e.prototype.getDirEdge=function(t){return t instanceof jsts.planargraph.Node&&this.getDirEdge2(t),this.dirEdge[t]},e.prototype.getDirEdge2=function(t){return this.dirEdge[0].getFromNode()==t?this.dirEdge[0]:this.dirEdge[1].getFromNode()==t?this.dirEdge[1]:null},e.prototype.getOppositeNode=function(t){return this.dirEdge[0].getFromNode()==t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()==t?this.dirEdge[1].getToNode():null},e.prototype.remove=function(){this.dirEdge=null},e.prototype.isRemoved=function(){return null==dirEdge},jsts.planargraph.Edge=e}(),jsts.operation.polygonize.PolygonizeEdge=function(t){this.line=t},jsts.operation.polygonize.PolygonizeEdge.prototype=new jsts.planargraph.Edge,jsts.operation.polygonize.PolygonizeEdge.prototype.line=null,jsts.operation.polygonize.PolygonizeEdge.prototype.getLine=function(){return this.line},function(){var t=javascript.util.ArrayList,e=jsts.planargraph.GraphComponent,n=function(t,e,n,o){if(void 0!==t){this.from=t,this.to=e,this.edgeDirection=o,this.p0=t.getCoordinate(),this.p1=n;var i=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y;this.quadrant=jsts.geomgraph.Quadrant.quadrant(i,r),this.angle=Math.atan2(r,i)}};n.prototype=new e,n.toEdges=function(e){for(var n=new t,o=e.iterator();o.hasNext();)n.add(o.next().parentEdge);return n},n.prototype.parentEdge=null,n.prototype.from=null,n.prototype.to=null,n.prototype.p0=null,n.prototype.p1=null,n.prototype.sym=null,n.prototype.edgeDirection=null,n.prototype.quadrant=null,n.prototype.angle=null,n.prototype.getEdge=function(){return this.parentEdge},n.prototype.setEdge=function(t){this.parentEdge=t},n.prototype.getQuadrant=function(){return this.quadrant},n.prototype.getDirectionPt=function(){return this.p1},n.prototype.getEdgeDirection=function(){return this.edgeDirection},n.prototype.getFromNode=function(){return this.from},n.prototype.getToNode=function(){return this.to},n.prototype.getCoordinate=function(){return this.from.getCoordinate()},n.prototype.getAngle=function(){return this.angle},n.prototype.getSym=function(){return this.sym},n.prototype.setSym=function(t){this.sym=t},n.prototype.remove=function(){this.sym=null,this.parentEdge=null},n.prototype.isRemoved=function(){return null==this.parentEdge},n.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},n.prototype.compareDirection=function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:jsts.algorithm.CGAlgorithms.computeOrientation(t.p0,t.p1,this.p1)},jsts.planargraph.DirectedEdge=n}(),function(){var t=jsts.planargraph.DirectedEdge,e=function(){t.apply(this,arguments)};e.prototype=new t,e.prototype.edgeRing=null,e.prototype.next=null,e.prototype.label=-1,e.prototype.getLabel=function(){return this.label},e.prototype.setLabel=function(t){this.label=t},e.prototype.getNext=function(){return this.next},e.prototype.setNext=function(t){this.next=t},e.prototype.isInRing=function(){return null!=this.edgeRing},e.prototype.setRing=function(t){this.edgeRing=t},jsts.operation.polygonize.PolygonizeDirectedEdge=e}(),function(){var t=javascript.util.ArrayList,e=function(){this.outEdges=new t};e.prototype.outEdges=null,e.prototype.sorted=!1,e.prototype.add=function(t){this.outEdges.add(t),this.sorted=!1},e.prototype.remove=function(t){this.outEdges.remove(t)},e.prototype.iterator=function(){return this.sortEdges(),this.outEdges.iterator()},e.prototype.getDegree=function(){return this.outEdges.size()},e.prototype.getCoordinate=function(){var t=iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},e.prototype.getEdges=function(){return this.sortEdges(),this.outEdges},e.prototype.sortEdges=function(){if(!this.sorted){var t=this.outEdges.toArray();t.sort(function(t,e){return t.compareTo(e)}),this.outEdges=javascript.util.Arrays.asList(t),this.sorted=!0}},e.prototype.getIndex=function(t){if(t instanceof jsts.planargraph.DirectedEdge)return this.getIndex2(t);if("number"==typeof t)return this.getIndex3(t);this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()==t)return e}return-1},e.prototype.getIndex2=function(t){this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n==t)return e}return-1},e.prototype.getIndex3=function(t){var e=toInt(t%this.outEdges.size());return 0>e&&(e+=this.outEdges.size()),e},e.prototype.getNextEdge=function(t){var e=this.getIndex(t);return this.outEdges.get(getIndex(e+1))},e.prototype.getNextCWEdge=function(t){var e=this.getIndex(t);return this.outEdges.get(getIndex(e-1))},jsts.planargraph.DirectedEdgeStar=e}(),function(){var t=jsts.planargraph.GraphComponent,e=jsts.planargraph.DirectedEdgeStar,n=function(t,n){this.pt=t,this.deStar=n||new e};n.prototype=new t,n.getEdgesBetween=function(t,e){var n=DirectedEdge.toEdges(t.getOutEdges().getEdges()),o=new javascript.util.HashSet(n),i=DirectedEdge.toEdges(e.getOutEdges().getEdges());return o.retainAll(i),o},n.prototype.pt=null,n.prototype.deStar=null,n.prototype.getCoordinate=function(){return this.pt},n.prototype.addOutEdge=function(t){this.deStar.add(t)},n.prototype.getOutEdges=function(){return this.deStar},n.prototype.getDegree=function(){return this.deStar.getDegree()},n.prototype.getIndex=function(t){return this.deStar.getIndex(t)},n.prototype.remove=function(t){return void 0===t?this.remove2():void this.deStar.remove(t)},n.prototype.remove2=function(){this.pt=null},n.prototype.isRemoved=function(){return null==this.pt},jsts.planargraph.Node=n}(),function(){var t=function(){this.nodeMap=new javascript.util.TreeMap};t.prototype.nodeMap=null,t.prototype.add=function(t){return this.nodeMap.put(t.getCoordinate(),t),t},t.prototype.remove=function(t){return this.nodeMap.remove(t)},t.prototype.find=function(t){return this.nodeMap.get(t)},t.prototype.iterator=function(){return this.nodeMap.values().iterator()},t.prototype.values=function(){return this.nodeMap.values()},jsts.planargraph.NodeMap=t}(),function(){var t=javascript.util.ArrayList,e=function(){this.edges=new javascript.util.HashSet,this.dirEdges=new javascript.util.HashSet,this.nodeMap=new jsts.planargraph.NodeMap};e.prototype.edges=null,e.prototype.dirEdges=null,e.prototype.nodeMap=null,e.prototype.findNode=function(t){return this.nodeMap.find(t)},e.prototype.add=function(t){return t instanceof jsts.planargraph.Edge?this.add2(t):t instanceof jsts.planargraph.DirectedEdge?this.add3(t):void this.nodeMap.add(t)},e.prototype.add2=function(t){this.edges.add(t),this.add(t.getDirEdge(0)),this.add(t.getDirEdge(1))},e.prototype.add3=function(t){this.dirEdges.add(t)},e.prototype.nodeIterator=function(){return this.nodeMap.iterator()},e.prototype.contains=function(t){return t instanceof jsts.planargraph.DirectedEdge?this.contains2(t):this.edges.contains(t)},e.prototype.contains2=function(t){return this.dirEdges.contains(t)},e.prototype.getNodes=function(){return this.nodeMap.values()},e.prototype.dirEdgeIterator=function(){return this.dirEdges.iterator()},e.prototype.edgeIterator=function(){return this.edges.iterator()},e.prototype.getEdges=function(){return this.edges},e.prototype.remove=function(t){return t instanceof jsts.planargraph.DirectedEdge?this.remove2(t):(this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),void this.edge.remove())},e.prototype.remove2=function(t){if(t instanceof jsts.planargraph.Node)return this.remove3(t);var e=t.getSym();null!=e&&e.setSym(null),t.getFromNode().remove(t),t.remove(),this.dirEdges.remove(t)},e.prototype.remove3=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var o=n.next(),i=o.getSym();null!=i&&this.remove(i),this.dirEdges.remove(o);var r=o.getEdge();null!=r&&this.edges.remove(r)}this.nodeMap.remove(t.getCoordinate()),t.remove()},e.prototype.findNodesOfDegree=function(e){for(var n=new t,o=this.nodeIterator();o.hasNext();){var i=o.next();i.getDegree()==e&&n.add(i)}return n},jsts.planargraph.PlanarGraph=e}(),function(){var t=javascript.util.ArrayList,e=javascript.util.Stack,n=javascript.util.HashSet,o=jsts.util.Assert,i=jsts.operation.polygonize.EdgeRing,r=jsts.operation.polygonize.PolygonizeEdge,s=jsts.operation.polygonize.PolygonizeDirectedEdge,a=jsts.planargraph.PlanarGraph,l=jsts.planargraph.Node,p=function(t){a.apply(this),this.factory=t};p.prototype=new a,p.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,o=e.iterator();o.hasNext();){var i=o.next();i.isMarked()||n++}return n},p.getDegree=function(t,e){for(var n=t.getOutEdges().getEdges(),o=0,i=n.iterator();i.hasNext();){var r=i.next();r.getLabel()==e&&o++}return o},p.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var o=n.next();o.setMarked(!0);var i=o.getSym();null!=i&&i.setMarked(!0)}},p.prototype.factory=null,p.prototype.addEdge=function(t){if(!t.isEmpty()){var e=jsts.geom.CoordinateArrays.removeRepeatedPoints(t.getCoordinates());if(!(e.length<2)){var n=e[0],o=e[e.length-1],i=this.getNode(n),a=this.getNode(o),l=new s(i,a,e[1],!0),p=new s(a,i,e[e.length-2],!1),u=new r(t);u.setDirectedEdges(l,p),this.add(u)}}},p.prototype.getNode=function(t){var e=this.findNode(t);return null==e&&(e=new l(t),this.add(e)),e},p.prototype.computeNextCWEdges=function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();p.computeNextCWEdges(e)}},p.prototype.convertMaximalToMinimalEdgeRings=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),o=n.getLabel(),i=p.findIntersectionNodes(n,o);if(null!=i)for(var r=i.iterator();r.hasNext();){var s=r.next();p.computeNextCCWEdges(s,o)}}},p.findIntersectionNodes=function(e,n){var i=e,r=null;do{var s=i.getFromNode();p.getDegree(s,n)>1&&(null==r&&(r=new t),r.add(s)),i=i.getNext(),o.isTrue(null!=i,"found null DE in ring"),o.isTrue(i==e||!i.isInRing(),"found DE already in ring")}while(i!=e);return r},p.prototype.getEdgeRings=function(){this.computeNextCWEdges(),p.label(this.dirEdges,-1);var e=p.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(e);for(var n=new t,o=this.dirEdges.iterator();o.hasNext();){var i=o.next();if(!i.isMarked()&&!i.isInRing()){var r=this.findEdgeRing(i);n.add(r)}}return n},p.findLabeledEdgeRings=function(e){for(var n=new t,o=1,i=e.iterator();i.hasNext();){var r=i.next();
if(!(r.isMarked()||r.getLabel()>=0)){n.add(r);var s=p.findDirEdgesInRing(r);p.label(s,o),o++}}return n},p.prototype.deleteCutEdges=function(){this.computeNextCWEdges(),p.findLabeledEdgeRings(this.dirEdges);for(var e=new t,n=this.dirEdges.iterator();n.hasNext();){var o=n.next();if(!o.isMarked()){var i=o.getSym();if(o.getLabel()==i.getLabel()){o.setMarked(!0),i.setMarked(!0);var r=o.getEdge();e.add(r.getLine())}}}return e},p.label=function(t,e){for(var n=t.iterator();n.hasNext();){var o=n.next();o.setLabel(e)}},p.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,o=null,i=e.getEdges().iterator();i.hasNext();){var r=i.next();if(!r.isMarked()){if(null==n&&(n=r),null!=o){var s=o.getSym();s.setNext(r)}o=r}}if(null!=o){var s=o.getSym();s.setNext(n)}},p.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),i=null,r=null,s=n.getEdges(),a=s.size()-1;a>=0;a--){var l=s.get(a),p=l.getSym(),u=null;l.getLabel()==e&&(u=l);var h=null;p.getLabel()==e&&(h=p),(null!=u||null!=h)&&(null!=h&&(r=h),null!=u&&(null!=r&&(r.setNext(u),r=null),null==i&&(i=u)))}null!=r&&(o.isTrue(null!=i),r.setNext(i))},p.findDirEdgesInRing=function(e){var n=e,i=new t;do i.add(n),n=n.getNext(),o.isTrue(null!=n,"found null DE in ring"),o.isTrue(n==e||!n.isInRing(),"found DE already in ring");while(n!=e);return i},p.prototype.findEdgeRing=function(t){var e=t,n=new i(this.factory);do n.add(e),e.setRing(n),e=e.getNext(),o.isTrue(null!=e,"found null DE in ring"),o.isTrue(e==t||!e.isInRing(),"found DE already in ring");while(e!=t);return n},p.prototype.deleteDangles=function(){for(var t=this.findNodesOfDegree(1),o=new n,i=new e,r=t.iterator();r.hasNext();)i.push(r.next());for(;!i.isEmpty();){var s=i.pop();p.deleteAllEdges(s);for(var a=s.getOutEdges().getEdges(),r=a.iterator();r.hasNext();){var l=r.next();l.setMarked(!0);var u=l.getSym();null!=u&&u.setMarked(!0);var h=l.getEdge();o.add(h.getLine());var d=l.getToNode();1==p.getDegreeNonDeleted(d)&&i.push(d)}}return o},p.prototype.computeDepthParity=function(){for(;;){var t=null;if(null==t)return;this.computeDepthParity(t)}},p.prototype.computeDepthParity=function(){},jsts.operation.polygonize.PolygonizeGraph=p}(),jsts.index.strtree.Interval=function(){var t;return 1===arguments.length?(t=arguments[0],jsts.index.strtree.Interval(t.min,t.max)):void(2===arguments.length&&(jsts.util.Assert.isTrue(this.min<=this.max),this.min=arguments[0],this.max=arguments[1]))},jsts.index.strtree.Interval.prototype.min=null,jsts.index.strtree.Interval.prototype.max=null,jsts.index.strtree.Interval.prototype.getCentre=function(){return(this.min+this.max)/2},jsts.index.strtree.Interval.prototype.expandToInclude=function(t){return this.max=Math.max(this.max,t.max),this.min=Math.min(this.min,t.min),this},jsts.index.strtree.Interval.prototype.intersects=function(t){return!(t.min>this.max||t.max<this.min)},jsts.index.strtree.Interval.prototype.equals=function(t){return t instanceof jsts.index.strtree.Interval?(other=t,this.min===other.min&&this.max===other.max):!1},jsts.geom.GeometryFactory=function(t){this.precisionModel=t||new jsts.geom.PrecisionModel},jsts.geom.GeometryFactory.prototype.precisionModel=null,jsts.geom.GeometryFactory.prototype.getPrecisionModel=function(){return this.precisionModel},jsts.geom.GeometryFactory.prototype.createPoint=function(t){var e=new jsts.geom.Point(t,this);return e},jsts.geom.GeometryFactory.prototype.createLineString=function(t){var e=new jsts.geom.LineString(t,this);return e},jsts.geom.GeometryFactory.prototype.createLinearRing=function(t){var e=new jsts.geom.LinearRing(t,this);return e},jsts.geom.GeometryFactory.prototype.createPolygon=function(t,e){var n=new jsts.geom.Polygon(t,e,this);return n},jsts.geom.GeometryFactory.prototype.createMultiPoint=function(t){if(t&&t[0]instanceof jsts.geom.Coordinate){var e,n=[];for(e=0;e<t.length;e++)n.push(this.createPoint(t[e]));t=n}return new jsts.geom.MultiPoint(t,this)},jsts.geom.GeometryFactory.prototype.createMultiLineString=function(t){return new jsts.geom.MultiLineString(t,this)},jsts.geom.GeometryFactory.prototype.createMultiPolygon=function(t){return new jsts.geom.MultiPolygon(t,this)},jsts.geom.GeometryFactory.prototype.buildGeometry=function(t){for(var e=null,n=!1,o=!1,i=t.iterator();i.hasNext();){var r=i.next(),s=r.CLASS_NAME;null===e&&(e=s),s!==e&&(n=!0),r.isGeometryCollectionBase()&&(o=!0)}if(null===e)return this.createGeometryCollection(null);if(n||o)return this.createGeometryCollection(t.toArray());var a=t.get(0),l=t.size()>1;if(l){if(a instanceof jsts.geom.Polygon)return this.createMultiPolygon(t.toArray());if(a instanceof jsts.geom.LineString)return this.createMultiLineString(t.toArray());if(a instanceof jsts.geom.Point)return this.createMultiPoint(t.toArray());jsts.util.Assert.shouldNeverReachHere("Unhandled class: "+a)}return a},jsts.geom.GeometryFactory.prototype.createGeometryCollection=function(t){return new jsts.geom.GeometryCollection(t,this)},jsts.geom.GeometryFactory.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new jsts.geom.Coordinate(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new jsts.geom.Coordinate(t.getMinX(),t.getMinY()),new jsts.geom.Coordinate(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new jsts.geom.Coordinate(t.getMinX(),t.getMinY()),new jsts.geom.Coordinate(t.getMinX(),t.getMaxY()),new jsts.geom.Coordinate(t.getMaxX(),t.getMaxY()),new jsts.geom.Coordinate(t.getMaxX(),t.getMinY()),new jsts.geom.Coordinate(t.getMinX(),t.getMinY())]),null)},jsts.index.quadtree.NodeBase=function(){this.subnode=new Array(4),this.subnode[0]=null,this.subnode[1]=null,this.subnode[2]=null,this.subnode[3]=null,this.items=[]},jsts.index.quadtree.NodeBase.prototype.getSubnodeIndex=function(t,e){var n=-1;return t.getMinX()>=e.x&&(t.getMinY()>=e.y&&(n=3),t.getMaxY()<=e.y&&(n=1)),t.getMaxX()<=e.x&&(t.getMinY()>=e.y&&(n=2),t.getMaxY()<=e.y&&(n=0)),n},jsts.index.quadtree.NodeBase.prototype.getItems=function(){return this.items},jsts.index.quadtree.NodeBase.prototype.hasItems=function(){return this.items.length>0},jsts.index.quadtree.NodeBase.prototype.add=function(t){this.items.push(t)},jsts.index.quadtree.NodeBase.prototype.remove=function(t,e){if(!this.isSearchMatch(t))return!1;var n=!1,o=0;for(o;4>o;o++)if(null!==this.subnode[o]&&(n=this.subnode[o].remove(t,e))){this.subnode[o].isPrunable()&&(this.subnode[o]=null);break}if(n)return n;if(-1!==this.items.indexOf(e)){for(var o=this.items.length-1;o>=0;o--)this.items[o]===e&&this.items.splice(o,1);n=!0}return n},jsts.index.quadtree.NodeBase.prototype.isPrunable=function(){return!(this.hasChildren()||this.hasItems())},jsts.index.quadtree.NodeBase.prototype.hasChildren=function(){var t=0;for(t;4>t;t++)if(null!==this.subnode[t])return!0;return!1},jsts.index.quadtree.NodeBase.prototype.isEmpty=function(){var t=!0;this.items.length>0&&(t=!1);var e=0;for(e;4>e;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},jsts.index.quadtree.NodeBase.prototype.addAllItems=function(t){t=t.concat(this.items);var e=0;for(e;4>e;e++)null!==this.subnode[e]&&(t=this.subnode[e].addAllItems(t));return t},jsts.index.quadtree.NodeBase.prototype.addAllItemsFromOverlapping=function(t,e){if(this.isSearchMatch(t)){e=e.concat(this.items);var n=0;for(n;4>n;n++)null!==this.subnode[n]&&(e=this.subnode[n].addAllItemsFromOverlapping(t,e))}},jsts.index.quadtree.NodeBase.prototype.visit=function(t,e){if(this.isSearchMatch(t)){this.visitItems(t,e);var n=0;for(n;4>n;n++)null!==this.subnode[n]&&this.subnode[n].visit(t,e)}},jsts.index.quadtree.NodeBase.prototype.visitItems=function(t,e){var n=0,o=this.items.length;for(n;o>n;n++)e.visitItem(this.items[n])},jsts.index.quadtree.NodeBase.prototype.depth=function(){var t,e=0,n=0;for(n;4>n;n++)null!==this.subnode[n]&&(t=this.subnode[n].depth(),t>e&&(e=t));return e+1},jsts.index.quadtree.NodeBase.prototype.size=function(){var t=0,e=0;for(e;4>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.length},jsts.index.quadtree.NodeBase.prototype.getNodeCount=function(){var t=0,e=0;for(e;4>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},jsts.index.quadtree.Node=function(t,e){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments),this.env=t,this.level=e,this.centre=new jsts.geom.Coordinate,this.centre.x=(t.getMinX()+t.getMaxX())/2,this.centre.y=(t.getMinY()+t.getMaxY())/2},jsts.index.quadtree.Node.prototype=new jsts.index.quadtree.NodeBase,jsts.index.quadtree.Node.createNode=function(t){var e,n;return e=new jsts.index.quadtree.Key(t),n=new jsts.index.quadtree.Node(e.getEnvelope(),e.getLevel())},jsts.index.quadtree.Node.createExpanded=function(t,e){var n,o=new jsts.geom.Envelope(e);return null!==t&&o.expandToInclude(t.env),n=jsts.index.quadtree.Node.createNode(o),null!==t&&n.insertNode(t),n},jsts.index.quadtree.Node.prototype.getEnvelope=function(){return this.env},jsts.index.quadtree.Node.prototype.isSearchMatch=function(t){return this.env.intersects(t)},jsts.index.quadtree.Node.prototype.getNode=function(t){var e,n=this.getSubnodeIndex(t,this.centre);return-1!==n?(e=this.getSubnode(n),e.getNode(t)):this},jsts.index.quadtree.Node.prototype.find=function(t){var e,n=this.getSubnodeIndex(t,this.centre);return-1===n?this:null!==this.subnode[n]?(e=this.subnode[n],e.find(t)):this},jsts.index.quadtree.Node.prototype.insertNode=function(t){var e,n=this.getSubnodeIndex(t.env,this.centre);t.level===this.level-1?this.subnode[n]=t:(e=this.createSubnode(n),e.insertNode(t),this.subnode[n]=e)},jsts.index.quadtree.Node.prototype.getSubnode=function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},jsts.index.quadtree.Node.prototype.createSubnode=function(t){var e,n,o=0,i=0,r=0,s=0;switch(t){case 0:o=this.env.getMinX(),i=this.centre.x,r=this.env.getMinY(),s=this.centre.y;break;case 1:o=this.centre.x,i=this.env.getMaxX(),r=this.env.getMinY(),s=this.centre.y;break;case 2:o=this.env.getMinX(),i=this.centre.x,r=this.centre.y,s=this.env.getMaxY();break;case 3:o=this.centre.x,i=this.env.getMaxX(),r=this.centre.y,s=this.env.getMaxY()}return e=new jsts.geom.Envelope(o,i,r,s),n=new jsts.index.quadtree.Node(e,this.level-1)},function(){jsts.geomgraph.Position=function(){},jsts.geomgraph.Position.ON=0,jsts.geomgraph.Position.LEFT=1,jsts.geomgraph.Position.RIGHT=2,jsts.geomgraph.Position.opposite=function(t){return t===jsts.geomgraph.Position.LEFT?jsts.geomgraph.Position.RIGHT:t===jsts.geomgraph.Position.RIGHT?jsts.geomgraph.Position.LEFT:t}}(),jsts.geomgraph.TopologyLocation=function(){if(this.location=[],3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this.init(3),this.location[jsts.geomgraph.Position.ON]=t,this.location[jsts.geomgraph.Position.LEFT]=e,this.location[jsts.geomgraph.Position.RIGHT]=n}else if(arguments[0]instanceof jsts.geomgraph.TopologyLocation){var o=arguments[0];if(this.init(o.location.length),null!=o)for(var i=0;i<this.location.length;i++)this.location[i]=o.location[i]}else if("number"==typeof arguments[0]){var t=arguments[0];this.init(1),this.location[jsts.geomgraph.Position.ON]=t}else if(arguments[0]instanceof Array){var r=arguments[0];this.init(r.length)}},jsts.geomgraph.TopologyLocation.prototype.location=null,jsts.geomgraph.TopologyLocation.prototype.init=function(t){this.location[t-1]=null,this.setAllLocations(jsts.geom.Location.NONE)},jsts.geomgraph.TopologyLocation.prototype.get=function(t){return t<this.location.length?this.location[t]:jsts.geom.Location.NONE},jsts.geomgraph.TopologyLocation.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==jsts.geom.Location.NONE)return!1;return!0},jsts.geomgraph.TopologyLocation.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===jsts.geom.Location.NONE)return!0;return!1},jsts.geomgraph.TopologyLocation.prototype.isEqualOnSide=function(t,e){return this.location[e]==t.location[e]},jsts.geomgraph.TopologyLocation.prototype.isArea=function(){return this.location.length>1},jsts.geomgraph.TopologyLocation.prototype.isLine=function(){return 1===this.location.length},jsts.geomgraph.TopologyLocation.prototype.flip=function(){if(!(this.location.length<=1)){var t=this.location[jsts.geomgraph.Position.LEFT];this.location[jsts.geomgraph.Position.LEFT]=this.location[jsts.geomgraph.Position.RIGHT],this.location[jsts.geomgraph.Position.RIGHT]=t}},jsts.geomgraph.TopologyLocation.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},jsts.geomgraph.TopologyLocation.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===jsts.geom.Location.NONE&&(this.location[e]=t)},jsts.geomgraph.TopologyLocation.prototype.setLocation=function(t,e){void 0!==e?this.location[t]=e:this.setLocation(jsts.geomgraph.Position.ON,t)},jsts.geomgraph.TopologyLocation.prototype.getLocations=function(){return location},jsts.geomgraph.TopologyLocation.prototype.setLocations=function(t,e,n){this.location[jsts.geomgraph.Position.ON]=t,this.location[jsts.geomgraph.Position.LEFT]=e,this.location[jsts.geomgraph.Position.RIGHT]=n},jsts.geomgraph.TopologyLocation.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},jsts.geomgraph.TopologyLocation.prototype.merge=function(t){if(t.location.length>this.location.length){var e=[];e[jsts.geomgraph.Position.ON]=this.location[jsts.geomgraph.Position.ON],e[jsts.geomgraph.Position.LEFT]=jsts.geom.Location.NONE,e[jsts.geomgraph.Position.RIGHT]=jsts.geom.Location.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===jsts.geom.Location.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},jsts.geomgraph.Label=function(){this.elt=[];var t,e,n,o,i;4===arguments.length?(t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE),this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE),this.elt[t].setLocations(e,n,i)):3===arguments.length?(e=arguments[0],n=arguments[1],i=arguments[2],this.elt[0]=new jsts.geomgraph.TopologyLocation(e,n,i),this.elt[1]=new jsts.geomgraph.TopologyLocation(e,n,i)):2===arguments.length?(t=arguments[0],e=arguments[1],this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE),this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE),this.elt[t].setLocation(e)):arguments[0]instanceof jsts.geomgraph.Label?(o=arguments[0],this.elt[0]=new jsts.geomgraph.TopologyLocation(o.elt[0]),this.elt[1]=new jsts.geomgraph.TopologyLocation(o.elt[1])):"number"==typeof arguments[0]&&(e=arguments[0],this.elt[0]=new jsts.geomgraph.TopologyLocation(e),this.elt[1]=new jsts.geomgraph.TopologyLocation(e))},jsts.geomgraph.Label.toLineLabel=function(t){var e,n=new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(e=0;2>e;e++)n.setLocation(e,t.getLocation(e));return n},jsts.geomgraph.Label.prototype.elt=null,jsts.geomgraph.Label.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},jsts.geomgraph.Label.prototype.getLocation=function(t,e){return 1==arguments.length?this.getLocation2.apply(this,arguments):this.elt[t].get(e)},jsts.geomgraph.Label.prototype.getLocation2=function(t){return this.elt[t].get(jsts.geomgraph.Position.ON)},jsts.geomgraph.Label.prototype.setLocation=function(t,e,n){return 2==arguments.length?void this.setLocation2.apply(this,arguments):void this.elt[t].setLocation(e,n)},jsts.geomgraph.Label.prototype.setLocation2=function(t,e){this.elt[t].setLocation(jsts.geomgraph.Position.ON,e)},jsts.geomgraph.Label.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},jsts.geomgraph.Label.prototype.setAllLocationsIfNull=function(t,e){return 1==arguments.length?void this.setAllLocationsIfNull2.apply(this,arguments):void this.elt[t].setAllLocationsIfNull(e)},jsts.geomgraph.Label.prototype.setAllLocationsIfNull2=function(t){this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)},jsts.geomgraph.Label.prototype.merge=function(t){var e;for(e=0;2>e;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new jsts.geomgraph.TopologyLocation(t.elt[e]):this.elt[e].merge(t.elt[e])},jsts.geomgraph.Label.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},jsts.geomgraph.Label.prototype.isNull=function(t){return this.elt[t].isNull()},jsts.geomgraph.Label.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},jsts.geomgraph.Label.prototype.isArea=function(){return 1==arguments.length?this.isArea2(arguments[0]):this.elt[0].isArea()||this.elt[1].isArea()},jsts.geomgraph.Label.prototype.isArea2=function(t){return this.elt[t].isArea()},jsts.geomgraph.Label.prototype.isLine=function(t){return this.elt[t].isLine()},jsts.geomgraph.Label.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},jsts.geomgraph.Label.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},jsts.geomgraph.Label.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new jsts.geomgraph.TopologyLocation(this.elt[t].location[0]))},jsts.geomgraph.EdgeRing=function(t,e){this.edges=[],this.pts=[],this.holes=[],this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE),this.geometryFactory=e,t&&(this.computePoints(t),this.computeRing())},jsts.geomgraph.EdgeRing.prototype.startDe=null,jsts.geomgraph.EdgeRing.prototype.maxNodeDegree=-1,jsts.geomgraph.EdgeRing.prototype.edges=null,jsts.geomgraph.EdgeRing.prototype.pts=null,jsts.geomgraph.EdgeRing.prototype.label=null,jsts.geomgraph.EdgeRing.prototype.ring=null,jsts.geomgraph.EdgeRing.prototype._isHole=null,jsts.geomgraph.EdgeRing.prototype.shell=null,jsts.geomgraph.EdgeRing.prototype.holes=null,jsts.geomgraph.EdgeRing.prototype.geometryFactory=null,jsts.geomgraph.EdgeRing.prototype.isIsolated=function(){return 1==this.label.getGeometryCount()},jsts.geomgraph.EdgeRing.prototype.isHole=function(){return this._isHole},jsts.geomgraph.EdgeRing.prototype.getCoordinate=function(t){return this.pts[t]},jsts.geomgraph.EdgeRing.prototype.getLinearRing=function(){return this.ring},jsts.geomgraph.EdgeRing.prototype.getLabel=function(){return this.label},jsts.geomgraph.EdgeRing.prototype.isShell=function(){return null===this.shell},jsts.geomgraph.EdgeRing.prototype.getShell=function(){return this.shell},jsts.geomgraph.EdgeRing.prototype.setShell=function(t){this.shell=t,null!==t&&t.addHole(this)},jsts.geomgraph.EdgeRing.prototype.addHole=function(t){this.holes.push(t)},jsts.geomgraph.EdgeRing.prototype.toPolygon=function(){for(var t=[],e=0;e<this.holes.length;e++)t[e]=this.holes[e].getLinearRing();var n=this.geometryFactory.createPolygon(this.getLinearRing(),t);return n},jsts.geomgraph.EdgeRing.prototype.computeRing=function(){if(null===this.ring){for(var t=[],e=0;e<this.pts.length;e++)t[e]=this.pts[e];this.ring=this.geometryFactory.createLinearRing(t),this._isHole=jsts.algorithm.CGAlgorithms.isCCW(this.ring.getCoordinates())}},jsts.geomgraph.EdgeRing.prototype.getNext=function(){throw new jsts.error.AbstractInvocationError},jsts.geomgraph.EdgeRing.prototype.setEdgeRing=function(){throw new jsts.error.AbstractInvocationError},jsts.geomgraph.EdgeRing.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeRing.prototype.computePoints=function(t){this.startDe=t;var e=t,n=!0;do{if(null===e)throw new jsts.error.TopologyError("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new jsts.error.TopologyError("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.push(e);var o=e.getLabel();jsts.util.Assert.isTrue(o.isArea()),this.mergeLabel(o),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},jsts.geomgraph.EdgeRing.prototype.getMaxNodeDegree=function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},jsts.geomgraph.EdgeRing.prototype.computeMaxNodeDegree=function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},jsts.geomgraph.EdgeRing.prototype.setInResult=function(){var t=this.startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!=this.startDe)},jsts.geomgraph.EdgeRing.prototype.mergeLabel=function(t){this.mergeLabel2(t,0),this.mergeLabel2(t,1)},jsts.geomgraph.EdgeRing.prototype.mergeLabel2=function(t,e){var n=t.getLocation(e,jsts.geomgraph.Position.RIGHT);if(n!=jsts.geom.Location.NONE)return this.label.getLocation(e)===jsts.geom.Location.NONE?void this.label.setLocation(e,n):void 0},jsts.geomgraph.EdgeRing.prototype.addPoints=function(t,e,n){var o=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var r=i;r<o.length;r++)this.pts.push(o[r])}else{var i=o.length-2;n&&(i=o.length-1);for(var r=i;r>=0;r--)this.pts.push(o[r])}},jsts.geomgraph.EdgeRing.prototype.containsPoint=function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t))return!1;if(!jsts.algorithm.CGAlgorithms.isPointInRing(t,e.getCoordinates()))return!1;for(var o=0;o<this.holes.length;o++){var i=this.holes[o];if(i.containsPoint(t))return!1}return!0},jsts.geom.Dimension=function(){},jsts.geom.Dimension.P=0,jsts.geom.Dimension.L=1,jsts.geom.Dimension.A=2,jsts.geom.Dimension.FALSE=-1,jsts.geom.Dimension.TRUE=-2,jsts.geom.Dimension.DONTCARE=-3,jsts.geom.Dimension.toDimensionSymbol=function(t){switch(t){case jsts.geom.Dimension.FALSE:return"F";case jsts.geom.Dimension.TRUE:return"T";case jsts.geom.Dimension.DONTCARE:return"*";case jsts.geom.Dimension.P:return"0";case jsts.geom.Dimension.L:return"1";case jsts.geom.Dimension.A:return"2"}throw new jsts.IllegalArgumentError("Unknown dimension value: "+t)},jsts.geom.Dimension.toDimensionValue=function(t){switch(t.toUpperCase()){case"F":return jsts.geom.Dimension.FALSE;case"T":return jsts.geom.Dimension.TRUE;case"*":return jsts.geom.Dimension.DONTCARE;case"0":return jsts.geom.Dimension.P;case"1":return jsts.geom.Dimension.L;case"2":return jsts.geom.Dimension.A}throw new jsts.error.IllegalArgumentError("Unknown dimension symbol: "+t)},function(){var t=jsts.geom.Dimension;jsts.geom.LineString=function(t,e){this.factory=e,this.points=t||[]},jsts.geom.LineString.prototype=new jsts.geom.Geometry,jsts.geom.LineString.constructor=jsts.geom.LineString,jsts.geom.LineString.prototype.points=null,jsts.geom.LineString.prototype.getCoordinates=function(){return this.points},jsts.geom.LineString.prototype.getCoordinateSequence=function(){return this.points},jsts.geom.LineString.prototype.getCoordinateN=function(t){return this.points[t]},jsts.geom.LineString.prototype.getCoordinate=function(){return this.isEmpty()?null:this.getCoordinateN(0)},jsts.geom.LineString.prototype.getDimension=function(){return 1},jsts.geom.LineString.prototype.getBoundaryDimension=function(){return this.isClosed()?t.FALSE:0},jsts.geom.LineString.prototype.isEmpty=function(){return 0===this.points.length},jsts.geom.LineString.prototype.getNumPoints=function(){return this.points.length},jsts.geom.LineString.prototype.getPointN=function(t){return this.getFactory().createPoint(this.points[t])},jsts.geom.LineString.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},jsts.geom.LineString.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},jsts.geom.LineString.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.points.length-1))},jsts.geom.LineString.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},jsts.geom.LineString.prototype.getGeometryType=function(){return"LineString"},jsts.geom.LineString.prototype.getLength=function(){return jsts.algorithm.CGAlgorithms.computeLength(this.points)},jsts.geom.LineString.prototype.getBoundary=function(){return new jsts.operation.BoundaryOp(this).getBoundary()},jsts.geom.LineString.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new jsts.geom.Envelope;var t=new jsts.geom.Envelope;return this.points.forEach(function(e){t.expandToInclude(e)}),t},jsts.geom.LineString.prototype.equalsExact=function(t,e){return this.isEquivalentClass(t)?this.points.length!==t.points.length?!1:this.isEmpty()&&t.isEmpty()?!0:this.points.reduce(function(n,o,i){return n&&jsts.geom.Geometry.prototype.equal(o,t.points[i],e)}):!1},jsts.geom.LineString.prototype.isEquivalentClass=function(t){return t instanceof jsts.geom.LineString},jsts.geom.LineString.prototype.compareToSameClass=function(t){for(var e=t,n=0,o=this.points.length,i=0,r=e.points.length;o>n&&r>i;){var s=this.points[n].compareTo(e.points[i]);if(0!==s)return s;n++,i++}return o>n?1:r>i?-1:0},jsts.geom.LineString.prototype.apply=function(t){if(t instanceof jsts.geom.GeometryFilter||t instanceof jsts.geom.GeometryComponentFilter)t.filter(this);else if(t instanceof jsts.geom.CoordinateFilter)for(var e=0,n=this.points.length;n>e;e++)t.filter(this.points[e]);else t instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.LineString.prototype.apply2=function(t){if(0!==this.points.length){for(var e=0;e<this.points.length&&(t.filter(this.points,e),!t.isDone());e++);t.isGeometryChanged()}},jsts.geom.LineString.prototype.clone=function(){for(var t=[],e=0,n=this.points.length;n>e;e++)t.push(this.points[e].clone());return this.factory.createLineString(t)},jsts.geom.LineString.prototype.normalize=function(){var t,e,n,o,i,r;for(r=this.points.length,e=parseInt(r/2),t=0;e>t;t++)if(n=r-1-t,o=this.points[t],i=this.points[n],!o.equals(i))return void(o.compareTo(i)>0&&this.points.reverse())},jsts.geom.LineString.prototype.CLASS_NAME="jsts.geom.LineString"}(),function(){jsts.geom.LinearRing=function(){jsts.geom.LineString.apply(this,arguments)},jsts.geom.LinearRing.prototype=new jsts.geom.LineString,jsts.geom.LinearRing.constructor=jsts.geom.LinearRing,jsts.geom.LinearRing.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE},jsts.geom.LinearRing.prototype.isSimple=function(){return!0},jsts.geom.LinearRing.prototype.getGeometryType=function(){return"LinearRing"},jsts.geom.LinearRing.MINIMUM_VALID_SIZE=4,jsts.geom.LinearRing.prototype.CLASS_NAME="jsts.geom.LinearRing"}(),jsts.index.strtree.Boundable=function(){},jsts.index.strtree.Boundable.prototype.getBounds=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractNode=function(t){this.level=t,this.childBoundables=[]},jsts.index.strtree.AbstractNode.prototype=new jsts.index.strtree.Boundable,jsts.index.strtree.AbstractNode.constructor=jsts.index.strtree.AbstractNode,jsts.index.strtree.AbstractNode.prototype.childBoundables=null,jsts.index.strtree.AbstractNode.prototype.bounds=null,jsts.index.strtree.AbstractNode.prototype.level=null,jsts.index.strtree.AbstractNode.prototype.getChildBoundables=function(){return this.childBoundables},jsts.index.strtree.AbstractNode.prototype.computeBounds=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractNode.prototype.getBounds=function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},jsts.index.strtree.AbstractNode.prototype.getLevel=function(){return this.level},jsts.index.strtree.AbstractNode.prototype.addChildBoundable=function(t){this.childBoundables.push(t)},function(){jsts.noding.Noder=function(){},jsts.noding.Noder.prototype.computeNodes=jsts.abstractFunc,jsts.noding.Noder.prototype.getNodedSubstrings=jsts.abstractFunc}(),function(){var t=jsts.noding.Noder;jsts.noding.SinglePassNoder=function(){},jsts.noding.SinglePassNoder.prototype=new t,jsts.noding.SinglePassNoder.constructor=jsts.noding.SinglePassNoder,jsts.noding.SinglePassNoder.prototype.segInt=null,jsts.noding.SinglePassNoder.prototype.setSegmentIntersector=function(t){this.segInt=t}}(),jsts.index.SpatialIndex=function(){},jsts.index.SpatialIndex.prototype.insert=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.SpatialIndex.prototype.query=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.SpatialIndex.prototype.remove=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree=function(t){void 0!==t&&(this.itemBoundables=[],jsts.util.Assert.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t)},jsts.index.strtree.AbstractSTRtree.IntersectsOp=function(){},jsts.index.strtree.AbstractSTRtree.IntersectsOp.prototype.intersects=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.root=null,jsts.index.strtree.AbstractSTRtree.prototype.built=!1,jsts.index.strtree.AbstractSTRtree.prototype.itemBoundables=null,jsts.index.strtree.AbstractSTRtree.prototype.nodeCapacity=null,jsts.index.strtree.AbstractSTRtree.prototype.build=function(){jsts.util.Assert.isTrue(!this.built),this.root=0===this.itemBoundables.length?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.built=!0},jsts.index.strtree.AbstractSTRtree.prototype.createNode=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables=function(t,e){jsts.util.Assert.isTrue(!(0===t.length));var n=[];n.push(this.createNode(e));for(var o=[],i=0;i<t.length;i++)o.push(t[i]);o.sort(this.getComparator());for(var i=0;i<o.length;i++){var r=o[i];this.lastNode(n).getChildBoundables().length===this.getNodeCapacity()&&n.push(this.createNode(e)),this.lastNode(n).addChildBoundable(r)}return n},jsts.index.strtree.AbstractSTRtree.prototype.lastNode=function(t){return t[t.length-1]},jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles=function(t,e){return t>e?1:e>t?-1:0},jsts.index.strtree.AbstractSTRtree.prototype.createHigherLevels=function(t,e){jsts.util.Assert.isTrue(!(0===t.length));var n=this.createParentBoundables(t,e+1);return 1===n.length?n[0]:this.createHigherLevels(n,e+1)},jsts.index.strtree.AbstractSTRtree.prototype.getRoot=function(){return this.built||this.build(),this.root},jsts.index.strtree.AbstractSTRtree.prototype.getNodeCapacity=function(){return this.nodeCapacity},jsts.index.strtree.AbstractSTRtree.prototype.size=function(){return 1===arguments.length?this.size2(arguments[0]):(this.built||this.build(),0===this.itemBoundables.length?0:this.size2(root))},jsts.index.strtree.AbstractSTRtree.prototype.size2=function(t){for(var e=0,n=t.getChildBoundables(),o=0;o<n.length;o++){var i=n[o];i instanceof jsts.index.strtree.AbstractNode?e+=this.size(i):i instanceof jsts.index.strtree.ItemBoundable&&(e+=1)}return e},jsts.index.strtree.AbstractSTRtree.prototype.depth=function(){return 1===arguments.length?this.depth2(arguments[0]):(this.built||this.build(),0===this.itemBoundables.length?0:this.depth2(root))},jsts.index.strtree.AbstractSTRtree.prototype.depth2=function(){for(var t=0,e=node.getChildBoundables(),n=0;n<e.length;n++){var o=e[n];if(o instanceof jsts.index.strtree.AbstractNode){var i=this.depth(o);i>t&&(t=i)}}return t+1},jsts.index.strtree.AbstractSTRtree.prototype.insert=function(t,e){jsts.util.Assert.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.push(new jsts.index.strtree.ItemBoundable(t,e))},jsts.index.strtree.AbstractSTRtree.prototype.query=function(t){arguments.length>1&&this.query2.apply(this,arguments),this.built||this.build();var e=[];return 0===this.itemBoundables.length?(jsts.util.Assert.isTrue(null===this.root.getBounds()),e):(this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query3(t,this.root,e),e)},jsts.index.strtree.AbstractSTRtree.prototype.query2=function(t,e){arguments.length>2&&this.query3.apply(this,arguments),this.built||this.build(),0===this.itemBoundables.length&&jsts.util.Assert.isTrue(null===this.root.getBounds()),this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query4(t,this.root,e)},jsts.index.strtree.AbstractSTRtree.prototype.query3=function(t,e,n){arguments[2]instanceof Array||this.query4.apply(this,arguments);for(var o=e.getChildBoundables(),i=0;i<o.length;i++){var r=o[i];this.getIntersectsOp().intersects(r.getBounds(),t)&&(r instanceof jsts.index.strtree.AbstractNode?this.query3(t,r,n):r instanceof jsts.index.strtree.ItemBoundable?n.push(r.getItem()):jsts.util.Assert.shouldNeverReachHere())}},jsts.index.strtree.AbstractSTRtree.prototype.query4=function(t,e,n){for(var o=e.getChildBoundables(),i=0;i<o.length;i++){var r=o[i];
this.getIntersectsOp().intersects(r.getBounds(),t)&&(r instanceof jsts.index.strtree.AbstractNode?this.query4(t,r,n):r instanceof jsts.index.strtree.ItemBoundable?n.visitItem(r.getItem()):jsts.util.Assert.shouldNeverReachHere())}},jsts.index.strtree.AbstractSTRtree.prototype.getIntersectsOp=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.itemsTree=function(){if(1===arguments.length)return this.itemsTree2.apply(this,arguments);this.built||this.build();var t=this.itemsTree2(this.root);return null===t?[]:t},jsts.index.strtree.AbstractSTRtree.prototype.itemsTree2=function(t){for(var e=[],n=t.getChildBoundables(),o=0;o<n.length;o++){var i=n[o];if(i instanceof jsts.index.strtree.AbstractNode){var r=this.itemsTree(i);null!=r&&e.push(r)}else i instanceof jsts.index.strtree.ItemBoundable?e.push(i.getItem()):jsts.util.Assert.shouldNeverReachHere()}return e.length<=0?null:e},jsts.index.strtree.AbstractSTRtree.prototype.remove=function(t,e){return this.built||this.build(),0===this.itemBoundables.length&&jsts.util.Assert.isTrue(null==this.root.getBounds()),this.getIntersectsOp().intersects(this.root.getBounds(),t)?this.remove2(t,this.root,e):!1},jsts.index.strtree.AbstractSTRtree.prototype.remove2=function(t,e,n){var o=this.removeItem(e,n);if(o)return!0;for(var i=null,r=e.getChildBoundables(),s=0;s<r.length;s++){var a=r[s];if(this.getIntersectsOp().intersects(a.getBounds(),t)&&a instanceof jsts.index.strtree.AbstractNode&&(o=this.remove(t,a,n))){i=a;break}}return null!=i&&0===i.getChildBoundables().length&&r.splice(r.indexOf(i),1),o},jsts.index.strtree.AbstractSTRtree.prototype.removeItem=function(t,e){for(var n=null,o=t.getChildBoundables(),i=0;i<o.length;i++){var r=o[i];r instanceof jsts.index.strtree.ItemBoundable&&r.getItem()===e&&(n=r)}return null!==n?(o.splice(o.indexOf(n),1),!0):!1},jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel=function(t){if(arguments.length>1)return void this.boundablesAtLevel2.apply(this,arguments);var e=[];return this.boundablesAtLevel2(t,this.root,e),e},jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel2=function(t,e,n){if(jsts.util.Assert.isTrue(t>-2),e.getLevel()===t)return void n.add(e);for(var o=node.getChildBoundables(),i=0;i<o.length;i++){var r=o[i];r instanceof jsts.index.strtree.AbstractNode?this.boundablesAtLevel(t,r,n):(jsts.util.Assert.isTrue(r instanceof jsts.index.strtree.ItemBoundable),-1===t&&n.add(r))}},jsts.index.strtree.AbstractSTRtree.prototype.getComparator=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.STRtree=function(t){t=t||jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY,jsts.index.strtree.AbstractSTRtree.call(this,t)},jsts.index.strtree.STRtree.prototype=new jsts.index.strtree.AbstractSTRtree,jsts.index.strtree.STRtree.constructor=jsts.index.strtree.STRtree,jsts.index.strtree.STRtree.prototype.xComparator=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreX(t.getBounds()),jsts.index.strtree.STRtree.prototype.centreX(e.getBounds()))},jsts.index.strtree.STRtree.prototype.yComparator=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreY(t.getBounds()),jsts.index.strtree.STRtree.prototype.centreY(e.getBounds()))},jsts.index.strtree.STRtree.prototype.centreX=function(t){return jsts.index.strtree.STRtree.prototype.avg(t.getMinX(),t.getMaxX())},jsts.index.strtree.STRtree.prototype.centreY=function(t){return jsts.index.strtree.STRtree.prototype.avg(t.getMinY(),t.getMaxY())},jsts.index.strtree.STRtree.prototype.avg=function(t,e){return(t+e)/2},jsts.index.strtree.STRtree.prototype.intersectsOp={intersects:function(t,e){return t.intersects(e)}},jsts.index.strtree.STRtree.prototype.createParentBoundables=function(t,e){jsts.util.Assert.isTrue(!(0===t.length));for(var n=Math.ceil(t.length/this.getNodeCapacity()),o=[],i=0;i<t.length;i++)o.push(t[i]);o.sort(this.xComparator);var r=this.verticalSlices(o,Math.ceil(Math.sqrt(n)));return this.createParentBoundablesFromVerticalSlices(r,e)},jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlices=function(t,e){jsts.util.Assert.isTrue(t.length>0);for(var n=[],o=0;o<t.length;o++)n=n.concat(this.createParentBoundablesFromVerticalSlice(t[o],e));return n},jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlice=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables.call(this,t,e)},jsts.index.strtree.STRtree.prototype.verticalSlices=function(t,e){for(var n,o,i=Math.ceil(t.length/e),r=[],s=0,a=0;e>a;a++)for(r[a]=[],n=0;s<t.length&&i>n;)o=t[s++],r[a].push(o),n++;return r},jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY=10,jsts.index.strtree.STRtree.prototype.createNode=function(t){var e=new jsts.index.strtree.AbstractNode(t);return e.computeBounds=function(){for(var t=null,e=this.getChildBoundables(),n=0;n<e.length;n++){var o=e[n];null===t?t=new jsts.geom.Envelope(o.getBounds()):t.expandToInclude(o.getBounds())}return t},e},jsts.index.strtree.STRtree.prototype.getIntersectsOp=function(){return this.intersectsOp},jsts.index.strtree.STRtree.prototype.insert=function(t,e){t.isNull()||jsts.index.strtree.AbstractSTRtree.prototype.insert.call(this,t,e)},jsts.index.strtree.STRtree.prototype.query=function(){return jsts.index.strtree.AbstractSTRtree.prototype.query.apply(this,arguments)},jsts.index.strtree.STRtree.prototype.remove=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.remove.call(this,t,e)},jsts.index.strtree.STRtree.prototype.size=function(){return jsts.index.strtree.AbstractSTRtree.prototype.size.call(this)},jsts.index.strtree.STRtree.prototype.depth=function(){return jsts.index.strtree.AbstractSTRtree.prototype.depth.call(this)},jsts.index.strtree.STRtree.prototype.getComparator=function(){return this.yComparator},jsts.index.strtree.STRtree.prototype.nearestNeighbour=function(t){var e=new jsts.index.strtree.BoundablePair(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour4(e)},jsts.index.strtree.STRtree.prototype.nearestNeighbour2=function(t,e,n){var o=new jsts.index.strtree.ItemBoundable(t,e),i=new jsts.index.strtree.BoundablePair(this.getRoot(),o,n);return this.nearestNeighbour4(i)[0]},jsts.index.strtree.STRtree.prototype.nearestNeighbour3=function(t,e){var n=new jsts.index.strtree.BoundablePair(this.getRoot(),t.getRoot(),e);return this.nearestNeighbour4(n)},jsts.index.strtree.STRtree.prototype.nearestNeighbour4=function(t){return this.nearestNeighbour5(t,Double.POSITIVE_INFINITY)},jsts.index.strtree.STRtree.prototype.nearestNeighbour5=function(t,e){var n=e,o=null,i=[];for(i.push(t);!i.isEmpty()&&n>0;){var r=i.pop(),s=r.getDistance();if(s>=n)break;r.isLeaves()?(n=s,o=r):r.expandToQueue(i,n)}return[o.getBoundable(0).getItem(),o.getBoundable(1).getItem()]},jsts.noding.SegmentString=function(){},jsts.noding.SegmentString.prototype.getData=jsts.abstractFunc,jsts.noding.SegmentString.prototype.setData=jsts.abstractFunc,jsts.noding.SegmentString.prototype.size=jsts.abstractFunc,jsts.noding.SegmentString.prototype.getCoordinate=jsts.abstractFunc,jsts.noding.SegmentString.prototype.getCoordinates=jsts.abstractFunc,jsts.noding.SegmentString.prototype.isClosed=jsts.abstractFunc,jsts.noding.NodableSegmentString=function(){},jsts.noding.NodableSegmentString.prototype=new jsts.noding.SegmentString,jsts.noding.NodableSegmentString.prototype.addIntersection=jsts.abstractFunc,jsts.noding.NodedSegmentString=function(t,e){this.nodeList=new jsts.noding.SegmentNodeList(this),this.pts=t,this.data=e},jsts.noding.NodedSegmentString.prototype=new jsts.noding.NodableSegmentString,jsts.noding.NodedSegmentString.constructor=jsts.noding.NodedSegmentString,jsts.noding.NodedSegmentString.getNodedSubstrings=function(t){if(2===arguments.length)return void jsts.noding.NodedSegmentString.getNodedSubstrings2.apply(this,arguments);var e=new javascript.util.ArrayList;return jsts.noding.NodedSegmentString.getNodedSubstrings2(t,e),e},jsts.noding.NodedSegmentString.getNodedSubstrings2=function(t,e){for(var n=t.iterator();n.hasNext();){var o=n.next();o.getNodeList().addSplitEdges(e)}},jsts.noding.NodedSegmentString.prototype.nodeList=null,jsts.noding.NodedSegmentString.prototype.pts=null,jsts.noding.NodedSegmentString.prototype.data=null,jsts.noding.NodedSegmentString.prototype.getData=function(){return this.data},jsts.noding.NodedSegmentString.prototype.setData=function(t){this.data=t},jsts.noding.NodedSegmentString.prototype.getNodeList=function(){return this.nodeList},jsts.noding.NodedSegmentString.prototype.size=function(){return this.pts.length},jsts.noding.NodedSegmentString.prototype.getCoordinate=function(t){return this.pts[t]},jsts.noding.NodedSegmentString.prototype.getCoordinates=function(){return this.pts},jsts.noding.NodedSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.noding.NodedSegmentString.prototype.getSegmentOctant=function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},jsts.noding.NodedSegmentString.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:jsts.noding.Octant.octant(t,e)},jsts.noding.NodedSegmentString.prototype.addIntersections=function(t,e,n){for(var o=0;o<t.getIntersectionNum();o++)this.addIntersection(t,e,n,o)},jsts.noding.NodedSegmentString.prototype.addIntersection=function(t,e,n,o){if(t instanceof jsts.geom.Coordinate)return void this.addIntersection2.apply(this,arguments);var i=new jsts.geom.Coordinate(t.getIntersection(o));this.addIntersection2(i,e)},jsts.noding.NodedSegmentString.prototype.addIntersection2=function(t,e){this.addIntersectionNode(t,e)},jsts.noding.NodedSegmentString.prototype.addIntersectionNode=function(t,e){var n=e,o=n+1;if(o<this.pts.length){var i=this.pts[o];t.equals2D(i)&&(n=o)}var r=this.nodeList.add(t,n);return r},jsts.noding.NodedSegmentString.prototype.toString=function(){var t=new jsts.geom.GeometryFactory;return(new jsts.io.WKTWriter).write(t.createLineString(this.pts))},jsts.index.chain.MonotoneChainBuilder=function(){},jsts.index.chain.MonotoneChainBuilder.toIntArray=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e},jsts.index.chain.MonotoneChainBuilder.getChains=function(t){return 2===arguments.length?jsts.index.chain.MonotoneChainBuilder.getChains2.apply(this,arguments):jsts.index.chain.MonotoneChainBuilder.getChains2(t,null)},jsts.index.chain.MonotoneChainBuilder.getChains2=function(t,e){for(var n=[],o=jsts.index.chain.MonotoneChainBuilder.getChainStartIndices(t),i=0;i<o.length-1;i++){var r=new jsts.index.chain.MonotoneChain(t,o[i],o[i+1],e);n.push(r)}return n},jsts.index.chain.MonotoneChainBuilder.getChainStartIndices=function(t){var e=0,n=[];n.push(e);do{var o=jsts.index.chain.MonotoneChainBuilder.findChainEnd(t,e);n.push(o),e=o}while(e<t.length-1);var i=jsts.index.chain.MonotoneChainBuilder.toIntArray(n);return i},jsts.index.chain.MonotoneChainBuilder.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var o=jsts.geomgraph.Quadrant.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i])){var r=jsts.geomgraph.Quadrant.quadrant(t[i-1],t[i]);if(r!==o)break}i++}return i-1},jsts.geom.LineSegment=function(t,e){return void 0===t?(this.p0=new jsts.geom.Coordinate,void(this.p1=new jsts.geom.Coordinate)):(this.p0=t,void(this.p1=e))},jsts.geom.LineSegment.prototype.p0=null,jsts.geom.LineSegment.prototype.p1=null,jsts.geom.LineSegment.prototype.getLength=function(){return this.p0.distance(this.p1)},jsts.geom.LineSegment.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},jsts.geom.LineSegment.prototype.isVertical=function(){return this.p0.x===this.p1.x},jsts.geom.LineSegment.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},jsts.geom.LineSegment.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,o=e*e+n*n,i=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/o;return i},jsts.geom.LineSegment.prototype.closestPoint=function(t){var e=this.projectionFactor(t);if(e>0&&1>e)return this.project(t);var n=this.p0.distance(t),o=this.p1.distance(t);return o>n?this.p0:this.p1},jsts.geom.LineSegment.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n,o=[],i=Number.MAX_VALUE,r=this.closestPoint(t.p0);i=r.distance(t.p0),o[0]=r,o[1]=t.p0;var s=this.closestPoint(t.p1);n=s.distance(t.p1),i>n&&(i=n,o[0]=s,o[1]=t.p1);var a=t.closestPoint(this.p0);n=a.distance(this.p0),i>n&&(i=n,o[0]=this.p0,o[1]=a);var l=t.closestPoint(this.p1);return n=l.distance(this.p1),i>n&&(i=n,o[0]=this.p1,o[1]=l),o},jsts.geom.LineSegment.prototype.intersection=function(t){var e=new jsts.algorithm.RobustLineIntersector;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},jsts.geom.LineSegment.prototype.project=function(t){if(t.equals(this.p0)||t.equals(this.p1))return new jsts.geom.Coordinate(t);var e=this.projectionFactor(t),n=new jsts.geom.Coordinate;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n},jsts.geom.LineSegment.prototype.setCoordinates=function(t){return t instanceof jsts.geom.Coordinate?void this.setCoordinates2.apply(this,arguments):void this.setCoordinates2(t.p0,t.p1)},jsts.geom.LineSegment.prototype.setCoordinates2=function(t,e){this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y},jsts.geom.LineSegment.prototype.distance=function(t){return jsts.algorithm.CGAlgorithms.distancePointLine(t,this.p0,this.p1)},jsts.index.chain.MonotoneChainOverlapAction=function(){this.tempEnv1=new jsts.geom.Envelope,this.tempEnv2=new jsts.geom.Envelope,this.overlapSeg1=new jsts.geom.LineSegment,this.overlapSeg2=new jsts.geom.LineSegment},jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv1=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv2=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg1=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg2=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap=function(t,e,n,o){this.mc1.getLineSegment(e,this.overlapSeg1),this.mc2.getLineSegment(o,this.overlapSeg2),this.overlap2(this.overlapSeg1,this.overlapSeg2)},jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap2=function(){},function(){var t=jsts.index.chain.MonotoneChainOverlapAction,e=jsts.noding.SinglePassNoder,n=jsts.index.strtree.STRtree,o=jsts.noding.NodedSegmentString,i=jsts.index.chain.MonotoneChainBuilder,r=function(t){this.si=t};r.prototype=new t,r.constructor=r,r.prototype.si=null,r.prototype.overlap=function(t,e,n,o){var i=t.getContext(),r=n.getContext();this.si.processIntersections(i,e,r,o)},jsts.noding.MCIndexNoder=function(){this.monoChains=[],this.index=new n},jsts.noding.MCIndexNoder.prototype=new e,jsts.noding.MCIndexNoder.constructor=jsts.noding.MCIndexNoder,jsts.noding.MCIndexNoder.prototype.monoChains=null,jsts.noding.MCIndexNoder.prototype.index=null,jsts.noding.MCIndexNoder.prototype.idCounter=0,jsts.noding.MCIndexNoder.prototype.nodedSegStrings=null,jsts.noding.MCIndexNoder.prototype.nOverlaps=0,jsts.noding.MCIndexNoder.prototype.getMonotoneChains=function(){return this.monoChains},jsts.noding.MCIndexNoder.prototype.getIndex=function(){return this.index},jsts.noding.MCIndexNoder.prototype.getNodedSubstrings=function(){return o.getNodedSubstrings(this.nodedSegStrings)},jsts.noding.MCIndexNoder.prototype.computeNodes=function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},jsts.noding.MCIndexNoder.prototype.intersectChains=function(){for(var t=new r(this.segInt),e=0;e<this.monoChains.length;e++)for(var n=this.monoChains[e],o=this.index.query(n.getEnvelope()),i=0;i<o.length;i++){var s=o[i];if(s.getId()>n.getId()&&(n.computeOverlaps(s,t),this.nOverlaps++),this.segInt.isDone())return}},jsts.noding.MCIndexNoder.prototype.add=function(t){for(var e=i.getChains(t.getCoordinates(),t),n=0;n<e.length;n++){var o=e[n];o.setId(this.idCounter++),this.index.insert(o.getEnvelope(),o),this.monoChains.push(o)}}}(),jsts.simplify.LineSegmentIndex=function(){this.index=new jsts.index.quadtree.Quadtree},jsts.simplify.LineSegmentIndex.prototype.index=null,jsts.simplify.LineSegmentIndex.prototype.add=function(t){if(t instanceof jsts.geom.LineSegment)return void this.add2(t);for(var e=t.getSegments(),n=0;n<e.length;n++){var o=e[n];this.add2(o)}},jsts.simplify.LineSegmentIndex.prototype.add2=function(t){this.index.insert(new jsts.geom.Envelope(t.p0,t.p1),t)},jsts.simplify.LineSegmentIndex.prototype.remove=function(t){this.index.remove(new jsts.geom.Envelope(t.p0,t.p1),t)},jsts.simplify.LineSegmentIndex.prototype.query=function(t){var e=new jsts.geom.Envelope(t.p0,t.p1),n=new jsts.simplify.LineSegmentIndex.LineSegmentVisitor(t);this.index.query(e,n);var o=n.getItems();return o},jsts.simplify.LineSegmentIndex.LineSegmentVisitor=function(t){this.items=[],this.querySeg=t},jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype=new jsts.index.ItemVisitor,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.querySeg=null,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.items=null,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.visitItem=function(t){var e=t;jsts.geom.Envelope.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.push(t)},jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.getItems=function(){return this.items},jsts.geomgraph.EdgeEndStar=function(){this.edgeMap=new javascript.util.TreeMap,this.edgeList=null,this.ptInAreaLocation=[jsts.geom.Location.NONE,jsts.geom.Location.NONE]},jsts.geomgraph.EdgeEndStar.prototype.edgeMap=null,jsts.geomgraph.EdgeEndStar.prototype.edgeList=null,jsts.geomgraph.EdgeEndStar.prototype.ptInAreaLocation=null,jsts.geomgraph.EdgeEndStar.prototype.insert=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.EdgeEndStar.prototype.insertEdgeEnd=function(t,e){this.edgeMap.put(t,e),this.edgeList=null},jsts.geomgraph.EdgeEndStar.prototype.getCoordinate=function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},jsts.geomgraph.EdgeEndStar.prototype.getDegree=function(){return this.edgeMap.size()},jsts.geomgraph.EdgeEndStar.prototype.iterator=function(){return this.getEdges().iterator()},jsts.geomgraph.EdgeEndStar.prototype.getEdges=function(){return null===this.edgeList&&(this.edgeList=new javascript.util.ArrayList(this.edgeMap.values())),this.edgeList},jsts.geomgraph.EdgeEndStar.prototype.getNextCW=function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return 0===e&&(n=this.edgeList.length-1),this.edgeList[n]},jsts.geomgraph.EdgeEndStar.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var o=n.next(),i=o.getLabel(),r=0;2>r;r++)i.isLine(r)&&i.getLocation(r)===jsts.geom.Location.BOUNDARY&&(e[r]=!0);for(var n=this.iterator();n.hasNext();)for(var o=n.next(),i=o.getLabel(),r=0;2>r;r++)if(i.isAnyNull(r)){var s=jsts.geom.Location.NONE;if(e[r])s=jsts.geom.Location.EXTERIOR;else{var a=o.getCoordinate();s=this.getLocation(r,a,t)}i.setAllLocationsIfNull(r,s)}},jsts.geomgraph.EdgeEndStar.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},jsts.geomgraph.EdgeEndStar.prototype.getLocation=function(t,e,n){return this.ptInAreaLocation[t]===jsts.geom.Location.NONE&&(this.ptInAreaLocation[t]=jsts.algorithm.locate.SimplePointInAreaLocator.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},jsts.geomgraph.EdgeEndStar.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},jsts.geomgraph.EdgeEndStar.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,o=e.get(n).getLabel(),i=o.getLocation(t,jsts.geomgraph.Position.LEFT);jsts.util.Assert.isTrue(i!=jsts.geom.Location.NONE,"Found unlabelled area edge");for(var r=i,s=this.iterator();s.hasNext();){var a=s.next(),l=a.getLabel();jsts.util.Assert.isTrue(l.isArea(t),"Found non-area edge");var p=l.getLocation(t,jsts.geomgraph.Position.LEFT),u=l.getLocation(t,jsts.geomgraph.Position.RIGHT);if(p===u)return!1;if(u!==r)return!1;r=p}return!0},jsts.geomgraph.EdgeEndStar.prototype.propagateSideLabels=function(t){for(var e=jsts.geom.Location.NONE,n=this.iterator();n.hasNext();){var o=n.next(),i=o.getLabel();i.isArea(t)&&i.getLocation(t,jsts.geomgraph.Position.LEFT)!==jsts.geom.Location.NONE&&(e=i.getLocation(t,jsts.geomgraph.Position.LEFT))}if(e!==jsts.geom.Location.NONE)for(var r=e,n=this.iterator();n.hasNext();){var o=n.next(),i=o.getLabel();if(i.getLocation(t,jsts.geomgraph.Position.ON)===jsts.geom.Location.NONE&&i.setLocation(t,jsts.geomgraph.Position.ON,r),i.isArea(t)){var s=i.getLocation(t,jsts.geomgraph.Position.LEFT),a=i.getLocation(t,jsts.geomgraph.Position.RIGHT);if(a!==jsts.geom.Location.NONE){if(a!==r)throw new jsts.error.TopologyError("side location conflict",o.getCoordinate());s===jsts.geom.Location.NONE&&jsts.util.Assert.shouldNeverReachHere("found single null side (at "+o.getCoordinate()+")"),r=s}else jsts.util.Assert.isTrue(i.getLocation(t,jsts.geomgraph.Position.LEFT)===jsts.geom.Location.NONE,"found single null side"),i.setLocation(t,jsts.geomgraph.Position.RIGHT,r),i.setLocation(t,jsts.geomgraph.Position.LEFT,r)}}},jsts.geomgraph.EdgeEndStar.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var n=this.edgeList.get(e);if(n===t)return e}return-1},jsts.operation.relate.EdgeEndBundleStar=function(){jsts.geomgraph.EdgeEndStar.apply(this,arguments)},jsts.operation.relate.EdgeEndBundleStar.prototype=new jsts.geomgraph.EdgeEndStar,jsts.operation.relate.EdgeEndBundleStar.prototype.insert=function(t){var e=this.edgeMap.get(t);null===e?(e=new jsts.operation.relate.EdgeEndBundle(t),this.insertEdgeEnd(t,e)):e.insert(t)},jsts.operation.relate.EdgeEndBundleStar.prototype.updateIM=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}},function(){jsts.geom.Polygon=function(t,e,n){this.shell=t||n.createLinearRing(null),this.holes=e||[],this.factory=n},jsts.geom.Polygon.prototype=new jsts.geom.Geometry,jsts.geom.Polygon.constructor=jsts.geom.Polygon,jsts.geom.Polygon.prototype.getCoordinate=function(){return this.shell.getCoordinate()},jsts.geom.Polygon.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=[],e=-1,n=this.shell.getCoordinates(),o=0;o<n.length;o++)e++,t[e]=n[o];for(var i=0;i<this.holes.length;i++)for(var r=this.holes[i].getCoordinates(),s=0;s<r.length;s++)e++,t[e]=r[s];return t},jsts.geom.Polygon.prototype.isEmpty=function(){return this.shell.isEmpty()},jsts.geom.Polygon.prototype.getExteriorRing=function(){return this.shell},jsts.geom.Polygon.prototype.getInteriorRingN=function(t){return this.holes[t]},jsts.geom.Polygon.prototype.getNumInteriorRing=function(){return this.holes.length},jsts.geom.Polygon.prototype.getArea=function(){var t=0;t+=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.holes[e].getCoordinateSequence()));return t},jsts.geom.Polygon.prototype.getLength=function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},jsts.geom.Polygon.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString(null);var t=[];t[0]=this.shell.clone();for(var e=0,n=this.holes.length;n>e;e++)t[e+1]=this.holes[e].clone();return t.length<=1?t[0]:this.getFactory().createMultiLineString(t)},jsts.geom.Polygon.prototype.computeEnvelopeInternal=function(){return this.shell.getEnvelopeInternal()},jsts.geom.Polygon.prototype.getDimension=function(){return 2},jsts.geom.Polygon.prototype.getBoundaryDimension=function(){return 1},jsts.geom.Polygon.prototype.equalsExact=function(t,e){if(!this.isEquivalentClass(t))return!1;if(this.isEmpty()&&t.isEmpty())return!0;if(this.isEmpty()!==t.isEmpty())return!1;if(!this.shell.equalsExact(t.shell,e))return!1;if(this.holes.length!==t.holes.length)return!1;if(this.holes.length!==t.holes.length)return!1;for(var n=0;n<this.holes.length;n++)if(!this.holes[n].equalsExact(t.holes[n],e))return!1;return!0},jsts.geom.Polygon.prototype.compareToSameClass=function(t){return this.shell.compareToSameClass(t.shell)},jsts.geom.Polygon.prototype.apply=function(t){if(t instanceof jsts.geom.GeometryComponentFilter){t.filter(this),this.shell.apply(t);for(var e=0,n=this.holes.length;n>e;e++)this.holes[e].apply(t)}else if(t instanceof jsts.geom.GeometryFilter)t.filter(this);else if(t instanceof jsts.geom.CoordinateFilter){this.shell.apply(t);for(var e=0,n=this.holes.length;n>e;e++)this.holes[e].apply(t)}else t instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.Polygon.prototype.apply2=function(t){if(this.shell.apply(t),!t.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(t),!t.isDone());e++);t.isGeometryChanged()},jsts.geom.Polygon.prototype.clone=function(){for(var t=[],e=0,n=this.holes.length;n>e;e++)t.push(this.holes[e].clone());return this.factory.createPolygon(this.shell.clone(),t)},jsts.geom.Polygon.prototype.normalize=function(){this.normalize2(this.shell,!0);for(var t=0,e=this.holes.length;e>t;t++)this.normalize2(this.holes[t],!1);this.holes.sort()},jsts.geom.Polygon.prototype.normalize2=function(t,e){if(!t.isEmpty()){var n=t.points.slice(0,t.points.length-1),o=jsts.geom.CoordinateArrays.minCoordinate(t.points);jsts.geom.CoordinateArrays.scroll(n,o),t.points=n.concat(),t.points[n.length]=n[0],jsts.algorithm.CGAlgorithms.isCCW(t.points)===e&&t.points.reverse()}},jsts.geom.Polygon.prototype.CLASS_NAME="jsts.geom.Polygon"}(),jsts.algorithm.distance.DistanceToPoint=function(){},jsts.algorithm.distance.DistanceToPoint.computeDistance=function(t,e,n){if(t instanceof jsts.geom.LineString)jsts.algorithm.distance.DistanceToPoint.computeDistance2(t,e,n);else if(t instanceof jsts.geom.Polygon)jsts.algorithm.distance.DistanceToPoint.computeDistance4(t,e,n);else if(t instanceof jsts.geom.GeometryCollection)for(var o=t,i=0;i<o.getNumGeometries();i++){var r=o.getGeometryN(i);jsts.algorithm.distance.DistanceToPoint.computeDistance(r,e,n)}else n.setMinimum(t.getCoordinate(),e)},jsts.algorithm.distance.DistanceToPoint.computeDistance2=function(t,e,n){for(var o=new jsts.geom.LineSegment,i=t.getCoordinates(),r=0;r<i.length-1;r++){o.setCoordinates(i[r],i[r+1]);var s=o.closestPoint(e);n.setMinimum(s,e)}},jsts.algorithm.distance.DistanceToPoint.computeDistance3=function(t,e,n){var o=t.closestPoint(e);n.setMinimum(o,e)},jsts.algorithm.distance.DistanceToPoint.computeDistance4=function(t,e,n){jsts.algorithm.distance.DistanceToPoint.computeDistance2(t.getExteriorRing(),e,n);for(var o=0;o<t.getNumInteriorRing();o++)jsts.algorithm.distance.DistanceToPoint.computeDistance2(t.getInteriorRingN(o),e,n)},jsts.index.strtree.ItemBoundable=function(t,e){this.bounds=t,this.item=e},jsts.index.strtree.ItemBoundable.prototype=new jsts.index.strtree.Boundable,jsts.index.strtree.ItemBoundable.constructor=jsts.index.strtree.ItemBoundable,jsts.index.strtree.ItemBoundable.prototype.bounds=null,jsts.index.strtree.ItemBoundable.prototype.item=null,jsts.index.strtree.ItemBoundable.prototype.getBounds=function(){return this.bounds},jsts.index.strtree.ItemBoundable.prototype.getItem=function(){return this.item},function(){var t=javascript.util.ArrayList,e=javascript.util.TreeMap;jsts.geomgraph.EdgeList=function(){this.edges=new t,this.ocaMap=new e},jsts.geomgraph.EdgeList.prototype.edges=null,jsts.geomgraph.EdgeList.prototype.ocaMap=null,jsts.geomgraph.EdgeList.prototype.add=function(t){this.edges.add(t);var e=new jsts.noding.OrientedCoordinateArray(t.getCoordinates());this.ocaMap.put(e,t)},jsts.geomgraph.EdgeList.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeList.prototype.findEqualEdge=function(t){var e=new jsts.noding.OrientedCoordinateArray(t.getCoordinates()),n=this.ocaMap.get(e);return n},jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeList.prototype.iterator=function(){return this.edges.iterator()},jsts.geomgraph.EdgeList.prototype.get=function(t){return this.edges.get(t)},jsts.geomgraph.EdgeList.prototype.findEdgeIndex=function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1}}(),jsts.operation.IsSimpleOp=function(t){this.geom=t},jsts.operation.IsSimpleOp.prototype.geom=null,jsts.operation.IsSimpleOp.prototype.isClosedEndpointsInInterior=!0,jsts.operation.IsSimpleOp.prototype.nonSimpleLocation=null,jsts.operation.IsSimpleOp.prototype.IsSimpleOp=function(t){this.geom=t},jsts.operation.IsSimpleOp.prototype.isSimple=function(){return this.nonSimpleLocation=null,this.geom instanceof jsts.geom.LineString?this.isSimpleLinearGeometry(this.geom):this.geom instanceof jsts.geom.MultiLineString?this.isSimpleLinearGeometry(this.geom):this.geom instanceof jsts.geom.MultiPoint?this.isSimpleMultiPoint(this.geom):!0},jsts.operation.IsSimpleOp.prototype.isSimpleMultiPoint=function(t){if(t.isEmpty())return!0;for(var e=[],n=0;n<t.getNumGeometries();n++){for(var o=t.getGeometryN(n),i=o.getCoordinate(),r=0;r<e.length;r++){var s=e[r];if(i.equals2D(s))return this.nonSimpleLocation=i,!1}e.push(i)}return!0},jsts.operation.IsSimpleOp.prototype.isSimpleLinearGeometry=function(t){if(t.isEmpty())return!0;var e=new jsts.geomgraph.GeometryGraph(0,t),n=new jsts.algorithm.RobustLineIntersector,o=e.computeSelfNodes(n,!0);return o.hasIntersection()?o.hasProperIntersection()?(this.nonSimpleLocation=o.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(e)?!1:this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(e)?!1:!0:!0},jsts.operation.IsSimpleOp.prototype.hasNonEndpointIntersection=function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),o=n.getMaximumSegmentIndex(),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var r=i.next();if(!r.isEndPoint(o))return this.nonSimpleLocation=r.getCoordinate(),!0}return!1},jsts.operation.IsSimpleOp.prototype.hasClosedEndpointIntersection=function(t){for(var e=new javascript.util.TreeMap,n=t.getEdgeIterator();n.hasNext();){var o=n.next(),i=(o.getMaximumSegmentIndex(),o.isClosed()),r=o.getCoordinate(0);this.addEndpoint(e,r,i);var s=o.getCoordinate(o.getNumPoints()-1);this.addEndpoint(e,s,i)}for(var n=e.values().iterator();n.hasNext();){var a=n.next();if(a.isClosed&&2!=a.degree)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},jsts.operation.IsSimpleOp.EndpointInfo=function(t){this.pt=t,this.isClosed=!1,this.degree=0},jsts.operation.IsSimpleOp.EndpointInfo.prototype.pt=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.isClosed=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.degree=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.getCoordinate=function(){return this.pt},jsts.operation.IsSimpleOp.EndpointInfo.prototype.addEndpoint=function(t){this.degree++,this.isClosed=this.isClosed||t},jsts.operation.IsSimpleOp.prototype.addEndpoint=function(t,e,n){var o=t.get(e);null===o&&(o=new jsts.operation.IsSimpleOp.EndpointInfo(e),t.put(e,o)),o.addEndpoint(n)},function(){var t=function(){this.snapTolerance=0,this.seg=new jsts.geom.LineSegment,this.allowSnappingToSourceVertices=!1,this.isClosed=!1,this.srcPts=[],arguments[0]instanceof jsts.geom.LineString?this.initFromLine.apply(this,arguments):this.initFromPoints.apply(this,arguments)};t.prototype.initFromLine=function(t,e){this.initFromPoints(t.getCoordinates(),e)},t.prototype.initFromPoints=function(t,e){this.srcPts=t,this.isClosed=this.calcIsClosed(t),this.snapTolerance=e},t.prototype.setAllowSnappingToSourceVertices=function(t){this.allowSnappingToSourceVertices=t},t.prototype.calcIsClosed=function(t){return t.length<=1?!1:t[0].equals(t[t.length-1])},t.prototype.snapTo=function(t){var e=new jsts.geom.CoordinateList(this.srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},t.prototype.snapVertices=function(t,e){var n,o,i=this.isClosed?t.size()-1:t.size(),r=0;for(r;i>r;r++)n=t.get(r),o=this.findSnapForVertex(n,e),null!==o&&(t.set(r,new jsts.geom.Coordinate(o)),0===r&&this.isClosed&&t.set(t.size()-1,new jsts.geom.Coordinate(o)))
},t.prototype.findSnapForVertex=function(t,e){var n=0,o=e.length;for(n=0;o>n;n++){if(t.equals(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},t.prototype.snapSegments=function(t,e){if(0!==e.length){var n,o,i,r=e.length;for(e.length>1&&e[0].equals2D(e[e.length-1])&&(r=e.length-1),n=0;r>n;n++)o=e[n],i=this.findSegmentIndexToSnap(o,t),i>=0&&t.add(i+1,new jsts.geom.Coordinate(o),!1)}},t.prototype.findSegmentIndexToSnap=function(t,e){var n,o=Number.MAX_VALUE,i=-1,r=0;for(r;r<e.size()-1;r++){if(this.seg.p0=e.get(r),this.seg.p1=e.get(r+1),this.seg.p0.equals(t)||this.seg.p1.equals(t)){if(this.allowSnappingToSourceVertices)continue;return-1}n=this.seg.distance(t),n<this.snapTolerance&&o>n&&(o=n,i=r)}return i},jsts.operation.overlay.snap.LineStringSnapper=t}(),function(){var t=javascript.util.ArrayList,e=jsts.geom.GeometryComponentFilter,n=jsts.geom.LineString,o=jsts.operation.polygonize.EdgeRing,i=jsts.operation.polygonize.PolygonizeGraph,r=function(){var o=this,i=function(){};i.prototype=new e,i.prototype.filter=function(t){t instanceof n&&o.add(t)},this.lineStringAdder=new i,this.dangles=new t,this.cutEdges=new t,this.invalidRingLines=new t};r.prototype.lineStringAdder=null,r.prototype.graph=null,r.prototype.dangles=null,r.prototype.cutEdges=null,r.prototype.invalidRingLines=null,r.prototype.holeList=null,r.prototype.shellList=null,r.prototype.polyList=null,r.prototype.add=function(t){if(t instanceof jsts.geom.LineString)return this.add3(t);if(t instanceof jsts.geom.Geometry)return this.add2(t);for(var e=t.iterator();e.hasNext();){var n=e.next();this.add2(n)}},r.prototype.add2=function(t){t.apply(this.lineStringAdder)},r.prototype.add3=function(t){null==this.graph&&(this.graph=new i(t.getFactory())),this.graph.addEdge(t)},r.prototype.getPolygons=function(){return this.polygonize(),this.polyList},r.prototype.getDangles=function(){return this.polygonize(),this.dangles},r.prototype.getCutEdges=function(){return this.polygonize(),this.cutEdges},r.prototype.getInvalidRingLines=function(){return this.polygonize(),this.invalidRingLines},r.prototype.polygonize=function(){if(null==this.polyList&&(this.polyList=new t,null!=this.graph)){this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var e=this.graph.getEdgeRings(),n=new t;this.invalidRingLines=new t,this.findValidRings(e,n,this.invalidRingLines),this.findShellsAndHoles(n),r.assignHolesToShells(this.holeList,this.shellList),this.polyList=new t;for(var o=this.shellList.iterator();o.hasNext();){var i=o.next();this.polyList.add(i.getPolygon())}}},r.prototype.findValidRings=function(t,e,n){for(var o=t.iterator();o.hasNext();){var i=o.next();i.isValid()?e.add(i):n.add(i.getLineString())}},r.prototype.findShellsAndHoles=function(e){this.holeList=new t,this.shellList=new t;for(var n=e.iterator();n.hasNext();){var o=n.next();o.isHole()?this.holeList.add(o):this.shellList.add(o)}},r.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var o=n.next();r.assignHoleToShell(o,e)}},r.assignHoleToShell=function(t,e){var n=o.findEdgeRingContaining(t,e);null!=n&&n.addHole(t.getRing())},jsts.operation.polygonize.Polygonizer=r}(),function(){var t=javascript.util.ArrayList,e=function(){};e.prototype.inputGeom=null,e.prototype.factory=null,e.prototype.pruneEmptyGeometry=!0,e.prototype.preserveGeometryCollectionType=!0,e.prototype.preserveCollections=!1,e.prototype.reserveType=!1,e.prototype.getInputGeometry=function(){return this.inputGeom},e.prototype.transform=function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof jsts.geom.Point)return this.transformPoint(t,null);if(t instanceof jsts.geom.MultiPoint)return this.transformMultiPoint(t,null);if(t instanceof jsts.geom.LinearRing)return this.transformLinearRing(t,null);if(t instanceof jsts.geom.LineString)return this.transformLineString(t,null);if(t instanceof jsts.geom.MultiLineString)return this.transformMultiLineString(t,null);if(t instanceof jsts.geom.Polygon)return this.transformPolygon(t,null);if(t instanceof jsts.geom.MultiPolygon)return this.transformMultiPolygon(t,null);if(t instanceof jsts.geom.GeometryCollection)return this.transformGeometryCollection(t,null);throw new jsts.error.IllegalArgumentException("Unknown Geometry subtype: "+t.getClass().getName())},e.prototype.createCoordinateSequence=function(t){return this.factory.getCoordinateSequenceFactory().create(t)},e.prototype.copy=function(t){return t.clone()},e.prototype.transformCoordinates=function(t){return this.copy(t)},e.prototype.transformPoint=function(t){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},e.prototype.transformMultiPoint=function(e){for(var n=new t,o=0;o<e.getNumGeometries();o++){var i=this.transformPoint(e.getGeometryN(o),e);null!=i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)},e.prototype.transformLinearRing=function(t){var e=this.transformCoordinates(t.getCoordinateSequence(),t),n=e.length;return n>0&&4>n&&!this.preserveType?this.factory.createLineString(e):this.factory.createLinearRing(e)},e.prototype.transformLineString=function(t){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},e.prototype.transformMultiLineString=function(e){for(var n=new t,o=0;o<e.getNumGeometries();o++){var i=this.transformLineString(e.getGeometryN(o),e);null!=i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)},e.prototype.transformPolygon=function(e){var n=!0,o=this.transformLinearRing(e.getExteriorRing(),e);null!=o&&o instanceof jsts.geom.LinearRing&&!o.isEmpty()||(n=!1);for(var i=new t,r=0;r<e.getNumInteriorRing();r++){var s=this.transformLinearRing(e.getInteriorRingN(r),e);null==s||s.isEmpty()||(s instanceof jsts.geom.LinearRing||(n=!1),i.add(s))}if(n)return this.factory.createPolygon(o,i.toArray());var a=new t;return null!=o&&a.add(o),a.addAll(i),this.factory.buildGeometry(a)},e.prototype.transformMultiPolygon=function(e){for(var n=new t,o=0;o<e.getNumGeometries();o++){var i=this.transformPolygon(e.getGeometryN(o),e);null!=i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)},e.prototype.transformGeometryCollection=function(e){for(var n=new t,o=0;o<e.getNumGeometries();o++){var i=this.transform(e.getGeometryN(o));null!=i&&(this.pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(GeometryFactory.toGeometryArray(n)):this.factory.buildGeometry(n)},jsts.geom.util.GeometryTransformer=e}(),function(){var t=jsts.operation.overlay.snap.LineStringSnapper,e=jsts.geom.PrecisionModel,n=javascript.util.TreeSet,o=function(t,e,n){this.snapTolerance=t,this.snapPts=e,this.isSelfSnap=n||!1};o.prototype=new jsts.geom.util.GeometryTransformer,o.prototype.snapTolerance=null,o.prototype.snapPts=null,o.prototype.isSelfSnap=!1,o.prototype.transformCoordinates=function(t){var e=t,n=this.snapLine(e,this.snapPts);return n},o.prototype.snapLine=function(e,n){var o=new t(e,this.snapTolerance);return o.setAllowSnappingToSourceVertices(this.isSelfSnap),o.snapTo(n)};var i=function(t){this.srcGeom=t};i.SNAP_PRECISION_FACTOR=1e-9,i.computeOverlaySnapTolerance=function(t){if(2===arguments.length)return i.computeOverlaySnapTolerance2.apply(this,arguments);var n=this.computeSizeBasedSnapTolerance(t),o=t.getPrecisionModel();if(o.getType()==e.FIXED){var r=1/o.getScale()*2/1.415;r>n&&(n=r)}return n},i.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),o=n*i.SNAP_PRECISION_FACTOR;return o},i.computeOverlaySnapTolerance2=function(t,e){return Math.min(this.computeOverlaySnapTolerance(t),this.computeOverlaySnapTolerance(e))},i.snap=function(t,e,n){var o=[],r=new i(t);o[0]=r.snapTo(e,n);var s=new i(e);return o[1]=s.snapTo(o[0],n),o},i.snapToSelf=function(t,e,n){var o=new i(t);return o.snapToSelf(e,n)},i.prototype.srcGeom=null,i.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t),i=new o(e,n);return i.transform(this.srcGeom)},i.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(srcGeom),i=new o(t,n,!0),r=i.transform(srcGeom),s=r;return e&&s instanceof Polygonal&&(s=r.buffer(0)),s},i.prototype.extractTargetCoordinates=function(t){for(var e=new n,o=t.getCoordinates(),i=0;i<o.length;i++)e.add(o[i]);return e.toArray()},i.prototype.computeSnapTolerance=function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},i.prototype.computeMinimumSegmentLength=function(t){for(var e=Number.MAX_VALUE,n=0;n<t.length-1;n++){var o=t[n].distance(t[n+1]);e>o&&(e=o)}return e},jsts.operation.overlay.snap.GeometrySnapper=i}(),jsts.algorithm.PointLocator=function(t){this.boundaryRule=t?t:jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE},jsts.algorithm.PointLocator.prototype.boundaryRule=null,jsts.algorithm.PointLocator.prototype.isIn=null,jsts.algorithm.PointLocator.prototype.numBoundaries=null,jsts.algorithm.PointLocator.prototype.intersects=function(t,e){return this.locate(t,e)!==jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate=function(t,e){return e.isEmpty()?jsts.geom.Location.EXTERIOR:e instanceof jsts.geom.Point?this.locate2(t,e):e instanceof jsts.geom.LineString?this.locate3(t,e):e instanceof jsts.geom.Polygon?this.locate4(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?jsts.geom.Location.BOUNDARY:this.numBoundaries>0||this.isIn?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR)},jsts.algorithm.PointLocator.prototype.computeLocation=function(t,e){if(e instanceof jsts.geom.Point||e instanceof jsts.geom.LineString||e instanceof jsts.geom.Polygon)this.updateLocationInfo(this.locate(t,e));else if(e instanceof jsts.geom.MultiLineString)for(var n=e,o=0;o<n.getNumGeometries();o++){var i=n.getGeometryN(o);this.updateLocationInfo(this.locate(t,i))}else if(e instanceof jsts.geom.MultiPolygon)for(var r=e,o=0;o<r.getNumGeometries();o++){var s=r.getGeometryN(o);this.updateLocationInfo(this.locate(t,s))}else if(e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.GeometryCollection)for(var o=0;o<e.getNumGeometries();o++){var a=e.getGeometryN(o);a!==e&&this.computeLocation(t,a)}},jsts.algorithm.PointLocator.prototype.updateLocationInfo=function(t){t===jsts.geom.Location.INTERIOR&&(this.isIn=!0),t===jsts.geom.Location.BOUNDARY&&this.numBoundaries++},jsts.algorithm.PointLocator.prototype.locate2=function(t,e){var n=e.getCoordinate();return n.equals2D(t)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate3=function(t,e){if(!e.getEnvelopeInternal().intersects(t))return jsts.geom.Location.EXTERIOR;var n=e.getCoordinates();return e.isClosed()||!t.equals(n[0])&&!t.equals(n[n.length-1])?jsts.algorithm.CGAlgorithms.isOnLine(t,n)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR:jsts.geom.Location.BOUNDARY},jsts.algorithm.PointLocator.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?jsts.algorithm.CGAlgorithms.locatePointInRing(t,e.getCoordinates()):jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate4=function(t,e){if(e.isEmpty())return jsts.geom.Location.EXTERIOR;var n=e.getExteriorRing(),o=this.locateInPolygonRing(t,n);if(o===jsts.geom.Location.EXTERIOR)return jsts.geom.Location.EXTERIOR;if(o===jsts.geom.Location.BOUNDARY)return jsts.geom.Location.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,r);if(s===jsts.geom.Location.INTERIOR)return jsts.geom.Location.EXTERIOR;if(s===jsts.geom.Location.BOUNDARY)return jsts.geom.Location.BOUNDARY}return jsts.geom.Location.INTERIOR},function(){var t=jsts.geom.Location,e=javascript.util.ArrayList,n=javascript.util.TreeMap;jsts.geomgraph.NodeMap=function(t){this.nodeMap=new n,this.nodeFact=t},jsts.geomgraph.NodeMap.prototype.nodeMap=null,jsts.geomgraph.NodeMap.prototype.nodeFact=null,jsts.geomgraph.NodeMap.prototype.addNode=function(t){var e,n;if(t instanceof jsts.geom.Coordinate)return n=t,e=this.nodeMap.get(n),null===e&&(e=this.nodeFact.createNode(n),this.nodeMap.put(n,e)),e;if(t instanceof jsts.geomgraph.Node){var o=t;return n=o.getCoordinate(),e=this.nodeMap.get(n),null===e?(this.nodeMap.put(n,o),o):(e.mergeLabel(o),e)}},jsts.geomgraph.NodeMap.prototype.add=function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},jsts.geomgraph.NodeMap.prototype.find=function(t){return this.nodeMap.get(t)},jsts.geomgraph.NodeMap.prototype.values=function(){return this.nodeMap.values()},jsts.geomgraph.NodeMap.prototype.iterator=function(){return this.values().iterator()},jsts.geomgraph.NodeMap.prototype.getBoundaryNodes=function(n){for(var o=new e,i=this.iterator();i.hasNext();){var r=i.next();r.getLabel().getLocation(n)===t.BOUNDARY&&o.add(r)}return o}}(),jsts.geomgraph.NodeFactory=function(){},jsts.geomgraph.NodeFactory.prototype.createNode=function(t){return new jsts.geomgraph.Node(t,null)},function(){var t=javascript.util.ArrayList;jsts.geomgraph.PlanarGraph=function(e){this.edges=new t,this.edgeEndList=new t,this.nodes=new jsts.geomgraph.NodeMap(e||new jsts.geomgraph.NodeFactory)},jsts.geomgraph.PlanarGraph.prototype.edges=null,jsts.geomgraph.PlanarGraph.prototype.nodes=null,jsts.geomgraph.PlanarGraph.prototype.edgeEndList=null,jsts.geomgraph.PlanarGraph.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},jsts.geomgraph.PlanarGraph.prototype.getEdgeIterator=function(){return this.edges.iterator()},jsts.geomgraph.PlanarGraph.prototype.getEdgeEnds=function(){return this.edgeEndList},jsts.geomgraph.PlanarGraph.prototype.isBoundaryNode=function(t,e){var n=this.nodes.find(e);if(null===n)return!1;var o=n.getLabel();return null!==o&&o.getLocation(t)===jsts.geom.Location.BOUNDARY?!0:!1},jsts.geomgraph.PlanarGraph.prototype.insertEdge=function(t){this.edges.add(t)},jsts.geomgraph.PlanarGraph.prototype.add=function(t){this.nodes.add(t),this.edgeEndList.add(t)},jsts.geomgraph.PlanarGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()},jsts.geomgraph.PlanarGraph.prototype.getNodes=function(){return this.nodes.values()},jsts.geomgraph.PlanarGraph.prototype.addNode=function(t){return this.nodes.addNode(t)},jsts.geomgraph.PlanarGraph.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var o=new jsts.geomgraph.DirectedEdge(n,!0),i=new jsts.geomgraph.DirectedEdge(n,!1);o.setSym(i),i.setSym(o),this.add(o),this.add(i)}},jsts.geomgraph.PlanarGraph.prototype.linkResultDirectedEdges=function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},jsts.geomgraph.PlanarGraph.prototype.findEdgeInSameDirection=function(t,e){var n,o,i=0,r=this.edges.size();for(i;r>i;i++){if(n=this.edges.get(i),o=n.getCoordinates(),this.matchInSameDirection(t,e,o[0],o[1]))return n;if(this.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return n}return null},jsts.geomgraph.PlanarGraph.prototype.matchInSameDirection=function(t,e,n,o){return t.equals(n)&&jsts.algorithm.CGAlgorithms.computeOrientation(t,e,o)===jsts.algorithm.CGAlgorithms.COLLINEAR&&jsts.geomgraph.Quadrant.quadrant(t,e)===jsts.geomgraph.Quadrant.quadrant(n,o)?!0:!1},jsts.geomgraph.PlanarGraph.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}}(),jsts.algorithm.LineIntersector=function(){this.inputLines=[[],[]],this.intPt=[null,null],this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.LineIntersector.NO_INTERSECTION=0,jsts.algorithm.LineIntersector.POINT_INTERSECTION=1,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION=2,jsts.algorithm.LineIntersector.prototype.setPrecisionModel=function(t){this.precisionModel=t},jsts.algorithm.LineIntersector.prototype.getEndpoint=function(t,e){return this.inputLines[t][e]},jsts.algorithm.LineIntersector.computeEdgeDistance=function(t,e,n){var o=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),r=-1;if(t.equals(e))r=0;else if(t.equals(n))r=o>i?o:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);r=o>i?s:a,0!==r||t.equals(e)||(r=Math.max(s,a))}if(0===r&&!t.equals(e))throw new jsts.error.IllegalArgumentError("Bad distance calculation");return r},jsts.algorithm.LineIntersector.nonRobustComputeEdgeDistance=function(t,e){var n=t.x-e.x,o=t.y-e.y,i=Math.sqrt(n*n+o*o);if(0!==i||t.equals(e))throw new jsts.error.IllegalArgumentError("Invalid distance calculation");return i},jsts.algorithm.LineIntersector.prototype.result=null,jsts.algorithm.LineIntersector.prototype.inputLines=null,jsts.algorithm.LineIntersector.prototype.intPt=null,jsts.algorithm.LineIntersector.prototype.intLineIndex=null,jsts.algorithm.LineIntersector.prototype._isProper=null,jsts.algorithm.LineIntersector.prototype.pa=null,jsts.algorithm.LineIntersector.prototype.pb=null,jsts.algorithm.LineIntersector.prototype.precisionModel=null,jsts.algorithm.LineIntersector.prototype.computeIntersection=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.LineIntersector.prototype.isCollinear=function(){return this.result===jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION},jsts.algorithm.LineIntersector.prototype.computeIntersection=function(t,e,n,o){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=o,this.result=this.computeIntersect(t,e,n,o)},jsts.algorithm.LineIntersector.prototype.computeIntersect=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.LineIntersector.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},jsts.algorithm.LineIntersector.prototype.hasIntersection=function(){return this.result!==jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.LineIntersector.prototype.getIntersectionNum=function(){return this.result},jsts.algorithm.LineIntersector.prototype.getIntersection=function(t){return this.intPt[t]},jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(){null===this.intLineIndex&&(this.intLineIndex=[[],[]],this.computeIntLineIndex(0),this.computeIntLineIndex(1))},jsts.algorithm.LineIntersector.prototype.isIntersection=function(t){var e;for(e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},jsts.algorithm.LineIntersector.prototype.isInteriorIntersection=function(){return 1===arguments.length?this.isInteriorIntersection2.apply(this,arguments):this.isInteriorIntersection(0)?!0:this.isInteriorIntersection(1)?!0:!1},jsts.algorithm.LineIntersector.prototype.isInteriorIntersection2=function(t){var e;for(e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1},jsts.algorithm.LineIntersector.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},jsts.algorithm.LineIntersector.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this.intPt[intLineIndex[t][e]]},jsts.algorithm.LineIntersector.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(t){var e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)},jsts.algorithm.LineIntersector.prototype.getEdgeDistance=function(t,e){var n=jsts.algorithm.LineIntersector.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return n},jsts.algorithm.RobustLineIntersector=function(){jsts.algorithm.RobustLineIntersector.prototype.constructor.call(this)},jsts.algorithm.RobustLineIntersector.prototype=new jsts.algorithm.LineIntersector,jsts.algorithm.RobustLineIntersector.prototype.computeIntersection=function(t,e,n){return 4===arguments.length?void jsts.algorithm.LineIntersector.prototype.computeIntersection.apply(this,arguments):(this._isProper=!1,jsts.geom.Envelope.intersects(e,n,t)&&0===jsts.algorithm.CGAlgorithms.orientationIndex(e,n,t)&&0===jsts.algorithm.CGAlgorithms.orientationIndex(n,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),void(this.result=jsts.algorithm.LineIntersector.POINT_INTERSECTION)):void(this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION))},jsts.algorithm.RobustLineIntersector.prototype.computeIntersect=function(t,e,n,o){if(this._isProper=!1,!jsts.geom.Envelope.intersects(t,e,n,o))return jsts.algorithm.LineIntersector.NO_INTERSECTION;var i=jsts.algorithm.CGAlgorithms.orientationIndex(t,e,n),r=jsts.algorithm.CGAlgorithms.orientationIndex(t,e,o);if(i>0&&r>0||0>i&&0>r)return jsts.algorithm.LineIntersector.NO_INTERSECTION;var s=jsts.algorithm.CGAlgorithms.orientationIndex(n,o,t),a=jsts.algorithm.CGAlgorithms.orientationIndex(n,o,e);if(s>0&&a>0||0>s&&0>a)return jsts.algorithm.LineIntersector.NO_INTERSECTION;var l=0===i&&0===r&&0===s&&0===a;return l?this.computeCollinearIntersection(t,e,n,o):(0===i||0===r||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(o)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(o)?this.intPt[0]=e:0===i?this.intPt[0]=new jsts.geom.Coordinate(n):0===r?this.intPt[0]=new jsts.geom.Coordinate(o):0===s?this.intPt[0]=new jsts.geom.Coordinate(t):0===a&&(this.intPt[0]=new jsts.geom.Coordinate(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,o)),jsts.algorithm.LineIntersector.POINT_INTERSECTION)},jsts.algorithm.RobustLineIntersector.prototype.computeCollinearIntersection=function(t,e,n,o){var i=jsts.geom.Envelope.intersects(t,e,n),r=jsts.geom.Envelope.intersects(t,e,o),s=jsts.geom.Envelope.intersects(n,o,t),a=jsts.geom.Envelope.intersects(n,o,e);return i&&r?(this.intPt[0]=n,this.intPt[1]=o,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):s&&a?(this.intPt[0]=t,this.intPt[1]=e,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):i&&s?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||r||a?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):i&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||r||s?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):r&&s?(this.intPt[0]=o,this.intPt[1]=t,!o.equals(t)||i||a?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):r&&a?(this.intPt[0]=o,this.intPt[1]=e,!o.equals(e)||i||s?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.RobustLineIntersector.prototype.intersection=function(t,e,n,o){var i=this.intersectionWithNormalization(t,e,n,o);return this.isInSegmentEnvelopes(i)||(i=jsts.algorithm.CentralEndpointIntersector.getIntersection(t,e,n,o)),null!==this.precisionModel&&this.precisionModel.makePrecise(i),i},jsts.algorithm.RobustLineIntersector.prototype.intersectionWithNormalization=function(t,e,n,o){var i=new jsts.geom.Coordinate(t),r=new jsts.geom.Coordinate(e),s=new jsts.geom.Coordinate(n),a=new jsts.geom.Coordinate(o),l=new jsts.geom.Coordinate;this.normalizeToEnvCentre(i,r,s,a,l);var p=this.safeHCoordinateIntersection(i,r,s,a);return p.x+=l.x,p.y+=l.y,p},jsts.algorithm.RobustLineIntersector.prototype.safeHCoordinateIntersection=function(t,e,n,o){var i=null;try{i=jsts.algorithm.HCoordinate.intersection(t,e,n,o)}catch(r){if(!(r instanceof jsts.error.NotRepresentableError))throw r;i=jsts.algorithm.CentralEndpointIntersector.getIntersection(t,e,n,o)}return i},jsts.algorithm.RobustLineIntersector.prototype.normalizeToMinimum=function(t,e,n,o,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,o.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,o.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,o.x-=i.x,o.y-=i.y},jsts.algorithm.RobustLineIntersector.prototype.normalizeToEnvCentre=function(t,e,n,o,i){var r=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,p=n.x<o.x?n.x:o.x,u=n.y<o.y?n.y:o.y,h=n.x>o.x?n.x:o.x,d=n.y>o.y?n.y:o.y,c=r>p?r:p,g=h>a?a:h,f=s>u?s:u,m=d>l?l:d,y=(c+g)/2,v=(f+m)/2;i.x=y,i.y=v,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,o.x-=i.x,o.y-=i.y},jsts.algorithm.RobustLineIntersector.prototype.smallestInAbsValue=function(t,e,n,o){var i=t,r=Math.abs(i);return Math.abs(e)<r&&(i=e,r=Math.abs(e)),Math.abs(n)<r&&(i=n,r=Math.abs(n)),Math.abs(o)<r&&(i=o),i},jsts.algorithm.RobustLineIntersector.prototype.isInSegmentEnvelopes=function(t){var e=new jsts.geom.Envelope(this.inputLines[0][0],this.inputLines[0][1]),n=new jsts.geom.Envelope(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},jsts.noding.SegmentIntersector=function(){},jsts.noding.SegmentIntersector.prototype.processIntersections=jsts.abstractFunc,jsts.noding.SegmentIntersector.prototype.isDone=jsts.abstractFunc,function(){var t=jsts.noding.SegmentIntersector,e=javascript.util.ArrayList;jsts.noding.InteriorIntersectionFinder=function(t){this.li=t,this.intersections=new e,this.interiorIntersection=null},jsts.noding.InteriorIntersectionFinder.prototype=new t,jsts.noding.InteriorIntersectionFinder.constructor=jsts.noding.InteriorIntersectionFinder,jsts.noding.InteriorIntersectionFinder.prototype.findAllIntersections=!1,jsts.noding.InteriorIntersectionFinder.prototype.isCheckEndSegmentsOnly=!1,jsts.noding.InteriorIntersectionFinder.prototype.li=null,jsts.noding.InteriorIntersectionFinder.prototype.interiorIntersection=null,jsts.noding.InteriorIntersectionFinder.prototype.intSegments=null,jsts.noding.InteriorIntersectionFinder.prototype.intersections=null,jsts.noding.InteriorIntersectionFinder.prototype.setFindAllIntersections=function(t){this.findAllIntersections=t},jsts.noding.InteriorIntersectionFinder.prototype.getIntersections=function(){return intersections},jsts.noding.InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function(t){this.isCheckEndSegmentsOnly=t},jsts.noding.InteriorIntersectionFinder.prototype.hasIntersection=function(){return null!=this.interiorIntersection},jsts.noding.InteriorIntersectionFinder.prototype.getInteriorIntersection=function(){return this.interiorIntersection},jsts.noding.InteriorIntersectionFinder.prototype.getIntersectionSegments=function(){return this.intSegments},jsts.noding.InteriorIntersectionFinder.prototype.processIntersections=function(t,e,n,o){if(!this.hasIntersection()&&(t!=n||e!=o)){if(this.isCheckEndSegmentsOnly){var i=this.isEndSegment(t,e)||isEndSegment(n,o);if(!i)return}var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],a=n.getCoordinates()[o],l=n.getCoordinates()[o+1];this.li.computeIntersection(r,s,a,l),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=[],this.intSegments[0]=r,this.intSegments[1]=s,this.intSegments[2]=a,this.intSegments[3]=l,this.interiorIntersection=this.li.getIntersection(0),this.intersections.add(this.interiorIntersection))}},jsts.noding.InteriorIntersectionFinder.prototype.isEndSegment=function(t,e){return 0==e?!0:e>=t.size()-2?!0:!1},jsts.noding.InteriorIntersectionFinder.prototype.isDone=function(){return this.findAllIntersections?!1:null!=this.interiorIntersection}}(),function(){var t=jsts.algorithm.RobustLineIntersector,e=jsts.noding.InteriorIntersectionFinder,n=jsts.noding.MCIndexNoder;jsts.noding.FastNodingValidator=function(e){this.li=new t,this.segStrings=e},jsts.noding.FastNodingValidator.prototype.li=null,jsts.noding.FastNodingValidator.prototype.segStrings=null,jsts.noding.FastNodingValidator.prototype.findAllIntersections=!1,jsts.noding.FastNodingValidator.prototype.segInt=null,jsts.noding.FastNodingValidator.prototype._isValid=!0,jsts.noding.FastNodingValidator.prototype.setFindAllIntersections=function(t){this.findAllIntersections=t},jsts.noding.FastNodingValidator.prototype.getIntersections=function(){return segInt.getIntersections()},jsts.noding.FastNodingValidator.prototype.isValid=function(){return this.execute(),this._isValid},jsts.noding.FastNodingValidator.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+jsts.io.WKTWriter.toLineString(t[0],t[1])+" and "+jsts.io.WKTWriter.toLineString(t[2],t[3])},jsts.noding.FastNodingValidator.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new jsts.error.TopologyError(this.getErrorMessage(),this.segInt.getInteriorIntersection())},jsts.noding.FastNodingValidator.prototype.execute=function(){null==this.segInt&&this.checkInteriorIntersections()},jsts.noding.FastNodingValidator.prototype.checkInteriorIntersections=function(){this._isValid=!0,this.segInt=new e(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new n;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?void(this._isValid=!1):void 0}}(),function(){jsts.noding.BasicSegmentString=function(t,e){this.pts=t,this.data=e},jsts.noding.BasicSegmentString.prototype=new jsts.noding.SegmentString,jsts.noding.BasicSegmentString.prototype.pts=null,jsts.noding.BasicSegmentString.prototype.data=null,jsts.noding.BasicSegmentString.prototype.getData=function(){return this.data},jsts.noding.BasicSegmentString.prototype.setData=function(t){this.data=t},jsts.noding.BasicSegmentString.prototype.size=function(){return this.pts.length},jsts.noding.BasicSegmentString.prototype.getCoordinate=function(t){return this.pts[t]},jsts.noding.BasicSegmentString.prototype.getCoordinates=function(){return this.pts},jsts.noding.BasicSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.noding.BasicSegmentString.prototype.getSegmentOctant=function(t){return t==this.pts.length-1?-1:jsts.noding.Octant.octant(this.getCoordinate(t),this.getCoordinate(t+1))}}(),function(){var t=jsts.noding.FastNodingValidator,e=jsts.noding.BasicSegmentString,n=javascript.util.ArrayList;jsts.geomgraph.EdgeNodingValidator=function(e){this.nv=new t(jsts.geomgraph.EdgeNodingValidator.toSegmentStrings(e))},jsts.geomgraph.EdgeNodingValidator.checkValid=function(t){var e=new jsts.geomgraph.EdgeNodingValidator(t);e.checkValid()},jsts.geomgraph.EdgeNodingValidator.toSegmentStrings=function(t){for(var o=new n,i=t.iterator();i.hasNext();){var r=i.next();o.add(new e(r.getCoordinates(),r))}return o},jsts.geomgraph.EdgeNodingValidator.prototype.nv=null,jsts.geomgraph.EdgeNodingValidator.prototype.checkValid=function(){this.nv.checkValid()}}(),jsts.operation.GeometryGraphOperation=function(t,e,n){if(this.li=new jsts.algorithm.RobustLineIntersector,this.arg=[],void 0!==t){if(void 0===e)return this.setComputationPrecision(t.getPrecisionModel()),void(this.arg[0]=new jsts.geomgraph.GeometryGraph(0,t));n=n||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,this.setComputationPrecision(t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?t.getPrecisionModel():e.getPrecisionModel()),this.arg[0]=new jsts.geomgraph.GeometryGraph(0,t,n),this.arg[1]=new jsts.geomgraph.GeometryGraph(1,e,n)}},jsts.operation.GeometryGraphOperation.prototype.li=null,jsts.operation.GeometryGraphOperation.prototype.resultPrecisionModel=null,jsts.operation.GeometryGraphOperation.prototype.arg=null,jsts.operation.GeometryGraphOperation.prototype.getArgGeometry=function(t){return arg[t].getGeometry()},jsts.operation.GeometryGraphOperation.prototype.setComputationPrecision=function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},jsts.operation.overlay.OverlayNodeFactory=function(){},jsts.operation.overlay.OverlayNodeFactory.prototype=new jsts.geomgraph.NodeFactory,jsts.operation.overlay.OverlayNodeFactory.constructor=jsts.operation.overlay.OverlayNodeFactory,jsts.operation.overlay.OverlayNodeFactory.prototype.createNode=function(t){return new jsts.geomgraph.Node(t,new jsts.geomgraph.DirectedEdgeStar)},jsts.operation.overlay.PolygonBuilder=function(t){this.shellList=[],this.geometryFactory=t},jsts.operation.overlay.PolygonBuilder.prototype.geometryFactory=null,jsts.operation.overlay.PolygonBuilder.prototype.shellList=null,jsts.operation.overlay.PolygonBuilder.prototype.add=function(t){return 2===arguments.length?void this.add2.apply(this,arguments):void this.add2(t.getEdgeEnds(),t.getNodes())},jsts.operation.overlay.PolygonBuilder.prototype.add2=function(t,e){jsts.geomgraph.PlanarGraph.linkResultDirectedEdges(e);var n=this.buildMaximalEdgeRings(t),o=[],i=this.buildMinimalEdgeRings(n,this.shellList,o);this.sortShellsAndHoles(i,this.shellList,o),this.placeFreeHoles(this.shellList,o)},jsts.operation.overlay.PolygonBuilder.prototype.getPolygons=function(){var t=this.computePolygons(this.shellList);
return t},jsts.operation.overlay.PolygonBuilder.prototype.buildMaximalEdgeRings=function(t){for(var e=[],n=t.iterator();n.hasNext();){var o=n.next();if(o.isInResult()&&o.getLabel().isArea()&&null==o.getEdgeRing()){var i=new jsts.operation.overlay.MaximalEdgeRing(o,this.geometryFactory);e.push(i),i.setInResult()}}return e},jsts.operation.overlay.PolygonBuilder.prototype.buildMinimalEdgeRings=function(t,e,n){for(var o=[],i=0;i<t.length;i++){var r=t[i];if(r.getMaxNodeDegree()>2){r.linkDirectedEdgesForMinimalEdgeRings();var s=r.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.push(a)):n=n.concat(s)}else o.push(r)}return o},jsts.operation.overlay.PolygonBuilder.prototype.findShell=function(t){for(var e=0,n=null,o=0;o<t.length;o++){var i=t[o];i.isHole()||(n=i,e++)}return jsts.util.Assert.isTrue(1>=e,"found two shells in MinimalEdgeRing list"),n},jsts.operation.overlay.PolygonBuilder.prototype.placePolygonHoles=function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.isHole()&&o.setShell(t)}},jsts.operation.overlay.PolygonBuilder.prototype.sortShellsAndHoles=function(t,e,n){for(var o=0;o<t.length;o++){var i=t[o];i.isHole()?n.push(i):e.push(i)}},jsts.operation.overlay.PolygonBuilder.prototype.placeFreeHoles=function(t,e){for(var n=0;n<e.length;n++){var o=e[n];if(null==o.getShell()){var i=this.findEdgeRingContaining(o,t);if(null===i)throw new jsts.error.TopologyError("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(i)}}},jsts.operation.overlay.PolygonBuilder.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),o=n.getEnvelopeInternal(),i=n.getCoordinateN(0),r=null,s=null,a=0;a<e.length;a++){var l=e[a],p=l.getLinearRing(),u=p.getEnvelopeInternal();null!==r&&(s=r.getLinearRing().getEnvelopeInternal());var h=!1;u.contains(o)&&jsts.algorithm.CGAlgorithms.isPointInRing(i,p.getCoordinates())&&(h=!0),h&&(null==r||s.contains(u))&&(r=l)}return r},jsts.operation.overlay.PolygonBuilder.prototype.computePolygons=function(t){for(var e=new javascript.util.ArrayList,n=0;n<t.length;n++){var o=t[n],i=o.toPolygon(this.geometryFactory);e.add(i)}return e},jsts.operation.overlay.PolygonBuilder.prototype.containsPoint=function(t){for(var e=0;e<this.shellList.length;e++){var n=this.shellList[e];if(n.containsPoint(t))return!0}return!1},function(){var t=jsts.util.Assert,e=javascript.util.ArrayList,n=function(t,n,o){this.lineEdgesList=new e,this.resultLineList=new e,this.op=t,this.geometryFactory=n,this.ptLocator=o};n.prototype.op=null,n.prototype.geometryFactory=null,n.prototype.ptLocator=null,n.prototype.lineEdgesList=null,n.prototype.resultLineList=null,n.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},n.prototype.findCoveredLineEdges=function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var o=n.next(),i=o.getEdge();if(o.isLineEdge()&&!i.isCoveredSet()){var r=this.op.isCoveredByA(o.getCoordinate());i.setCovered(r)}}},n.prototype.collectLines=function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},n.prototype.collectLineEdge=function(t,e,n){var o=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!jsts.operation.overlay.OverlayOp.isResultOfOp(o,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},n.prototype.collectBoundaryTouchEdge=function(e,n,o){var i=e.getLabel();e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult()||(t.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),jsts.operation.overlay.OverlayOp.isResultOfOp(i,n)&&n===jsts.operation.overlay.OverlayOp.INTERSECTION&&(o.add(e.getEdge()),e.setVisitedEdge(!0)))},n.prototype.buildLines=function(){for(var t=this.lineEdgesList.iterator();t.hasNext();){var e=t.next(),n=(e.getLabel(),this.geometryFactory.createLineString(e.getCoordinates()));this.resultLineList.add(n),e.setInResult(!0)}},n.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),o=n.getLabel();n.isIsolated()&&(o.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},n.prototype.labelIsolatedLine=function(t,e){var n=ptLocator.locate(t.getCoordinate(),op.getArgGeometry(e));t.getLabel().setLocation(e,n)},jsts.operation.overlay.LineBuilder=n}(),function(){var t=javascript.util.ArrayList,e=function(e,n){this.resultPointList=new t,this.op=e,this.geometryFactory=n};e.prototype.op=null,e.prototype.geometryFactory=null,e.prototype.resultPointList=null,e.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},e.prototype.extractNonCoveredResultNodes=function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==jsts.operation.overlay.OverlayOp.INTERSECTION)){var o=n.getLabel();jsts.operation.overlay.OverlayOp.isResultOfOp(o,t)&&this.filterCoveredNodeToPoint(n)}}},e.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},jsts.operation.overlay.PointBuilder=e}(),function(){var t=jsts.algorithm.PointLocator,e=jsts.geom.Location,n=jsts.geomgraph.EdgeList,o=jsts.geomgraph.Label,i=jsts.geomgraph.PlanarGraph,r=jsts.geomgraph.Position,s=jsts.geomgraph.EdgeNodingValidator,a=jsts.operation.GeometryGraphOperation,l=jsts.operation.overlay.OverlayNodeFactory,p=jsts.operation.overlay.PolygonBuilder,u=jsts.operation.overlay.LineBuilder,h=jsts.operation.overlay.PointBuilder,d=jsts.util.Assert,c=javascript.util.ArrayList;jsts.operation.overlay.OverlayOp=function(e,o){this.ptLocator=new t,this.edgeList=new n,this.resultPolyList=new c,this.resultLineList=new c,this.resultPointList=new c,a.call(this,e,o),this.graph=new i(new l),this.geomFact=e.getFactory()},jsts.operation.overlay.OverlayOp.prototype=new a,jsts.operation.overlay.OverlayOp.constructor=jsts.operation.overlay.OverlayOp,jsts.operation.overlay.OverlayOp.INTERSECTION=1,jsts.operation.overlay.OverlayOp.UNION=2,jsts.operation.overlay.OverlayOp.DIFFERENCE=3,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE=4,jsts.operation.overlay.OverlayOp.overlayOp=function(t,e,n){var o=new jsts.operation.overlay.OverlayOp(t,e),i=o.getResultGeometry(n);return i},jsts.operation.overlay.OverlayOp.isResultOfOp=function(t,e){if(3===arguments.length)return jsts.operation.overlay.OverlayOp.isResultOfOp2.apply(this,arguments);var n=t.getLocation(0),o=t.getLocation(1);return jsts.operation.overlay.OverlayOp.isResultOfOp2(n,o,e)},jsts.operation.overlay.OverlayOp.isResultOfOp2=function(t,n,o){switch(t==e.BOUNDARY&&(t=e.INTERIOR),n==e.BOUNDARY&&(n=e.INTERIOR),o){case jsts.operation.overlay.OverlayOp.INTERSECTION:return t==e.INTERIOR&&n==e.INTERIOR;case jsts.operation.overlay.OverlayOp.UNION:return t==e.INTERIOR||n==e.INTERIOR;case jsts.operation.overlay.OverlayOp.DIFFERENCE:return t==e.INTERIOR&&n!=e.INTERIOR;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:return t==e.INTERIOR&&n!=e.INTERIOR||t!=e.INTERIOR&&n==e.INTERIOR}return!1},jsts.operation.overlay.OverlayOp.prototype.ptLocator=null,jsts.operation.overlay.OverlayOp.prototype.geomFact=null,jsts.operation.overlay.OverlayOp.prototype.resultGeom=null,jsts.operation.overlay.OverlayOp.prototype.graph=null,jsts.operation.overlay.OverlayOp.prototype.edgeList=null,jsts.operation.overlay.OverlayOp.prototype.resultPolyList=null,jsts.operation.overlay.OverlayOp.prototype.resultLineList=null,jsts.operation.overlay.OverlayOp.prototype.resultPointList=null,jsts.operation.overlay.OverlayOp.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this.resultGeom},jsts.operation.overlay.OverlayOp.prototype.getGraph=function(){return this.graph},jsts.operation.overlay.OverlayOp.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new c;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e);this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),s.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new p(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var o=new u(this,this.geomFact,this.ptLocator);this.resultLineList=o.build(t);var i=new h(this,this.geomFact,this.ptLocator);this.resultPointList=i.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdge=function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new o(t.getLabel()),i.flip());var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this.edgeList.add(t)},jsts.operation.overlay.OverlayOp.prototype.computeLabelsFromDepths=function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),o=e.getDepth();if(!o.isNull()){o.normalize();for(var i=0;2>i;i++)n.isNull(i)||!n.isArea()||o.isNull(i)||(0==o.getDelta(i)?n.toLine(i):(d.isTrue(!o.isNull(i,r.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,r.LEFT,o.getLocation(i,r.LEFT)),d.isTrue(!o.isNull(i,r.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,r.RIGHT,o.getLocation(i,r.RIGHT))))}}},jsts.operation.overlay.OverlayOp.prototype.replaceCollapsedEdges=function(){for(var t=new c,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},jsts.operation.overlay.OverlayOp.prototype.copyPoints=function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),o=this.graph.addNode(n.getCoordinate());o.setLabel(t,n.getLabel().getLocation(t))}},jsts.operation.overlay.OverlayOp.prototype.computeLabelling=function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},jsts.operation.overlay.OverlayOp.prototype.mergeSymLabels=function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},jsts.operation.overlay.OverlayOp.prototype.updateNodeLabelling=function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNodes=function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),o=n.getLabel();n.isIsolated()&&(t++,o.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(o)}},jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNode=function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},jsts.operation.overlay.OverlayOp.prototype.findResultAreaEdges=function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),o=n.getLabel();o.isArea()&&!n.isInteriorAreaEdge()&&jsts.operation.overlay.OverlayOp.isResultOfOp(o.getLocation(0,r.RIGHT),o.getLocation(1,r.RIGHT),t)&&n.setInResult(!0)}},jsts.operation.overlay.OverlayOp.prototype.cancelDuplicateResultEdges=function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},jsts.operation.overlay.OverlayOp.prototype.isCoveredByLA=function(t){return this.isCovered(t,this.resultLineList)?!0:this.isCovered(t,this.resultPolyList)?!0:!1},jsts.operation.overlay.OverlayOp.prototype.isCoveredByA=function(t){return this.isCovered(t,this.resultPolyList)?!0:!1},jsts.operation.overlay.OverlayOp.prototype.isCovered=function(t,n){for(var o=n.iterator();o.hasNext();){var i=o.next(),r=this.ptLocator.locate(t,i);if(r!=e.EXTERIOR)return!0}return!1},jsts.operation.overlay.OverlayOp.prototype.computeGeometry=function(t,e,n){var o=new c;return o.addAll(t),o.addAll(e),o.addAll(n),this.geomFact.buildGeometry(o)},jsts.operation.overlay.OverlayOp.prototype.createEmptyResult=function(t){var e=null;switch(resultDimension(t,this.arg[0].getGeometry(),this.arg[1].getGeometry())){case-1:e=geomFact.createGeometryCollection();break;case 0:e=geomFact.createPoint(null);break;case 1:e=geomFact.createLineString(null);break;case 2:e=geomFact.createPolygon(null,null)}return e},jsts.operation.overlay.OverlayOp.prototype.resultDimension=function(t,e,n){var o=e.getDimension(),i=n.getDimension(),r=-1;switch(t){case jsts.operation.overlay.OverlayOp.INTERSECTION:r=Math.min(o,i);break;case jsts.operation.overlay.OverlayOp.UNION:r=Math.max(o,i);break;case jsts.operation.overlay.OverlayOp.DIFFERENCE:r=o;break;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:r=Math.max(o,i)}return r}}(),function(){var t=jsts.operation.overlay.OverlayOp,e=jsts.operation.overlay.snap.GeometrySnapper,n=function(t,e){this.geom=[],this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()};n.overlayOp=function(t,e,o){var i=new n(t,e);return i.getResultGeometry(o)},n.intersection=function(e,n){return this.overlayOp(e,n,t.INTERSECTION)},n.union=function(e,n){return this.overlayOp(e,n,t.UNION)},n.difference=function(e,n){return overlayOp(e,n,t.DIFFERENCE)},n.symDifference=function(e,n){return overlayOp(e,n,t.SYMDIFFERENCE)},n.prototype.geom=null,n.prototype.snapTolerance=null,n.prototype.computeSnapTolerance=function(){this.snapTolerance=e.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},n.prototype.getResultGeometry=function(e){var n=this.snap(this.geom),o=t.overlayOp(n[0],n[1],e);return this.prepareResult(o)},n.prototype.selfSnap=function(t){var n=new e(t),o=n.snapTo(t,this.snapTolerance);return o},n.prototype.snap=function(t){var n=t,o=e.snap(n[0],n[1],this.snapTolerance);return o},n.prototype.prepareResult=function(t){return t},n.prototype.cbr=null,n.prototype.removeCommonBits=function(){this.cbr=new jsts.precision.CommonBitsRemover,this.cbr.add(this.geom[0]),this.cbr.add(this.geom[1]);var t=[];return t[0]=cbr.removeCommonBits(this.geom[0].clone()),t[1]=cbr.removeCommonBits(this.geom[1].clone()),t},jsts.operation.overlay.snap.SnapOverlayOp=n}(),jsts.geomgraph.index.EdgeSetIntersector=function(){},jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections2=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.index.SimpleMCSweepLineIntersector=function(){throw new jsts.error.NotImplementedError},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.algorithm.locate.SimplePointInAreaLocator=function(t){this.geom=t},jsts.algorithm.locate.SimplePointInAreaLocator.locate=function(t,e){return e.isEmpty()?jsts.geom.Location.EXTERIOR:jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(t,e)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint=function(t,e){if(e instanceof jsts.geom.Polygon)return jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon(t,e);if(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon)for(var n=0;n<e.geometries.length;n++){var o=e.geometries[n];if(o!==e&&jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(t,o))return!0}return!1},jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(t,n))return!1;for(var o=0;o<e.getNumInteriorRing();o++){var i=e.getInteriorRingN(o);if(jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(t,i))return!1}return!0},jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?jsts.algorithm.CGAlgorithms.isPointInRing(t,e.getCoordinates()):!1},jsts.algorithm.locate.SimplePointInAreaLocator.prototype.geom=null,jsts.algorithm.locate.SimplePointInAreaLocator.prototype.locate=function(t){return jsts.algorithm.locate.SimplePointInAreaLocator.locate(t,geom)},function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position,n=jsts.geomgraph.EdgeEndStar,o=jsts.util.Assert;jsts.geomgraph.DirectedEdgeStar=function(){jsts.geomgraph.EdgeEndStar.call(this)},jsts.geomgraph.DirectedEdgeStar.prototype=new n,jsts.geomgraph.DirectedEdgeStar.constructor=jsts.geomgraph.DirectedEdgeStar,jsts.geomgraph.DirectedEdgeStar.prototype.resultAreaEdgeList=null,jsts.geomgraph.DirectedEdgeStar.prototype.label=null,jsts.geomgraph.DirectedEdgeStar.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},jsts.geomgraph.DirectedEdgeStar.prototype.getLabel=function(){return this.label},jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t},jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(t){for(var e=0,n=this.iterator();n.hasNext();){var o=n.next();o.getEdgeRing()===t&&e++}return e},jsts.geomgraph.DirectedEdgeStar.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(1>e)return null;var n=t.get(0);if(1==e)return n;var i=t.get(e-1),r=n.getQuadrant(),s=i.getQuadrant();if(jsts.geomgraph.Quadrant.isNorthern(r)&&jsts.geomgraph.Quadrant.isNorthern(s))return n;if(!jsts.geomgraph.Quadrant.isNorthern(r)&&!jsts.geomgraph.Quadrant.isNorthern(s))return i;return 0!=n.getDy()?n:0!=i.getDy()?i:(o.shouldNeverReachHere("found two horizontal edges incident on node"),null)},jsts.geomgraph.DirectedEdgeStar.prototype.computeLabelling=function(e){n.prototype.computeLabelling.call(this,e),this.label=new jsts.geomgraph.Label(t.NONE);for(var o=this.iterator();o.hasNext();)for(var i=o.next(),r=i.getEdge(),s=r.getLabel(),a=0;2>a;a++){var l=s.getLocation(a);(l===t.INTERIOR||l===t.BOUNDARY)&&this.label.setLocation(a,t.INTERIOR)}},jsts.geomgraph.DirectedEdgeStar.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},jsts.geomgraph.DirectedEdgeStar.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),o=n.getLabel();o.setAllLocationsIfNull(0,t.getLocation(0)),o.setAllLocationsIfNull(1,t.getLocation(1))}},jsts.geomgraph.DirectedEdgeStar.prototype.getResultAreaEdges=function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new javascript.util.ArrayList;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},jsts.geomgraph.DirectedEdgeStar.prototype.SCANNING_FOR_INCOMING=1,jsts.geomgraph.DirectedEdgeStar.prototype.LINKING_TO_OUTGOING=2,jsts.geomgraph.DirectedEdgeStar.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,i=0;i<this.resultAreaEdgeList.size();i++){var r=this.resultAreaEdgeList.get(i),s=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this.SCANNING_FOR_INCOMING:if(!s.isInResult())continue;e=s,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new jsts.error.TopologyError("no outgoing dirEdge found",this.getCoordinate());o.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},jsts.geomgraph.DirectedEdgeStar.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;r>=0;r--){var s=this.resultAreaEdgeList.get(r),a=s.getSym();switch(null===e&&s.getEdgeRing()===t&&(e=s),i){case this.SCANNING_FOR_INCOMING:if(a.getEdgeRing()!=t)continue;n=a,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=this.SCANNING_FOR_INCOMING}}i===this.LINKING_TO_OUTGOING&&(o.isTrue(null!==e,"found null for first outgoing dirEdge"),o.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},jsts.geomgraph.DirectedEdgeStar.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var o=this.edgeList.get(n),i=o.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=o}e.setNext(t)},jsts.geomgraph.DirectedEdgeStar.prototype.findCoveredLineEdges=function(){for(var e=t.NONE,n=this.iterator();n.hasNext();){var o=n.next(),i=o.getSym();if(!o.isLineEdge()){if(o.isInResult()){e=t.INTERIOR;break}if(i.isInResult()){e=t.EXTERIOR;break}}}if(e!==t.NONE)for(var r=e,n=this.iterator();n.hasNext();){var o=n.next(),i=o.getSym();o.isLineEdge()?o.getEdge().setCovered(r===t.INTERIOR):(o.isInResult()&&(r=t.EXTERIOR),i.isInResult()&&(r=t.INTERIOR))}},jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths=function(t){if(2===arguments.length)return void this.computeDepths2.apply(this,arguments);var n=this.findIndex(t),o=(t.getLabel(),t.getDepth(e.LEFT)),i=t.getDepth(e.RIGHT),r=this.computeDepths2(n+1,this.edgeList.size(),o),s=this.computeDepths2(0,n,r);if(s!=i)throw new jsts.error.TopologyError("depth mismatch at "+t.getCoordinate())},jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths2=function(t,n,o){for(var i=o,r=t;n>r;r++){{var s=this.edgeList.get(r);s.getLabel()}s.setEdgeDepths(e.RIGHT,i),i=s.getDepth(e.LEFT)}return i}}(),jsts.algorithm.CentroidLine=function(){this.centSum=new jsts.geom.Coordinate},jsts.algorithm.CentroidLine.prototype.centSum=null,jsts.algorithm.CentroidLine.prototype.totalLength=0,jsts.algorithm.CentroidLine.prototype.add=function(t){if(t instanceof Array)return void this.add2.apply(this,arguments);if(t instanceof jsts.geom.LineString)this.add(t.getCoordinates());else if(t instanceof jsts.geom.Polygon){var e=t;this.add(e.getExteriorRing().getCoordinates());for(var n=0;n<e.getNumInteriorRing();n++)this.add(e.getInteriorRingN(n).getCoordinates())}else if(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)for(var o=t,n=0;n<o.getNumGeometries();n++)this.add(o.getGeometryN(n))},jsts.algorithm.CentroidLine.prototype.getCentroid=function(){var t=new jsts.geom.Coordinate;return t.x=this.centSum.x/this.totalLength,t.y=this.centSum.y/this.totalLength,t},jsts.algorithm.CentroidLine.prototype.add2=function(t){for(var e=0;e<t.length-1;e++){var n=t[e].distance(t[e+1]);this.totalLength+=n;var o=(t[e].x+t[e+1].x)/2;this.centSum.x+=n*o;var i=(t[e].y+t[e+1].y)/2;this.centSum.y+=n*i}},jsts.index.IntervalSize=function(){},jsts.index.IntervalSize.MIN_BINARY_EXPONENT=-50,jsts.index.IntervalSize.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var o,i,r;return o=Math.max(Math.abs(t),Math.abs(e)),i=n/o,r=jsts.index.DoubleBits.exponent(i),r<=jsts.index.IntervalSize.MIN_BINARY_EXPONENT},jsts.geomgraph.index.SimpleEdgeSetIntersector=function(){},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.nOverlaps=0,jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections=function(t,e,n){if(e instanceof javascript.util.List)return void this.computeIntersections2.apply(this,arguments);this.nOverlaps=0;for(var o=t.iterator();o.hasNext();)for(var i=o.next(),r=t.iterator();r.hasNext();){var s=r.next();(n||i!=s)&&this.computeIntersects(i,s,e)}},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections2=function(t,e,n){this.nOverlaps=0;for(var o=t.iterator();o.hasNext();)for(var i=o.next(),r=e.iterator();r.hasNext();){var s=r.next();this.computeIntersects(i,s,n)}},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersects=function(t,e,n){var o,i,r=t.getCoordinates(),s=e.getCoordinates();for(o=0;o<r.length-1;o++)for(i=0;i<s.length-1;i++)n.addIntersections(t,o,e,i)},jsts.geomgraph.Edge=function(t,e){this.pts=t,this.label=e,this.eiList=new jsts.geomgraph.EdgeIntersectionList(this),this.depth=new jsts.geomgraph.Depth},jsts.geomgraph.Edge.prototype=new jsts.geomgraph.GraphComponent,jsts.geomgraph.Edge.constructor=jsts.geomgraph.Edge,jsts.geomgraph.Edge.updateIM=function(t,e){e.setAtLeastIfValid(t.getLocation(0,jsts.geomgraph.Position.ON),t.getLocation(1,jsts.geomgraph.Position.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,jsts.geomgraph.Position.LEFT),t.getLocation(1,jsts.geomgraph.Position.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,jsts.geomgraph.Position.RIGHT),t.getLocation(1,jsts.geomgraph.Position.RIGHT),2))},jsts.geomgraph.Edge.prototype.pts=null,jsts.geomgraph.Edge.prototype.env=null,jsts.geomgraph.Edge.prototype.name=null,jsts.geomgraph.Edge.prototype.mce=null,jsts.geomgraph.Edge.prototype._isIsolated=!0,jsts.geomgraph.Edge.prototype.depth=null,jsts.geomgraph.Edge.prototype.depthDelta=0,jsts.geomgraph.Edge.prototype.eiList=null,jsts.geomgraph.Edge.prototype.getNumPoints=function(){return this.pts.length},jsts.geomgraph.Edge.prototype.getEnvelope=function(){if(null===this.env){this.env=new jsts.geom.Envelope;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(pts[t])}return env},jsts.geomgraph.Edge.prototype.getDepth=function(){return this.depth},jsts.geomgraph.Edge.prototype.getDepthDelta=function(){return this.depthDelta},jsts.geomgraph.Edge.prototype.setDepthDelta=function(t){this.depthDelta=t},jsts.geomgraph.Edge.prototype.getCoordinates=function(){return this.pts},jsts.geomgraph.Edge.prototype.getCoordinate=function(t){return void 0===t?this.pts.length>0?this.pts[0]:null:this.pts[t]},jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.geomgraph.Edge.prototype.setIsolated=function(t){this._isIsolated=t},jsts.geomgraph.Edge.prototype.isIsolated=function(){return this._isIsolated},jsts.geomgraph.Edge.prototype.addIntersections=function(t,e,n){for(var o=0;o<t.getIntersectionNum();o++)this.addIntersection(t,e,n,o)},jsts.geomgraph.Edge.prototype.addIntersection=function(t,e,n,o){var i=new jsts.geom.Coordinate(t.getIntersection(o)),r=e,s=t.getEdgeDistance(n,o),a=r+1;if(a<this.pts.length){var l=this.pts[a];i.equals2D(l)&&(r=a,s=0)}this.eiList.add(i,r,s)},jsts.geomgraph.Edge.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},jsts.geomgraph.Edge.prototype.getEdgeIntersectionList=function(){return this.eiList},jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.geomgraph.Edge.prototype.isCollapsed=function(){return this.label.isArea()?3!=this.pts.length?!1:this.pts[0].equals(this.pts[2])?!0:!1:!1},jsts.geomgraph.Edge.prototype.getCollapsedEdge=function(){var t=[];t[0]=this.pts[0],t[1]=this.pts[1];var e=new jsts.geomgraph.Edge(t,jsts.geomgraph.Label.toLineLabel(this.label));return e},jsts.geomgraph.Edge.prototype.computeIM=function(t){jsts.geomgraph.Edge.updateIM(this.label,t)},jsts.geomgraph.Edge.prototype.isPointwiseEqual=function(t){if(this.pts.length!=t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},jsts.noding.Octant=function(){throw jsts.error.AbstractMethodInvocationError()},jsts.noding.Octant.octant=function(t,e){if(t instanceof jsts.geom.Coordinate)return jsts.noding.Octant.octant2.apply(this,arguments);if(0===t&&0===e)throw new jsts.error.IllegalArgumentError("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),o=Math.abs(e);return t>=0?e>=0?n>=o?0:1:n>=o?7:6:e>=0?n>=o?3:2:n>=o?4:5},jsts.noding.Octant.octant2=function(t,e){var n=e.x-t.x,o=e.y-t.y;if(0===n&&0===o)throw new jsts.error.IllegalArgumentError("Cannot compute the octant for two identical points "+t);return jsts.noding.Octant.octant(n,o)},jsts.operation.union.UnionInteracting=function(t,e){this.g0=t,this.g1=e,this.geomFactory=t.getFactory(),this.interacts0=[],this.interacts1=[]},jsts.operation.union.UnionInteracting.union=function(t,e){var n=new jsts.operation.union.UnionInteracting(t,e);return n.union()},jsts.operation.union.UnionInteracting.prototype.geomFactory=null,jsts.operation.union.UnionInteracting.prototype.g0=null,jsts.operation.union.UnionInteracting.prototype.g1=null,jsts.operation.union.UnionInteracting.prototype.interacts0=null,jsts.operation.union.UnionInteracting.prototype.interacts1=null,jsts.operation.union.UnionInteracting.prototype.union=function(){this.computeInteracting();var t=this.extractElements(this.g0,this.interacts0,!0),e=this.extractElements(this.g1,this.interacts1,!0);t.isEmpty()||e.isEmpty();var n=in0.union(e),o=this.extractElements(this.g0,this.interacts0,!1),i=this.extractElements(this.g1,this.interacts1,!1),r=jsts.geom.util.GeometryCombiner.combine(n,o,i);return r},jsts.operation.union.UnionInteracting.prototype.bufferUnion=function(t,e){var n=t.getFactory(),o=n.createGeometryCollection([t,e]),i=o.buffer(0);return i},jsts.operation.union.UnionInteracting.prototype.computeInteracting=function(t){if(t){for(var e=!1,n=0,o=g1.getNumGeometries();o>n;n++){var i=this.g1.getGeometryN(n),r=i.getEnvelopeInternal().intersects(t.getEnvelopeInternal());r&&(this.interacts1[n]=!0,e=!0)}return e}for(var n=0,o=this.g0.getNumGeometries();o>n;n++){var s=this.g0.getGeometryN(n);this.interacts0[n]=this.computeInteracting(s)}},jsts.operation.union.UnionInteracting.prototype.extractElements=function(t,e,n){for(var o=[],i=0,r=t.getNumGeometries();r>i;i++){var s=t.getGeometryN(i);e[i]===n&&o.push(s)}return this.geomFactory.buildGeometry(o)},jsts.triangulate.quadedge.TrianglePredicate=function(){},jsts.triangulate.quadedge.TrianglePredicate.isInCircleNonRobust=function(t,e,n,o){var i=(t.x*t.x+t.y*t.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(e,n,o)-(e.x*e.x+e.y*e.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(t,n,o)+(n.x*n.x+n.y*n.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(t,e,o)-(o.x*o.x+o.y*o.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(t,e,n)>0;return i},jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized=function(t,e,n,o){var i,r,s,a,l,p,u,h,d,c,g,f,m;return i=t.x-o.x,r=t.y-o.y,s=e.x-o.x,a=e.y-o.y,l=n.x-o.x,p=n.y-o.y,u=i*a-s*r,h=s*p-l*a,d=l*r-i*p,c=i*i+r*r,g=s*s+a*a,f=l*l+p*p,m=c*h+g*d+f*u,m>0},jsts.triangulate.quadedge.TrianglePredicate.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust=function(t,e,n,o){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized(t,e,n,o)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDSlow=function(t,e,n,o){var i,r,s,a,l,p,u,h,d,c,g,f,m,y;return i=jsts.math.DD.valueOf(o.x),r=jsts.math.DD.valueOf(o.y),s=jsts.math.DD.valueOf(t.x),a=jsts.math.DD.valueOf(t.y),l=jsts.math.DD.valueOf(e.x),p=jsts.math.DD.valueOf(e.y),u=jsts.math.DD.valueOf(n.x),h=jsts.math.DD.valueOf(n.y),d=s.multiply(s).add(a.multiply(a)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(l,p,u,h,i,r)),c=l.multiply(l).add(p.multiply(p)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,u,h,i,r)),g=u.multiply(u).add(h.multiply(h)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,l,p,i,r)),f=i.multiply(i).add(r.multiply(r)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,l,p,u,h)),m=d.subtract(c).add(g).subtract(f),y=m.doubleValue()>0},jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow=function(t,e,n,o,i,r){return n.subtract(t).multiply(r.subtract(e)).subtract(o.subtract(e).multiply(i.subtract(t)))},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDFast=function(t,e,n,o){var i,r,s,a,l,p;return i=jsts.math.DD.sqr(t.x).selfAdd(jsts.math.DD.sqr(t.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(e,n,o)),r=jsts.math.DD.sqr(e.x).selfAdd(jsts.math.DD.sqr(e.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(t,n,o)),s=jsts.math.DD.sqr(n.x).selfAdd(jsts.math.DD.sqr(n.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(t,e,o)),a=jsts.math.DD.sqr(o.x).selfAdd(jsts.math.DD.sqr(o.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(t,e,n)),l=i.selfSubtract(r).selfAdd(s).selfSubtract(a),p=l.doubleValue()>0
},jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast=function(t,e,n){var o,i;return o=jsts.math.DD.valueOf(e.x).selfSubtract(t.x).selfMultiply(jsts.math.DD.valueOf(n.y).selfSubtract(t.y)),i=jsts.math.DD.valueOf(e.y).selSubtract(t.y).selfMultiply(jsts.math.DD.valueOf(n.x).selfSubtract(t.x)),o.selfSubtract(i)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDNormalized=function(t,e,n,o){var i,r,s,a,l,p,u,h,d,c,g,f,m,y;return i=jsts.math.DD.valueOf(t.x).selfSubtract(o.x),r=jsts.math.DD.valueOf(t.y).selfSubtract(o.y),s=jsts.math.DD.valueOf(e.x).selfSubtract(o.x),s=jsts.math.DD.valueOf(e.y).selfSubtract(o.y),l=jsts.math.DD.valueOf(n.x).selfSubtract(o.x),l=jsts.math.DD.valueOf(n.y).selfSubtract(o.y),u=i.multiply(a).selfSubtract(s.multiply(r)),h=s.multiply(p).selfSubtract(l.multiply(a)),d=l.multiply(r).selfSubtract(i.multiply(p)),c=i.multiply(i).selfAdd(r.multiply(r)),g=s.multiply(s).selfAdd(a.multiply(a)),f=l.multiply(l).selfAdd(p.multiply(p)),m=c.selfMultiply(h).selfAdd(g.selfMultiply(d)).selfAdd(f.selfMultiply(u)),y=m.doubleValue()>0},jsts.triangulate.quadedge.TrianglePredicate.isInCircleCC=function(t,e,n,o){var i,r,s;return i=jsts.geom.Triangle.circumcentre(t,e,n),r=t.distance(i),s=o.distance(i)-r,0>=s},jsts.operation.union.PointGeometryUnion=function(t,e){this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()},jsts.operation.union.PointGeometryUnion.union=function(t,e){var n=new jsts.operation.union.PointGeometryUnion(t,e);return n.union()},jsts.operation.union.PointGeometryUnion.prototype.pointGeom=null,jsts.operation.union.PointGeometryUnion.prototype.otherGeom=null,jsts.operation.union.PointGeometryUnion.prototype.geomFact=null,jsts.operation.union.PointGeometryUnion.prototype.union=function(){for(var t=new jsts.algorithm.PointLocator,e=[],n=0,o=this.pointGeom.getNumGeometries();o>n;n++){var i=this.pointGeom.getGeometryN(n),r=i.getCoordinate(),s=t.locate(r,this.otherGeom);if(s===jsts.geom.Location.EXTERIOR){for(var a=!0,l=e.length;n--;)if(e[l].equals(r)){a=!1;break}a&&e.push(r)}}if(e.sort(function(t,e){return t.compareTo(e)}),0===e.length)return this.otherGeom;var p=null,u=jsts.geom.CoordinateArrays.toCoordinateArray(e);return p=1===u.length?this.geomFact.createPoint(u[0]):this.geomFact.createMultiPoint(u),jsts.geom.util.GeometryCombiner.combine(p,this.otherGeom)},jsts.noding.IntersectionFinderAdder=function(t){this.li=t,this.interiorIntersections=new javascript.util.ArrayList},jsts.noding.IntersectionFinderAdder.prototype=new jsts.noding.SegmentIntersector,jsts.noding.IntersectionFinderAdder.constructor=jsts.noding.IntersectionFinderAdder,jsts.noding.IntersectionFinderAdder.prototype.li=null,jsts.noding.IntersectionFinderAdder.prototype.interiorIntersections=null,jsts.noding.IntersectionFinderAdder.prototype.getInteriorIntersections=function(){return this.interiorIntersections},jsts.noding.IntersectionFinderAdder.prototype.processIntersections=function(t,e,n,o){if(t!==n||e!==o){var i=t.getCoordinates()[e],r=t.getCoordinates()[e+1],s=n.getCoordinates()[o],a=n.getCoordinates()[o+1];if(this.li.computeIntersection(i,r,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var l=0;l<this.li.getIntersectionNum();l++)this.interiorIntersections.add(this.li.getIntersection(l));t.addIntersections(this.li,e,0),n.addIntersections(this.li,o,1)}}},jsts.noding.IntersectionFinderAdder.prototype.isDone=function(){return!1},jsts.noding.snapround.MCIndexSnapRounder=function(t){this.pm=t,this.li=new jsts.algorithm.RobustLineIntersector,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()},jsts.noding.snapround.MCIndexSnapRounder.prototype=new jsts.noding.Noder,jsts.noding.snapround.MCIndexSnapRounder.constructor=jsts.noding.snapround.MCIndexSnapRounder,jsts.noding.snapround.MCIndexSnapRounder.prototype.pm=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.li=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.scaleFactor=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.noder=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.pointSnapper=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.nodedSegStrings=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.getNodedSubstrings=function(){return jsts.noding.NodedSegmentString.getNodedSubstrings(this.nodedSegStrings)},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeNodes=function(t){this.nodedSegStrings=t,this.noder=new jsts.noding.MCIndexNoder,this.pointSnapper=new jsts.noding.snapround.MCIndexPointSnapper(this.noder.getIndex()),this.snapRound(t,this.li)},jsts.noding.snapround.MCIndexSnapRounder.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},jsts.noding.snapround.MCIndexSnapRounder.prototype.findInteriorIntersections=function(t,e){var n=new jsts.noding.IntersectionFinderAdder(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),o=new jsts.noding.snapround.HotPixel(n,this.scaleFactor,this.li);this.pointSnapper.snap(o)}},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps=function(t){if(t instanceof jsts.noding.NodedSegmentString)return void this.computeVertexSnaps2.apply(this,arguments);for(var e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps2=function(t){for(var e=t.getCoordinates(),n=0;n<e.length-1;n++){var o=new jsts.noding.snapround.HotPixel(e[n],this.scaleFactor,this.li),i=this.pointSnapper.snap(o,t,n);i&&t.addIntersection(e[n],n)}},jsts.operation.valid.ConnectedInteriorTester=function(t){this.geomGraph=t,this.geometryFactory=new jsts.geom.GeometryFactory,this.disconnectedRingcoord=null},jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint=function(t,e){var n=0,o=t.length;for(n;o>n;n++)if(!t[n].equals(e))return t[n];return null},jsts.operation.valid.ConnectedInteriorTester.prototype.getCoordinate=function(){return this.disconnectedRingcoord},jsts.operation.valid.ConnectedInteriorTester.prototype.isInteriorsConnected=function(){var t=new javascript.util.ArrayList;this.geomGraph.computeSplitEdges(t);var e=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},jsts.operation.valid.ConnectedInteriorTester.prototype.setInteriorEdgesInResult=function(t){for(var e,n=t.getEdgeEnds().iterator();n.hasNext();)e=n.next(),e.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR&&e.setInResult(!0)},jsts.operation.valid.ConnectedInteriorTester.prototype.buildEdgeRings=function(t){for(var e=new javascript.util.ArrayList,n=t.iterator();n.hasNext();){var o=n.next();if(o.isInResult()&&null==o.getEdgeRing()){var i=new jsts.operation.overlay.MaximalEdgeRing(o,this.geometryFactory);i.linkDirectedEdgesForMinimalEdgeRings();var r=i.buildMinimalRings(),s=0,a=r.length;for(s;a>s;s++)e.add(r[s])}}return e},jsts.operation.valid.ConnectedInteriorTester.prototype.visitShellInteriors=function(t,e){if(t instanceof jsts.geom.Polygon){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof jsts.geom.MultiPolygon)for(var o=t,i=0;i<o.getNumGeometries();i++){var n=o.getGeometryN(i);this.visitInteriorRing(n.getExteriorRing(),e)}},jsts.operation.valid.ConnectedInteriorTester.prototype.visitInteriorRing=function(t,e){var n=t.getCoordinates(),o=n[0],i=jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint(n,o),r=e.findEdgeInSameDirection(o,i),s=e.findEdgeEnd(r),a=null;s.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR?a=s:s.getSym().getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR&&(a=s.getSym()),this.visitLinkedDirectedEdges(a)},jsts.operation.valid.ConnectedInteriorTester.prototype.visitLinkedDirectedEdges=function(t){var e=t,n=t;do n.setVisited(!0),n=n.getNext();while(n!=e)},jsts.operation.valid.ConnectedInteriorTester.prototype.hasUnvisitedShellEdge=function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var o=n.getEdges(),i=o[0];if(i.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR)for(var r=0;r<o.length;r++)if(i=o[r],!i.isVisited())return disconnectedRingcoord=i.getCoordinate(),!0}}return!1},jsts.algorithm.InteriorPointLine=function(t){this.centroid,this.minDistance=Number.MAX_VALUE,this.interiorPoint=null,this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null==this.interiorPoint&&this.addEndpoints(t)},jsts.algorithm.InteriorPointLine.prototype.getInteriorPoint=function(){return this.interiorPoint},jsts.algorithm.InteriorPointLine.prototype.addInterior=function(t){if(t instanceof jsts.geom.LineString)this.addInteriorCoord(t.getCoordinates());else if(t instanceof jsts.geom.GeometryCollection)for(var e=0;e<t.getNumGeometries();e++)this.addInterior(t.getGeometryN(e))},jsts.algorithm.InteriorPointLine.prototype.addInteriorCoord=function(t){for(var e=1;e<t.length-1;e++)this.add(t[e])},jsts.algorithm.InteriorPointLine.prototype.addEndpoints=function(t){if(t instanceof jsts.geom.LineString)this.addEndpointsCoord(t.getCoordinates());else if(t instanceof jsts.geom.GeometryCollection)for(var e=0;e<t.getNumGeometries();e++)this.addEndpoints(t.getGeometryN(e))},jsts.algorithm.InteriorPointLine.prototype.addEndpointsCoord=function(t){this.add(t[0]),this.add(t[t.length-1])},jsts.algorithm.InteriorPointLine.prototype.add=function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new jsts.geom.Coordinate(t),this.minDistance=e)},jsts.index.chain.MonotoneChainSelectAction=function(){this.tempEnv1=new jsts.geom.Envelope,this.selectedSegment=new jsts.geom.LineSegment},jsts.index.chain.MonotoneChainSelectAction.prototype.tempEnv1=null,jsts.index.chain.MonotoneChainSelectAction.prototype.selectedSegment=null,jsts.index.chain.MonotoneChainSelectAction.prototype.select=function(t,e){t.getLineSegment(e,this.selectedSegment),this.select2(this.selectedSegment)},jsts.index.chain.MonotoneChainSelectAction.prototype.select2=function(){},jsts.algorithm.MCPointInRing=function(t){this.ring=t,this.tree=null,this.crossings=0,this.interval=new jsts.index.bintree.Interval,this.buildIndex()},jsts.algorithm.MCPointInRing.MCSelecter=function(t,e){this.parent=e,this.p=t},jsts.algorithm.MCPointInRing.MCSelecter.prototype=new jsts.index.chain.MonotoneChainSelectAction,jsts.algorithm.MCPointInRing.MCSelecter.prototype.constructor=jsts.algorithm.MCPointInRing.MCSelecter,jsts.algorithm.MCPointInRing.MCSelecter.prototype.select2=function(t){this.parent.testLineSegment.apply(this.parent,[this.p,t])},jsts.algorithm.MCPointInRing.prototype.buildIndex=function(){this.tree=new jsts.index.bintree.Bintree;for(var t=jsts.geom.CoordinateArrays.removeRepeatedPoints(this.ring.getCoordinates()),e=jsts.index.chain.MonotoneChainBuilder.getChains(t),n=0;n<e.length;n++){var o=e[n],i=o.getEnvelope();this.interval.min=i.getMinY(),this.interval.max=i.getMaxY(),this.tree.insert(this.interval,o)}},jsts.algorithm.MCPointInRing.prototype.isInside=function(t){this.crossings=0;var e=new jsts.geom.Envelope(-Number.MAX_VALUE,Number.MAX_VALUE,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),o=new jsts.algorithm.MCPointInRing.MCSelecter(t,this),i=n.iterator();i.hasNext();){var r=i.next();this.testMonotoneChain(e,o,r)}return this.crossings%2==1?!0:!1},jsts.algorithm.MCPointInRing.prototype.testMonotoneChain=function(t,e,n){n.select(t,e)},jsts.algorithm.MCPointInRing.prototype.testLineSegment=function(t,e){var n,o,i,r,s,a,l;a=e.p0,l=e.p1,o=a.x-t.x,i=a.y-t.y,r=l.x-t.x,s=l.y-t.y,(i>0&&0>=s||s>0&&0>=i)&&(n=jsts.algorithm.RobustDeterminant.signOfDet2x2(o,i,r,s)/(s-i),n>0&&this.crossings++)},jsts.operation.valid.TopologyValidationError=function(t,e){this.errorType=t,this.pt=null,null!=e&&(this.pt=e.clone())},jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL=2,jsts.operation.valid.TopologyValidationError.NESTED_HOLES=3,jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR=4,jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION=5,jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION=6,jsts.operation.valid.TopologyValidationError.NESTED_SHELLS=7,jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS=8,jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS=9,jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE=10,jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED=11,jsts.operation.valid.TopologyValidationError.prototype.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],jsts.operation.valid.TopologyValidationError.prototype.getCoordinate=function(){return this.pt},jsts.operation.valid.TopologyValidationError.prototype.getErrorType=function(){return this.errorType},jsts.operation.valid.TopologyValidationError.prototype.getMessage=function(){return this.errMsg[this.errorType]},jsts.operation.valid.TopologyValidationError.prototype.toString=function(){var t="";return null!=this.pt?(t=" at or near point "+this.pt,this.getMessage()+t):t},function(){var t=jsts.geom.Geometry,e=javascript.util.TreeSet,n=javascript.util.Arrays;jsts.geom.GeometryCollection=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.GeometryCollection.prototype=new t,jsts.geom.GeometryCollection.constructor=jsts.geom.GeometryCollection,jsts.geom.GeometryCollection.prototype.isEmpty=function(){for(var t=0,e=this.geometries.length;e>t;t++){var n=this.getGeometryN(t);if(!n.isEmpty())return!1}return!0},jsts.geom.Geometry.prototype.getArea=function(){for(var t=0,e=0,n=this.geometries.length;n>e;e++)t+=this.getGeometryN(e).getArea();return t},jsts.geom.Geometry.prototype.getLength=function(){for(var t=0,e=0,n=this.geometries.length;n>e;e++)t+=this.getGeometryN(e).getLength();return t},jsts.geom.GeometryCollection.prototype.getCoordinate=function(){return this.isEmpty()?null:this.getGeometryN(0).getCoordinate()},jsts.geom.GeometryCollection.prototype.getCoordinates=function(){for(var t=[],e=-1,n=0,o=this.geometries.length;o>n;n++)for(var i=this.getGeometryN(n),r=i.getCoordinates(),s=0;s<r.length;s++)e++,t[e]=r[s];return t},jsts.geom.GeometryCollection.prototype.getNumGeometries=function(){return this.geometries.length},jsts.geom.GeometryCollection.prototype.getGeometryN=function(t){var e=this.geometries[t];return e instanceof jsts.geom.Coordinate&&(e=new jsts.geom.Point(e)),e},jsts.geom.GeometryCollection.prototype.equalsExact=function(t,e){if(!this.isEquivalentClass(t))return!1;if(this.geometries.length!==t.geometries.length)return!1;for(var n=0,o=this.geometries.length;o>n;n++){var i=this.getGeometryN(n);if(!i.equalsExact(t.getGeometryN(n),e))return!1}return!0},jsts.geom.GeometryCollection.prototype.clone=function(){for(var t=[],e=0,n=this.geometries.length;n>e;e++)t.push(this.geometries[e].clone());return this.factory.createGeometryCollection(t)},jsts.geom.GeometryCollection.prototype.normalize=function(){for(var t=0,e=this.geometries.length;e>t;t++)this.getGeometryN(t).normalize();this.geometries.sort()},jsts.geom.GeometryCollection.prototype.compareToSameClass=function(t){var o=new e(n.asList(this.geometries)),i=new e(n.asList(t.geometries));return this.compare(o,i)},jsts.geom.GeometryCollection.prototype.apply=function(t){if(t instanceof jsts.geom.GeometryFilter||t instanceof jsts.geom.GeometryComponentFilter){t.filter(this);for(var e=0,n=this.geometries.length;n>e;e++)this.getGeometryN(e).apply(t)}else if(t instanceof jsts.geom.CoordinateFilter)for(var e=0,n=this.geometries.length;n>e;e++)this.getGeometryN(e).apply(t);else t instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.GeometryCollection.prototype.apply2=function(t){if(0!=this.geometries.length){for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(t),!t.isDone());e++);t.isGeometryChanged()}},jsts.geom.GeometryCollection.prototype.getDimension=function(){for(var t=jsts.geom.Dimension.FALSE,e=0,n=this.geometries.length;n>e;e++){var o=this.getGeometryN(e);t=Math.max(t,o.getDimension())}return t},jsts.geom.GeometryCollection.prototype.computeEnvelopeInternal=function(){for(var t=new jsts.geom.Envelope,e=0,n=this.geometries.length;n>e;e++){var o=this.getGeometryN(e);t.expandToInclude(o.getEnvelopeInternal())}return t},jsts.geom.GeometryCollection.prototype.CLASS_NAME="jsts.geom.GeometryCollection"}(),function(){jsts.geom.MultiPolygon=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.MultiPolygon.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiPolygon.constructor=jsts.geom.MultiPolygon,jsts.geom.MultiPolygon.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString(null);for(var t=[],e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],o=n.getBoundary(),i=0;i<o.getNumGeometries();i++)t.push(o.getGeometryN(i));return this.getFactory().createMultiLineString(t)},jsts.geom.MultiPolygon.prototype.equalsExact=function(t,e){return this.isEquivalentClass(t)?jsts.geom.GeometryCollection.prototype.equalsExact.call(this,t,e):!1},jsts.geom.MultiPolygon.prototype.CLASS_NAME="jsts.geom.MultiPolygon"}(),jsts.geom.CoordinateSequenceFilter=function(){},jsts.geom.CoordinateSequenceFilter.prototype.filter=jsts.abstractFunc,jsts.geom.CoordinateSequenceFilter.prototype.isDone=jsts.abstractFunc,jsts.geom.CoordinateSequenceFilter.prototype.isGeometryChanged=jsts.abstractFunc,function(){var t=function(){if(this.min=0,this.max=0,1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else 2===arguments.length&&this.init(arguments[0],arguments[1])};t.prototype.init=function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},t.prototype.getMin=function(){return this.min},t.prototype.getMax=function(){return this.max},t.prototype.getWidth=function(){return this.max-this.min},t.prototype.expandToInclude=function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},t.prototype.overlaps=function(){return 1===arguments.length?this.overlapsInterval.apply(this,arguments):this.overlapsMinMax.apply(this,arguments)},t.prototype.overlapsInterval=function(t){return this.overlaps(t.min,t.max)},t.prototype.overlapsMinMax=function(t,e){return this.min>e||this.max<t?!1:!0},t.prototype.contains=function(){var t;return arguments[0]instanceof jsts.index.bintree.Interval?(t=arguments[0],this.containsMinMax(t.min,t.max)):1===arguments.length?this.containsPoint(arguments[0]):this.containsMinMax(arguments[0],arguments[1])},t.prototype.containsMinMax=function(t,e){return t>=this.min&&e<=this.max},t.prototype.containsPoint=function(t){return t>=this.min&&t<=this.max},jsts.index.bintree.Interval=t}(),jsts.index.DoubleBits=function(){},jsts.index.DoubleBits.powerOf2=function(t){return Math.pow(2,t)},jsts.index.DoubleBits.exponent=function(t){return jsts.index.DoubleBits.CVTFWD(64,t)-1023},jsts.index.DoubleBits.CVTFWD=function(t,e){var n,o,i,r,s="",a={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},l={32:8,64:11}[t];if(r||(n=0>e||0>1/e,isFinite(e)||(r=a[t],n&&(r.d+=1<<t/4-1),o=Math.pow(2,l)-1,i=0)),!r){for(o={32:127,64:1023}[t],i=Math.abs(e);i>=2;)o++,i/=2;for(;1>i&&o>0;)o--,i*=2;0>=o&&(i/=2,s="Zero or Denormal"),32===t&&o>254&&(s="Too big for Single",r={d:n?255:127,c:128,b:0,a:0},o=Math.pow(2,l)-1,i=0)}return o},function(){var t=jsts.index.DoubleBits,e=jsts.index.bintree.Interval,n=function(t){this.pt=0,this.level=0,this.computeKey(t)};n.computeLevel=function(e){var n,o=e.getWidth();return n=t.exponent(o)+1},n.prototype.getPoint=function(){return this.pt},n.prototype.getLevel=function(){return this.level},n.prototype.getInterval=function(){return this.interval},n.prototype.computeKey=function(t){for(this.level=n.computeLevel(t),this.interval=new e,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},n.prototype.computeInterval=function(e,n){var o=t.powerOf2(e);this.pt=Math.floor(n.getMin()/o)*o,this.interval.init(this.pt,this.pt+o)},jsts.index.bintree.Key=n}(),jsts.operation.buffer.SubgraphDepthLocater=function(t){this.subgraphs=[],this.seg=new jsts.geom.LineSegment,this.subgraphs=t},jsts.operation.buffer.SubgraphDepthLocater.prototype.subgraphs=null,jsts.operation.buffer.SubgraphDepthLocater.prototype.seg=null,jsts.operation.buffer.SubgraphDepthLocater.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);if(0===e.length)return 0;e.sort();var n=e[0];return n.leftDepth},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments=function(t){if(3===arguments.length)return void this.findStabbedSegments2.apply(this,arguments);for(var e=[],n=0;n<this.subgraphs.length;n++){var o=this.subgraphs[n],i=o.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments2(t,o.getDirectedEdges(),e)}return e},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments2=function(t,e,n){if(arguments[1]instanceof jsts.geomgraph.DirectedEdge)return void this.findStabbedSegments3(t,e,n);for(var o=e.iterator();o.hasNext();){var i=o.next();i.isForward()&&this.findStabbedSegments3(t,i,n)}},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments3=function(t,e,n){for(var o=e.getEdge().getCoordinates(),i=0;i<o.length-1;i++){this.seg.p0=o[i],this.seg.p1=o[i+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var r=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(r<t.x||this.seg.isHorizontal()||t.y<this.seg.p0.y||t.y>this.seg.p1.y||jsts.algorithm.CGAlgorithms.computeOrientation(this.seg.p0,this.seg.p1,t)===jsts.algorithm.CGAlgorithms.RIGHT)){var s=e.getDepth(jsts.geomgraph.Position.LEFT);this.seg.p0.equals(o[i])||(s=e.getDepth(jsts.geomgraph.Position.RIGHT));var a=new jsts.operation.buffer.SubgraphDepthLocater.DepthSegment(this.seg,s);n.push(a)}}},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment=function(t,e){this.upwardSeg=new jsts.geom.LineSegment(t),this.leftDepth=e},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.upwardSeg=null,jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.leftDepth=null,jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareTo=function(t){var e=t,n=this.upwardSeg.orientationIndex(e.upwardSeg);return 0===n&&(n=-1*e.upwardSeg.orientationIndex(upwardSeg)),0!==n?n:this.compareX(this.upwardSeg,e.upwardSeg)},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},jsts.noding.snapround.HotPixel=function(t,e,n){this.corner=[],this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,1!==this.scaleFactor&&(this.pt=new jsts.geom.Coordinate(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new jsts.geom.Coordinate,this.p1Scaled=new jsts.geom.Coordinate),this.initCorners(this.pt)},jsts.noding.snapround.HotPixel.prototype.li=null,jsts.noding.snapround.HotPixel.prototype.pt=null,jsts.noding.snapround.HotPixel.prototype.originalPt=null,jsts.noding.snapround.HotPixel.prototype.ptScaled=null,jsts.noding.snapround.HotPixel.prototype.p0Scaled=null,jsts.noding.snapround.HotPixel.prototype.p1Scaled=null,jsts.noding.snapround.HotPixel.prototype.scaleFactor=void 0,jsts.noding.snapround.HotPixel.prototype.minx=void 0,jsts.noding.snapround.HotPixel.prototype.maxx=void 0,jsts.noding.snapround.HotPixel.prototype.miny=void 0,jsts.noding.snapround.HotPixel.prototype.maxy=void 0,jsts.noding.snapround.HotPixel.prototype.corner=null,jsts.noding.snapround.HotPixel.prototype.safeEnv=null,jsts.noding.snapround.HotPixel.prototype.getCoordinate=function(){return this.originalPt},jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR=.75,jsts.noding.snapround.HotPixel.prototype.getSafeEnvelope=function(){if(null===this.safeEnv){var t=jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new jsts.geom.Envelope(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},jsts.noding.snapround.HotPixel.prototype.initCorners=function(t){var e=.5;this.minx=t.x-e,this.maxx=t.x+e,this.miny=t.y-e,this.maxy=t.y+e,this.corner[0]=new jsts.geom.Coordinate(this.maxx,this.maxy),this.corner[1]=new jsts.geom.Coordinate(this.minx,this.maxy),this.corner[2]=new jsts.geom.Coordinate(this.minx,this.miny),this.corner[3]=new jsts.geom.Coordinate(this.maxx,this.miny)},jsts.noding.snapround.HotPixel.prototype.scale=function(t){return Math.round(t*this.scaleFactor)},jsts.noding.snapround.HotPixel.prototype.intersects=function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},jsts.noding.snapround.HotPixel.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},jsts.noding.snapround.HotPixel.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),o=Math.max(t.x,e.x),i=Math.min(t.y,e.y),r=Math.max(t.y,e.y),s=this.maxx<n||this.minx>o||this.maxy<i||this.miny>r;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return jsts.util.Assert.isTrue(!(s&&a),"Found bad envelope test"),a},jsts.noding.snapround.HotPixel.prototype.intersectsToleranceSquare=function(t,e){var n=!1,o=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(o=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()?!0:n&&o?!0:t.equals(this.pt)?!0:e.equals(this.pt)?!0:!1)))},jsts.noding.snapround.HotPixel.prototype.intersectsPixelClosure=function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.hasIntersection()?!0:!1)))},jsts.noding.snapround.HotPixel.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),o=t.getCoordinate(e+1);return this.intersects(n,o)?(t.addIntersection(this.getCoordinate(),e),!0):!1},jsts.operation.buffer.BufferInputLineSimplifier=function(t){this.inputLine=t},jsts.operation.buffer.BufferInputLineSimplifier.simplify=function(t,e){var n=new jsts.operation.buffer.BufferInputLineSimplifier(t);return n.simplify(e)},jsts.operation.buffer.BufferInputLineSimplifier.INIT=0,jsts.operation.buffer.BufferInputLineSimplifier.DELETE=1,jsts.operation.buffer.BufferInputLineSimplifier.KEEP=1,jsts.operation.buffer.BufferInputLineSimplifier.prototype.inputLine=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.distanceTol=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeleted=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.angleOrientation=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.operation.buffer.BufferInputLineSimplifier.prototype.simplify=function(t){this.distanceTol=Math.abs(t),0>t&&(this.angleOrientation=jsts.algorithm.CGAlgorithms.CLOCKWISE),this.isDeleted=[],this.isDeleted.length=this.inputLine.length;var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},jsts.operation.buffer.BufferInputLineSimplifier.prototype.deleteShallowConcavities=function(){for(var t=1,e=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),o=!1;n<this.inputLine.length;){var i=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=jsts.operation.buffer.BufferInputLineSimplifier.DELETE,i=!0,o=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return o},jsts.operation.buffer.BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===jsts.operation.buffer.BufferInputLineSimplifier.DELETE;)e++;return e},jsts.operation.buffer.BufferInputLineSimplifier.prototype.collapseLine=function(){for(var t=[],e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==jsts.operation.buffer.BufferInputLineSimplifier.DELETE&&t.push(this.inputLine[e]);return t},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeletable=function(t,e,n,o){var i=this.inputLine[t],r=this.inputLine[e],s=this.inputLine[n];return this.isConcave(i,r,s)&&this.isShallow(i,r,s,o)?this.isShallowSampled(i,r,t,n,o):!1},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowConcavity=function(t,e,n,o){var i=jsts.algorithm.CGAlgorithms.computeOrientation(t,e,n),r=i===this.angleOrientation;if(!r)return!1;var s=jsts.algorithm.CGAlgorithms.distancePointLine(e,t,n);return o>s},jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK=10,jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowSampled=function(t,e,n,o,i){var r=parseInt((o-n)/jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK);0>=r&&(r=1);for(var s=n;o>s;s+=r)if(!this.isShallow(t,e,this.inputLine[s],i))return!1;return!0},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallow=function(t,e,n,o){var i=jsts.algorithm.CGAlgorithms.distancePointLine(e,t,n);return o>i},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isConcave=function(t,e,n){var o=jsts.algorithm.CGAlgorithms.computeOrientation(t,e,n),i=o===this.angleOrientation;return i},jsts.index.ArrayListVisitor=function(){this.items=[]},jsts.index.ArrayListVisitor.prototype.visitItem=function(t){this.items.push(t)},jsts.index.ArrayListVisitor.prototype.getItems=function(){return this.items},jsts.geom.CoordinateList=function(t,e){javascript.util.ArrayList.apply(this,arguments),e=void 0===e?!0:e,void 0!==t&&this.add(t,e)},jsts.geom.CoordinateList.prototype=new javascript.util.ArrayList,jsts.geom.CoordinateList.prototype.add=function(){return arguments.length>1?this.addCoordinates.apply(this,arguments):javascript.util.ArrayList.prototype.add.apply(this,arguments)},jsts.geom.CoordinateList.prototype.addCoordinates=function(t,e,n){if(t instanceof jsts.geom.Coordinate)return this.addCoordinate.apply(this,arguments);if("number"==typeof t)return this.insertCoordinate.apply(this,arguments);if(n=n||!0)for(var o=0;o<t.length;o++)this.addCoordinate(t[o],e);else for(var o=t.length-1;o>=0;o--)this.addCoordinate(t[o],e);return!0},jsts.geom.CoordinateList.prototype.addCoordinate=function(t,e){if(!e&&this.size()>=1){var n=this.get(this.size()-1);if(n.equals2D(t))return}this.add(t)},jsts.geom.CoordinateList.prototype.insertCoordinate=function(t,e,n){if(!n){var o=t>0?t-1:-1;if(-1!==o&&this.get(o).equals2D(e))return;var i=t<this.size()-1?t+1:-1;if(-1!==i&&this.get(i).equals2D(e))return}this.array.splice(t,0,e)},jsts.geom.CoordinateList.prototype.closeRing=function(){this.size()>0&&this.addCoordinate(new jsts.geom.Coordinate(this.get(0)),!1)},jsts.geom.CoordinateList.prototype.toArray=function(){var t,e,n;for(t=0,e=this.size(),n=[],t;e>t;t++)n[t]=this.get(t);return n},jsts.geom.CoordinateList.prototype.toCoordinateArray=function(){return this.toArray()},jsts.operation.buffer.OffsetSegmentGenerator=function(t,e,n){this.seg0=new jsts.geom.LineSegment,this.seg1=new jsts.geom.LineSegment,this.offset0=new jsts.geom.LineSegment,this.offset1=new jsts.geom.LineSegment,this.precisionModel=t,this.bufParams=e,this.li=new jsts.algorithm.RobustLineIntersector,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),this.bufParams.getQuadrantSegments()>=8&&this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_ROUND&&(this.closingSegLengthFactor=jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR=80,jsts.operation.buffer.OffsetSegmentGenerator.prototype.maxCurveSegmentError=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.filletAngleQuantum=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.closingSegLengthFactor=1,jsts.operation.buffer.OffsetSegmentGenerator.prototype.segList=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.distance=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.precisionModel=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.bufParams=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.li=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s2=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.side=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=!1,jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function(){return this.hasNarrowConcaveAngle
},jsts.operation.buffer.OffsetSegmentGenerator.prototype.init=function(t){this.distance=t,this.maxCurveSegmentError=this.distance*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new jsts.operation.buffer.OffsetSegmentString,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(this.distance*jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.initSideSegments=function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.getCoordinates=function(){return this.segList.getCoordinates()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.closeRing=function(){this.segList.closeRing()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addSegments=function(t,e){this.segList.addPts(t,e)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFirstSegment=function(){this.segList.addPt(this.offset1.p0)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLastSegment=function(){this.segList.addPt(this.offset1.p1)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addNextSegment=function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),!this.s1.equals(this.s2)){var n=jsts.algorithm.CGAlgorithms.computeOrientation(this.s0,this.s1,this.s2),o=n===jsts.algorithm.CGAlgorithms.CLOCKWISE&&this.side===jsts.geomgraph.Position.LEFT||n===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE&&this.side===jsts.geomgraph.Position.RIGHT;0==n?this.addCollinear(e):o?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addCollinear=function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();e>=2&&(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL||this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addOutsideTurn=function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR?void this.segList.addPt(this.offset0.p1):void(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addInsideTurn=function(){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this.hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var t=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(t);var e=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(e)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.computeOffsetSegment=function(t,e,n,o){var i=e===jsts.geomgraph.Position.LEFT?1:-1,r=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(r*r+s*s),l=i*n*r/a,p=i*n*s/a;o.p0.x=t.p0.x-p,o.p0.y=t.p0.y+l,o.p1.x=t.p1.x-p,o.p1.y=t.p1.y+l},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLineEndCap=function(t,e){var n=new jsts.geom.LineSegment(t,e),o=new jsts.geom.LineSegment;this.computeOffsetSegment(n,jsts.geomgraph.Position.LEFT,this.distance,o);var i=new jsts.geom.LineSegment;this.computeOffsetSegment(n,jsts.geomgraph.Position.RIGHT,this.distance,i);var r=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,r);switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:this.segList.addPt(o.p1),this.addFillet(e,a+Math.PI/2,a-Math.PI/2,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance),this.segList.addPt(i.p1);break;case jsts.operation.buffer.BufferParameters.CAP_FLAT:this.segList.addPt(o.p1),this.segList.addPt(i.p1);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:var l=new jsts.geom.Coordinate;l.x=Math.abs(this.distance)*Math.cos(a),l.y=Math.abs(this.distance)*Math.sin(a);var p=new jsts.geom.Coordinate(o.p1.x+l.x,o.p1.y+l.y),u=new jsts.geom.Coordinate(i.p1.x+l.x,i.p1.y+l.y);this.segList.addPt(p),this.segList.addPt(u)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addMitreJoin=function(t,e,n,o){var i=!0,r=null;try{r=jsts.algorithm.HCoordinate.intersection(e.p0,e.p1,n.p0,n.p1);var s=0>=o?1:r.distance(t)/Math.abs(o);s>this.bufParams.getMitreLimit()&&(this.isMitreWithinLimit=!1)}catch(a){a instanceof jsts.error.NotRepresentableError&&(r=new jsts.geom.Coordinate(0,0),this.isMitreWithinLimit=!1)}i?this.segList.addPt(r):this.addLimitedMitreJoin(e,n,o,bufParams.getMitreLimit())},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function(t,e,n,o){var i=this.seg0.p1,r=jsts.algorithm.Angle.angle(i,this.seg0.p0),s=(jsts.algorithm.Angle.angle(i,this.seg1.p1),jsts.algorithm.Angle.angleBetweenOriented(this.seg0.p0,i,this.seg1.p1)),a=s/2,l=jsts.algorithm.Angle.normalize(r+a),p=jsts.algorithm.Angle.normalize(l+Math.PI),u=o*n,h=u*Math.abs(Math.sin(a)),d=n-h,c=i.x+u*Math.cos(p),g=i.y+u*Math.sin(p),f=new jsts.geom.Coordinate(c,g),m=new jsts.geom.LineSegment(i,f),y=m.pointAlongOffset(1,d),v=m.pointAlongOffset(1,-d);this.side==jsts.geomgraph.Position.LEFT?(this.segList.addPt(y),this.segList.addPt(v)):(this.segList.addPt(v),this.segList.addPt(y))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addBevelJoin=function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet=function(t,e,n,o,i){if(!(n instanceof jsts.geom.Coordinate))return void this.addFillet2.apply(this,arguments);var r=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,r),l=n.x-t.x,p=n.y-t.y,u=Math.atan2(p,l);o===jsts.algorithm.CGAlgorithms.CLOCKWISE?u>=a&&(a+=2*Math.PI):a>=u&&(a-=2*Math.PI),this.segList.addPt(e),this.addFillet(t,a,u,o,i),this.segList.addPt(n)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet2=function(t,e,n,o,i){var r=o===jsts.algorithm.CGAlgorithms.CLOCKWISE?-1:1,s=Math.abs(e-n),a=parseInt(s/this.filletAngleQuantum+.5);if(!(1>a)){var l,p;l=0,p=s/a;for(var u=l,h=new jsts.geom.Coordinate;s>u;){var d=e+r*u;h.x=t.x+i*Math.cos(d),h.y=t.y+i*Math.sin(d),this.segList.addPt(h),u+=p}}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.createCircle=function(t){var e=new jsts.geom.Coordinate(t.x+this.distance,t.y);this.segList.addPt(e),this.addFillet(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.createSquare=function(t){this.segList.addPt(new jsts.geom.Coordinate(t.x+distance,t.y+distance)),this.segList.addPt(new jsts.geom.Coordinate(t.x+distance,t.y-distance)),this.segList.addPt(new jsts.geom.Coordinate(t.x-distance,t.y-distance)),this.segList.addPt(new jsts.geom.Coordinate(t.x-distance,t.y+distance)),this.segList.closeRing()},jsts.operation.overlay.MaximalEdgeRing=function(t,e){jsts.geomgraph.EdgeRing.call(this,t,e)},jsts.operation.overlay.MaximalEdgeRing.prototype=new jsts.geomgraph.EdgeRing,jsts.operation.overlay.MaximalEdgeRing.constructor=jsts.operation.overlay.MaximalEdgeRing,jsts.operation.overlay.MaximalEdgeRing.prototype.getNext=function(t){return t.getNext()},jsts.operation.overlay.MaximalEdgeRing.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},jsts.operation.overlay.MaximalEdgeRing.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!=this.startDe)},jsts.operation.overlay.MaximalEdgeRing.prototype.buildMinimalRings=function(){var t=[],e=this.startDe;do{if(null===e.getMinEdgeRing()){var n=new jsts.operation.overlay.MinimalEdgeRing(e,this.geometryFactory);t.push(n)}e=e.getNext()}while(e!=this.startDe);return t},jsts.algorithm.CentroidPoint=function(){this.centSum=new jsts.geom.Coordinate},jsts.algorithm.CentroidPoint.prototype.ptCount=0,jsts.algorithm.CentroidPoint.prototype.centSum=null,jsts.algorithm.CentroidPoint.prototype.add=function(t){if(t instanceof jsts.geom.Point)this.add2(t.getCoordinate());else if(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},jsts.algorithm.CentroidPoint.prototype.add2=function(t){this.ptCount+=1,this.centSum.x+=t.x,this.centSum.y+=t.y},jsts.algorithm.CentroidPoint.prototype.getCentroid=function(){var t=new jsts.geom.Coordinate;return t.x=this.centSum.x/this.ptCount,t.y=this.centSum.y/this.ptCount,t},jsts.operation.distance.ConnectedElementLocationFilter=function(t){this.locations=t},jsts.operation.distance.ConnectedElementLocationFilter.prototype=new jsts.geom.GeometryFilter,jsts.operation.distance.ConnectedElementLocationFilter.prototype.locations=null,jsts.operation.distance.ConnectedElementLocationFilter.getLocations=function(t){var e=[];return t.apply(new jsts.operation.distance.ConnectedElementLocationFilter(e)),e},jsts.operation.distance.ConnectedElementLocationFilter.prototype.filter=function(t){(t instanceof jsts.geom.Point||t instanceof jsts.geom.LineString||t instanceof jsts.geom.Polygon)&&this.locations.push(new jsts.operation.distance.GeometryLocation(t,0,t.getCoordinate()))},function(){var t=javascript.util.ArrayList;jsts.operation.relate.EdgeEndBuilder=function(){},jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds=function(e){if(2==arguments.length)return void this.computeEdgeEnds2.apply(this,arguments);for(var n=new t,o=e;o.hasNext();){var i=o.next();this.computeEdgeEnds2(i,n)}return n},jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds2=function(t,e){var n=t.getEdgeIntersectionList();n.addEndpoints();var o=n.iterator(),i=null,r=null;if(o.hasNext()){var s=o.next();do i=r,r=s,s=null,o.hasNext()&&(s=o.next()),null!==r&&(this.createEdgeEndForPrev(t,e,r,i),this.createEdgeEndForNext(t,e,r,s));while(null!==r)}},jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForPrev=function(t,e,n,o){var i=n.segmentIndex;if(0===n.dist){if(0===i)return;i--}var r=t.getCoordinate(i);null!==o&&o.segmentIndex>=i&&(r=o.coord);var s=new jsts.geomgraph.Label(t.getLabel());s.flip();var a=new jsts.geomgraph.EdgeEnd(t,n.coord,r,s);e.add(a)},jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForNext=function(t,e,n,o){var i=n.segmentIndex+1;if(!(i>=t.getNumPoints()&&null===o)){var r=t.getCoordinate(i);null!==o&&o.segmentIndex===n.segmentIndex&&(r=o.coord);var s=new jsts.geomgraph.EdgeEnd(t,n.coord,r,new jsts.geomgraph.Label(t.getLabel()));e.add(s)}}}(),function(){jsts.io.GeoJSONParser=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"]},jsts.io.GeoJSONParser.prototype.read=function(t){var e;e="string"==typeof t?JSON.parse(t):t;var n=e.type;if(!this.parse[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!=this.geometryTypes.indexOf(n)?this.parse[n].apply(this,[e.coordinates]):"GeometryCollection"===n?this.parse[n].apply(this,[e.geometries]):this.parse[n].apply(this,[e])},jsts.io.GeoJSONParser.prototype.parse={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var o=t.geometry.type;if(!this.parse[o])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var o=t[n];e.push(new jsts.geom.Coordinate(o[0],o[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new jsts.geom.Coordinate(t[0],t[1]),new jsts.geom.Coordinate(t[2],t[1]),new jsts.geom.Coordinate(t[2],t[3]),new jsts.geom.Coordinate(t[0],t[3]),new jsts.geom.Coordinate(t[0],t[1])])},Point:function(t){var e=new jsts.geom.Coordinate(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.parse.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=this.parse.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.parse.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=this.parse.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),o=[],i=1;i<t.length;++i){var r=t[i],s=this.parse.coordinates.apply(this,[r]),a=this.geometryFactory.createLinearRing(s);o.push(a)}return this.geometryFactory.createPolygon(n,o)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var o=t[n];e.push(this.parse.Polygon.apply(this,[o]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var o=t[n];e.push(this.read(o))}return this.geometryFactory.createGeometryCollection(e)}},jsts.io.GeoJSONParser.prototype.write=function(t){var e=t.CLASS_NAME.slice(10);if(!this.extract[e])throw new Error("Geometry is not supported");return this.extract[e].apply(this,[t])},jsts.io.GeoJSONParser.prototype.extract={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=this.extract.coordinate.apply(this,[t.coordinate]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var o=t.geometries[n],i=this.extract.Point.apply(this,[o]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=0;n<t.points.length;++n){var o=t.points[n];e.push(this.extract.coordinate.apply(this,[o]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var o=t.geometries[n],i=this.extract.LineString.apply(this,[o]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=this.extract.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var o=0;o<t.holes.length;++o){var i=t.holes[o],r=this.extract.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var o=t.geometries[n],i=this.extract.Polygon.apply(this,[o]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var o=t.geometries[n],i=o.CLASS_NAME.slice(10);e.push(this.extract[i].apply(this,[o]))}return{type:"GeometryCollection",geometries:e}}}}(),jsts.triangulate.quadedge.Vertex=function(){1===arguments.length?this.initFromCoordinate(arguments[0]):this.initFromXY(arguments[0],arguments[1])},jsts.triangulate.quadedge.Vertex.LEFT=0,jsts.triangulate.quadedge.Vertex.RIGHT=1,jsts.triangulate.quadedge.Vertex.BEYOND=2,jsts.triangulate.quadedge.Vertex.BEHIND=3,jsts.triangulate.quadedge.Vertex.BETWEEN=4,jsts.triangulate.quadedge.Vertex.ORIGIN=5,jsts.triangulate.quadedge.Vertex.DESTINATION=6,jsts.triangulate.quadedge.Vertex.prototype.initFromXY=function(t,e){this.p=new jsts.geom.Coordinate(t,e)},jsts.triangulate.quadedge.Vertex.prototype.initFromCoordinate=function(t){this.p=new jsts.geom.Coordinate(t)},jsts.triangulate.quadedge.Vertex.prototype.getX=function(){return this.p.x},jsts.triangulate.quadedge.Vertex.prototype.getY=function(){return this.p.y},jsts.triangulate.quadedge.Vertex.prototype.getZ=function(){return this.p.z},jsts.triangulate.quadedge.Vertex.prototype.setZ=function(t){this.p.z=t},jsts.triangulate.quadedge.Vertex.prototype.getCoordinate=function(){return this.p},jsts.triangulate.quadedge.Vertex.prototype.toString=function(){return"POINT ("+this.p.x+" "+this.p.y+")"},jsts.triangulate.quadedge.Vertex.prototype.equals=function(){return 1===arguments.length?this.equalsExact(arguments[0]):this.equalsWithTolerance(arguments[0],arguments[1])},jsts.triangulate.quadedge.Vertex.prototype.equalsExact=function(t){return this.p.x===t.getX()&&this.p.y===t.getY()},jsts.triangulate.quadedge.Vertex.prototype.equalsWithTolerance=function(t,e){return this.p.distance(t.getCoordinate())<e},jsts.triangulate.quadedge.Vertex.prototype.classify=function(t,e){var n,o,i,r;return n=this,o=e.sub(t),i=n.sub(t),r=o.crossProduct(i),r>0?jsts.triangulate.quadedge.Vertex.LEFT:0>r?jsts.triangulate.quadedge.Vertex.RIGHT:o.getX()*i.getX()<0||o.getY()*i.getY()<0?jsts.triangulate.quadedge.Vertex.BEHIND:o.magn()<i.magn()?jsts.triangulate.quadedge.Vertex.BEYOND:t.equals(n)?jsts.triangulate.quadedge.Vertex.ORIGIN:e.equals(n)?jsts.triangulate.quadedge.Vertex.DESTINATION:jsts.triangulate.quadedge.Vertex.BETWEEN},jsts.triangulate.quadedge.Vertex.prototype.crossProduct=function(t){return this.p.x*t.getY()-this.p.y*t.getX()},jsts.triangulate.quadedge.Vertex.prototype.dot=function(t){return this.p.x*t.getX()+this.p.y*t.getY()},jsts.triangulate.quadedge.Vertex.prototype.times=function(t){return new jsts.triangulate.quadedge.Vertex(t*this.p.x,t*this.p.y)},jsts.triangulate.quadedge.Vertex.prototype.sum=function(t){return new jsts.triangulate.quadedge.Vertex(this.p.x+t.getX(),this.p.y+t.getY())},jsts.triangulate.quadedge.Vertex.prototype.sub=function(t){return new jsts.triangulate.quadedge.Vertex(this.p.x-t.getX(),this.p.y-t.getY())},jsts.triangulate.quadedge.Vertex.prototype.magn=function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},jsts.triangulate.quadedge.Vertex.prototype.cross=function(){return new Vertex(this.p.y,-this.p.x)},jsts.triangulate.quadedge.Vertex.prototype.isInCircle=function(t,e,n){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust(t.p,e.p,n.p,this.p)},jsts.triangulate.quadedge.Vertex.prototype.isCCW=function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},jsts.triangulate.quadedge.Vertex.prototype.rightOf=function(t){return this.isCCW(t.dest(),t.orig())},jsts.triangulate.quadedge.Vertex.prototype.leftOf=function(t){return this.isCCW(t.orig(),t.dest())},jsts.triangulate.quadedge.Vertex.prototype.bisector=function(t,e){var n,o,i,r;return n=e.getX()-t.getX(),o=e.getY()-t.getY(),i=new jsts.algorithm.HCoordinate(t.getX()+n/2,t.getY()+o/2,1),r=new jsts.algorithm.HCoordinate(t.getX()-o+n/2,t.getY()+n+o/2,1),new jsts.algorithm.HCoordinate(i,r)},jsts.triangulate.quadedge.Vertex.prototype.distance=function(t,e){return t.p.distance(e.p)},jsts.triangulate.quadedge.Vertex.prototype.circumRadiusRatio=function(t,e){var n,o,i,r;return n=this.circleCenter(t,e),o=this.distance(n,t),i=this.distance(this,t),r=this.distance(t,e),i>r&&(i=r),r=this.distance(e,this),i>r&&(i=r),o/i},jsts.triangulate.quadedge.Vertex.prototype.midPoint=function(t){var e,n;return e=(this.p.x+t.getX())/2,n=(this.p.y+t.getY())/2,new jsts.triangulate.quadedge.Vertex(e,n)},jsts.triangulate.quadedge.Vertex.prototype.circleCenter=function(t,e){var n,o,i,r,s;n=new jsts.triangulate.quadedge.Vertex(this.getX(),this.getY()),o=this.bisector(n,t),i=this.bisector(t,e),r=new jsts.algorithm.HCoordinate(o,i),s=null;try{s=new jsts.triangulate.quadedge.Vertex(r.getX(),r.getY())}catch(a){}return s},jsts.operation.valid.IsValidOp=function(t){this.parentGeometry=t,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null},jsts.operation.valid.IsValidOp.isValid=function(t){if(arguments[0]instanceof jsts.geom.Coordinate)return isNaN(t.x)?!1:isFinite(t.x)||isNaN(t.x)?isNaN(t.y)?!1:isFinite(t.y)||isNaN(t.y)?!0:!1:!1;var e=new jsts.operation.valid.IsValidOp(t);return e.isValid()},jsts.operation.valid.IsValidOp.findPtNotNode=function(t,e,n){for(var o=n.findEdge(e),i=o.getEdgeIntersectionList(),r=0;r<t.length;r++){var s=t[r];if(!i.isIntersection(s))return s}return null},jsts.operation.valid.IsValidOp.prototype.setSelfTouchingRingFormingHoleValid=function(t){this.isSelfTouchingRingFormingHoleValid=t},jsts.operation.valid.IsValidOp.prototype.isValid=function(){return this.checkValid(this.parentGeometry),null==this.validErr},jsts.operation.valid.IsValidOp.prototype.getValidationError=function(){return this.checkValid(this.parentGeometry),this.validErr},jsts.operation.valid.IsValidOp.prototype.checkValid=function(t){if(this.validErr=null,!t.isEmpty())if(t instanceof jsts.geom.Point)this.checkValidPoint(t);else if(t instanceof jsts.geom.MultiPoint)this.checkValidMultiPoint(t);else if(t instanceof jsts.geom.LinearRing)this.checkValidLinearRing(t);else if(t instanceof jsts.geom.LineString)this.checkValidLineString(t);else if(t instanceof jsts.geom.Polygon)this.checkValidPolygon(t);else if(t instanceof jsts.geom.MultiPolygon)this.checkValidMultiPolygon(t);else{if(!(t instanceof jsts.geom.GeometryCollection))throw t.constructor;this.checkValidGeometryCollection(t)}},jsts.operation.valid.IsValidOp.prototype.checkValidPoint=function(t){this.checkInvalidCoordinates(t.getCoordinates())},jsts.operation.valid.IsValidOp.prototype.checkValidMultiPoint=function(t){this.checkInvalidCoordinates(t.getCoordinates())},jsts.operation.valid.IsValidOp.prototype.checkValidLineString=function(t){if(this.checkInvalidCoordinates(t.getCoordinates()),null==this.validErr){var e=new jsts.geomgraph.GeometryGraph(0,t);this.checkTooFewPoints(e)}},jsts.operation.valid.IsValidOp.prototype.checkValidLinearRing=function(t){if(this.checkInvalidCoordinates(t.getCoordinates()),null==this.validErr&&(this.checkClosedRing(t),null==this.validErr)){var e=new jsts.geomgraph.GeometryGraph(0,t);if(this.checkTooFewPoints(e),null==this.validErr){var n=new jsts.algorithm.RobustLineIntersector;e.computeSelfNodes(n,!0),this.checkNoSelfIntersectingRings(e)}}},jsts.operation.valid.IsValidOp.prototype.checkValidPolygon=function(t){if(this.checkInvalidCoordinates(t),null==this.validErr&&(this.checkClosedRings(t),null==this.validErr)){var e=new jsts.geomgraph.GeometryGraph(0,t);this.checkTooFewPoints(e),null==this.validErr&&(this.checkConsistentArea(e),null==this.validErr&&(this.isSelfTouchingRingFormingHoleValid||(this.checkNoSelfIntersectingRings(e),null==this.validErr))&&(this.checkHolesInShell(t,e),null==this.validErr&&(this.checkHolesNotNested(t,e),null==this.validErr&&this.checkConnectedInteriors(e))))}},jsts.operation.valid.IsValidOp.prototype.checkValidMultiPolygon=function(t){for(var e=t.getNumGeometries(),n=0;e>n;n++){var o=t.getGeometryN(n);if(this.checkInvalidCoordinates(o),null!=this.validErr)return;if(this.checkClosedRings(o),null!=this.validErr)return}var i=new jsts.geomgraph.GeometryGraph(0,t);if(this.checkTooFewPoints(i),null==this.validErr&&(this.checkConsistentArea(i),null==this.validErr&&(this.isSelfTouchingRingFormingHoleValid||(this.checkNoSelfIntersectingRings(i),null==this.validErr)))){for(var n=0;n<t.getNumGeometries();n++){var o=t.getGeometryN(n);if(this.checkHolesInShell(o,i),null!=this.validErr)return}for(var n=0;n<t.getNumGeometries();n++){var o=t.getGeometryN(n);if(this.checkHolesNotNested(o,i),null!=this.validErr)return}this.checkShellsNotNested(t,i),null==this.validErr&&this.checkConnectedInteriors(i)}},jsts.operation.valid.IsValidOp.prototype.checkValidGeometryCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(this.checkValid(n),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkInvalidCoordinates=function(t){if(t instanceof jsts.geom.Polygon){var e=t;if(this.checkInvalidCoordinates(e.getExteriorRing().getCoordinates()),null!=this.validErr)return;for(var n=0;n<e.getNumInteriorRing();n++)if(this.checkInvalidCoordinates(e.getInteriorRingN(n).getCoordinates()),null!=this.validErr)return}else for(var o=t,n=0;n<o.length;n++)if(!jsts.operation.valid.IsValidOp.isValid(o[n]))return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE,o[n]))},jsts.operation.valid.IsValidOp.prototype.checkClosedRings=function(t){if(this.checkClosedRing(t.getExteriorRing()),null==this.validErr)for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!=this.validErr)return},jsts.operation.valid.IsValidOp.prototype.checkClosedRing=function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED,e)}},jsts.operation.valid.IsValidOp.prototype.checkTooFewPoints=function(t){return t.hasTooFewPoints?void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS,t.getInvalidPoint())):void 0},jsts.operation.valid.IsValidOp.prototype.checkConsistentArea=function(t){var e=new jsts.operation.valid.ConsistentAreaTester(t),n=e.isNodeConsistentArea();return n?void(e.hasDuplicateRings()&&(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS,e.getInvalidPoint()))):void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION,e.getInvalidPoint()))},jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRings=function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRing=function(t){for(var e=[],n=!0,o=t.iterator();o.hasNext();){var i=o.next();if(n)n=!1;else{if(e.indexOf(i.coord)>=0)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION,i.coord));e.push(i.coord)}}},jsts.operation.valid.IsValidOp.prototype.checkHolesInShell=function(t,e){for(var n=t.getExteriorRing(),o=new jsts.algorithm.MCPointInRing(n),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i),s=jsts.operation.valid.IsValidOp.findPtNotNode(r.getCoordinates(),n,e);if(null==s)return;var a=!o.isInside(s);if(a)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL,s))}},jsts.operation.valid.IsValidOp.prototype.checkHolesNotNested=function(t,e){for(var n=new jsts.operation.valid.IndexedNestedRingTester(e),o=0;o<t.getNumInteriorRing();o++){var i=t.getInteriorRingN(o);n.add(i)}var r=n.isNonNested();r||(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_HOLES,n.getNestedPoint()))},jsts.operation.valid.IsValidOp.prototype.checkShellsNotNested=function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var o=t.getGeometryN(n),i=o.getExteriorRing(),r=0;r<t.getNumGeometries();r++)if(n!=r){var s=t.getGeometryN(r);if(this.checkShellNotNested(i,s,e),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkShellNotNested=function(t,e,n){var o=t.getCoordinates(),i=e.getExteriorRing(),r=i.getCoordinates(),s=jsts.operation.valid.IsValidOp.findPtNotNode(o,i,n);if(null!=s){var a=jsts.algorithm.CGAlgorithms.isPointInRing(s,r);if(a){if(e.getNumInteriorRing()<=0)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,s));for(var l=null,p=0;p<e.getNumInteriorRing();p++){var u=e.getInteriorRingN(p);if(l=this.checkShellInsideHole(t,u,n),null==l)return}this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,l)}}},jsts.operation.valid.IsValidOp.prototype.checkShellInsideHole=function(t,e,n){var o=t.getCoordinates(),i=e.getCoordinates(),r=jsts.operation.valid.IsValidOp.findPtNotNode(o,e,n);if(null!=r){var s=jsts.algorithm.CGAlgorithms.isPointInRing(r,i);if(!s)return r}var a=jsts.operation.valid.IsValidOp.findPtNotNode(i,t,n);if(null!=a){var l=jsts.algorithm.CGAlgorithms.isPointInRing(a,o);return l?a:null}return jsts.util.Assert.shouldNeverReachHere("points in shell and hole appear to be equal"),null},jsts.operation.valid.IsValidOp.prototype.checkConnectedInteriors=function(t){var e=new jsts.operation.valid.ConnectedInteriorTester(t);e.isInteriorsConnected()||(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR,e.getCoordinate()))},jsts.algorithm.RobustDeterminant=function(){},jsts.algorithm.RobustDeterminant.signOfDet2x2=function(t,e,n,o){var i,r,s,a;if(a=0,i=1,0===t||0===o)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return o>0?t>0?i:-i:t>0?-i:i;if(e>0?o>0?e>o&&(i=-i,r=t,t=n,n=r,r=e,e=o,o=r):-o>=e?(i=-i,n=-n,o=-o):(r=t,t=-n,n=r,r=e,e=-o,o=r):o>0?o>=-e?(i=-i,t=-t,e=-e):(r=-t,t=n,n=r,r=-e,e=o,o=r):e>=o?(t=-t,e=-e,n=-n,o=-o):(i=-i,r=-t,t=-n,n=r,r=-e,e=-o,o=r),t>0){if(!(n>0))return i;if(t>n)return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if(a+=1,s=Math.floor(n/t),n-=s*t,o-=s*e,0>o)return-i;if(o>e)return i;if(t>n+n){if(o+o>e)return i}else{if(e>o+o)return-i;n=t-n,o=e-o,i=-i}if(0===o)return 0===n?0:-i;if(0===n)return i;if(s=Math.floor(t/n),t-=s*n,e-=s*o,0>e)return i;if(e>o)return-i;if(n>t+t){if(e+e>o)return-i}else{if(o>e+e)return i;t=n-t,e=o-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}},jsts.algorithm.RobustDeterminant.orientationIndex=function(t,e,n){var o=e.x-t.x,i=e.y-t.y,r=n.x-e.x,s=n.y-e.y;return jsts.algorithm.RobustDeterminant.signOfDet2x2(o,i,r,s)},function(){jsts.triangulate.quadedge.QuadEdge=function(){this.rot=null,this.vertex=null,this.next=null,this.data=null};var t=jsts.triangulate.quadedge.QuadEdge;jsts.triangulate.quadedge.QuadEdge.makeEdge=function(e,n){var o,i,r,s,a;return o=new t,i=new t,r=new t,s=new t,o.rot=i,i.rot=r,r.rot=s,s.rot=o,o.setNext(o),i.setNext(s),r.setNext(r),s.setNext(i),a=o,a.setOrig(e),a.setDest(n),a},jsts.triangulate.quadedge.QuadEdge.connect=function(e,n){var o=t.makeEdge(e.dest(),n.orig());return t.splice(o,e.lNext()),t.splice(o.sym(),n),o},jsts.triangulate.quadedge.QuadEdge.splice=function(t,e){var n,o,i,r,s,a;n=t.oNext().rot,o=e.oNext().rot,i=e.oNext(),r=t.oNext(),s=o.oNext(),a=n.oNext(),t.setNext(i),e.setNext(r),n.setNext(s),o.setNext(a)},jsts.triangulate.quadedge.QuadEdge.swap=function(e){var n,o;n=e.oPrev(),o=e.sym().oPrev(),t.splice(e,n),t.splice(e.sym(),o),t.splice(e,n.lNext()),t.splice(e.sym(),o.lNext()),e.setOrig(n.dest()),e.setDest(o.dest())},jsts.triangulate.quadedge.QuadEdge.prototype.getPrimary=function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.setData=function(t){this.data=t},jsts.triangulate.quadedge.QuadEdge.prototype.getData=function(){return this.data},jsts.triangulate.quadedge.QuadEdge.prototype.delete_jsts=function(){this.rot=null},jsts.triangulate.quadedge.QuadEdge.prototype.isLive=function(){return null!==this.rot},jsts.triangulate.quadedge.QuadEdge.prototype.setNext=function(t){this.next=t},jsts.triangulate.quadedge.QuadEdge.prototype.invRot=function(){return this.rot.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.sym=function(){return this.rot.rot},jsts.triangulate.quadedge.QuadEdge.prototype.oNext=function(){return this.next},jsts.triangulate.quadedge.QuadEdge.prototype.oPrev=function(){return this.rot.next.rot},jsts.triangulate.quadedge.QuadEdge.prototype.dNext=function(){return this.sym().oNext().sym()
},jsts.triangulate.quadedge.QuadEdge.prototype.dPrev=function(){return this.invRot().oNext().invRot()},jsts.triangulate.quadedge.QuadEdge.prototype.lNext=function(){return this.invRot().oNext().rot},jsts.triangulate.quadedge.QuadEdge.prototype.lPrev=function(){return this.next.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.rNext=function(){return this.rot.next.invRot()},jsts.triangulate.quadedge.QuadEdge.prototype.rPrev=function(){return this.sym().oNext()},jsts.triangulate.quadedge.QuadEdge.prototype.setOrig=function(t){this.vertex=t},jsts.triangulate.quadedge.QuadEdge.prototype.setDest=function(t){this.sym().setOrig(t)},jsts.triangulate.quadedge.QuadEdge.prototype.orig=function(){return this.vertex},jsts.triangulate.quadedge.QuadEdge.prototype.dest=function(){return this.sym().orig()},jsts.triangulate.quadedge.QuadEdge.prototype.getLength=function(){return this.orig().getCoordinate().distance(dest().getCoordinate())},jsts.triangulate.quadedge.QuadEdge.prototype.equalsNonOriented=function(t){return this.equalsOriented(t)?!0:this.equalsOriented(t.sym())?!0:!1},jsts.triangulate.quadedge.QuadEdge.prototype.equalsOriented=function(t){return this.orig().getCoordinate().equals2D(t.orig().getCoordinate())&&this.dest().getCoordinate().equals2D(t.dest().getCoordinate())?!0:!1},jsts.triangulate.quadedge.QuadEdge.prototype.toLineSegment=function(){return new jsts.geom.LineSegment(this.vertex.getCoordinate(),this.dest().getCoordinate())},jsts.triangulate.quadedge.QuadEdge.prototype.toString=function(){var t,e;return t=this.vertex.getCoordinate(),e=this.dest().getCoordinate(),jsts.io.WKTWriter.toLineString(t,e)}}(),function(){var t=jsts.util.Assert;jsts.geomgraph.EdgeEnd=function(t,e,n,o){this.edge=t,e&&n&&this.init(e,n),o&&(this.label=o||null)},jsts.geomgraph.EdgeEnd.prototype.edge=null,jsts.geomgraph.EdgeEnd.prototype.label=null,jsts.geomgraph.EdgeEnd.prototype.node=null,jsts.geomgraph.EdgeEnd.prototype.p0=null,jsts.geomgraph.EdgeEnd.prototype.p1=null,jsts.geomgraph.EdgeEnd.prototype.dx=null,jsts.geomgraph.EdgeEnd.prototype.dy=null,jsts.geomgraph.EdgeEnd.prototype.quadrant=null,jsts.geomgraph.EdgeEnd.prototype.init=function(e,n){this.p0=e,this.p1=n,this.dx=n.x-e.x,this.dy=n.y-e.y,this.quadrant=jsts.geomgraph.Quadrant.quadrant(this.dx,this.dy),t.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},jsts.geomgraph.EdgeEnd.prototype.getEdge=function(){return this.edge},jsts.geomgraph.EdgeEnd.prototype.getLabel=function(){return this.label},jsts.geomgraph.EdgeEnd.prototype.getCoordinate=function(){return this.p0},jsts.geomgraph.EdgeEnd.prototype.getDirectedCoordinate=function(){return this.p1},jsts.geomgraph.EdgeEnd.prototype.getQuadrant=function(){return this.quadrant},jsts.geomgraph.EdgeEnd.prototype.getDx=function(){return this.dx},jsts.geomgraph.EdgeEnd.prototype.getDy=function(){return this.dy},jsts.geomgraph.EdgeEnd.prototype.setNode=function(t){this.node=t},jsts.geomgraph.EdgeEnd.prototype.getNode=function(){return this.node},jsts.geomgraph.EdgeEnd.prototype.compareTo=function(t){return this.compareDirection(t)},jsts.geomgraph.EdgeEnd.prototype.compareDirection=function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:jsts.algorithm.CGAlgorithms.computeOrientation(t.p0,t.p1,this.p1)},jsts.geomgraph.EdgeEnd.prototype.computeLabel=function(){}}(),jsts.operation.buffer.RightmostEdgeFinder=function(){},jsts.operation.buffer.RightmostEdgeFinder.prototype.minIndex=-1,jsts.operation.buffer.RightmostEdgeFinder.prototype.minCoord=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.minDe=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.orientedDe=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.getEdge=function(){return this.orientedDe},jsts.operation.buffer.RightmostEdgeFinder.prototype.getCoordinate=function(){return this.minCoord},jsts.operation.buffer.RightmostEdgeFinder.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}jsts.util.Assert.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var o=this.getRightmostSide(this.minDe,this.minIndex);o==jsts.geomgraph.Position.LEFT&&(this.orientedDe=this.minDe.getSym())},jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function(){var t=this.minDe.getEdge().getCoordinates();jsts.util.Assert.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],o=jsts.algorithm.CGAlgorithms.computeOrientation(this.minCoord,n,e),i=!1;e.y<this.minCoord.y&&n.y<this.minCoord.y&&o===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE?i=!0:e.y>this.minCoord.y&&n.y>this.minCoord.y&&o===jsts.algorithm.CGAlgorithms.CLOCKWISE&&(i=!0),i&&(this.minIndex=this.minIndex-1)},jsts.operation.buffer.RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return 0>n&&(n=this.getRightmostSideOfSegment(t,e-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge(),o=n.getCoordinates();if(0>e||e+1>=o.length)return-1;if(o[e].y==o[e+1].y)return-1;var i=jsts.geomgraph.Position.LEFT;return o[e].y<o[e+1].y&&(i=jsts.geomgraph.Position.RIGHT),i},function(){jsts.triangulate.IncrementalDelaunayTriangulator=function(t){this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0},jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSites=function(t){var e,n=0,o=t.length;for(n;o>n;n++)e=t[n],this.insertSite(e)},jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSite=function(t){var e,n,o,i;if(e=this.subdiv.locate(t),this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete_jsts(e.oNext())),n=this.subdiv.makeEdge(e.orig(),t),jsts.triangulate.quadedge.QuadEdge.splice(n,e),o=n;do n=this.subdiv.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!=o);for(;;)if(i=e.oPrev(),i.dest().rightOf(e)&&t.isInCircle(e.orig(),i.dest(),e.dest()))jsts.triangulate.quadedge.QuadEdge.swap(e),e=e.oPrev();else{if(e.oNext()==o)return n;e=e.oNext().lPrev()}}}(),jsts.algorithm.CentroidArea=function(){this.basePt=null,this.triangleCent3=new jsts.geom.Coordinate,this.centSum=new jsts.geom.Coordinate,this.cg3=new jsts.geom.Coordinate},jsts.algorithm.CentroidArea.prototype.basePt=null,jsts.algorithm.CentroidArea.prototype.triangleCent3=null,jsts.algorithm.CentroidArea.prototype.areasum2=0,jsts.algorithm.CentroidArea.prototype.cg3=null,jsts.algorithm.CentroidArea.prototype.centSum=null,jsts.algorithm.CentroidArea.prototype.totalLength=0,jsts.algorithm.CentroidArea.prototype.add=function(t){if(t instanceof jsts.geom.Polygon){var e=t;this.setBasePoint(e.getExteriorRing().getCoordinateN(0)),this.add3(e)}else if(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPolygon)for(var n=t,o=0;o<n.getNumGeometries();o++)this.add(n.getGeometryN(o));else t instanceof Array&&this.add2(t)},jsts.algorithm.CentroidArea.prototype.add2=function(t){this.setBasePoint(t[0]),this.addShell(t)},jsts.algorithm.CentroidArea.prototype.getCentroid=function(){var t=new jsts.geom.Coordinate;return Math.abs(this.areasum2)>0?(t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2):(t.x=this.centSum.x/this.totalLength,t.y=this.centSum.y/this.totalLength),t},jsts.algorithm.CentroidArea.prototype.setBasePoint=function(t){null==this.basePt&&(this.basePt=t)},jsts.algorithm.CentroidArea.prototype.add3=function(t){this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())},jsts.algorithm.CentroidArea.prototype.addShell=function(t){for(var e=!jsts.algorithm.CGAlgorithms.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.basePt,t[n],t[n+1],e);this.addLinearSegments(t)},jsts.algorithm.CentroidArea.prototype.addHole=function(t){for(var e=jsts.algorithm.CGAlgorithms.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.basePt,t[n],t[n+1],e);this.addLinearSegments(t)},jsts.algorithm.CentroidArea.prototype.addTriangle=function(t,e,n,o){var i=o?1:-1;jsts.algorithm.CentroidArea.centroid3(t,e,n,this.triangleCent3);var r=jsts.algorithm.CentroidArea.area2(t,e,n);this.cg3.x+=i*r*this.triangleCent3.x,this.cg3.y+=i*r*this.triangleCent3.y,this.areasum2+=i*r},jsts.algorithm.CentroidArea.centroid3=function(t,e,n,o){o.x=t.x+e.x+n.x,o.y=t.y+e.y+n.y},jsts.algorithm.CentroidArea.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},jsts.algorithm.CentroidArea.prototype.addLinearSegments=function(t){for(var e=0;e<t.length-1;e++){var n=t[e].distance(t[e+1]);this.totalLength+=n;var o=(t[e].x+t[e+1].x)/2;this.centSum.x+=n*o;var i=(t[e].y+t[e+1].y)/2;this.centSum.y+=n*i}},jsts.index.quadtree.Root=function(){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments),this.origin=new jsts.geom.Coordinate(0,0)},jsts.index.quadtree.Root.prototype=new jsts.index.quadtree.NodeBase,jsts.index.quadtree.Root.prototype.insert=function(t,e){var n=this.getSubnodeIndex(t,this.origin);if(-1===n)return void this.add(e);var o=this.subnode[n];if(null===o||!o.getEnvelope().contains(t)){var i=jsts.index.quadtree.Node.createExpanded(o,t);this.subnode[n]=i}this.insertContained(this.subnode[n],t,e)},jsts.index.quadtree.Root.prototype.insertContained=function(t,e,n){var o,i,r;o=jsts.index.IntervalSize.isZeroWidth(e.getMinX(),e.getMaxX()),i=jsts.index.IntervalSize.isZeroWidth(e.getMinY(),e.getMaxY()),r=o||i?t.find(e):t.getNode(e),r.add(n)},jsts.index.quadtree.Root.prototype.isSearchMatch=function(){return!0},jsts.noding.IntersectionAdder=function(t){this.li=t},jsts.noding.IntersectionAdder.prototype=new jsts.noding.SegmentIntersector,jsts.noding.IntersectionAdder.constructor=jsts.noding.IntersectionAdder,jsts.noding.IntersectionAdder.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},jsts.noding.IntersectionAdder.prototype._hasIntersection=!1,jsts.noding.IntersectionAdder.prototype.hasProper=!1,jsts.noding.IntersectionAdder.prototype.hasProperInterior=!1,jsts.noding.IntersectionAdder.prototype.hasInterior=!1,jsts.noding.IntersectionAdder.prototype.properIntersectionPoint=null,jsts.noding.IntersectionAdder.prototype.li=null,jsts.noding.IntersectionAdder.prototype.isSelfIntersection=null,jsts.noding.IntersectionAdder.prototype.numIntersections=0,jsts.noding.IntersectionAdder.prototype.numInteriorIntersections=0,jsts.noding.IntersectionAdder.prototype.numProperIntersections=0,jsts.noding.IntersectionAdder.prototype.numTests=0,jsts.noding.IntersectionAdder.prototype.getLineIntersector=function(){return this.li},jsts.noding.IntersectionAdder.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint},jsts.noding.IntersectionAdder.prototype.hasIntersection=function(){return this._hasIntersection},jsts.noding.IntersectionAdder.prototype.hasProperIntersection=function(){return this.hasProper},jsts.noding.IntersectionAdder.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior},jsts.noding.IntersectionAdder.prototype.hasInteriorIntersection=function(){return this.hasInterior},jsts.noding.IntersectionAdder.prototype.isTrivialIntersection=function(t,e,n,o){if(t==n&&1==this.li.getIntersectionNum()){if(jsts.noding.IntersectionAdder.isAdjacentSegments(e,o))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&o===i||0===o&&e===i)return!0}}return!1},jsts.noding.IntersectionAdder.prototype.processIntersections=function(t,e,n,o){if(t!==n||e!==o){this.numTests++;var i=t.getCoordinates()[e],r=t.getCoordinates()[e+1],s=n.getCoordinates()[o],a=n.getCoordinates()[o+1];this.li.computeIntersection(i,r,s,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,o)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,o,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))}},jsts.noding.IntersectionAdder.prototype.isDone=function(){return!1},jsts.operation.union.CascadedPolygonUnion=function(t){this.inputPolys=t},jsts.operation.union.CascadedPolygonUnion.union=function(t){var e=new jsts.operation.union.CascadedPolygonUnion(t);return e.union()},jsts.operation.union.CascadedPolygonUnion.prototype.inputPolys,jsts.operation.union.CascadedPolygonUnion.prototype.geomFactory=null,jsts.operation.union.CascadedPolygonUnion.prototype.STRTREE_NODE_CAPACITY=4,jsts.operation.union.CascadedPolygonUnion.prototype.union=function(){if(0===this.inputPolys.length)return null;this.geomFactory=this.inputPolys[0].getFactory();for(var t=new jsts.index.strtree.STRtree(this.STRTREE_NODE_CAPACITY),e=0,n=this.inputPolys.length;n>e;e++){var o=this.inputPolys[e];t.insert(o.getEnvelopeInternal(),o)}var i=t.itemsTree(),r=this.unionTree(i);return r},jsts.operation.union.CascadedPolygonUnion.prototype.unionTree=function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},jsts.operation.union.CascadedPolygonUnion.prototype.binaryUnion=function(t,e,n){if(e=e||0,n=n||t.length,1>=n-e){var o=this.getGeometry(t,e);return this.unionSafe(o,null)}if(n-e===2)return this.unionSafe(this.getGeometry(t,e),this.getGeometry(t,e+1));var i=parseInt((n+e)/2),o=this.binaryUnion(t,e,i),r=this.binaryUnion(t,i,n);return this.unionSafe(o,r)},jsts.operation.union.CascadedPolygonUnion.prototype.getGeometry=function(t,e){return e>=t.length?null:t[e]},jsts.operation.union.CascadedPolygonUnion.prototype.reduceToGeometries=function(t){for(var e=[],n=0,o=t.length;o>n;n++){var i=t[n],r=null;i instanceof Array?r=this.unionTree(i):i instanceof jsts.geom.Geometry&&(r=i),e.push(r)}return e},jsts.operation.union.CascadedPolygonUnion.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.clone():null===e?t.clone():this.unionOptimized(t,e)},jsts.operation.union.CascadedPolygonUnion.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),o=e.getEnvelopeInternal();if(!n.intersects(o)){var i=jsts.geom.util.GeometryCombiner.combine(t,e);return i}if(t.getNumGeometries<=1&&e.getNumGeometries<=1)return this.unionActual(t,e);var r=n.intersection(o);return this.unionUsingEnvelopeIntersection(t,e,r)},jsts.operation.union.CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var o=new javascript.util.ArrayList,i=this.extractByEnvelope(n,t,o),r=this.extractByEnvelope(n,e,o),s=this.unionActual(i,r);o.add(s);var a=jsts.geom.util.GeometryCombiner.combine(o);return a},jsts.operation.union.CascadedPolygonUnion.prototype.extractByEnvelope=function(t,e,n){for(var o=new javascript.util.ArrayList,i=0;i<e.getNumGeometries();i++){var r=e.getGeometryN(i);r.getEnvelopeInternal().intersects(t)?o.add(r):n.add(r)}return this.geomFactory.buildGeometry(o)},jsts.operation.union.CascadedPolygonUnion.prototype.unionActual=function(t,e){return t.union(e)},function(){jsts.geom.MultiPoint=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.MultiPoint.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiPoint.constructor=jsts.geom.MultiPoint,jsts.geom.MultiPoint.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},jsts.geom.MultiPoint.prototype.getGeometryN=function(t){return this.geometries[t]},jsts.geom.MultiPoint.prototype.equalsExact=function(t,e){return this.isEquivalentClass(t)?jsts.geom.GeometryCollection.prototype.equalsExact.call(this,t,e):!1},jsts.geom.MultiPoint.prototype.CLASS_NAME="jsts.geom.MultiPoint"}(),jsts.operation.buffer.OffsetCurveBuilder=function(t,e){this.precisionModel=t,this.bufParams=e},jsts.operation.buffer.OffsetCurveBuilder.prototype.distance=0,jsts.operation.buffer.OffsetCurveBuilder.prototype.precisionModel=null,jsts.operation.buffer.OffsetCurveBuilder.prototype.bufParams=null,jsts.operation.buffer.OffsetCurveBuilder.prototype.getBufferParameters=function(){return this.bufParams},jsts.operation.buffer.OffsetCurveBuilder.prototype.getLineCurve=function(t,e){if(this.distance=e,this.distance<0&&!this.bufParams.isSingleSided())return null;if(0==this.distance)return null;var n=Math.abs(this.distance),o=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],o);else if(this.bufParams.isSingleSided()){var i=0>e;this.computeSingleSidedBufferCurve(t,i,o)}else this.computeLineBufferCurve(t,o);var r=o.getCoordinates();return r},jsts.operation.buffer.OffsetCurveBuilder.prototype.getRingCurve=function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0==this.distance)return jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates(t);var o=this.getSegGen(this.distance);return this.computeRingBufferCurve(t,e,o),o.getCoordinates()},jsts.operation.buffer.OffsetCurveBuilder.prototype.getOffsetCurve=function(t,e){if(this.distance=e,0===this.distance)return null;var n=this.distance<0,o=Math.abs(this.distance),i=this.getSegGen(o);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var r=i.getCoordinates();return n&&r.reverse(),r},jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].clone());return e},jsts.operation.buffer.OffsetCurveBuilder.prototype.getSegGen=function(t){return new jsts.operation.buffer.OffsetSegmentGenerator(this.precisionModel,this.bufParams,t)},jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR=100,jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance=function(t){return t/jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR},jsts.operation.buffer.OffsetCurveBuilder.prototype.computePointCurve=function(t,e){switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:e.createCircle(t);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:e.createSquare(t)}},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeLineBufferCurve=function(t,e){var n=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance),o=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,n),i=o.length-1;e.initSideSegments(o[0],o[1],jsts.geomgraph.Position.LEFT);for(var r=2;i>=r;r++)e.addNextSegment(o[r],!0);e.addLastSegment(),e.addLineEndCap(o[i-1],o[i]);var s=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],jsts.geomgraph.Position.LEFT);for(var r=a-2;r>=0;r--)e.addNextSegment(s[r],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function(t,e,n){var o=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var i=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,-o),r=i.length-1;n.initSideSegments(i[r],i[r-1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=r-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,o),l=a.length-1;n.initSideSegments(a[0],a[1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=2;l>=s;s++)n.addNextSegment(a[s],!0)}n.addLastSegment(),n.closeRing()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeOffsetCurve=function(t,e,n){var o=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(e){var i=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,-o),r=i.length-1;n.initSideSegments(i[r],i[r-1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=r-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,o),l=a.length-1;n.initSideSegments(a[0],a[1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=2;l>=s;s++)n.addNextSegment(a[s],!0)}n.addLastSegment()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeRingBufferCurve=function(t,e,n){var o=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);e===jsts.geomgraph.Position.RIGHT&&(o=-o);var i=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,o),r=i.length-1;n.initSideSegments(i[r-1],i[0],e);for(var s=1;r>=s;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},function(){var t=function(t,e,n){this.hotPixel=t,this.parentEdge=e,this.vertexIndex=n};t.prototype=new jsts.index.chain.MonotoneChainSelectAction,t.constructor=t,t.prototype.hotPixel=null,t.prototype.parentEdge=null,t.prototype.vertexIndex=null,t.prototype._isNodeAdded=!1,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(t,e){var n=t.getContext();(null===this.parentEdge||n!==this.parentEdge||e!==this.vertexIndex)&&(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},jsts.noding.snapround.MCIndexPointSnapper=function(t){this.index=t},jsts.noding.snapround.MCIndexPointSnapper.prototype.index=null,jsts.noding.snapround.MCIndexPointSnapper.prototype.snap=function(e,n,o){if(1===arguments.length)return void this.snap2.apply(this,arguments);var i=e.getSafeEnvelope(),r=new t(e,n,o);return this.index.query(i,{visitItem:function(t){t.select(i,r)}}),r.isNodeAdded()},jsts.noding.snapround.MCIndexPointSnapper.prototype.snap2=function(t){return this.snap(t,null,-1)}}(),function(){var t=function(){this.items=new javascript.util.ArrayList,this.subnode=[null,null]};t.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},t.prototype.getItems=function(){return this.items},t.prototype.add=function(t){this.items.add(t)},t.prototype.addAllItems=function(t){t.addAll(this.items);var e=0,n=2;for(e;n>e;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},t.prototype.addAllItemsFromOverlapping=function(t,e){(null===t||this.isSearchMatch(t))&&(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e))},t.prototype.remove=function(t,e){if(!this.isSearchMatch(t))return!1;var n=!1,o=0,i=2;for(o;i>o;o++)if(null!==this.subnode[o]&&(n=this.subnode[o].remove(t,e))){this.subnode[o].isPrunable()&&(this.subnode[o]=null);break}return n?n:n=this.items.remove(e)},t.prototype.isPrunable=function(){return!(this.hasChildren()||this.hasItems())},t.prototype.hasChildren=function(){var t=0,e=2;for(t;e>t;t++)if(null!==this.subnode[t])return!0;return!1},t.prototype.hasItems=function(){return!this.items.isEmpty()},t.prototype.depth=function(){var t,e=0,n=0,o=2;for(n;o>n;n++)null!==this.subnode[n]&&(t=this.subnode[n].depth(),t>e&&(e=t));return e+1},t.prototype.size=function(){var t=0,e=0,n=2;for(e;n>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},t.prototype.nodeSize=function(){var t=0,e=0,n=2;for(e;n>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},jsts.index.bintree.NodeBase=t}(),function(){var t=jsts.index.bintree.NodeBase,e=jsts.index.bintree.Key,n=jsts.index.bintree.Interval,o=function(t,e){this.items=new javascript.util.ArrayList,this.subnode=[null,null],this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2};o.prototype=new t,o.constructor=o,o.createNode=function(t){var n,i;return n=new e(t),i=new o(n.getInterval(),n.getLevel())},o.createExpanded=function(t,e){var i,r;return i=new n(e),null!==t&&i.expandToInclude(t.interval),r=o.createNode(i),null!==t&&r.insert(t),r},o.prototype.getInterval=function(){return this.interval},o.prototype.isSearchMatch=function(t){return t.overlaps(this.interval)},o.prototype.getNode=function(e){var n,o=t.getSubnodeIndex(e,this.centre);return-1!=o?(n=this.getSubnode(o),n.getNode(e)):this},o.prototype.find=function(e){var n,o=t.getSubnodeIndex(e,this.centre);return-1===o?this:null!==this.subnode[o]?(n=this.subnode[o],n.find(e)):this},o.prototype.insert=function(e){var n,o=t.getSubnodeIndex(e.interval,this.centre);e.level===this.level-1?this.subnode[o]=e:(n=this.createSubnode(o),n.insert(e),this.subnode[o]=n)},o.prototype.getSubnode=function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},o.prototype.createSubnode=function(t){var e,i,r,s;switch(e=0,i=0,t){case 0:e=this.interval.getMin(),i=this.centre;break;case 1:e=this.centre,i=this.interval.getMax()}return r=new n(e,i),s=new o(r,this.level-1)},jsts.index.bintree.Node=o}(),function(){var t=jsts.index.bintree.Node,e=jsts.index.bintree.NodeBase,n=function(){this.subnode=[null,null],this.items=new javascript.util.ArrayList};n.prototype=new jsts.index.bintree.NodeBase,n.constructor=n,n.origin=0,n.prototype.insert=function(o,i){var r,s,a=e.getSubnodeIndex(o,n.origin);return-1===a?void this.add(i):(r=this.subnode[a],null!==r&&r.getInterval().contains(o)||(s=t.createExpanded(r,o),this.subnode[a]=s),void this.insertContained(this.subnode[a],o,i))},n.prototype.insertContained=function(t,e,n){var o,i;o=jsts.index.IntervalSize.isZeroWidth(e.getMin(),e.getMax()),i=o?t.find(e):t.getNode(e),i.add(n)},n.prototype.isSearchMatch=function(){return!0},jsts.index.bintree.Root=n}(),jsts.geomgraph.Quadrant=function(){},jsts.geomgraph.Quadrant.NE=0,jsts.geomgraph.Quadrant.NW=1,jsts.geomgraph.Quadrant.SW=2,jsts.geomgraph.Quadrant.SE=3,jsts.geomgraph.Quadrant.quadrant=function(t,e){if(t instanceof jsts.geom.Coordinate)return jsts.geomgraph.Quadrant.quadrant2.apply(this,arguments);if(0===t&&0===e)throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?jsts.geomgraph.Quadrant.NE:jsts.geomgraph.Quadrant.SE:e>=0?jsts.geomgraph.Quadrant.NW:jsts.geomgraph.Quadrant.SW},jsts.geomgraph.Quadrant.quadrant2=function(t,e){if(e.x===t.x&&e.y===t.y)throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?jsts.geomgraph.Quadrant.NE:jsts.geomgraph.Quadrant.SE:e.y>=t.y?jsts.geomgraph.Quadrant.NW:jsts.geomgraph.Quadrant.SW},jsts.geomgraph.Quadrant.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return 2===n?!0:!1},jsts.geomgraph.Quadrant.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(2===n)return-1;var o=e>t?t:e,i=t>e?t:e;return 0===o&&3===i?3:o},jsts.geomgraph.Quadrant.isInHalfPlane=function(t,e){return e===jsts.geomgraph.Quadrant.SE?t===jsts.geomgraph.Quadrant.SE||t===jsts.geomgraph.Quadrant.SW:t===e||t===e+1},jsts.geomgraph.Quadrant.isNorthern=function(t){return t===jsts.geomgraph.Quadrant.NE||t===jsts.geomgraph.Quadrant.NW},jsts.operation.valid.ConsistentAreaTester=function(t){this.geomGraph=t,this.li=new jsts.algorithm.RobustLineIntersector,this.nodeGraph=new jsts.operation.relate.RelateNodeGraph,this.invalidPoint=null},jsts.operation.valid.ConsistentAreaTester.prototype.getInvalidPoint=function(){return this.invalidPoint},jsts.operation.valid.ConsistentAreaTester.prototype.isNodeConsistentArea=function(){var t=this.geomGraph.computeSelfNodes(this.li,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},jsts.operation.valid.ConsistentAreaTester.prototype.isNodeEdgeAreaLabelsConsistent=function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().clone(),!1}return!0},jsts.operation.valid.ConsistentAreaTester.prototype.hasDuplicateRings=function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var o=n.next();if(o.getEdgeEnds().length>1)return invalidPoint=o.getEdge().getCoordinate(0),!0}return!1},jsts.operation.relate.RelateNode=function(){jsts.geomgraph.Node.apply(this,arguments)},jsts.operation.relate.RelateNode.prototype=new jsts.geomgraph.Node,jsts.operation.relate.RelateNode.prototype.computeIM=function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},jsts.operation.relate.RelateNode.prototype.updateIMFromEdges=function(t){this.edges.updateIM(t)},function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position,n=jsts.geomgraph.EdgeEnd;jsts.geomgraph.DirectedEdge=function(t,e){if(n.call(this,t),this.depth=[0,-999,-999],this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var o=t.getNumPoints()-1;this.init(t.getCoordinate(o),t.getCoordinate(o-1))}this.computeDirectedLabel()},jsts.geomgraph.DirectedEdge.prototype=new n,jsts.geomgraph.DirectedEdge.constructor=jsts.geomgraph.DirectedEdge,jsts.geomgraph.DirectedEdge.depthFactor=function(e,n){return e===t.EXTERIOR&&n===t.INTERIOR?1:e===t.INTERIOR&&n===t.EXTERIOR?-1:0},jsts.geomgraph.DirectedEdge.prototype._isForward=null,jsts.geomgraph.DirectedEdge.prototype._isInResult=!1,jsts.geomgraph.DirectedEdge.prototype._isVisited=!1,jsts.geomgraph.DirectedEdge.prototype.sym=null,jsts.geomgraph.DirectedEdge.prototype.next=null,jsts.geomgraph.DirectedEdge.prototype.nextMin=null,jsts.geomgraph.DirectedEdge.prototype.edgeRing=null,jsts.geomgraph.DirectedEdge.prototype.minEdgeRing=null,jsts.geomgraph.DirectedEdge.prototype.depth=null,jsts.geomgraph.DirectedEdge.prototype.getEdge=function(){return this.edge},jsts.geomgraph.DirectedEdge.prototype.setInResult=function(t){this._isInResult=t},jsts.geomgraph.DirectedEdge.prototype.isInResult=function(){return this._isInResult},jsts.geomgraph.DirectedEdge.prototype.isVisited=function(){return this._isVisited},jsts.geomgraph.DirectedEdge.prototype.setVisited=function(t){this._isVisited=t},jsts.geomgraph.DirectedEdge.prototype.setEdgeRing=function(t){this.edgeRing=t},jsts.geomgraph.DirectedEdge.prototype.getEdgeRing=function(){return this.edgeRing},jsts.geomgraph.DirectedEdge.prototype.setMinEdgeRing=function(t){this.minEdgeRing=t},jsts.geomgraph.DirectedEdge.prototype.getMinEdgeRing=function(){return this.minEdgeRing},jsts.geomgraph.DirectedEdge.prototype.getDepth=function(t){return this.depth[t]},jsts.geomgraph.DirectedEdge.prototype.setDepth=function(t,e){if(-999!==this.depth[t]&&this.depth[t]!==e)throw new jsts.error.TopologyError("assigned depths do not match",this.getCoordinate());this.depth[t]=e},jsts.geomgraph.DirectedEdge.prototype.getDepthDelta=function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},jsts.geomgraph.DirectedEdge.prototype.setVisitedEdge=function(t){this.setVisited(t),this.sym.setVisited(t)},jsts.geomgraph.DirectedEdge.prototype.getSym=function(){return this.sym},jsts.geomgraph.DirectedEdge.prototype.isForward=function(){return this._isForward},jsts.geomgraph.DirectedEdge.prototype.setSym=function(t){this.sym=t},jsts.geomgraph.DirectedEdge.prototype.getNext=function(){return this.next},jsts.geomgraph.DirectedEdge.prototype.setNext=function(t){this.next=t},jsts.geomgraph.DirectedEdge.prototype.getNextMin=function(){return this.nextMin},jsts.geomgraph.DirectedEdge.prototype.setNextMin=function(t){this.nextMin=t},jsts.geomgraph.DirectedEdge.prototype.isLineEdge=function(){var e=this.label.isLine(0)||this.label.isLine(1),n=!this.label.isArea(0)||this.label.allPositionsEqual(0,t.EXTERIOR),o=!this.label.isArea(1)||this.label.allPositionsEqual(1,t.EXTERIOR);return e&&n&&o},jsts.geomgraph.DirectedEdge.prototype.isInteriorAreaEdge=function(){for(var n=!0,o=0;2>o;o++)this.label.isArea(o)&&this.label.getLocation(o,e.LEFT)===t.INTERIOR&&this.label.getLocation(o,e.RIGHT)===t.INTERIOR||(n=!1);return n},jsts.geomgraph.DirectedEdge.prototype.computeDirectedLabel=function(){this.label=new jsts.geomgraph.Label(this.edge.getLabel()),this._isForward||this.label.flip()},jsts.geomgraph.DirectedEdge.prototype.setEdgeDepths=function(t,n){var o=this.getEdge().getDepthDelta();this._isForward||(o=-o);var i=1;t===e.LEFT&&(i=-1);var r=e.opposite(t),s=o*i,a=n+s;this.setDepth(t,n),this.setDepth(r,a)}}(),jsts.operation.distance.DistanceOp=function(t,e,n){this.ptLocator=new jsts.algorithm.PointLocator,this.geom=[],this.geom[0]=t,this.geom[1]=e,this.terminateDistance=n},jsts.operation.distance.DistanceOp.prototype.geom=null,jsts.operation.distance.DistanceOp.prototype.terminateDistance=0,jsts.operation.distance.DistanceOp.prototype.ptLocator=null,jsts.operation.distance.DistanceOp.prototype.minDistanceLocation=null,jsts.operation.distance.DistanceOp.prototype.minDistance=Number.MAX_VALUE,jsts.operation.distance.DistanceOp.distance=function(t,e){var n=new jsts.operation.distance.DistanceOp(t,e,0);
return n.distance()},jsts.operation.distance.DistanceOp.isWithinDistance=function(t,e,n){var o=new jsts.operation.distance.DistanceOp(t,e,n);return o.distance()<=n},jsts.operation.distance.DistanceOp.nearestPoints=function(t,e){var n=new jsts.operation.distance.DistanceOp(t,e,0);return n.nearestPoints()},jsts.operation.distance.DistanceOp.prototype.distance=function(){if(null===this.geom[0]||null===this.geom[1])throw new jsts.error.IllegalArgumentError("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},jsts.operation.distance.DistanceOp.prototype.nearestPoints=function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},jsts.operation.distance.DistanceOp.prototype.nearestLocations=function(){return this.computeMinDistance(),this.minDistanceLocation},jsts.operation.distance.DistanceOp.prototype.updateMinDistance=function(t,e){null!==t[0]&&(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},jsts.operation.distance.DistanceOp.prototype.computeMinDistance=function(){return arguments.length>0?void this.computeMinDistance2.apply(this,arguments):void(null===this.minDistanceLocation&&(this.minDistanceLocation=[],this.computeContainmentDistance(),this.minDistance<=this.terminateDistance||this.computeFacetDistance()))},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance=function(){if(2===arguments.length)return void this.computeContainmentDistance2.apply(this,arguments);if(3===arguments.length&&!arguments[0]instanceof jsts.operation.distance.GeometryLocation)return void this.computeContainmentDistance3.apply(this,arguments);if(3===arguments.length)return void this.computeContainmentDistance4.apply(this,arguments);var t=[];this.computeContainmentDistance2(0,t),this.minDistance<=this.terminateDistance||this.computeContainmentDistance2(1,t)},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance2=function(t,e){var n=1-t,o=jsts.geom.util.PolygonExtracter.getPolygons(this.geom[t]);if(o.length>0){var i=jsts.operation.distance.ConnectedElementLocationFilter.getLocations(this.geom[n]);if(this.computeContainmentDistance3(i,o,e),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[n]=e[0],void(this.minDistanceLocation[t]=e[1])}},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance3=function(t,e,n){for(var o=0;o<t.length;o++)for(var i=t[o],r=0;r<e.length;r++)if(this.computeContainmentDistance4(i,e[r],n),this.minDistance<=this.terminateDistance)return},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance4=function(t,e,n){var o=t.getCoordinate();return jsts.geom.Location.EXTERIOR!==this.ptLocator.locate(o,e)?(this.minDistance=0,n[0]=t,void(n[1]=new jsts.operation.distance.GeometryLocation(e,o))):void 0},jsts.operation.distance.DistanceOp.prototype.computeFacetDistance=function(){var t=[],e=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[0]),n=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[1]),o=jsts.geom.util.PointExtracter.getPoints(this.geom[0]),i=jsts.geom.util.PointExtracter.getPoints(this.geom[1]);this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,o,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistancePoints(o,i,t),this.updateMinDistance(t,!1))))},jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLines=function(t,e,n){for(var o=0;o<t.length;o++)for(var i=t[o],r=0;r<e.length;r++){var s=e[r];if(this.computeMinDistance(i,s,n),this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistancePoints=function(t,e,n){for(var o=0;o<t.length;o++)for(var i=t[o],r=0;r<e.length;r++){var s=e[r],a=i.getCoordinate().distance(s.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,n[0]=new jsts.operation.distance.GeometryLocation(i,0,i.getCoordinate()),n[1]=new jsts.operation.distance.GeometryLocation(s,0,s.getCoordinate())),this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var o=0;o<t.length;o++)for(var i=t[o],r=0;r<e.length;r++){var s=e[r];if(this.computeMinDistance(i,s,n),this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistance2=function(t,e,n){if(e instanceof jsts.geom.Point)return void this.computeMinDistance3(t,e,n);if(!(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance))for(var o=t.getCoordinates(),i=e.getCoordinates(),r=0;r<o.length-1;r++)for(var s=0;s<i.length-1;s++){var a=jsts.algorithm.CGAlgorithms.distanceLineLine(o[r],o[r+1],i[s],i[s+1]);if(a<this.minDistance){this.minDistance=a;var l=new jsts.geom.LineSegment(o[r],o[r+1]),p=new jsts.geom.LineSegment(i[s],i[s+1]),u=l.closestPoints(p);n[0]=new jsts.operation.distance.GeometryLocation(t,r,u[0]),n[1]=new jsts.operation.distance.GeometryLocation(e,s,u[1])}if(this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistance3=function(t,e,n){if(!(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance))for(var o=t.getCoordinates(),i=e.getCoordinate(),r=0;r<o.length-1;r++){var s=jsts.algorithm.CGAlgorithms.distancePointLine(i,o[r],o[r+1]);if(s<this.minDistance){this.minDistance=s;var a=new jsts.geom.LineSegment(o[r],o[r+1]),l=a.closestPoint(i);n[0]=new jsts.operation.distance.GeometryLocation(t,r,l),n[1]=new jsts.operation.distance.GeometryLocation(e,0,i)}if(this.minDistance<=this.terminateDistance)return}},jsts.index.strtree.SIRtree=function(t){t=t||10,jsts.index.strtree.AbstractSTRtree.call(this,t)},jsts.index.strtree.SIRtree.prototype=new jsts.index.strtree.AbstractSTRtree,jsts.index.strtree.SIRtree.constructor=jsts.index.strtree.SIRtree,jsts.index.strtree.SIRtree.prototype.comperator={compare:function(t,e){return t.getBounds().getCentre()-e.getBounds().getCentre()}},jsts.index.strtree.SIRtree.prototype.intersectionOp={intersects:function(t,e){return t.intersects(e)}},jsts.index.strtree.SIRtree.prototype.createNode=function(){var t=function(){jsts.index.strtree.AbstractNode.apply(this,arguments)};return t.prototype=new jsts.index.strtree.AbstractNode,t.constructor=t,t.prototype.computeBounds=function(){for(var t,e=null,n=this.getChildBoundables(),o=0,i=n.length;i>o;o++)t=n[o],null===e?e=new jsts.index.strtree.Interval(t.getBounds()):e.expandToInclude(t.getBounds());return e},t},jsts.index.strtree.SIRtree.prototype.insert=function(t,e,n){jsts.index.strtree.AbstractSTRtree.prototype.insert(new jsts.index.strtree.Interval(Math.min(t,e),Math.max(t,e)),n)},jsts.index.strtree.SIRtree.prototype.query=function(t,e){e=e||t,jsts.index.strtree.AbstractSTRtree.prototype.query(new jsts.index.strtree.Interval(Math.min(t,e),Math.max(t,e)))},jsts.index.strtree.SIRtree.prototype.getIntersectsOp=function(){return this.intersectionOp},jsts.index.strtree.SIRtree.prototype.getComparator=function(){return this.comperator},function(){var t=jsts.geom.Location;jsts.operation.relate.RelateNodeGraph=function(){this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory)},jsts.operation.relate.RelateNodeGraph.prototype.nodes=null,jsts.operation.relate.RelateNodeGraph.prototype.build=function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new jsts.operation.relate.EdgeEndBuilder,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},jsts.operation.relate.RelateNodeGraph.prototype.computeIntersectionNodes=function(e,n){for(var o=e.getEdgeIterator();o.hasNext();)for(var i=o.next(),r=i.getLabel().getLocation(n),s=i.getEdgeIntersectionList().iterator();s.hasNext();){var a=s.next(),l=this.nodes.addNode(a.coord);r===t.BOUNDARY?l.setLabelBoundary(n):l.getLabel().isNull(n)&&l.setLabel(n,t.INTERIOR)}},jsts.operation.relate.RelateNodeGraph.prototype.copyNodesAndLabels=function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var o=n.next(),i=this.nodes.addNode(o.getCoordinate());i.setLabel(e,o.getLabel().getLocation(e))}},jsts.operation.relate.RelateNodeGraph.prototype.insertEdgeEnds=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},jsts.operation.relate.RelateNodeGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()}}(),function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position;jsts.geomgraph.Depth=function(){this.depth=[[],[]];for(var t=0;2>t;t++)for(var e=0;3>e;e++)this.depth[t][e]=jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.NULL_VALUE=-1,jsts.geomgraph.Depth.depthAtLocation=function(e){return e===t.EXTERIOR?0:e===t.INTERIOR?1:jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.depth=null,jsts.geomgraph.Depth.prototype.getDepth=function(t,e){return this.depth[t][e]},jsts.geomgraph.Depth.prototype.setDepth=function(t,e,n){this.depth[t][e]=n},jsts.geomgraph.Depth.prototype.getLocation=function(e,n){return this.depth[e][n]<=0?t.EXTERIOR:t.INTERIOR},jsts.geomgraph.Depth.prototype.add=function(e,n,o){o===t.INTERIOR&&this.depth[e][n]++},jsts.geomgraph.Depth.prototype.isNull=function(){if(arguments.length>0)return this.isNull2.apply(this,arguments);for(var t=0;2>t;t++)for(var e=0;3>e;e++)if(this.depth[t][e]!==jsts.geomgraph.Depth.NULL_VALUE)return!1;return!0},jsts.geomgraph.Depth.prototype.isNull2=function(t){return arguments.length>1?this.isNull3.apply(this,arguments):this.depth[t][1]==jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.isNull3=function(t,e){return this.depth[t][e]==jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.add=function(e){for(var n=0;2>n;n++)for(var o=1;3>o;o++){var i=e.getLocation(n,o);(i===t.EXTERIOR||i===t.INTERIOR)&&(this.isNull(n,o)?this.depth[n][o]=jsts.geomgraph.Depth.depthAtLocation(i):this.depth[n][o]+=jsts.geomgraph.Depth.depthAtLocation(i))}},jsts.geomgraph.Depth.prototype.getDelta=function(t){return this.depth[t][e.RIGHT]-this.depth[t][e.LEFT]},jsts.geomgraph.Depth.prototype.normalize=function(){for(var t=0;2>t;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),0>e&&(e=0);for(var n=1;3>n;n++){var o=0;this.depth[t][n]>e&&(o=1),this.depth[t][n]=o}}},jsts.geomgraph.Depth.prototype.toString=function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]}}(),jsts.algorithm.BoundaryNodeRule=function(){},jsts.algorithm.BoundaryNodeRule.prototype.isInBoundary=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.Mod2BoundaryNodeRule=function(){},jsts.algorithm.Mod2BoundaryNodeRule.prototype=new jsts.algorithm.BoundaryNodeRule,jsts.algorithm.Mod2BoundaryNodeRule.prototype.isInBoundary=function(t){return t%2===1},jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE=new jsts.algorithm.Mod2BoundaryNodeRule,jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE=jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE,jsts.operation.distance.GeometryLocation=function(t,e,n){this.component=t,this.segIndex=e,this.pt=n},jsts.operation.distance.GeometryLocation.INSIDE_AREA=-1,jsts.operation.distance.GeometryLocation.prototype.component=null,jsts.operation.distance.GeometryLocation.prototype.segIndex=null,jsts.operation.distance.GeometryLocation.prototype.pt=null,jsts.operation.distance.GeometryLocation.prototype.getGeometryComponent=function(){return this.component},jsts.operation.distance.GeometryLocation.prototype.getSegmentIndex=function(){return this.segIndex},jsts.operation.distance.GeometryLocation.prototype.getCoordinate=function(){return this.pt},jsts.operation.distance.GeometryLocation.prototype.isInsideArea=function(){return this.segIndex===jsts.operation.distance.GeometryLocation.INSIDE_AREA},jsts.geom.util.PointExtracter=function(t){this.pts=t},jsts.geom.util.PointExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.PointExtracter.prototype.pts=null,jsts.geom.util.PointExtracter.getPoints=function(t,e){return void 0===e&&(e=[]),t instanceof jsts.geom.Point?e.push(t):(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)&&t.apply(new jsts.geom.util.PointExtracter(e)),e},jsts.geom.util.PointExtracter.prototype.filter=function(t){t instanceof jsts.geom.Point&&this.pts.push(t)},jsts.noding.ScaledNoder=function(t,e,n,o){this.offsetX=n?n:0,this.offsetY=o?o:0,this.noder=t,this.scaleFactor=e,this.isScaled=!this.isIntegerPrecision()},jsts.noding.ScaledNoder.prototype=new jsts.noding.Noder,jsts.noding.ScaledNoder.constructor=jsts.noding.ScaledNoder,jsts.noding.ScaledNoder.prototype.noder=null,jsts.noding.ScaledNoder.prototype.scaleFactor=void 0,jsts.noding.ScaledNoder.prototype.offsetX=void 0,jsts.noding.ScaledNoder.prototype.offsetY=void 0,jsts.noding.ScaledNoder.prototype.isScaled=!1,jsts.noding.ScaledNoder.prototype.isIntegerPrecision=function(){return 1===this.scaleFactor},jsts.noding.ScaledNoder.prototype.getNodedSubstrings=function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},jsts.noding.ScaledNoder.prototype.computeNodes=function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},jsts.noding.ScaledNoder.prototype.scale=function(t){if(t instanceof Array)return this.scale2(t);for(var e=new javascript.util.ArrayList,n=t.iterator();n.hasNext();){var o=n.next();e.add(new jsts.noding.NodedSegmentString(this.scale(o.getCoordinates()),o.getData()))}return e},jsts.noding.ScaledNoder.prototype.scale2=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=new jsts.geom.Coordinate(Math.round((t[n].x-this.offsetX)*this.scaleFactor),Math.round((t[n].y-this.offsetY)*this.scaleFactor));var o=jsts.geom.CoordinateArrays.removeRepeatedPoints(e);return o},jsts.noding.ScaledNoder.prototype.rescale=function(t){if(t instanceof Array)return void this.rescale2(t);for(var e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}},jsts.noding.ScaledNoder.prototype.rescale2=function(t){for(var e=0;e<t.length;e++)t[e].x=t[e].x/this.scaleFactor+this.offsetX,t[e].y=t[e].y/this.scaleFactor+this.offsetY},jsts.triangulate.VoronoiDiagramBuilder=function(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSites=function(){var t=arguments[0];t instanceof jsts.geom.Geometry||t instanceof jsts.geom.Coordinate||t instanceof jsts.geom.Point||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.LineString||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.LinearRing||t instanceof jsts.geom.Polygon||t instanceof jsts.geom.MultiPolygon?this.setSitesByGeometry(t):this.setSitesByArray(t)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByGeometry=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(t)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByArray=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(t)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setClipEnvelope=function(t){this.clipEnv=t},jsts.triangulate.VoronoiDiagramBuilder.prototype.setTolerance=function(t){this.tolerance=t},jsts.triangulate.VoronoiDiagramBuilder.prototype.create=function(){if(null===this.subdiv){var t,e,n,o;t=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords),this.diagramEnv=t,e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight()),this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv),n=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords),this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(t,this.tolerance),o=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv),o.insertSites(n)}},jsts.triangulate.VoronoiDiagramBuilder.prototype.getSubdivision=function(){return this.create(),this.subdiv},jsts.triangulate.VoronoiDiagramBuilder.prototype.getDiagram=function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return this.clipGeometryCollection(e,this.diagramEnv)},jsts.triangulate.VoronoiDiagramBuilder.prototype.clipGeometryCollection=function(t,e){var n,o,i,r,s,a;for(n=t.getFactory().toGeometry(e),o=[],i=0,r=t.getNumGeometries(),i;r>i;i++)s=t.getGeometryN(i),a=null,e.contains(s.getEnvelopeInternal())?a=s:e.intersects(s.getEnvelopeInternal())&&(a=n.intersection(s)),null===a||a.isEmpty()||o.push(a);return t.getFactory().createGeometryCollection(o)},jsts.operation.valid.IndexedNestedRingTester=function(t){this.graph=t,this.rings=new javascript.util.ArrayList,this.totalEnv=new jsts.geom.Envelope,this.index=null,this.nestedPt=null},jsts.operation.valid.IndexedNestedRingTester.prototype.getNestedPoint=function(){return this.nestedPt},jsts.operation.valid.IndexedNestedRingTester.prototype.add=function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},jsts.operation.valid.IndexedNestedRingTester.prototype.isNonNested=function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),o=this.index.query(e.getEnvelopeInternal()),i=0;i<o.length;i++){var r=o[i],s=r.getCoordinates();if(e!=r&&e.getEnvelopeInternal().intersects(r.getEnvelopeInternal())){var a=jsts.operation.valid.IsValidOp.findPtNotNode(n,r,this.graph);if(null!=a){var l=jsts.algorithm.CGAlgorithms.isPointInRing(a,s);if(l)return this.nestedPt=a,!1}}}return!0},jsts.operation.valid.IndexedNestedRingTester.prototype.buildIndex=function(){this.index=new jsts.index.strtree.STRtree;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},jsts.noding.SegmentNode=function(t,e,n,o){this.segString=t,this.coord=new jsts.geom.Coordinate(e),this.segmentIndex=n,this.segmentOctant=o,this._isInterior=!e.equals2D(t.getCoordinate(n))},jsts.noding.SegmentNode.prototype.segString=null,jsts.noding.SegmentNode.prototype.coord=null,jsts.noding.SegmentNode.prototype.segmentIndex=null,jsts.noding.SegmentNode.prototype.segmentOctant=null,jsts.noding.SegmentNode.prototype._isInterior=null,jsts.noding.SegmentNode.prototype.getCoordinate=function(){return this.coord},jsts.noding.SegmentNode.prototype.isInterior=function(){return this._isInterior},jsts.noding.SegmentNode.prototype.isEndPoint=function(){return 0!==this.segmentIndex||this._isInterior?this.segmentIndex===this.maxSegmentIndex?!0:!1:!0},jsts.noding.SegmentNode.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:jsts.noding.SegmentPointComparator.compare(this.segmentOctant,this.coord,e.coord)},function(){jsts.io.GeoJSONWriter=function(){this.parser=new jsts.io.GeoJSONParser(this.geometryFactory)},jsts.io.GeoJSONWriter.prototype.write=function(t){var e=this.parser.write(t);return e}}(),jsts.io.OpenLayersParser=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory},jsts.io.OpenLayersParser.prototype.read=function(t){return"OpenLayers.Geometry.Point"===t.CLASS_NAME?this.convertFromPoint(t):"OpenLayers.Geometry.LineString"===t.CLASS_NAME?this.convertFromLineString(t):"OpenLayers.Geometry.LinearRing"===t.CLASS_NAME?this.convertFromLinearRing(t):"OpenLayers.Geometry.Polygon"===t.CLASS_NAME?this.convertFromPolygon(t):"OpenLayers.Geometry.MultiPoint"===t.CLASS_NAME?this.convertFromMultiPoint(t):"OpenLayers.Geometry.MultiLineString"===t.CLASS_NAME?this.convertFromMultiLineString(t):"OpenLayers.Geometry.MultiPolygon"===t.CLASS_NAME?this.convertFromMultiPolygon(t):"OpenLayers.Geometry.Collection"===t.CLASS_NAME?this.convertFromCollection(t):void 0},jsts.io.OpenLayersParser.prototype.convertFromPoint=function(t){return this.geometryFactory.createPoint(new jsts.geom.Coordinate(t.x,t.y))},jsts.io.OpenLayersParser.prototype.convertFromLineString=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(new jsts.geom.Coordinate(t.components[e].x,t.components[e].y));return this.geometryFactory.createLineString(n)},jsts.io.OpenLayersParser.prototype.convertFromLinearRing=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(new jsts.geom.Coordinate(t.components[e].x,t.components[e].y));return this.geometryFactory.createLinearRing(n)},jsts.io.OpenLayersParser.prototype.convertFromPolygon=function(t){var e,n=null,o=[];for(e=0;e<t.components.length;e++){var i=this.convertFromLinearRing(t.components[e]);0===e?n=i:o.push(i)}return this.geometryFactory.createPolygon(n,o)},jsts.io.OpenLayersParser.prototype.convertFromMultiPoint=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(this.convertFromPoint(t.components[e]));return this.geometryFactory.createMultiPoint(n)},jsts.io.OpenLayersParser.prototype.convertFromMultiLineString=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(this.convertFromLineString(t.components[e]));return this.geometryFactory.createMultiLineString(n)},jsts.io.OpenLayersParser.prototype.convertFromMultiPolygon=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(this.convertFromPolygon(t.components[e]));return this.geometryFactory.createMultiPolygon(n)},jsts.io.OpenLayersParser.prototype.convertFromCollection=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(this.convertFrom(t.components[e]));return this.geometryFactory.createGeometryCollection(n)},jsts.io.OpenLayersParser.prototype.write=function(t){return"jsts.geom.Point"===t.CLASS_NAME?this.convertToPoint(t.coordinate):"jsts.geom.LineString"===t.CLASS_NAME?this.convertToLineString(t):"jsts.geom.LinearRing"===t.CLASS_NAME?this.convertToLinearRing(t):"jsts.geom.Polygon"===t.CLASS_NAME?this.convertToPolygon(t):"jsts.geom.MultiPoint"===t.CLASS_NAME?this.convertToMultiPoint(t):"jsts.geom.MultiLineString"===t.CLASS_NAME?this.convertToMultiLineString(t):"jsts.geom.MultiPolygon"===t.CLASS_NAME?this.convertToMultiPolygon(t):"jsts.geom.GeometryCollection"===t.CLASS_NAME?this.convertToCollection(t):void 0},jsts.io.OpenLayersParser.prototype.convertToPoint=function(t){return new OpenLayers.Geometry.Point(t.x,t.y)},jsts.io.OpenLayersParser.prototype.convertToLineString=function(t){var e,n=[];for(e=0;e<t.points.length;e++){var o=t.points[e];n.push(this.convertToPoint(o))}return new OpenLayers.Geometry.LineString(n)},jsts.io.OpenLayersParser.prototype.convertToLinearRing=function(t){var e,n=[];for(e=0;e<t.points.length;e++){var o=t.points[e];n.push(this.convertToPoint(o))}return new OpenLayers.Geometry.LinearRing(n)},jsts.io.OpenLayersParser.prototype.convertToPolygon=function(t){var e,n=[];for(n.push(this.convertToLinearRing(t.shell)),e=0;e<t.holes.length;e++){var o=t.holes[e];n.push(this.convertToLinearRing(o))}return new OpenLayers.Geometry.Polygon(n)},jsts.io.OpenLayersParser.prototype.convertToMultiPoint=function(t){var e,n=[];for(e=0;e<t.geometries.length;e++){var o=t.geometries[e].coordinate;n.push(new OpenLayers.Geometry.Point(o.x,o.y))}return new OpenLayers.Geometry.MultiPoint(n)},jsts.io.OpenLayersParser.prototype.convertToMultiLineString=function(t){var e,n=[];for(e=0;e<t.geometries.length;e++)n.push(this.convertToLineString(t.geometries[e]));return new OpenLayers.Geometry.MultiLineString(n)},jsts.io.OpenLayersParser.prototype.convertToMultiPolygon=function(t){var e,n=[];for(e=0;e<t.geometries.length;e++)n.push(this.convertToPolygon(t.geometries[e]));return new OpenLayers.Geometry.MultiPolygon(n)},jsts.io.OpenLayersParser.prototype.convertToCollection=function(t){var e,n=[];for(e=0;e<t.geometries.length;e++){var o=t.geometries[e],i=this.write(o);n.push(i)}return new OpenLayers.Geometry.Collection(n)},jsts.index.quadtree.Quadtree=function(){this.root=new jsts.index.quadtree.Root,this.minExtent=1},jsts.index.quadtree.Quadtree.ensureExtent=function(t,e){var n,o,i,r;return n=t.getMinX(),o=t.getMaxX(),i=t.getMinY(),r=t.getMaxY(),n!==o&&i!==r?t:(n===o&&(n-=e/2,o=n+e/2),i===r&&(i-=e/2,r=i+e/2),new jsts.geom.Envelope(n,o,i,r))},jsts.index.quadtree.Quadtree.prototype.depth=function(){return this.root.depth()},jsts.index.quadtree.Quadtree.prototype.size=function(){return this.root.size()},jsts.index.quadtree.Quadtree.prototype.insert=function(t,e){this.collectStats(t);var n=jsts.index.quadtree.Quadtree.ensureExtent(t,this.minExtent);this.root.insert(n,e)},jsts.index.quadtree.Quadtree.prototype.remove=function(t,e){var n=jsts.index.quadtree.Quadtree.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},jsts.index.quadtree.Quadtree.prototype.query=function(){return 1===arguments.length?jsts.index.quadtree.Quadtree.prototype.queryByEnvelope.apply(this,arguments):void jsts.index.quadtree.Quadtree.prototype.queryWithVisitor.apply(this,arguments)},jsts.index.quadtree.Quadtree.prototype.queryByEnvelope=function(t){var e=new jsts.index.ArrayListVisitor;return this.query(t,e),e.getItems()},jsts.index.quadtree.Quadtree.prototype.queryWithVisitor=function(t,e){this.root.visit(t,e)},jsts.index.quadtree.Quadtree.prototype.queryAll=function(){var t=[];return t=this.root.addAllItems(t)},jsts.index.quadtree.Quadtree.prototype.collectStats=function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},jsts.operation.relate.RelateNodeFactory=function(){},jsts.operation.relate.RelateNodeFactory.prototype=new jsts.geomgraph.NodeFactory,jsts.operation.relate.RelateNodeFactory.prototype.createNode=function(t){return new jsts.operation.relate.RelateNode(t,new jsts.operation.relate.EdgeEndBundleStar)},jsts.index.quadtree.Key=function(t){this.pt=new jsts.geom.Coordinate,this.level=0,this.env=null,this.computeKey(t)},jsts.index.quadtree.Key.computeQuadLevel=function(t){var e,n,o,i;return e=t.getWidth(),n=t.getHeight(),o=e>n?e:n,i=jsts.index.DoubleBits.exponent(o)+1},jsts.index.quadtree.Key.prototype.getPoint=function(){return this.pt},jsts.index.quadtree.Key.prototype.getLevel=function(){return this.level},jsts.index.quadtree.Key.prototype.getEnvelope=function(){return this.env},jsts.index.quadtree.Key.prototype.getCentre=function(){var t,e;return t=(this.env.getMinX()+this.env.getMaxX())/2,e=(this.env.getMinY()+this.env.getMaxY())/2,new jsts.geom.Coordinate(t,e)},jsts.index.quadtree.Key.prototype.computeKey=function(){arguments[0]instanceof jsts.geom.Envelope?this.computeKeyFromEnvelope(arguments[0]):this.computeKeyFromLevel(arguments[0],arguments[1])},jsts.index.quadtree.Key.prototype.computeKeyFromEnvelope=function(t){for(this.level=jsts.index.quadtree.Key.computeQuadLevel(t),this.env=new jsts.geom.Envelope,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)},jsts.index.quadtree.Key.prototype.computeKeyFromLevel=function(t,e){var n=jsts.index.DoubleBits.powerOf2(t);this.pt.x=Math.floor(e.getMinX()/n)*n,this.pt.y=Math.floor(e.getMinY()/n)*n,this.env.init(this.pt.x,this.pt.x+n,this.pt.y,this.pt.y+n)},jsts.geom.CoordinateArrays=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.CoordinateArrays.removeRepeatedPoints=function(t){var e;return this.hasRepeatedPoints(t)?(e=new jsts.geom.CoordinateList(t,!1),e.toCoordinateArray()):t},jsts.geom.CoordinateArrays.hasRepeatedPoints=function(t){var e;for(e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},jsts.geom.CoordinateArrays.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(jsts.geom.CoordinateArrays.indexOf(o,e)<0)return o}return null},jsts.geom.CoordinateArrays.increasingDirection=function(t){for(var e=0;e<parseInt(t.length/2);e++){var n=t.length-1-e,o=t[e].compareTo(t[n]);if(0!=o)return o}return 1},jsts.geom.CoordinateArrays.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},jsts.geom.CoordinateArrays.scroll=function(t,e){var n=jsts.geom.CoordinateArrays.indexOf(e,t);if(!(0>n)){var o=t.slice(n).concat(t.slice(0,n));for(n=0;n<o.length;n++)t[n]=o[n]}},jsts.geom.CoordinateArrays.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},jsts.operation.overlay.MinimalEdgeRing=function(t,e){jsts.geomgraph.EdgeRing.call(this,t,e)},jsts.operation.overlay.MinimalEdgeRing.prototype=new jsts.geomgraph.EdgeRing,jsts.operation.overlay.MinimalEdgeRing.constructor=jsts.operation.overlay.MinimalEdgeRing,jsts.operation.overlay.MinimalEdgeRing.prototype.getNext=function(t){return t.getNextMin()},jsts.operation.overlay.MinimalEdgeRing.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},jsts.triangulate.DelaunayTriangulationBuilder=function(){this.siteCoords=null,this.tolerance=0,this.subdiv=null},jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates=function(t){if(void 0===t||null===t)return new jsts.geom.CoordinateList([],!1).toArray();var e=t.getCoordinates();return jsts.triangulate.DelaunayTriangulationBuilder.unique(e)},jsts.triangulate.DelaunayTriangulationBuilder.unique=function(t){t.sort(function(t,e){return t.compareTo(e)});var e=new jsts.geom.CoordinateList(t,!1);return e.toArray()},jsts.triangulate.DelaunayTriangulationBuilder.toVertices=function(t){var e,n=new Array(t.length),o=0,i=t.length;for(o;i>o;o++)e=t[o],n[o]=new jsts.triangulate.quadedge.Vertex(e);return n},jsts.triangulate.DelaunayTriangulationBuilder.envelope=function(t){var e=new jsts.geom.Envelope,n=0,o=t.length;for(n;o>n;n++)e.expandToInclude(t[n]);return e},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSites=function(){var t=arguments[0];t instanceof jsts.geom.Geometry||t instanceof jsts.geom.Coordinate||t instanceof jsts.geom.Point||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.LineString||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.LinearRing||t instanceof jsts.geom.Polygon||t instanceof jsts.geom.MultiPolygon?this.setSitesFromGeometry(t):this.setSitesFromCollection(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromGeometry=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromCollection=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setTolerance=function(t){this.tolerance=t},jsts.triangulate.DelaunayTriangulationBuilder.prototype.create=function(){if(null===this.subdiv){var t,e,n;t=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords),e=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords),this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(t,this.tolerance),n=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv),n.insertSites(e)}},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getSubdivision=function(){return this.create(),this.subdiv},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getEdges=function(t){return this.create(),this.subdiv.getEdges(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getTriangles=function(t){return this.create(),this.subdiv.getTriangles(t)},jsts.algorithm.RayCrossingCounter=function(t){this.p=t},jsts.algorithm.RayCrossingCounter.locatePointInRing=function(t,e){for(var n=new jsts.algorithm.RayCrossingCounter(t),o=1;o<e.length;o++){var i=e[o],r=e[o-1];if(n.countSegment(i,r),n.isOnSegment())return n.getLocation()}return n.getLocation()},jsts.algorithm.RayCrossingCounter.prototype.p=null,jsts.algorithm.RayCrossingCounter.prototype.crossingCount=0,jsts.algorithm.RayCrossingCounter.prototype.isPointOnSegment=!1,jsts.algorithm.RayCrossingCounter.prototype.countSegment=function(t,e){if(!(t.x<this.p.x&&e.x<this.p.x)){if(this.p.x==e.x&&this.p.y===e.y)return void(this.isPointOnSegment=!0);if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,o=e.x;return n>o&&(n=e.x,o=t.x),void(this.p.x>=n&&this.p.x<=o&&(this.isPointOnSegment=!0))}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var i=t.x-this.p.x,r=t.y-this.p.y,s=e.x-this.p.x,a=e.y-this.p.y,l=jsts.algorithm.RobustDeterminant.signOfDet2x2(i,r,s,a);if(0===l)return void(this.isPointOnSegment=!0);r>a&&(l=-l),l>0&&this.crossingCount++}}},jsts.algorithm.RayCrossingCounter.prototype.isOnSegment=function(){return jsts.geom.isPointOnSegment},jsts.algorithm.RayCrossingCounter.prototype.getLocation=function(){return this.isPointOnSegment?jsts.geom.Location.BOUNDARY:this.crossingCount%2===1?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR
},jsts.algorithm.RayCrossingCounter.prototype.isPointInPolygon=function(){return this.getLocation()!==jsts.geom.Location.EXTERIOR},jsts.operation.BoundaryOp=function(t,e){this.geom=t,this.geomFact=t.getFactory(),this.bnRule=e||jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE},jsts.operation.BoundaryOp.prototype.geom=null,jsts.operation.BoundaryOp.prototype.geomFact=null,jsts.operation.BoundaryOp.prototype.bnRule=null,jsts.operation.BoundaryOp.prototype.getBoundary=function(){return this.geom instanceof jsts.geom.LineString?this.boundaryLineString(this.geom):this.geom instanceof jsts.geom.MultiLineString?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},jsts.operation.BoundaryOp.prototype.getEmptyMultiPoint=function(){return this.geomFact.createMultiPoint(null)},jsts.operation.BoundaryOp.prototype.boundaryMultiLineString=function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1==e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPoint(e)},jsts.operation.BoundaryOp.prototype.endpoints=null,jsts.operation.BoundaryOp.prototype.computeBoundaryCoordinates=function(t){var e,n,o,i=[];for(this.endpoints=[],e=0;e<t.getNumGeometries();e++)n=t.getGeometryN(e),0!=n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)));for(e=0;e<this.endpoints.length;e++)o=this.endpoints[e],this.bnRule.isInBoundary(o.count)&&i.push(o.coordinate);return i},jsts.operation.BoundaryOp.prototype.addEndpoint=function(t){var e,n,o=!1;for(e=0;e<this.endpoints.length;e++)if(n=this.endpoints[e],n.coordinate.equals(t)){o=!0;break}o||(n={},n.coordinate=t,n.count=0,this.endpoints.push(n)),n.count++},jsts.operation.BoundaryOp.prototype.boundaryLineString=function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint(null)}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},jsts.operation.buffer.OffsetCurveSetBuilder=function(t,e,n){this.inputGeom=t,this.distance=e,this.curveBuilder=n,this.curveList=new javascript.util.ArrayList},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.inputGeom=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.distance=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveBuilder=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveList=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.getCurves=function(){return this.add(this.inputGeom),this.curveList},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCurve=function(t,e,n){if(!(null==t||t.length<2)){var o=new jsts.noding.NodedSegmentString(t,new jsts.geomgraph.Label(0,jsts.geom.Location.BOUNDARY,e,n));this.curveList.add(o)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.add=function(t){if(!t.isEmpty())if(t instanceof jsts.geom.Polygon)this.addPolygon(t);else if(t instanceof jsts.geom.LineString)this.addLineString(t);else if(t instanceof jsts.geom.Point)this.addPoint(t);else if(t instanceof jsts.geom.MultiPoint)this.addCollection(t);else if(t instanceof jsts.geom.MultiLineString)this.addCollection(t);else if(t instanceof jsts.geom.MultiPolygon)this.addCollection(t);else{if(!(t instanceof jsts.geom.GeometryCollection))throw new jsts.error.IllegalArgumentError;this.addCollection(t)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPoint=function(t){if(!(this.distance<=0)){var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addLineString=function(t){if(!(this.distance<=0)||this.curveBuilder.getBufferParameters().isSingleSided()){var e=jsts.geom.CoordinateArrays.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygon=function(t){var e=this.distance,n=jsts.geomgraph.Position.LEFT;this.distance<0&&(e=-this.distance,n=jsts.geomgraph.Position.RIGHT);var o=t.getExteriorRing(),i=jsts.geom.CoordinateArrays.removeRepeatedPoints(o.getCoordinates());if(!(this.distance<0&&this.isErodedCompletely(o,this.distance)||this.distance<=0&&i.length<3)){this.addPolygonRing(i,e,n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);for(var r=0;r<t.getNumInteriorRing();r++){var s=t.getInteriorRingN(r),a=jsts.geom.CoordinateArrays.removeRepeatedPoints(s.getCoordinates());this.distance>0&&this.isErodedCompletely(s,-this.distance)||this.addPolygonRing(a,e,jsts.geomgraph.Position.opposite(n),jsts.geom.Location.INTERIOR,jsts.geom.Location.EXTERIOR)}}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygonRing=function(t,e,n,o,i){if(!(0==e&&t.length<jsts.geom.LinearRing.MINIMUM_VALID_SIZE)){var r=o,s=i;t.length>=jsts.geom.LinearRing.MINIMUM_VALID_SIZE&&jsts.algorithm.CGAlgorithms.isCCW(t)&&(r=i,s=o,n=jsts.geomgraph.Position.opposite(n));var a=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(a,r,s)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return 0>e;if(4==n.length)return this.isTriangleErodedCompletely(n,e);var o=t.getEnvelopeInternal(),i=Math.min(o.getHeight(),o.getWidth());return 0>e&&2*Math.abs(e)>i?!0:!1},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function(t,e){var n=new jsts.geom.Triangle(t[0],t[1],t[2]),o=n.inCentre(),i=jsts.algorithm.CGAlgorithms.distancePointLine(o,n.p0,n.p1);return i<Math.abs(e)},jsts.operation.buffer.BufferSubgraph=function(){this.dirEdgeList=new javascript.util.ArrayList,this.nodes=new javascript.util.ArrayList,this.finder=new jsts.operation.buffer.RightmostEdgeFinder},jsts.operation.buffer.BufferSubgraph.prototype.finder=null,jsts.operation.buffer.BufferSubgraph.prototype.dirEdgeList=null,jsts.operation.buffer.BufferSubgraph.prototype.nodes=null,jsts.operation.buffer.BufferSubgraph.prototype.rightMostCoord=null,jsts.operation.buffer.BufferSubgraph.prototype.env=null,jsts.operation.buffer.BufferSubgraph.prototype.getDirectedEdges=function(){return this.dirEdgeList},jsts.operation.buffer.BufferSubgraph.prototype.getNodes=function(){return this.nodes},jsts.operation.buffer.BufferSubgraph.prototype.getEnvelope=function(){if(null===this.env){for(var t=new jsts.geom.Envelope,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),o=n.getEdge().getCoordinates(),i=0;i<o.length-1;i++)t.expandToInclude(o[i]);this.env=t}return this.env},jsts.operation.buffer.BufferSubgraph.prototype.getRightmostCoordinate=function(){return this.rightMostCoord},jsts.operation.buffer.BufferSubgraph.prototype.create=function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},jsts.operation.buffer.BufferSubgraph.prototype.addReachable=function(t){var e=[];for(e.push(t);0!==e.length;){var n=e.pop();this.add(n,e)}},jsts.operation.buffer.BufferSubgraph.prototype.add=function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var o=n.next();this.dirEdgeList.add(o);var i=o.getSym(),r=i.getNode();r.isVisited()||e.push(r)}},jsts.operation.buffer.BufferSubgraph.prototype.clearVisitedEdges=function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},jsts.operation.buffer.BufferSubgraph.prototype.computeDepth=function(t){this.clearVisitedEdges();{var e=this.finder.getEdge();e.getNode(),e.getLabel()}e.setEdgeDepths(jsts.geomgraph.Position.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},jsts.operation.buffer.BufferSubgraph.prototype.computeDepths=function(t){var e=[],n=[],o=t.getNode();for(n.push(o),e.push(o),t.setVisited(!0);0!==n.length;){var i=n.shift();e.push(i),this.computeNodeDepth(i);for(var r=i.getEdges().iterator();r.hasNext();){var s=r.next(),a=s.getSym();if(!a.isVisited()){var l=a.getNode();-1===e.indexOf(l)&&(n.push(l),e.push(l))}}}},jsts.operation.buffer.BufferSubgraph.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var o=n.next();if(o.isVisited()||o.getSym().isVisited()){e=o;break}}if(null==e)throw new jsts.error.TopologyError("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var o=n.next();o.setVisited(!0),this.copySymDepths(o)}},jsts.operation.buffer.BufferSubgraph.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(jsts.geomgraph.Position.LEFT,t.getDepth(jsts.geomgraph.Position.RIGHT)),e.setDepth(jsts.geomgraph.Position.RIGHT,t.getDepth(jsts.geomgraph.Position.LEFT))},jsts.operation.buffer.BufferSubgraph.prototype.findResultEdges=function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(jsts.geomgraph.Position.RIGHT)>=1&&e.getDepth(jsts.geomgraph.Position.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},jsts.operation.buffer.BufferSubgraph.prototype.compareTo=function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},jsts.geom.util.GeometryExtracter=function(t,e){this.clz=t,this.comps=e},jsts.geom.util.GeometryExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.GeometryExtracter.prototype.clz=null,jsts.geom.util.GeometryExtracter.prototype.comps=null,jsts.geom.util.GeometryExtracter.extract=function(t,e,n){return n=n||new javascript.util.ArrayList,t instanceof e?n.add(t):(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)&&t.apply(new jsts.geom.util.GeometryExtracter(e,n)),n},jsts.geom.util.GeometryExtracter.prototype.filter=function(t){(null===this.clz||t instanceof this.clz)&&this.comps.add(t)},function(){var t=jsts.operation.overlay.OverlayOp,e=jsts.operation.overlay.snap.SnapOverlayOp,n=function(t,e){this.geom=[],this.geom[0]=t,this.geom[1]=e};n.overlayOp=function(t,e,o){var i=new n(t,e);return i.getResultGeometry(o)},n.intersection=function(e,n){return overlayOp(e,n,t.INTERSECTION)},n.union=function(e,n){return overlayOp(e,n,t.UNION)},n.difference=function(e,n){return overlayOp(e,n,t.DIFFERENCE)},n.symDifference=function(e,n){return overlayOp(e,n,t.SYMDIFFERENCE)},n.prototype.geom=null,n.prototype.getResultGeometry=function(n){var o=null,i=!1,r=null;try{o=t.overlayOp(this.geom[0],this.geom[1],n);var s=!0;s&&(i=!0)}catch(a){r=a}if(!i)try{o=e.overlayOp(this.geom[0],this.geom[1],n)}catch(a){throw r}return o},jsts.operation.overlay.snap.SnapIfNeededOverlayOp=n}(),function(){var t=jsts.geom.util.GeometryExtracter,e=jsts.operation.union.CascadedPolygonUnion,n=jsts.operation.union.PointGeometryUnion,o=jsts.operation.overlay.OverlayOp,i=jsts.operation.overlay.snap.SnapIfNeededOverlayOp,r=javascript.util.ArrayList;jsts.operation.union.UnaryUnionOp=function(t,e){this.polygons=new r,this.lines=new r,this.points=new r,e&&(this.geomFact=e),this.extract(t)},jsts.operation.union.UnaryUnionOp.union=function(t,e){var n=new jsts.operation.union.UnaryUnionOp(t,e);return n.union()},jsts.operation.union.UnaryUnionOp.prototype.polygons=null,jsts.operation.union.UnaryUnionOp.prototype.lines=null,jsts.operation.union.UnaryUnionOp.prototype.points=null,jsts.operation.union.UnaryUnionOp.prototype.geomFact=null,jsts.operation.union.UnaryUnionOp.prototype.extract=function(e){if(e instanceof r)for(var n=e.iterator();n.hasNext();){var o=n.next();this.extract(o)}else null===this.geomFact&&(this.geomFact=e.getFactory()),t.extract(e,jsts.geom.Polygon,this.polygons),t.extract(e,jsts.geom.LineString,this.lines),t.extract(e,jsts.geom.Point,this.points)},jsts.operation.union.UnaryUnionOp.prototype.union=function(){if(null===this.geomFact)return null;var t=null;if(this.points.size()>0){var o=this.geomFact.buildGeometry(this.points);t=this.unionNoOpt(o)}var i=null;if(this.lines.size()>0){var r=this.geomFact.buildGeometry(this.lines);i=this.unionNoOpt(r)}var s=null;this.polygons.size()>0&&(s=e.union(this.polygons));var a=this.unionWithNull(i,s),l=null;return l=null===t?a:null===a?t:n(t,a),null===l?this.geomFact.createGeometryCollection(null):l},jsts.operation.union.UnaryUnionOp.prototype.unionWithNull=function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},jsts.operation.union.UnaryUnionOp.prototype.unionNoOpt=function(t){var e=this.geomFact.createPoint(null);return i.overlayOp(t,e,o.UNION)}}(),jsts.index.kdtree.KdNode=function(){this.left=null,this.right=null,this.count=1,2===arguments.length?this.initializeFromCoordinate.apply(this,arguments[0],arguments[1]):3===arguments.length&&this.initializeFromXY.apply(this,arguments[0],arguments[1],arguments[2])},jsts.index.kdtree.KdNode.prototype.initializeFromXY=function(t,e,n){this.p=new jsts.geom.Coordinate(t,e),this.data=n},jsts.index.kdtree.KdNode.prototype.initializeFromCoordinate=function(t,e){this.p=t,this.data=e},jsts.index.kdtree.KdNode.prototype.getX=function(){return this.p.x},jsts.index.kdtree.KdNode.prototype.getY=function(){return this.p.y},jsts.index.kdtree.KdNode.prototype.getCoordinate=function(){return this.p},jsts.index.kdtree.KdNode.prototype.getData=function(){return this.data},jsts.index.kdtree.KdNode.prototype.getLeft=function(){return this.left},jsts.index.kdtree.KdNode.prototype.getRight=function(){return this.right},jsts.index.kdtree.KdNode.prototype.increment=function(){this.count+=1},jsts.index.kdtree.KdNode.prototype.getCount=function(){return this.count},jsts.index.kdtree.KdNode.prototype.isRepeated=function(){return count>1},jsts.index.kdtree.KdNode.prototype.setLeft=function(t){this.left=t},jsts.index.kdtree.KdNode.prototype.setRight=function(t){this.right=t},jsts.algorithm.InteriorPointPoint=function(t){this.minDistance=Number.MAX_VALUE,this.interiorPoint=null,this.centroid=t.getCentroid().getCoordinate(),this.add(t)},jsts.algorithm.InteriorPointPoint.prototype.add=function(t){if(t instanceof jsts.geom.Point)this.addPoint(t.getCoordinate());else if(t instanceof jsts.geom.GeometryCollection)for(var e=0;e<t.getNumGeometries();e++)this.add(t.getGeometryN(e))},jsts.algorithm.InteriorPointPoint.prototype.addPoint=function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new jsts.geom.Coordinate(t),this.minDistance=e)},jsts.algorithm.InteriorPointPoint.prototype.getInteriorPoint=function(){return this.interiorPoint},function(){jsts.geom.MultiLineString=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.MultiLineString.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiLineString.constructor=jsts.geom.MultiLineString,jsts.geom.MultiLineString.prototype.getBoundary=function(){return new jsts.operation.BoundaryOp(this).getBoundary()},jsts.geom.MultiLineString.prototype.equalsExact=function(t,e){return this.isEquivalentClass(t)?jsts.geom.GeometryCollection.prototype.equalsExact.call(this,t,e):!1},jsts.geom.MultiLineString.prototype.CLASS_NAME="jsts.geom.MultiLineString"}(),function(){var t=jsts.index.bintree.Interval,e=jsts.index.bintree.Root,n=function(){this.root=new e,this.minExtent=1};n.ensureExtent=function(e,n){var o,i;return o=e.getMin(),i=e.getMax(),o!==i?e:(o===i&&(o-=n/2,i=o+n/2),new t(o,i))},n.prototype.depth=function(){return null!==this.root?this.root.depth():0},n.prototype.size=function(){return null!==this.root?this.root.size():0},n.prototype.nodeSize=function(){return null!==this.root?this.root.nodeSize():0},n.prototype.insert=function(t,e){this.collectStats(t);var o=n.ensureExtent(t,this.minExtent);this.root.insert(o,e)},n.prototype.remove=function(t,e){var o=n.ensureExtent(t,this.minExtent);return this.root.remove(o,e)},n.prototype.iterator=function(){var t=new javascript.util.ArrayList;return this.root.addAllItems(t),t.iterator()},n.prototype.query=function(){if(2!==arguments.length){var e=arguments[0];return!e instanceof t&&(e=new t(e,e)),this.queryInterval(e)}this.queryAndAdd(arguments[0],arguments[1])},n.prototype.queryInterval=function(t){var e=new javascript.util.ArrayList;return this.query(t,e),e},n.prototype.queryAndAdd=function(t,e){this.root.addAllItemsFromOverlapping(t,e)},n.prototype.collectStats=function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},jsts.index.bintree.Bintree=n}(),jsts.algorithm.InteriorPointArea=function(t){this.factory,this.interiorPoint=null,this.maxWidth=0,this.factory=t.getFactory(),this.add(t)},jsts.algorithm.InteriorPointArea.avg=function(t,e){return(t+e)/2},jsts.algorithm.InteriorPointArea.prototype.getInteriorPoint=function(){return this.interiorPoint},jsts.algorithm.InteriorPointArea.prototype.add=function(t){if(t instanceof jsts.geom.Polygon)this.addPolygon(t);else if(t instanceof jsts.geom.GeometryCollection)for(var e=0;e<t.getNumGeometries();e++)this.add(t.getGeometryN(e))},jsts.algorithm.InteriorPointArea.prototype.addPolygon=function(t){if(!t.isEmpty()){var e,n=0,o=this.horizontalBisector(t);if(0==o.getLength())n=0,e=o.getCoordinate();else{var i=o.intersection(t),r=this.widestGeometry(i);n=r.getEnvelopeInternal().getWidth(),e=this.centre(r.getEnvelopeInternal())}(null==this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)}},jsts.algorithm.InteriorPointArea.prototype.widestGeometry=function(t){if(t instanceof jsts.geom.GeometryCollection){var e=t;if(e.isEmpty())return e;for(var n=e.getGeometryN(0),o=1;o<e.getNumGeometries();o++)e.getGeometryN(o).getEnvelopeInternal().getWidth()>n.getEnvelopeInternal().getWidth()&&(n=e.getGeometryN(o));return n}return t instanceof jsts.geom.Geometry?t:void 0},jsts.algorithm.InteriorPointArea.prototype.horizontalBisector=function(t){var e=t.getEnvelopeInternal(),n=jsts.algorithm.SafeBisectorFinder.getBisectorY(t);return this.factory.createLineString([new jsts.geom.Coordinate(e.getMinX(),n),new jsts.geom.Coordinate(e.getMaxX(),n)])},jsts.algorithm.InteriorPointArea.prototype.centre=function(t){return new jsts.geom.Coordinate(jsts.algorithm.InteriorPointArea.avg(t.getMinX(),t.getMaxX()),jsts.algorithm.InteriorPointArea.avg(t.getMinY(),t.getMaxY()))},jsts.algorithm.SafeBisectorFinder=function(t){this.poly,this.centreY,this.hiY=Number.MAX_VALUE,this.loY=-Number.MAX_VALUE,this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=jsts.algorithm.InteriorPointArea.avg(this.loY,this.hiY)},jsts.algorithm.SafeBisectorFinder.getBisectorY=function(t){var e=new jsts.algorithm.SafeBisectorFinder(t);return e.getBisectorY()},jsts.algorithm.SafeBisectorFinder.prototype.getBisectorY=function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=jsts.algorithm.InteriorPointArea.avg(this.hiY,this.loY);return e},jsts.algorithm.SafeBisectorFinder.prototype.process=function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.length;n++){var o=e[n].y;this.updateInterval(o)}},jsts.algorithm.SafeBisectorFinder.prototype.updateInterval=function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},jsts.operation.buffer.BufferParameters=function(t,e,n,o){t&&this.setQuadrantSegments(t),e&&this.setEndCapStyle(e),n&&this.setJoinStyle(n),o&&this.setMitreLimit(o)},jsts.operation.buffer.BufferParameters.CAP_ROUND=1,jsts.operation.buffer.BufferParameters.CAP_FLAT=2,jsts.operation.buffer.BufferParameters.CAP_SQUARE=3,jsts.operation.buffer.BufferParameters.JOIN_ROUND=1,jsts.operation.buffer.BufferParameters.JOIN_MITRE=2,jsts.operation.buffer.BufferParameters.JOIN_BEVEL=3,jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS=8,jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT=5,jsts.operation.buffer.BufferParameters.prototype.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS,jsts.operation.buffer.BufferParameters.prototype.endCapStyle=jsts.operation.buffer.BufferParameters.CAP_ROUND,jsts.operation.buffer.BufferParameters.prototype.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_ROUND,jsts.operation.buffer.BufferParameters.prototype.mitreLimit=jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT,jsts.operation.buffer.BufferParameters.prototype._isSingleSided=!1,jsts.operation.buffer.BufferParameters.prototype.getQuadrantSegments=function(){return this.quadrantSegments},jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(t){this.quadrantSegments=t},jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==jsts.operation.buffer.BufferParameters.JOIN_ROUND&&(this.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS)},jsts.operation.buffer.BufferParameters.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},jsts.operation.buffer.BufferParameters.prototype.getEndCapStyle=function(){return this.endCapStyle},jsts.operation.buffer.BufferParameters.prototype.setEndCapStyle=function(t){this.endCapStyle=t},jsts.operation.buffer.BufferParameters.prototype.getJoinStyle=function(){return this.joinStyle},jsts.operation.buffer.BufferParameters.prototype.setJoinStyle=function(t){this.joinStyle=t},jsts.operation.buffer.BufferParameters.prototype.getMitreLimit=function(){return this.mitreLimit},jsts.operation.buffer.BufferParameters.prototype.setMitreLimit=function(t){this.mitreLimit=t},jsts.operation.buffer.BufferParameters.prototype.setSingleSided=function(t){this._isSingleSided=t},jsts.operation.buffer.BufferParameters.prototype.isSingleSided=function(){return this._isSingleSided},jsts.operation.buffer.BufferBuilder=function(t){this.bufParams=t,this.edgeList=new jsts.geomgraph.EdgeList},jsts.operation.buffer.BufferBuilder.depthDelta=function(t){var e=t.getLocation(0,jsts.geomgraph.Position.LEFT),n=t.getLocation(0,jsts.geomgraph.Position.RIGHT);return e===jsts.geom.Location.INTERIOR&&n===jsts.geom.Location.EXTERIOR?1:e===jsts.geom.Location.EXTERIOR&&n===jsts.geom.Location.INTERIOR?-1:0},jsts.operation.buffer.BufferBuilder.prototype.bufParams=null,jsts.operation.buffer.BufferBuilder.prototype.workingPrecisionModel=null,jsts.operation.buffer.BufferBuilder.prototype.workingNoder=null,jsts.operation.buffer.BufferBuilder.prototype.geomFact=null,jsts.operation.buffer.BufferBuilder.prototype.graph=null,jsts.operation.buffer.BufferBuilder.prototype.edgeList=null,jsts.operation.buffer.BufferBuilder.prototype.setWorkingPrecisionModel=function(t){this.workingPrecisionModel=t},jsts.operation.buffer.BufferBuilder.prototype.setNoder=function(t){this.workingNoder=t},jsts.operation.buffer.BufferBuilder.prototype.buffer=function(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var o=new jsts.operation.buffer.OffsetCurveBuilder(n,this.bufParams),i=new jsts.operation.buffer.OffsetCurveSetBuilder(t,e,o),r=i.getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this.graph=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory),this.graph.addEdges(this.edgeList.getEdges());var s=this.createSubgraphs(this.graph),a=new jsts.operation.overlay.PolygonBuilder(this.geomFact);this.buildSubgraphs(s,a);var l=a.getPolygons();if(l.size()<=0)return this.createEmptyResultGeometry();var p=this.geomFact.buildGeometry(l);return p},jsts.operation.buffer.BufferBuilder.prototype.getNoder=function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new jsts.noding.MCIndexNoder,n=new jsts.algorithm.RobustLineIntersector;return n.setPrecisionModel(t),e.setSegmentIntersector(new jsts.noding.IntersectionAdder(n)),e},jsts.operation.buffer.BufferBuilder.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var o=n.getNodedSubstrings(),i=o.iterator();i.hasNext();){var r=i.next(),s=r.getData(),a=new jsts.geomgraph.Edge(r.getCoordinates(),new jsts.geomgraph.Label(s));this.insertUniqueEdge(a)}},jsts.operation.buffer.BufferBuilder.prototype.insertUniqueEdge=function(t){var e=this.edgeList.findEqualEdge(t);if(null!=e){var n=e.getLabel(),o=t.getLabel();e.isPointwiseEqual(t)||(o=new jsts.geomgraph.Label(t.getLabel()),o.flip()),n.merge(o);var i=jsts.operation.buffer.BufferBuilder.depthDelta(o),r=e.getDepthDelta(),s=r+i;e.setDepthDelta(s)}else this.edgeList.add(t),t.setDepthDelta(jsts.operation.buffer.BufferBuilder.depthDelta(t.getLabel()))},jsts.operation.buffer.BufferBuilder.prototype.createSubgraphs=function(t){for(var e=[],n=t.getNodes().iterator();n.hasNext();){var o=n.next();if(!o.isVisited()){var i=new jsts.operation.buffer.BufferSubgraph;i.create(o),e.push(i)}}var r=function(t,e){return t.compareTo(e)};return e.sort(r),e.reverse(),e},jsts.operation.buffer.BufferBuilder.prototype.buildSubgraphs=function(t,e){for(var n=[],o=0;o<t.length;o++){var i=t[o],r=i.getRightmostCoordinate(),s=new jsts.operation.buffer.SubgraphDepthLocater(n),a=s.getDepth(r);i.computeDepth(a),i.findResultEdges(),n.push(i),e.add(i.getDirectedEdges(),i.getNodes())}},jsts.operation.buffer.BufferBuilder.convertSegStrings=function(t){for(var e=new jsts.geom.GeometryFactory,n=new javascript.util.ArrayList;t.hasNext();){var o=t.next(),i=e.createLineString(o.getCoordinates());n.add(i)}return e.buildGeometry(n)},jsts.operation.buffer.BufferBuilder.prototype.createEmptyResultGeometry=function(){var t=this.geomFact.createPolygon(null,null);return t},jsts.noding.SegmentPointComparator=function(){},jsts.noding.SegmentPointComparator.compare=function(t,e,n){if(e.equals2D(n))return 0;var o=jsts.noding.SegmentPointComparator.relativeSign(e.x,n.x),i=jsts.noding.SegmentPointComparator.relativeSign(e.y,n.y);switch(t){case 0:return jsts.noding.SegmentPointComparator.compareValue(o,i);case 1:return jsts.noding.SegmentPointComparator.compareValue(i,o);case 2:return jsts.noding.SegmentPointComparator.compareValue(i,-o);case 3:return jsts.noding.SegmentPointComparator.compareValue(-o,i);case 4:return jsts.noding.SegmentPointComparator.compareValue(-o,-i);case 5:return jsts.noding.SegmentPointComparator.compareValue(-i,-o);case 6:return jsts.noding.SegmentPointComparator.compareValue(-i,o);case 7:return jsts.noding.SegmentPointComparator.compareValue(o,-i)}return 0},jsts.noding.SegmentPointComparator.relativeSign=function(t,e){return e>t?-1:t>e?1:0},jsts.noding.SegmentPointComparator.compareValue=function(t,e){return 0>t?-1:t>0?1:0>e?-1:e>0?1:0},jsts.operation.relate.RelateOp=function(){jsts.operation.GeometryGraphOperation.apply(this,arguments),this._relate=new jsts.operation.relate.RelateComputer(this.arg)},jsts.operation.relate.RelateOp.prototype=new jsts.operation.GeometryGraphOperation,jsts.operation.relate.RelateOp.relate=function(t,e,n){var o=new jsts.operation.relate.RelateOp(t,e,n),i=o.getIntersectionMatrix();return i},jsts.operation.relate.RelateOp.prototype._relate=null,jsts.operation.relate.RelateOp.prototype.getIntersectionMatrix=function(){return this._relate.computeIM()},jsts.index.chain.MonotoneChain=function(t,e,n,o){this.pts=t,this.start=e,this.end=n,this.context=o},jsts.index.chain.MonotoneChain.prototype.pts=null,jsts.index.chain.MonotoneChain.prototype.start=null,jsts.index.chain.MonotoneChain.prototype.end=null,jsts.index.chain.MonotoneChain.prototype.env=null,jsts.index.chain.MonotoneChain.prototype.context=null,jsts.index.chain.MonotoneChain.prototype.id=null,jsts.index.chain.MonotoneChain.prototype.setId=function(t){this.id=t},jsts.index.chain.MonotoneChain.prototype.getId=function(){return this.id},jsts.index.chain.MonotoneChain.prototype.getContext=function(){return this.context},jsts.index.chain.MonotoneChain.prototype.getEnvelope=function(){if(null==this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new jsts.geom.Envelope(t,e)}return this.env},jsts.index.chain.MonotoneChain.prototype.getStartIndex=function(){return this.start},jsts.index.chain.MonotoneChain.prototype.getEndIndex=function(){return this.end},jsts.index.chain.MonotoneChain.prototype.getLineSegment=function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},jsts.index.chain.MonotoneChain.prototype.getCoordinates=function(){for(var t=[],e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},jsts.index.chain.MonotoneChain.prototype.select=function(t,e){this.computeSelect2(t,this.start,this.end,e)},jsts.index.chain.MonotoneChain.prototype.computeSelect2=function(t,e,n,o){var i=this.pts[e],r=this.pts[n];if(o.tempEnv1.init(i,r),n-e===1)return void o.select(this,e);if(t.intersects(o.tempEnv1)){var s=parseInt((e+n)/2);s>e&&this.computeSelect2(t,e,s,o),n>s&&this.computeSelect2(t,s,n,o)}},jsts.index.chain.MonotoneChain.prototype.computeOverlaps=function(t,e){return 6===arguments.length?this.computeOverlaps2.apply(this,arguments):void this.computeOverlaps2(this.start,this.end,t,t.start,t.end,e)},jsts.index.chain.MonotoneChain.prototype.computeOverlaps2=function(t,e,n,o,i,r){var s=this.pts[t],a=this.pts[e],l=n.pts[o],p=n.pts[i];if(e-t===1&&i-o===1)return void r.overlap(this,t,n,o);if(r.tempEnv1.init(s,a),r.tempEnv2.init(l,p),r.tempEnv1.intersects(r.tempEnv2)){var u=parseInt((t+e)/2),h=parseInt((o+i)/2);u>t&&(h>o&&this.computeOverlaps2(t,u,n,o,h,r),i>h&&this.computeOverlaps2(t,u,n,h,i,r)),e>u&&(h>o&&this.computeOverlaps2(u,e,n,o,h,r),i>h&&this.computeOverlaps2(u,e,n,h,i,r))}},jsts.algorithm.HCoordinate=function(){this.x=0,this.y=0,this.w=1,1===arguments.length?this.initFrom1Coordinate(arguments[0]):2===arguments.length&&arguments[0]instanceof jsts.geom.Coordinate?this.initFrom2Coordinates(arguments[0],arguments[1]):2===arguments.length&&arguments[0]instanceof jsts.algorithm.HCoordinate?this.initFrom2HCoordinates(arguments[0],arguments[1]):2===arguments.length?this.initFromXY(arguments[0],arguments[1]):3===arguments.length?this.initFromXYW(arguments[0],arguments[1],arguments[2]):4===arguments.length&&this.initFromXYW(arguments[0],arguments[1],arguments[2],arguments[3])},jsts.algorithm.HCoordinate.intersection=function(t,e,n,o){var i,r,s,a,l,p,u,h,d,c,g;if(i=t.y-e.y,r=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-o.y,l=o.x-n.x,p=n.x*o.y-o.x*n.y,u=r*p-l*s,h=a*s-i*p,d=i*l-a*r,c=u/d,g=h/d,!isFinite(c)||!isFinite(g))throw new jsts.error.NotRepresentableError;return new jsts.geom.Coordinate(c,g)},jsts.algorithm.HCoordinate.prototype.initFrom1Coordinate=function(t){this.x=t.x,this.y=t.y,this.w=1},jsts.algorithm.HCoordinate.prototype.initFrom2Coordinates=function(t,e){this.x=t.y-e.y,this.y=e.x-t.x,this.w=t.x*e.y-e.x*t.y},jsts.algorithm.HCoordinate.prototype.initFrom2HCoordinates=function(t,e){this.x=t.y*e.w-e.y*t.w,this.y=e.x*t.w-t.x*e.w,this.w=t.x*e.y-e.x*t.y},jsts.algorithm.HCoordinate.prototype.initFromXYW=function(t,e,n){this.x=t,this.y=e,this.w=n},jsts.algorithm.HCoordinate.prototype.initFromXY=function(t,e){this.x=t,this.y=e,this.w=1},jsts.algorithm.HCoordinate.prototype.initFrom4Coordinates=function(t,e,n,o){var i,r,s,a,l,p;i=t.y-e.y,r=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-o.y,l=o.x-n.x,p=n.x*o.y-o.x*n.y,this.x=r*p-l*s,this.y=a*s-i*p,this.w=i*l-a*r},jsts.algorithm.HCoordinate.prototype.getX=function(){var t=this.x/this.w;if(!isFinite(t))throw new jsts.error.NotRepresentableError;return t},jsts.algorithm.HCoordinate.prototype.getY=function(){var t=this.y/this.w;if(!isFinite(t))throw new jsts.error.NotRepresentableError;return t},jsts.algorithm.HCoordinate.prototype.getCoordinate=function(){var t=new jsts.geom.Coordinate;return t.x=this.getX(),t.y=this.getY(),t},function(){var t=jsts.geom.Location,e=jsts.geom.Dimension;jsts.geom.IntersectionMatrix=function(n){var o=n;void 0===n||null===n?(this.matrix=[[],[],[]],this.setAll(e.FALSE)):"string"==typeof n?this.set(n):o instanceof jsts.geom.IntersectionMatrix&&(this.matrix[t.INTERIOR][t.INTERIOR]=o.matrix[t.INTERIOR][t.INTERIOR],this.matrix[t.INTERIOR][t.BOUNDARY]=o.matrix[t.INTERIOR][t.BOUNDARY],this.matrix[t.INTERIOR][t.EXTERIOR]=o.matrix[t.INTERIOR][t.EXTERIOR],this.matrix[t.BOUNDARY][t.INTERIOR]=o.matrix[t.BOUNDARY][t.INTERIOR],this.matrix[t.BOUNDARY][t.BOUNDARY]=o.matrix[t.BOUNDARY][t.BOUNDARY],this.matrix[t.BOUNDARY][t.EXTERIOR]=o.matrix[t.BOUNDARY][t.EXTERIOR],this.matrix[t.EXTERIOR][t.INTERIOR]=o.matrix[t.EXTERIOR][t.INTERIOR],this.matrix[t.EXTERIOR][t.BOUNDARY]=o.matrix[t.EXTERIOR][t.BOUNDARY],this.matrix[t.EXTERIOR][t.EXTERIOR]=o.matrix[t.EXTERIOR][t.EXTERIOR])
},jsts.geom.IntersectionMatrix.prototype.matrix=null,jsts.geom.IntersectionMatrix.prototype.add=function(t){var e,n;for(e=0;3>e;e++)for(n=0;3>n;n++)this.setAtLeast(e,n,t.get(e,n))},jsts.geom.IntersectionMatrix.matches=function(t,n){return"string"==typeof t?jsts.geom.IntersectionMatrix.matches2.call(this,arguments):"*"===n?!0:"T"===n&&(t>=0||t===e.TRUE)?!0:"F"===n&&t===e.FALSE?!0:"0"===n&&t===e.P?!0:"1"===n&&t===e.L?!0:"2"===n&&t===e.A?!0:!1},jsts.geom.IntersectionMatrix.matches2=function(t,e){var n=new jsts.geom.IntersectionMatrix(t);return n.matches(e)},jsts.geom.IntersectionMatrix.prototype.set=function(t,e,n){return"string"==typeof t?void this.set2(t):void(this.matrix[t][e]=n)},jsts.geom.IntersectionMatrix.prototype.set2=function(t){for(var n=0;n<t.length();n++){var o=n/3,i=n%3;this.matrix[o][i]=e.toDimensionValue(t.charAt(n))}},jsts.geom.IntersectionMatrix.prototype.setAtLeast=function(t,e,n){return 1===arguments.length?void this.setAtLeast2(arguments[0]):void(this.matrix[t][e]<n&&(this.matrix[t][e]=n))},jsts.geom.IntersectionMatrix.prototype.setAtLeastIfValid=function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},jsts.geom.IntersectionMatrix.prototype.setAtLeast2=function(t){var e;for(e=0;e<t.length;e++){var n=parseInt(e/3),o=parseInt(e%3);this.setAtLeast(n,o,jsts.geom.Dimension.toDimensionValue(t.charAt(e)))}},jsts.geom.IntersectionMatrix.prototype.setAll=function(t){var e,n;for(e=0;3>e;e++)for(n=0;3>n;n++)this.matrix[e][n]=t},jsts.geom.IntersectionMatrix.prototype.get=function(t,e){return this.matrix[t][e]},jsts.geom.IntersectionMatrix.prototype.isDisjoint=function(){return this.matrix[t.INTERIOR][t.INTERIOR]===e.FALSE&&this.matrix[t.INTERIOR][t.BOUNDARY]===e.FALSE&&this.matrix[t.BOUNDARY][t.INTERIOR]===e.FALSE&&this.matrix[t.BOUNDARY][t.BOUNDARY]===e.FALSE},jsts.geom.IntersectionMatrix.prototype.isIntersects=function(){return!this.isDisjoint()},jsts.geom.IntersectionMatrix.prototype.isTouches=function(n,o){return n>o?this.isTouches(o,n):n==e.A&&o==e.A||n==e.L&&o==e.L||n==e.L&&o==e.A||n==e.P&&o==e.A||n==e.P&&o==e.L?this.matrix[t.INTERIOR][t.INTERIOR]===e.FALSE&&(jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.BOUNDARY],"T")):!1},jsts.geom.IntersectionMatrix.prototype.isCrosses=function(n,o){return n==e.P&&o==e.L||n==e.P&&o==e.A||n==e.L&&o==e.A?jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.EXTERIOR],"T"):n==e.L&&o==e.P||n==e.A&&o==e.P||n==e.A&&o==e.L?jsts.geom.IntersectionMatrix.matches(matrix[t.INTERIOR][t.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.EXTERIOR][t.INTERIOR],"T"):n===e.L&&o===e.L?0===this.matrix[t.INTERIOR][t.INTERIOR]:!1},jsts.geom.IntersectionMatrix.prototype.isWithin=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&this.matrix[t.INTERIOR][t.EXTERIOR]==e.FALSE&&this.matrix[t.BOUNDARY][t.EXTERIOR]==e.FALSE},jsts.geom.IntersectionMatrix.prototype.isContains=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&this.matrix[t.EXTERIOR][t.INTERIOR]==e.FALSE&&this.matrix[t.EXTERIOR][t.BOUNDARY]==e.FALSE},jsts.geom.IntersectionMatrix.prototype.isCovers=function(){var n=jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.BOUNDARY],"T");return n&&this.matrix[t.EXTERIOR][t.INTERIOR]==e.FALSE&&this.matrix[t.EXTERIOR][t.BOUNDARY]==e.FALSE},jsts.geom.IntersectionMatrix.prototype.isCoveredBy=function(){var n=jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.BOUNDARY],"T");return n&&this.matrix[t.INTERIOR][t.EXTERIOR]===e.FALSE&&this.matrix[t.BOUNDARY][t.EXTERIOR]===e.FALSE},jsts.geom.IntersectionMatrix.prototype.isEquals=function(n,o){return n!==o?!1:jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&this.matrix[t.EXTERIOR][t.INTERIOR]===e.FALSE&&this.matrix[t.INTERIOR][t.EXTERIOR]===e.FALSE&&this.matrix[t.EXTERIOR][t.BOUNDARY]===e.FALSE&&this.matrix[t.BOUNDARY][t.EXTERIOR]===e.FALSE},jsts.geom.IntersectionMatrix.prototype.isOverlaps=function(n,o){return n==e.P&&o===e.P||n==e.A&&o===e.A?jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.EXTERIOR][t.INTERIOR],"T"):n===e.L&&o===e.L?1==this.matrix[t.INTERIOR][t.INTERIOR]&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.EXTERIOR][t.INTERIOR],"T"):!1},jsts.geom.IntersectionMatrix.prototype.matches=function(t){if(9!=t.length)throw new jsts.error.IllegalArgumentException("Should be length 9: "+t);for(var e=0;3>e;e++)for(var n=0;3>n;n++)if(!jsts.geom.IntersectionMatrix.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},jsts.geom.IntersectionMatrix.prototype.transpose=function(){var t=matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},jsts.geom.IntersectionMatrix.prototype.toString=function(){var t,n,o="";for(t=0;3>t;t++)for(n=0;3>n;n++)o+=e.toDimensionSymbol(this.matrix[t][n]);return o}}(),jsts.triangulate.quadedge.LastFoundQuadEdgeLocator=function(t){this.subdiv=t,this.lastEdge=null,this.init()},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.init=function(){this.lastEdge=this.findEdge()},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.findEdge=function(){var t=this.subdiv.getEdges();return t[0]},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.locate=function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},jsts.noding.SegmentNodeList=function(t){this.nodeMap=new javascript.util.TreeMap,this.edge=t},jsts.noding.SegmentNodeList.prototype.nodeMap=null,jsts.noding.SegmentNodeList.prototype.iterator=function(){return this.nodeMap.values().iterator()},jsts.noding.SegmentNodeList.prototype.edge=null,jsts.noding.SegmentNodeList.prototype.getEdge=function(){return this.edge},jsts.noding.SegmentNodeList.prototype.add=function(t,e){var n=new jsts.noding.SegmentNode(this.edge,t,e,this.edge.getSegmentOctant(e)),o=this.nodeMap.get(n);return null!==o?(jsts.util.Assert.isTrue(o.coord.equals2D(t),"Found equal nodes with different coordinates"),o):(this.nodeMap.put(n,n),n)},jsts.noding.SegmentNodeList.prototype.addEndpoints=function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},jsts.noding.SegmentNodeList.prototype.addCollapsedNodes=function(){var t=[];this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=0;e<t.length;e++){var n=t[e];this.add(this.edge.getCoordinate(n),n)}},jsts.noding.SegmentNodeList.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),o=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(o)&&t.push(e+1)}},jsts.noding.SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=[null],n=this.iterator(),o=n.next();n.hasNext();){var i=n.next(),r=this.findCollapseIndex(o,i,e);r&&t.push(e[0]),o=i}},jsts.noding.SegmentNodeList.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var o=e.segmentIndex-t.segmentIndex;return e.isInterior()||o--,1===o?(n[0]=t.segmentIndex+1,!0):!1},jsts.noding.SegmentNodeList.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var o=e.next(),i=this.createSplitEdge(n,o);t.add(i),n=o}},jsts.noding.SegmentNodeList.prototype.checkSplitEdgesCorrectness=function(t){var e=edge.getCoordinates(),n=t[0],o=n.getCoordinate(0);if(!o.equals2D(e[0]))throw new Error("bad split edge start point at "+o);var i=t[t.length-1],r=i.getCoordinates(),s=r[r.length-1];if(!s.equals2D(e[e.length-1]))throw new Error("bad split edge end point at "+s)},jsts.noding.SegmentNodeList.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,o=this.edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(o);i||n--;var r=[],s=0;r[s++]=new jsts.geom.Coordinate(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)r[s++]=this.edge.getCoordinate(a);return i&&(r[s]=e.coord),new jsts.noding.NodedSegmentString(r,this.edge.getData())},jsts.io.WKTWriter=function(){this.parser=new jsts.io.WKTParser(this.geometryFactory)},jsts.io.WKTWriter.prototype.write=function(t){var e=this.parser.write(t);return e},jsts.io.WKTWriter.toLineString=function(t,e){if(2!==arguments.length)throw new jsts.error.NotImplementedError;return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"},jsts.io.WKTReader=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new jsts.io.WKTParser(this.geometryFactory)},jsts.io.WKTReader.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED&&this.reducePrecision(e),e},jsts.io.WKTReader.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;n>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;n>e;e++)this.reducePrecision(t.geometries[e])},jsts.triangulate.quadedge.QuadEdgeSubdivision=function(t,e){this.tolerance=e,this.edgeCoincidenceTolerance=e/jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR,this.visitedKey=0,this.quadEdges=[],this.startingEdge,this.tolerance,this.edgeCoincidenceTolerance,this.frameEnv,this.locator=null,this.seg=new jsts.geom.LineSegment,this.triEdges=new Array(3),this.frameVertex=new Array(3),this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new jsts.triangulate.quadedge.LastFoundQuadEdgeLocator(this)},jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR=1e3,jsts.triangulate.quadedge.QuadEdgeSubdivision.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!=e[0])throw new jsts.IllegalArgumentError("Edges do not form a triangle")},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.createFrame=function(t){var e,n,o;e=t.getWidth(),n=t.getHeight(),o=0,o=e>n?10*e:10*n,this.frameVertex[0]=new jsts.triangulate.quadedge.Vertex((t.getMaxX()+t.getMinX())/2,t.getMaxY()+o),this.frameVertex[1]=new jsts.triangulate.quadedge.Vertex(t.getMinX()-o,t.getMinY()-o),this.frameVertex[2]=new jsts.triangulate.quadedge.Vertex(t.getMaxX()+o,t.getMinY()-o),this.frameEnv=new jsts.geom.Envelope(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.initSubdiv=function(){var t,e,n;return t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]),jsts.triangulate.quadedge.QuadEdge.splice(t.sym(),e),n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]),jsts.triangulate.quadedge.QuadEdge.splice(e.sym(),n),jsts.triangulate.quadedge.QuadEdge.splice(n.sym(),t),t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTolerance=function(){return this.tolerance},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEnvelope=function(){return new jsts.geom.Envelope(this.frameEnv)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdges=function(){return arguments.length>0?this.getEdgesByFactory(arguments[0]):this.quadEdges},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.setLocator=function(t){this.locator=t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.makeEdge=function(t,e){var n=jsts.triangulate.quadedge.QuadEdge.makeEdge(t,e);return this.quadEdges.push(n),n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.connect=function(t,e){var n=jsts.triangulate.quadedge.QuadEdge.connect(t,e);return this.quadEdges.push(n),n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.delete_jsts=function(t){jsts.triangulate.quadedge.QuadEdge.splice(t,t.oPrev()),jsts.triangulate.quadedge.QuadEdge.splice(t.sym(),t.sym().oPrev());var e,n,o;t.eSym=t.sym(),n=t.rot,o=t.rot.sym();var i=this.quadEdges.indexOf(t);-1!==i&&this.quadEdges.splice(i,1),i=this.quadEdges.indexOf(e),-1!==i&&this.quadEdges.splice(i,1),i=this.quadEdges.indexOf(n),-1!==i&&this.quadEdges.splice(i,1),i=this.quadEdges.indexOf(o),-1!==i&&this.quadEdges.splice(i,1),t.delete_jsts(),e.delete_jsts(),n.delete_jsts(),o.delete_jsts()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateFromEdge=function(t,e){var n,o=0,i=this.quadEdges.length;for(n=e;;){if(o++,o>i)throw new jsts.error.LocateFailureError(n.toLineSegment());if(t.equals(n.orig())||t.equals(n.dest()))break;if(t.rightOf(n))n=n.sym();else if(t.rightOf(n.oNext())){if(t.rightOf(n.dPrev()))break;n=n.dPrev()}else n=n.oNext()}return n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locate=function(){return 1===arguments.length?arguments[0]instanceof jsts.triangulate.quadedge.Vertex?this.locateByVertex(arguments[0]):this.locateByCoordinate(arguments[0]):this.locateByCoordinates(arguments[0],arguments[1])},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByVertex=function(t){return this.locator.locate(t)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinate=function(t){return this.locator.locate(new jsts.triangulate.quadedge.Vertex(t))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinates=function(t,e){var n,o,i,n=this.locator.locate(new jsts.triangulate.quadedge.Vertex(t));if(null===n)return null;o=n,n.dest().getCoordinate().equals2D(t)&&(o=n.sym()),i=o;do{if(i.dest().getCoordinate().equals2D(e))return i;i=i.oNext()}while(i!=o);return null},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.insertSite=function(t){var e,n,o;if(e=this.locate(t),t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;n=this.makeEdge(e.orig(),t),jsts.triangulate.quadedge.QuadEdge.splice(n,e),o=n;do n=this.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!=o);return o},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameEdge=function(t){return this.isFrameVertex(t.orig())||this.isFrameVertex(t.dest())?!0:!1},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameBorderEdge=function(t){var e,n,o,i;return e=new Array(3),this.getTriangleEdges(t,e),n=new Array(3),this.getTriangleEdges(t.sym(),n),o=t.lNext().dest(),this.isFrameVertex(o)?!0:(i=t.sym().lNext().dest(),this.isFrameVertex(i)?!0:!1)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameVertex=function(t){return t.equals(this.frameVertex[0])?!0:t.equals(this.frameVertex[1])?!0:t.equals(this.frameVertex[2])?!0:!1},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isOnEdge=function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var n=this.seg.distance(e);return n<this.edgeCoincidenceTolerance},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isVertexOfEdge=function(t,e){return e.equals(t.orig(),this.tolerance)||e.equals(t.dest(),this.tolerance)?!0:!1},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertices=function(t){var e,n,o,i,r,s=[];for(e=0,n=this.quadEdges.length,e;n>e;e++)o=this.quadEdges[e],i=o.orig(),(t||!this.isFrameVertex(i))&&s.push(i),r=o.dest(),(t||!this.isFrameVertex(r))&&s.push(r);return s},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertexUniqueEdges=function(t){var e,n,o,i,r,s,a,l;for(e=[],n=[],o=0,i=this.quadEdges.length,o;i>o;o++)r=this.quadEdges[o],s=r.orig(),-1===n.indexOf(s)&&(n.push(s),(t||!this.isFrameVertex(s))&&e.push(r)),a=r.sym(),l=a.orig(),-1===n.indexOf(l)&&(n.push(l),(t||!this.isFrameVertex(l))&&e.push(a));return e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getPrimaryEdges=function(t){this.visitedKey++;var e,n,o,i,r;for(e=[],n=[],n.push(this.startingEdge),o=[];n.length>0;)i=n.pop(),-1===o.indexOf(i)&&(r=i.getPrimary(),(t||!this.isFrameEdge(r))&&e.push(r),n.push(i.oNext()),n.push(i.sym().oNext()),o.push(i),o.push(i.sym()));return e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.visitTriangles=function(t,e){this.visitedKey++;var n,o,i,r;for(n=[],n.push(this.startingEdge),o=[];n.length>0;)i=n.pop(),-1===o.indexOf(i)&&(r=this.fetchTriangleToVisit(i,n,e,o),null!==r&&t.visit(r))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.fetchTriangleToVisit=function(t,e,n,o){var i,r,s,a;i=t,r=0,s=!1;do this.triEdges[r]=i,this.isFrameEdge(i)&&(s=!0),a=i.sym(),-1===o.indexOf(a)&&e.push(a),o.push(i),r++,i=i.lNext();while(i!==t);return s&&!n?null:this.triEdges},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleEdges=function(t){var e=new jsts.triangulate.quadedge.TriangleEdgesListVisitor;return this.visitTriangles(e,t),e.getTriangleEdges()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleVertices=function(t){var e=new TriangleVertexListVisitor;return this.visitTriangles(e,t),e.getTriangleVertices()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleCoordinates=function(t){var e=new jsts.triangulate.quadedge.TriangleCoordinatesVisitor;return this.visitTriangles(e,t),e.getTriangles()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdgesByFactory=function(t){var e,n,o,i,r,s;for(e=this.getPrimaryEdges(!1),n=[],o=0,i=e.length,o;i>o;o++)r=e[o],s=[],s[0]=r.orig().getCoordinate(),s[1]=r.dest().getCoordinate(),n[o]=t.createLineString(s);return t.createMultiLineString(n)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangles=function(t){var e,n,o,i,r;for(e=this.getTriangleCoordinates(!1),n=new Array(e.length),i=0,r=e.length,i;r>i;i++)o=e[i],n[i]=t.createPolygon(t.createLinearRing(o,null));return t.createGeometryCollection(n)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiDiagram=function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(e)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygons=function(t){this.visitTriangles(new jsts.triangulate.quadedge.TriangleCircumcentreVisitor,!0);var e,n,o,i,r;for(e=[],n=this.getVertexUniqueEdges(!1),o=0,i=n.length,o;i>o;o++)r=n[o],e.push(this.getVoronoiCellPolygon(r,t));return e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygon=function(t,e){var n,o,i,r,s;n=[],startQE=t;do o=t.rot.orig().getCoordinate(),n.push(o),t=t.oPrev();while(t!==startQE);return i=new jsts.geom.CoordinateList([],!1),i.add(n,!1),i.closeRing(),i.size()<4&&i.add(i.get(i.size()-1),!0),r=e.createPolygon(e.createLinearRing(i.toArray()),null),s=startQE.orig(),r},jsts.triangulate.quadedge.TriangleCircumcentreVisitor=function(){},jsts.triangulate.quadedge.TriangleCircumcentreVisitor.prototype.visit=function(t){var e,n,o,i,r,s;for(e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),o=t[2].orig().getCoordinate(),i=jsts.geom.Triangle.circumcentre(e,n,o),r=new jsts.triangulate.quadedge.Vertex(i),s=0;3>s;s++)t[s].rot.setOrig(r)},jsts.triangulate.quadedge.TriangleEdgesListVisitor=function(){this.triList=[]},jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.visit=function(t){var e=t.concat();this.triList.push(e)},jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.getTriangleEdges=function(){return this.triList},jsts.triangulate.quadedge.TriangleVertexListVisitor=function(){this.triList=[]},jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.visit=function(){var t=[];t.push(trieEdges[0].orig()),t.push(trieEdges[1].orig()),t.push(trieEdges[2].orig()),this.triList.push(t)},jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.getTriangleVertices=function(){return this.triList},jsts.triangulate.quadedge.TriangleCoordinatesVisitor=function(){this.coordList=new jsts.geom.CoordinateList([],!1),this.triCoords=[]},jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.visit=function(t){this.coordList=new jsts.geom.CoordinateList([],!1);var e,n,o=0;for(o;3>o;o++)e=t[o].orig(),this.coordList.add(e.getCoordinate());if(this.coordList.size()>0){if(this.coordList.closeRing(),n=this.coordList.toArray(),4!==n.length)return;this.triCoords.push(n)}},jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.getTriangles=function(){return this.triCoords},jsts.operation.relate.EdgeEndBundle=function(){this.edgeEnds=[];var t=arguments[0]instanceof jsts.geomgraph.EdgeEnd?arguments[0]:arguments[1],e=t.getEdge(),n=t.getCoordinate(),o=t.getDirectedCoordinate(),i=new jsts.geomgraph.Label(t.getLabel());jsts.geomgraph.EdgeEnd.call(this,e,n,o,i),this.insert(t)},jsts.operation.relate.EdgeEndBundle.prototype=new jsts.geomgraph.EdgeEnd,jsts.operation.relate.EdgeEndBundle.prototype.edgeEnds=null,jsts.operation.relate.EdgeEndBundle.prototype.getLabel=function(){return this.label},jsts.operation.relate.EdgeEndBundle.prototype.getEdgeEnds=function(){return this.edgeEnds},jsts.operation.relate.EdgeEndBundle.prototype.insert=function(t){this.edgeEnds.push(t)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabel=function(t){for(var e=!1,n=0;n<this.edgeEnds.length;n++){var o=this.edgeEnds[n];o.getLabel().isArea()&&(e=!0)}this.label=e?new jsts.geomgraph.Label(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE):new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(var n=0;2>n;n++)this.computeLabelOn(n,t),e&&this.computeLabelSides(n)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelOn=function(t,e){for(var n=0,o=!1,i=0;i<this.edgeEnds.length;i++){var r=this.edgeEnds[i],s=r.getLabel().getLocation(t);s==jsts.geom.Location.BOUNDARY&&n++,s==jsts.geom.Location.INTERIOR&&(o=!0)}var s=jsts.geom.Location.NONE;o&&(s=jsts.geom.Location.INTERIOR),n>0&&(s=jsts.geomgraph.GeometryGraph.determineBoundary(e,n)),this.label.setLocation(t,s)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSides=function(t){this.computeLabelSide(t,jsts.geomgraph.Position.LEFT),this.computeLabelSide(t,jsts.geomgraph.Position.RIGHT)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSide=function(t,e){for(var n=0;n<this.edgeEnds.length;n++){var o=this.edgeEnds[n];if(o.getLabel().isArea()){var i=o.getLabel().getLocation(t,e);if(i===jsts.geom.Location.INTERIOR)return void this.label.setLocation(t,e,jsts.geom.Location.INTERIOR);i===jsts.geom.Location.EXTERIOR&&this.label.setLocation(t,e,jsts.geom.Location.EXTERIOR)}}},jsts.operation.relate.EdgeEndBundle.prototype.updateIM=function(t){jsts.geomgraph.Edge.updateIM(this.label,t)},jsts.index.kdtree.KdTree=function(t){var e=0;void 0!==t&&(e=t),this.root=null,this.last=null,this.numberOfNodes=0,this.tolerance=e},jsts.index.kdtree.KdTree.prototype.insert=function(){return 1===arguments.length?this.insertCoordinate.apply(this,arguments[0]):this.insertWithData.apply(this,arguments[0],arguments[1])},jsts.index.kdtree.KdTree.prototype.insertCoordinate=function(t){return this.insertWithData(t,null)},jsts.index.kdtree.KdTree.prototype.insertWithData=function(t,e){if(null===this.root)return this.root=new jsts.index.kdtree.KdNode(t,e),this.root;for(var n=this.root,o=this.root,i=!0,r=!0;n!==last;){if(r=i?t.x<n.getX():t.y<n.getY(),o=n,n=r?n.getLeft():n.getRight(),null!==n){var s=t.distance(n.getCoordinate())<=this.tolerance;if(s)return n.increment(),n}i=!i}this.numberOfNodes=numberOfNodes+1;var a=new jsts.index.kdtree.KdNode(t,e);return a.setLeft(this.last),a.setRight(this.last),r?o.setLeft(a):o.setRight(a),a},jsts.index.kdtree.KdTree.prototype.queryNode=function(t,e,n,o,i){if(t!==e){var r,s,a;o?(r=n.getMinX(),s=n.getMaxX(),a=t.getX()):(r=n.getMinY(),s=n.getMaxY(),a=t.getY());var l=a>r,p=s>=a;l&&this.queryNode(t.getLeft(),e,n,!o,i),n.contains(t.getCoordinate())&&i.add(t),p&&this.queryNode(t.getRight(),e,n,!o,i)}},jsts.index.kdtree.KdTree.prototype.query=function(){return 1===arguments.length?this.queryByEnvelope.apply(this,arguments[0]):this.queryWithArray.apply(this,arguments[0],arguments[1])},jsts.index.kdtree.KdTree.prototype.queryByEnvelope=function(t){var e=[];return this.queryNode(this.root,this.last,t,!0,e),e},jsts.index.kdtree.KdTree.prototype.queryWithArray=function(t,e){this.queryNode(this.root,this.last,t,!0,e)},jsts.geom.Triangle=function(t,e,n){this.p0=t,this.p1=e,this.p2=n},jsts.geom.Triangle.isAcute=function(t,e,n){return jsts.algorithm.Angle.isAcute(t,e,n)&&jsts.algorithm.Angle.isAcute(e,n,t)&&jsts.algorithm.Angle.isAcute(n,t,e)?!0:!1},jsts.geom.Triangle.perpendicularBisector=function(t,e){var n,o,i,r;return n=e.x-t.x,o=e.y-t.y,i=new jsts.algorithm.HCoordinate(t.x+n/2,t.y+o/2,1),r=new jsts.algorithm.HCoordinate(t.x-o+n/2,t.y+n+o/2,1),new jsts.algorithm.HCoordinate(i,r)},jsts.geom.Triangle.circumcentre=function(t,e,n){var o,i,r,s,a,l,p,u,h,d,c;return o=n.x,i=n.y,r=t.x-o,s=t.y-i,a=e.x-o,l=e.y-i,p=2*jsts.geom.Triangle.det(r,s,a,l),u=jsts.geom.Triangle.det(s,r*r+s*s,l,a*a+l*l),h=jsts.geom.Triangle.det(r,r*r+s*s,a,a*a+l*l),d=o-u/p,c=i+h/p,new jsts.geom.Coordinate(d,c)},jsts.geom.Triangle.det=function(t,e,n,o){return t*o-e*n},jsts.geom.Triangle.inCentre=function(t,e,n){var o,i,r,s,a,l;return o=e.distance(n),i=t.distance(n),r=t.distance(e),s=o+i+r,a=(o*t.x+i*e.x+r*n.x)/s,l=(o*t.y+i*e.y+r*n.y)/s,new jsts.geom.Coordinate(a,l)},jsts.geom.Triangle.centroid=function(t,e,n){var o,i;return o=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3,new jsts.geom.Coordinate(o,i)},jsts.geom.Triangle.longestSideLength=function(t,e,n){var o,i,r,s;return o=t.distance(e),i=e.distance(n),r=n.distance(t),s=o,i>s&&(s=i),r>s&&(s=r),s},jsts.geom.Triangle.angleBisector=function(t,e,n){var o,i,r,s,a,l;return o=e.distance(t),i=e.distance(n),r=o/(o+i),s=n.x-t.x,a=n.y-t.y,l=new jsts.geom.Coordinate(t.x+r*s,t.y+r*a)},jsts.geom.Triangle.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},jsts.geom.Triangle.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},jsts.geom.Triangle.prototype.inCentre=function(){return jsts.geom.Triangle.inCentre(this.p0,this.p1,this.p2)},jsts.noding.OrientedCoordinateArray=function(t){this.pts=t,this._orientation=jsts.noding.OrientedCoordinateArray.orientation(t)},jsts.noding.OrientedCoordinateArray.prototype.pts=null,jsts.noding.OrientedCoordinateArray.prototype._orientation=void 0,jsts.noding.OrientedCoordinateArray.orientation=function(t){return 1===jsts.geom.CoordinateArrays.increasingDirection(t)},jsts.noding.OrientedCoordinateArray.prototype.compareTo=function(t){var e=t,n=jsts.noding.OrientedCoordinateArray.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return n},jsts.noding.OrientedCoordinateArray.compareOriented=function(t,e,n,o){for(var i=e?1:-1,r=o?1:-1,s=e?t.length:-1,a=o?n.length:-1,l=e?0:t.length-1,p=o?0:n.length-1;;){var u=t[l].compareTo(n[p]);if(0!==u)return u;l+=i,p+=r;var h=l===s,d=p===a;if(h&&!d)return-1;if(!h&&d)return 1;if(h&&d)return 0}},jsts.algorithm.CentralEndpointIntersector=function(t,e,n,o){this.pts=[t,e,n,o],this.compute()},jsts.algorithm.CentralEndpointIntersector.getIntersection=function(t,e,n,o){var i=new jsts.algorithm.CentralEndpointIntersector(t,e,n,o);return i.getIntersection()},jsts.algorithm.CentralEndpointIntersector.prototype.pts=null,jsts.algorithm.CentralEndpointIntersector.prototype.intPt=null,jsts.algorithm.CentralEndpointIntersector.prototype.compute=function(){var t=jsts.algorithm.CentralEndpointIntersector.average(this.pts);this.intPt=this.findNearestPoint(t,this.pts)},jsts.algorithm.CentralEndpointIntersector.prototype.getIntersection=function(){return this.intPt},jsts.algorithm.CentralEndpointIntersector.average=function(t){var e,n=new jsts.geom.Coordinate,o=t.length;for(e=0;o>e;e++)n.x+=t[e].x,n.y+=t[e].y;return o>0&&(n.x/=o,n.y/=o),n},jsts.algorithm.CentralEndpointIntersector.prototype.findNearestPoint=function(t,e){var n,o,i=Number.MAX_VALUE,r=null;for(n=0;n<e.length;n++)o=t.distance(e[n]),i>o&&(i=o,r=e[n]);return r},jsts.operation.buffer.BufferOp=function(t,e){this.argGeom=t,this.bufParams=e?e:new jsts.operation.buffer.BufferParameters},jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS=12,jsts.operation.buffer.BufferOp.precisionScaleFactor=function(t,e,n){var o=t.getEnvelopeInternal(),i=Math.max(o.getHeight(),o.getWidth()),r=e>0?e:0,s=i+2*r,a=Math.log(s)/Math.log(10)+1,l=a-n,p=Math.pow(10,-l);return p},jsts.operation.buffer.BufferOp.bufferOp=function(t,e){if(arguments.length>2)return jsts.operation.buffer.BufferOp.bufferOp2.apply(this,arguments);var n=new jsts.operation.buffer.BufferOp(t),o=n.getResultGeometry(e);return o},jsts.operation.buffer.BufferOp.bufferOp2=function(t,e,n){if(arguments.length>3)return jsts.operation.buffer.BufferOp.bufferOp3.apply(this,arguments);var o=new jsts.operation.buffer.BufferOp(t,n),i=o.getResultGeometry(e);return i},jsts.operation.buffer.BufferOp.bufferOp3=function(t,e,n){if(arguments.length>4)return jsts.operation.buffer.BufferOp.bufferOp4.apply(this,arguments);var o=new jsts.operation.buffer.BufferOp(t);o.setQuadrantSegments(n);var i=o.getResultGeometry(e);return i},jsts.operation.buffer.BufferOp.bufferOp4=function(t,e,n,o){var i=new jsts.operation.buffer.BufferOp(t);i.setQuadrantSegments(n),i.setEndCapStyle(o);var r=i.getResultGeometry(e);return r},jsts.operation.buffer.BufferOp.prototype.argGeom=null,jsts.operation.buffer.BufferOp.prototype.distance=null,jsts.operation.buffer.BufferOp.prototype.bufParams=null,jsts.operation.buffer.BufferOp.prototype.resultGeometry=null,jsts.operation.buffer.BufferOp.prototype.setEndCapStyle=function(t){this.bufParams.setEndCapStyle(t)},jsts.operation.buffer.BufferOp.prototype.setQuadrantSegments=function(t){this.bufParams.setQuadrantSegments(t)},jsts.operation.buffer.BufferOp.prototype.getResultGeometry=function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},jsts.operation.buffer.BufferOp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null===this.resultGeometry){var t=this.argGeom.getPrecisionModel();t.getType()===jsts.geom.PrecisionModel.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision=function(){var t,e=null;for(t=jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision2(t)}catch(n){e=n}if(null!==this.resultGeometry)return}throw e},jsts.operation.buffer.BufferOp.prototype.bufferOriginalPrecision=function(){try{var t=new jsts.operation.buffer.BufferBuilder(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(e){}},jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision2=function(t){var e=jsts.operation.buffer.BufferOp.precisionScaleFactor(this.argGeom,this.distance,t),n=new jsts.geom.PrecisionModel(e);this.bufferFixedPrecision(n)},jsts.operation.buffer.BufferOp.prototype.bufferFixedPrecision=function(t){var e=new jsts.noding.ScaledNoder(new jsts.noding.snapround.MCIndexSnapRounder(new jsts.geom.PrecisionModel(1)),t.getScale()),n=new jsts.operation.buffer.BufferBuilder(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},jsts.operation.buffer.OffsetSegmentString=function(){this.ptList=[]},jsts.operation.buffer.OffsetSegmentString.prototype.ptList=null,jsts.operation.buffer.OffsetSegmentString.prototype.precisionModel=null,jsts.operation.buffer.OffsetSegmentString.prototype.minimimVertexDistance=0,jsts.operation.buffer.OffsetSegmentString.prototype.setPrecisionModel=function(t){this.precisionModel=t},jsts.operation.buffer.OffsetSegmentString.prototype.setMinimumVertexDistance=function(t){this.minimimVertexDistance=t},jsts.operation.buffer.OffsetSegmentString.prototype.addPt=function(t){var e=new jsts.geom.Coordinate(t);this.precisionModel.makePrecise(e),this.isRedundant(e)||this.ptList.push(e)},jsts.operation.buffer.OffsetSegmentString.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);
else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},jsts.operation.buffer.OffsetSegmentString.prototype.isRedundant=function(t){if(this.ptList.length<1)return!1;var e=this.ptList[this.ptList.length-1],n=t.distance(e);return n<this.minimimVertexDistance?!0:!1},jsts.operation.buffer.OffsetSegmentString.prototype.closeRing=function(){if(!(this.ptList.length<1)){var t=new jsts.geom.Coordinate(this.ptList[0]),e=this.ptList[this.ptList.length-1],n=null;this.ptList.length>=2&&(n=this.ptList[this.ptList.length-2]),t.equals(e)||this.ptList.push(t)}},jsts.operation.buffer.OffsetSegmentString.prototype.reverse=function(){},jsts.operation.buffer.OffsetSegmentString.prototype.getCoordinates=function(){return this.ptList},jsts.algorithm.distance.PointPairDistance=function(){this.pt=[new jsts.geom.Coordinate,new jsts.geom.Coordinate]},jsts.algorithm.distance.PointPairDistance.prototype.pt=null,jsts.algorithm.distance.PointPairDistance.prototype.distance=0/0,jsts.algorithm.distance.PointPairDistance.prototype.isNull=!0,jsts.algorithm.distance.PointPairDistance.prototype.initialize=function(t,e,n){return void 0===t?void(this.isNull=!0):(this.pt[0].setCoordinate(t),this.pt[1].setCoordinate(e),this.distance=void 0!==n?n:t.distance(e),void(this.isNull=!1))},jsts.algorithm.distance.PointPairDistance.prototype.getDistance=function(){return this.distance},jsts.algorithm.distance.PointPairDistance.prototype.getCoordinates=function(){return this.pt},jsts.algorithm.distance.PointPairDistance.prototype.getCoordinate=function(t){return this.pt[t]},jsts.algorithm.distance.PointPairDistance.prototype.setMaximum=function(t){return 2===arguments.length?void this.setMaximum2.apply(this,arguments):void this.setMaximum(t.pt[0],t.pt[1])},jsts.algorithm.distance.PointPairDistance.prototype.setMaximum2=function(t,e){if(this.isNull)return void this.initialize(t,e);var n=t.distance(e);n>this.distance&&this.initialize(t,e,n)},jsts.algorithm.distance.PointPairDistance.prototype.setMinimum=function(t){return 2===arguments.length?void this.setMinimum2.apply(this,arguments):void this.setMinimum(t.pt[0],t.pt[1])},jsts.algorithm.distance.PointPairDistance.prototype.setMinimum2=function(t,e){if(this.isNull)return void this.initialize(t,e);var n=t.distance(e);n<this.distance&&this.initialize(t,e,n)},function(){var t=jsts.algorithm.distance.PointPairDistance,e=jsts.algorithm.distance.DistanceToPoint,n=function(n){this.maxPtDist=new t,this.minPtDist=new t,this.euclideanDist=new e,this.geom=n};n.prototype=new jsts.geom.CoordinateFilter,n.prototype.maxPtDist=new t,n.prototype.minPtDist=new t,n.prototype.euclideanDist=new e,n.prototype.geom,n.prototype.filter=function(t){this.minPtDist.initialize(),e.computeDistance(this.geom,t,this.minPtDist),this.maxPtDist.setMaximum(this.minPtDist)},n.prototype.getMaxPointDistance=function(){return this.maxPtDist};var o=function(e,n){this.maxPtDist=new t,this.minPtDist=new t,this.geom=e,this.numSubSegs=Math.round(1/n)};o.prototype=new jsts.geom.CoordinateSequenceFilter,o.prototype.maxPtDist=new t,o.prototype.minPtDist=new t,o.prototype.geom,o.prototype.numSubSegs=0,o.prototype.filter=function(t,n){if(0!=n)for(var o=t[n-1],i=t[n],r=(i.x-o.x)/this.numSubSegs,s=(i.y-o.y)/this.numSubSegs,a=0;a<this.numSubSegs;a++){var l=o.x+a*r,p=o.y+a*s,u=new jsts.geom.Coordinate(l,p);this.minPtDist.initialize(),e.computeDistance(this.geom,u,this.minPtDist),this.maxPtDist.setMaximum(this.minPtDist)}},o.prototype.isGeometryChanged=function(){return!1},o.prototype.isDone=function(){return!1},o.prototype.getMaxPointDistance=function(){return this.maxPtDist},jsts.algorithm.distance.DiscreteHausdorffDistance=function(t,e){this.g0=t,this.g1=e,this.ptDist=new jsts.algorithm.distance.PointPairDistance},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g0=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g1=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.ptDist=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.densifyFrac=0,jsts.algorithm.distance.DiscreteHausdorffDistance.distance=function(t,e,n){var o=new jsts.algorithm.distance.DiscreteHausdorffDistance(t,e);return void 0!==n&&o.setDensifyFraction(n),o.distance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.setDensifyFraction=function(t){if(t>1||0>=t)throw new jsts.error.IllegalArgumentError("Fraction is not in range (0.0 - 1.0]");this.densifyFrac=t},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.distance=function(){return this.compute(this.g0,this.g1),ptDist.getDistance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.orientedDistance=function(){return this.computeOrientedDistance(this.g0,this.g1,this.ptDist),this.ptDist.getDistance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.getCoordinates=function(){return ptDist.getCoordinates()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this.ptDist),this.computeOrientedDistance(e,t,this.ptDist)},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.computeOrientedDistance=function(t,e,i){var r=new n(e);if(t.apply(r),i.setMaximum(r.getMaxPointDistance()),this.densifyFrac>0){var s=new o(e,this.densifyFrac);t.apply(s),i.setMaximum(s.getMaxPointDistance())}}}(),function(){var t=javascript.util.ArrayList,e=javascript.util.TreeSet,n=jsts.geom.CoordinateFilter;jsts.util.UniqueCoordinateArrayFilter=function(){this.treeSet=new e,this.list=new t},jsts.util.UniqueCoordinateArrayFilter.prototype=new n,jsts.util.UniqueCoordinateArrayFilter.prototype.treeSet=null,jsts.util.UniqueCoordinateArrayFilter.prototype.list=null,jsts.util.UniqueCoordinateArrayFilter.prototype.getCoordinates=function(){return this.list.toArray()},jsts.util.UniqueCoordinateArrayFilter.prototype.filter=function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))}}(),function(){var t=jsts.algorithm.CGAlgorithms,e=jsts.util.UniqueCoordinateArrayFilter,n=jsts.util.Assert,o=javascript.util.Stack,i=javascript.util.ArrayList,r=javascript.util.Arrays,s=function(t){this.origin=t};s.prototype.origin=null,s.prototype.compare=function(t,e){var n=t,o=e;return s.polarCompare(this.origin,n,o)},s.polarCompare=function(e,n,o){var i=n.x-e.x,r=n.y-e.y,s=o.x-e.x,a=o.y-e.y,l=t.computeOrientation(e,n,o);if(l==t.COUNTERCLOCKWISE)return 1;if(l==t.CLOCKWISE)return-1;var p=i*i+r*r,u=s*s+a*a;return u>p?-1:p>u?1:0},jsts.algorithm.ConvexHull=function(){if(1===arguments.length){var t=arguments[0];this.inputPts=jsts.algorithm.ConvexHull.extractCoordinates(t),this.geomFactory=t.getFactory()}else this.pts=arguments[0],this.geomFactory=arguments[1]},jsts.algorithm.ConvexHull.prototype.geomFactory=null,jsts.algorithm.ConvexHull.prototype.inputPts=null,jsts.algorithm.ConvexHull.extractCoordinates=function(t){var n=new e;return t.apply(n),n.getCoordinates()},jsts.algorithm.ConvexHull.prototype.getConvexHull=function(){if(0==this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1==this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2==this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),o=n.toArray();return this.lineOrPolygon(o)},jsts.algorithm.ConvexHull.prototype.reduce=function(e){var n=this.computeOctRing(e);if(null==n)return this.inputPts;for(var o=new javascript.util.TreeSet,i=0;i<n.length;i++)o.add(n[i]);for(var i=0;i<e.length;i++)t.isPointInRing(e[i],n)||o.add(e[i]);var r=o.toArray();return r.length<3?this.padArray3(r):r},jsts.algorithm.ConvexHull.prototype.padArray3=function(t){for(var e=[],n=0;n<e.length;n++)e[n]=n<t.length?t[n]:t[0];return e},jsts.algorithm.ConvexHull.prototype.preSort=function(t){for(var e,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y==t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return r.sort(t,1,t.length,new s(t[0])),t},jsts.algorithm.ConvexHull.prototype.grahamScan=function(e){var n,i=new o;n=i.push(e[0]),n=i.push(e[1]),n=i.push(e[2]);for(var r=3;r<e.length;r++){for(n=i.pop();!i.empty()&&t.computeOrientation(i.peek(),n,e[r])>0;)n=i.pop();n=i.push(n),n=i.push(e[r])}return n=i.push(e[0]),i},jsts.algorithm.ConvexHull.prototype.isBetween=function(e,n,o){if(0!==t.computeOrientation(e,n,o))return!1;if(e.x!=o.x){if(e.x<=n.x&&n.x<=o.x)return!0;if(o.x<=n.x&&n.x<=e.x)return!0}if(e.y!=o.y){if(e.y<=n.y&&n.y<=o.y)return!0;if(o.y<=n.y&&n.y<=e.y)return!0}return!1},jsts.algorithm.ConvexHull.prototype.computeOctRing=function(t){var e=this.computeOctPts(t),n=new jsts.geom.CoordinateList;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},jsts.algorithm.ConvexHull.prototype.computeOctPts=function(t){for(var e=[],n=0;8>n;n++)e[n]=t[0];for(var o=1;o<t.length;o++)t[o].x<e[0].x&&(e[0]=t[o]),t[o].x-t[o].y<e[1].x-e[1].y&&(e[1]=t[o]),t[o].y>e[2].y&&(e[2]=t[o]),t[o].x+t[o].y>e[3].x+e[3].y&&(e[3]=t[o]),t[o].x>e[4].x&&(e[4]=t[o]),t[o].x-t[o].y>e[5].x-e[5].y&&(e[5]=t[o]),t[o].y<e[6].y&&(e[6]=t[o]),t[o].x+t[o].y<e[7].x+e[7].y&&(e[7]=t[o]);return e},jsts.algorithm.ConvexHull.prototype.lineOrPolygon=function(t){if(t=this.cleanRing(t),3==t.length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},jsts.algorithm.ConvexHull.prototype.cleanRing=function(t){n.equals(t[0],t[t.length-1]);for(var e=new i,o=null,r=0;r<=t.length-2;r++){var s=t[r],a=t[r+1];s.equals(a)||null!=o&&this.isBetween(o,s,a)||(e.add(s),o=s)}e.add(t[t.length-1]);var l=[];return e.toArray(l)}}(),function(){javascript.util.ArrayList;jsts.geomgraph.index.SegmentIntersector=function(t,e,n){this.li=t,this.includeProper=e,this.recordIsolated=n},jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},jsts.geomgraph.index.SegmentIntersector.prototype._hasIntersection=!1,jsts.geomgraph.index.SegmentIntersector.prototype.hasProper=!1,jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInterior=!1,jsts.geomgraph.index.SegmentIntersector.prototype.properIntersectionPoint=null,jsts.geomgraph.index.SegmentIntersector.prototype.li=null,jsts.geomgraph.index.SegmentIntersector.prototype.includeProper=null,jsts.geomgraph.index.SegmentIntersector.prototype.recordIsolated=null,jsts.geomgraph.index.SegmentIntersector.prototype.isSelfIntersection=null,jsts.geomgraph.index.SegmentIntersector.prototype.numIntersections=0,jsts.geomgraph.index.SegmentIntersector.prototype.numTests=0,jsts.geomgraph.index.SegmentIntersector.prototype.bdyNodes=null,jsts.geomgraph.index.SegmentIntersector.prototype.setBoundaryNodes=function(t,e){this.bdyNodes=[],this.bdyNodes[0]=t,this.bdyNodes[1]=e},jsts.geomgraph.index.SegmentIntersector.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint},jsts.geomgraph.index.SegmentIntersector.prototype.hasIntersection=function(){return this._hasIntersection},jsts.geomgraph.index.SegmentIntersector.prototype.hasProperIntersection=function(){return this.hasProper},jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior},jsts.geomgraph.index.SegmentIntersector.prototype.isTrivialIntersection=function(t,e,n,o){if(t===n&&1===this.li.getIntersectionNum()){if(jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments(e,o))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&o===i||0===o&&e===i)return!0}}return!1},jsts.geomgraph.index.SegmentIntersector.prototype.addIntersections=function(t,e,n,o){if(t!==n||e!==o){this.numTests++;var i=t.getCoordinates()[e],r=t.getCoordinates()[e+1],s=n.getCoordinates()[o],a=n.getCoordinates()[o+1];this.li.computeIntersection(i,r,s,a),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,o)||(this._hasIntersection=!0,(this.includeProper||!this.li.isProper())&&(t.addIntersections(this.li,e,0),n.addIntersections(this.li,o,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).clone(),this.hasProper=!0,this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))}},jsts.geomgraph.index.SegmentIntersector.prototype.isBoundaryPoint=function(t,e){if(null===e)return!1;if(e instanceof Array)return this.isBoundaryPoint(t,e[0])?!0:this.isBoundaryPoint(t,e[1])?!0:!1;for(var n=e.iterator();n.hasNext();){var o=n.next(),i=o.getCoordinate();if(t.isIntersection(i))return!0}return!1}}(),function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position,n=jsts.util.Assert;jsts.geomgraph.GeometryGraph=function(t,e,n){jsts.geomgraph.PlanarGraph.call(this),this.lineEdgeMap=new javascript.util.HashMap,this.ptLocator=new jsts.algorithm.PointLocator,this.argIndex=t,this.parentGeom=e,this.boundaryNodeRule=n||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,null!==e&&this.add(e)},jsts.geomgraph.GeometryGraph.prototype=new jsts.geomgraph.PlanarGraph,jsts.geomgraph.GeometryGraph.constructor=jsts.geomgraph.GeometryGraph,jsts.geomgraph.GeometryGraph.prototype.createEdgeSetIntersector=function(){return new jsts.geomgraph.index.SimpleEdgeSetIntersector},jsts.geomgraph.GeometryGraph.determineBoundary=function(e,n){return e.isInBoundary(n)?t.BOUNDARY:t.INTERIOR},jsts.geomgraph.GeometryGraph.prototype.parentGeom=null,jsts.geomgraph.GeometryGraph.prototype.lineEdgeMap=null,jsts.geomgraph.GeometryGraph.prototype.boundaryNodeRule=null,jsts.geomgraph.GeometryGraph.prototype.useBoundaryDeterminationRule=!0,jsts.geomgraph.GeometryGraph.prototype.argIndex=null,jsts.geomgraph.GeometryGraph.prototype.boundaryNodes=null,jsts.geomgraph.GeometryGraph.prototype.hasTooFewPoints=!1,jsts.geomgraph.GeometryGraph.prototype.invalidPoint=null,jsts.geomgraph.GeometryGraph.prototype.areaPtLocator=null,jsts.geomgraph.GeometryGraph.prototype.ptLocator=null,jsts.geomgraph.GeometryGraph.prototype.getGeometry=function(){return this.parentGeom},jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodes=function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodeRule=function(){return this.boundaryNodeRule},jsts.geomgraph.GeometryGraph.prototype.findEdge=function(t){return this.lineEdgeMap.get(t)},jsts.geomgraph.GeometryGraph.prototype.computeSplitEdges=function(t){for(var e=this.edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},jsts.geomgraph.GeometryGraph.prototype.add=function(t){if(!t.isEmpty())if(t instanceof jsts.geom.MultiPolygon&&(this.useBoundaryDeterminationRule=!1),t instanceof jsts.geom.Polygon)this.addPolygon(t);else if(t instanceof jsts.geom.LineString)this.addLineString(t);else if(t instanceof jsts.geom.Point)this.addPoint(t);else if(t instanceof jsts.geom.MultiPoint)this.addCollection(t);else if(t instanceof jsts.geom.MultiLineString)this.addCollection(t);else if(t instanceof jsts.geom.MultiPolygon)this.addCollection(t);else{if(!(t instanceof jsts.geom.GeometryCollection))throw new jsts.error.IllegalArgumentError("Geometry type not supported.");this.addCollection(t)}},jsts.geomgraph.GeometryGraph.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},jsts.geomgraph.GeometryGraph.prototype.addEdge=function(e){this.insertEdge(e);var n=e.getCoordinates();this.insertPoint(this.argIndex,n[0],t.BOUNDARY),this.insertPoint(this.argIndex,n[n.length-1],t.BOUNDARY)},jsts.geomgraph.GeometryGraph.prototype.addPoint=function(e){var n=e.getCoordinate();this.insertPoint(this.argIndex,n,t.INTERIOR)},jsts.geomgraph.GeometryGraph.prototype.addLineString=function(e){var o=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(o.length<2)return this.hasTooFewPoints=!0,void(this.invalidPoint=coords[0]);var i=new jsts.geomgraph.Edge(o,new jsts.geomgraph.Label(this.argIndex,t.INTERIOR));this.lineEdgeMap.put(e,i),this.insertEdge(i),n.isTrue(o.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,o[0]),this.insertBoundaryPoint(this.argIndex,o[o.length-1])},jsts.geomgraph.GeometryGraph.prototype.addPolygonRing=function(e,n,o){if(!e.isEmpty()){var i=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(i.length<4)return this.hasTooFewPoints=!0,void(this.invalidPoint=i[0]);var r=n,s=o;jsts.algorithm.CGAlgorithms.isCCW(i)&&(r=o,s=n);var a=new jsts.geomgraph.Edge(i,new jsts.geomgraph.Label(this.argIndex,t.BOUNDARY,r,s));this.lineEdgeMap.put(e,a),this.insertEdge(a),this.insertPoint(this.argIndex,i[0],t.BOUNDARY)}},jsts.geomgraph.GeometryGraph.prototype.addPolygon=function(e){this.addPolygonRing(e.getExteriorRing(),t.EXTERIOR,t.INTERIOR);for(var n=0;n<e.getNumInteriorRing();n++){var o=e.getInteriorRingN(n);this.addPolygonRing(o,t.INTERIOR,t.EXTERIOR)}},jsts.geomgraph.GeometryGraph.prototype.computeEdgeIntersections=function(t,e,n){var o=new jsts.geomgraph.index.SegmentIntersector(e,n,!0);o.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var i=this.createEdgeSetIntersector();return i.computeIntersections(this.edges,t.edges,o),o},jsts.geomgraph.GeometryGraph.prototype.computeSelfNodes=function(t,e){var n=new jsts.geomgraph.index.SegmentIntersector(t,!0,!1),o=this.createEdgeSetIntersector();return!e&&(this.parentGeom instanceof jsts.geom.LinearRing||this.parentGeom instanceof jsts.geom.Polygon||this.parentGeom instanceof jsts.geom.MultiPolygon)?o.computeIntersections(this.edges,n,!1):o.computeIntersections(this.edges,n,!0),this.addSelfIntersectionNodes(this.argIndex),n},jsts.geomgraph.GeometryGraph.prototype.insertPoint=function(t,e,n){var o=this.nodes.addNode(e),i=o.getLabel();null==i?o.label=new jsts.geomgraph.Label(t,n):i.setLocation(t,n)},jsts.geomgraph.GeometryGraph.prototype.insertBoundaryPoint=function(n,o){var i=this.nodes.addNode(o),r=i.getLabel(),s=1,a=t.NONE;null!==r&&(a=r.getLocation(n,e.ON)),a===t.BOUNDARY&&s++;var l=jsts.geomgraph.GeometryGraph.determineBoundary(this.boundaryNodeRule,s);r.setLocation(n,l)},jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNodes=function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),o=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var r=i.next();this.addSelfIntersectionNode(t,r.coord,o)}},jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNode=function(e,n,o){this.isBoundaryNode(e,n)||(o===t.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(e,n):this.insertPoint(e,n,o))},jsts.geomgraph.GeometryGraph.prototype.getInvalidPoint=function(){return this.invalidPoint}}();var pi=3.14159265358979,sm_a=6378137,sm_b=6356752.314,sm_EccSquared=.00669437999013,UTMScaleFactor=.9996;(function(){}).call(this);var allCombinationsThreeOptions=function(t,e,n){for(var o,i=[],r=0;r<t.length;r++)for(var s=0;s<e.length;s++)for(var a=0;a<n.length;a++)o=[t[r],e[s],n[a]],i.push(o);return i},allCombinationsTwoOptions=function(t,e){for(var n,o=[],i=0;i<t.length;i++)for(var r=0;r<e.length;r++)n=[t[i],e[r]],o.push(n);return o},allCombinationsOneOption=function(t){for(var e=[],n=0;n<t.length;n++)e.push([t[n]]);return e},outBackForm=$("<br><label class='start-address-label' for=''>Start and End Address:</label><input type='text' class='origin_address form-control autocomplete' placeholder='10 Main St Anytown CA'><br><label for=''>Stop 1:</label><input class='stop_location_1 form-control stop' placeholder='(e.g. CVS)'><button class='add-stop btn btn-info'>Add stop</button><br><br><button class='submit-search btn btn-info'>Submit Search</button>"),onWayForm=$("<br><label for=''>Start Address:</label><input class='origin_address form-control autocomplete' placeholder='10 Main St Anytown CA'><br><label for=''>Stop 1:</label><input class='stop_location_1 form-control stop' placeholder='(e.g. CVS)'><button class='add-stop btn btn-info'>Add stop</button><br><br><label for=''>End Address:</label><input class='destination_address form-control autocomplete' placeholder='20 Pine St Anytown CA'><br><button class='submit-search btn btn-info vac'>Submit Search</button>"),requirejs,require,define;!function(global){function isFunction(t){return"[object Function]"===ostring.call(t)}function isArray(t){return"[object Array]"===ostring.call(t)}function each(t,e){if(t){var n;for(n=0;n<t.length&&(!t[n]||!e(t[n],n,t));n+=1);}}function eachReverse(t,e){if(t){var n;for(n=t.length-1;n>-1&&(!t[n]||!e(t[n],n,t));n-=1);}}function hasProp(t,e){return hasOwn.call(t,e)}function getOwn(t,e){return hasProp(t,e)&&t[e]}function eachProp(t,e){var n;for(n in t)if(hasProp(t,n)&&e(t[n],n))break}function mixin(t,e,n,o){return e&&eachProp(e,function(e,i){(n||!hasProp(t,i))&&(!o||"object"!=typeof e||!e||isArray(e)||isFunction(e)||e instanceof RegExp?t[i]=e:(t[i]||(t[i]={}),mixin(t[i],e,n,o)))}),t}function bind(t,e){return function(){return e.apply(t,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(t){throw t}function getGlobal(t){if(!t)return t;var e=global;return each(t.split("."),function(t){e=e[t]}),e}function makeError(t,e,n,o){var i=new Error(e+"\nhttp://requirejs.org/docs/errors.html#"+t);return i.requireType=t,i.requireModules=o,n&&(i.originalError=n),i}function newContext(t){function e(t){var e,n;for(e=0;e<t.length;e++)if(n=t[e],"."===n)t.splice(e,1),e-=1;else if(".."===n){if(0===e||1===e&&".."===t[2]||".."===t[e-1])continue;e>0&&(t.splice(e-1,2),e-=2)}}function n(t,n,o){var i,r,s,a,l,p,u,h,d,c,g,f,m=n&&n.split("/"),y=I.map,v=y&&y["*"];if(t&&(t=t.split("/"),u=t.length-1,I.nodeIdCompat&&jsSuffixRegExp.test(t[u])&&(t[u]=t[u].replace(jsSuffixRegExp,"")),"."===t[0].charAt(0)&&m&&(f=m.slice(0,m.length-1),t=f.concat(t)),e(t),t=t.join("/")),o&&y&&(m||v)){s=t.split("/");t:for(a=s.length;a>0;a-=1){if(p=s.slice(0,a).join("/"),m)for(l=m.length;l>0;l-=1)if(r=getOwn(y,m.slice(0,l).join("/")),r&&(r=getOwn(r,p))){h=r,d=a;break t}!c&&v&&getOwn(v,p)&&(c=getOwn(v,p),g=a)}!h&&c&&(h=c,d=g),h&&(s.splice(0,d,h),t=s.join("/"))}return i=getOwn(I.pkgs,t),i?i:t}function o(t){isBrowser&&each(scripts(),function(e){return e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===E.contextName?(e.parentNode.removeChild(e),!0):void 0})}function i(t){var e=getOwn(I.paths,t);return e&&isArray(e)&&e.length>1?(e.shift(),E.require.undef(t),E.makeRequire(null,{skipMap:!0})([t]),!0):void 0}function r(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function s(t,e,o,i){var s,a,l,p,u=null,h=e?e.name:null,d=t,c=!0,g="";return t||(c=!1,t="_@r"+(A+=1)),p=r(t),u=p[0],t=p[1],u&&(u=n(u,h,i),a=getOwn(N,u)),t&&(u?g=a&&a.normalize?a.normalize(t,function(t){return n(t,h,i)}):-1===t.indexOf("!")?n(t,h,i):t:(g=n(t,h,i),p=r(g),u=p[0],g=p[1],o=!0,s=E.nameToUrl(g))),l=!u||a||o?"":"_unnormalized"+(w+=1),{prefix:u,name:g,parentMap:e,unnormalized:!!l,url:s,originalName:d,isDefine:c,id:(u?u+"!"+g:g)+l}}function a(t){var e=t.id,n=getOwn(C,e);return n||(n=C[e]=new E.Module(t)),n}function l(t,e,n){var o=t.id,i=getOwn(C,o);!hasProp(N,o)||i&&!i.defineEmitComplete?(i=a(t),i.error&&"error"===e?n(i.error):i.on(e,n)):"defined"===e&&n(N[o])}function p(t,e){var n=t.requireModules,o=!1;e?e(t):(each(n,function(e){var n=getOwn(C,e);n&&(n.error=t,n.events.error&&(o=!0,n.emit("error",t)))}),o||req.onError(t))}function u(){globalDefQueue.length&&(each(globalDefQueue,function(t){var e=t[0];"string"==typeof e&&(E.defQueueMap[e]=!0),b.push(t)}),globalDefQueue=[])}function h(t){delete C[t],delete L[t]}function d(t,e,n){var o=t.map.id;t.error?t.emit("error",t.error):(e[o]=!0,each(t.depMaps,function(o,i){var r=o.id,s=getOwn(C,r);!s||t.depMatched[i]||n[r]||(getOwn(e,r)?(t.defineDep(i,N[r]),t.check()):d(s,e,n))}),n[o]=!0)}function c(){var t,e,n=1e3*I.waitSeconds,r=n&&E.startTime+n<(new Date).getTime(),s=[],a=[],l=!1,u=!0;if(!v){if(v=!0,eachProp(L,function(t){var n=t.map,p=n.id;if(t.enabled&&(n.isDefine||a.push(t),!t.error))if(!t.inited&&r)i(p)?(e=!0,l=!0):(s.push(p),o(p));else if(!t.inited&&t.fetched&&n.isDefine&&(l=!0,!n.prefix))return u=!1}),r&&s.length)return t=makeError("timeout","Load timeout for modules: "+s,null,s),t.contextName=E.contextName,p(t);u&&each(a,function(t){d(t,{},{})}),r&&!e||!l||!isBrowser&&!isWebWorker||j||(j=setTimeout(function(){j=0,c()},50)),v=!1}}function g(t){hasProp(N,t[0])||a(s(t[0],null,!0)).init(t[1],t[2])}function f(t,e,n,o){t.detachEvent&&!isOpera?o&&t.detachEvent(o,e):t.removeEventListener(n,e,!1)}function m(t){var e=t.currentTarget||t.srcElement;return f(e,E.onScriptLoad,"load","onreadystatechange"),f(e,E.onScriptError,"error"),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function y(){var t;for(u();b.length;){if(t=b.shift(),null===t[0])return p(makeError("mismatch","Mismatched anonymous define() module: "+t[t.length-1]));g(t)}E.defQueueMap={}}var v,x,E,P,j,I={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},C={},L={},S={},b=[],N={},T={},O={},A=1,w=1;return P={require:function(t){return t.require?t.require:t.require=E.makeRequire(t.map)},exports:function(t){return t.usingExports=!0,t.map.isDefine?t.exports?N[t.map.id]=t.exports:t.exports=N[t.map.id]={}:void 0},module:function(t){return t.module?t.module:t.module={id:t.map.id,uri:t.map.url,config:function(){return getOwn(I.config,t.map.id)||{}},exports:t.exports||(t.exports={})}}},x=function(t){this.events=getOwn(S,t.id)||{},this.map=t,this.shim=getOwn(I.shim,t.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},x.prototype={init:function(t,e,n,o){o=o||{},this.inited||(this.factory=e,n?this.on("error",n):this.events.error&&(n=bind(this,function(t){this.emit("error",t)})),this.depMaps=t&&t.slice(0),this.errback=n,this.inited=!0,this.ignore=o.ignore,o.enabled||this.enabled?this.enable():this.check())},defineDep:function(t,e){this.depMatched[t]||(this.depMatched[t]=!0,this.depCount-=1,this.depExports[t]=e)},fetch:function(){if(!this.fetched){this.fetched=!0,E.startTime=(new Date).getTime();var t=this.map;return this.shim?void E.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return t.prefix?this.callPlugin():this.load()})):t.prefix?this.callPlugin():this.load()}},load:function(){var t=this.map.url;T[t]||(T[t]=!0,E.load(this.map.id,t))},check:function(){if(this.enabled&&!this.enabling){var t,e,n=this.map.id,o=this.depExports,i=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(r)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=E.execCb(n,r,o,i)}catch(s){t=s}else i=E.execCb(n,r,o,i);if(this.map.isDefine&&void 0===i&&(e=this.module,e?i=e.exports:this.usingExports&&(i=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",p(this.error=t)}else i=r;this.exports=i,this.map.isDefine&&!this.ignore&&(N[n]=i,req.onResourceLoad&&req.onResourceLoad(E,this.map,this.depMaps)),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(E.defQueueMap,n)||this.fetch()}},callPlugin:function(){var t=this.map,e=t.id,o=s(t.prefix);this.depMaps.push(o),l(o,"defined",bind(this,function(o){var i,r,u,d=getOwn(O,this.map.id),c=this.map.name,g=this.map.parentMap?this.map.parentMap.name:null,f=E.makeRequire(t.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(o.normalize&&(c=o.normalize(c,function(t){return n(t,g,!0)})||""),r=s(t.prefix+"!"+c,this.map.parentMap),l(r,"defined",bind(this,function(t){this.init([],function(){return t},null,{enabled:!0,ignore:!0})})),u=getOwn(C,r.id),void(u&&(this.depMaps.push(r),this.events.error&&u.on("error",bind(this,function(t){this.emit("error",t)})),u.enable()))):d?(this.map.url=E.nameToUrl(d),void this.load()):(i=bind(this,function(t){this.init([],function(){return t},null,{enabled:!0})}),i.error=bind(this,function(t){this.inited=!0,this.error=t,t.requireModules=[e],eachProp(C,function(t){0===t.map.id.indexOf(e+"_unnormalized")&&h(t.map.id)}),p(t)}),i.fromText=bind(this,function(n,o){var r=t.name,l=s(r),u=useInteractive;o&&(n=o),u&&(useInteractive=!1),a(l),hasProp(I.config,e)&&(I.config[r]=I.config[e]);try{req.exec(n)}catch(h){return p(makeError("fromtexteval","fromText eval for "+e+" failed: "+h,h,[e]))}u&&(useInteractive=!0),this.depMaps.push(l),E.completeLoad(r),f([r],i)}),void o.load(t.name,f,i,I))})),E.enable(o,this),this.pluginMaps[o.id]=o},enable:function(){L[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(t,e){var n,o,i;if("string"==typeof t){if(t=s(t,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[e]=t,i=getOwn(P,t.id))return void(this.depExports[e]=i(this));this.depCount+=1,l(t,"defined",bind(this,function(t){this.undefed||(this.defineDep(e,t),this.check())})),this.errback?l(t,"error",bind(this,this.errback)):this.events.error&&l(t,"error",bind(this,function(t){this.emit("error",t)}))}n=t.id,o=C[n],hasProp(P,n)||!o||o.enabled||E.enable(t,this)})),eachProp(this.pluginMaps,bind(this,function(t){var e=getOwn(C,t.id);e&&!e.enabled&&E.enable(t,this)})),this.enabling=!1,this.check()},on:function(t,e){var n=this.events[t];n||(n=this.events[t]=[]),n.push(e)},emit:function(t,e){each(this.events[t],function(t){t(e)}),"error"===t&&delete this.events[t]}},E={config:I,contextName:t,registry:C,defined:N,urlFetched:T,defQueue:b,defQueueMap:{},Module:x,makeModuleMap:s,nextTick:req.nextTick,onError:p,configure:function(t){t.baseUrl&&"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&&(t.baseUrl+="/");var e=I.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(t,function(t,e){n[e]?(I[e]||(I[e]={}),mixin(I[e],t,!0,!0)):I[e]=t}),t.bundles&&eachProp(t.bundles,function(t,e){each(t,function(t){t!==e&&(O[t]=e)})}),t.shim&&(eachProp(t.shim,function(t,n){isArray(t)&&(t={deps:t}),!t.exports&&!t.init||t.exportsFn||(t.exportsFn=E.makeShimExports(t)),e[n]=t}),I.shim=e),t.packages&&each(t.packages,function(t){var e,n;t="string"==typeof t?{name:t}:t,n=t.name,e=t.location,e&&(I.paths[n]=t.location),I.pkgs[n]=t.name+"/"+(t.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(C,function(t,e){t.inited||t.map.unnormalized||(t.map=s(e,null,!0))}),(t.deps||t.callback)&&E.require(t.deps||[],t.callback)},makeShimExports:function(t){function e(){var e;return t.init&&(e=t.init.apply(global,arguments)),e||t.exports&&getGlobal(t.exports)}return e},makeRequire:function(e,i){function r(n,o,l){var u,h,d;return i.enableBuildCallback&&o&&isFunction(o)&&(o.__requireJsBuild=!0),"string"==typeof n?isFunction(o)?p(makeError("requireargs","Invalid require call"),l):e&&hasProp(P,n)?P[n](C[e.id]):req.get?req.get(E,n,e,r):(h=s(n,e,!1,!0),u=h.id,hasProp(N,u)?N[u]:p(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+t+(e?"":". Use require([])")))):(y(),E.nextTick(function(){y(),d=a(s(null,e)),d.skipMap=i.skipMap,d.init(n,o,l,{enabled:!0}),c()}),r)}return i=i||{},mixin(r,{isBrowser:isBrowser,toUrl:function(t){var o,i=t.lastIndexOf("."),r=t.split("/")[0],s="."===r||".."===r;return-1!==i&&(!s||i>1)&&(o=t.substring(i,t.length),t=t.substring(0,i)),E.nameToUrl(n(t,e&&e.id,!0),o,!0)},defined:function(t){return hasProp(N,s(t,e,!1,!0).id)},specified:function(t){return t=s(t,e,!1,!0).id,hasProp(N,t)||hasProp(C,t)}}),e||(r.undef=function(t){u();var n=s(t,e,!0),i=getOwn(C,t);i.undefed=!0,o(t),delete N[t],delete T[n.url],delete S[t],eachReverse(b,function(e,n){e[0]===t&&b.splice(n,1)}),delete E.defQueueMap[t],i&&(i.events.defined&&(S[t]=i.events),h(t))}),r},enable:function(t){var e=getOwn(C,t.id);e&&a(t).enable()},completeLoad:function(t){var e,n,o,r=getOwn(I.shim,t)||{},s=r.exports;for(u();b.length;){if(n=b.shift(),null===n[0]){if(n[0]=t,e)break;e=!0}else n[0]===t&&(e=!0);g(n)}if(E.defQueueMap={},o=getOwn(C,t),!e&&!hasProp(N,t)&&o&&!o.inited){if(!(!I.enforceDefine||s&&getGlobal(s)))return i(t)?void 0:p(makeError("nodefine","No define call for "+t,null,[t]));g([t,r.deps||[],r.exportsFn])}c()},nameToUrl:function(t,e,n){var o,i,r,s,a,l,p,u=getOwn(I.pkgs,t);if(u&&(t=u),p=getOwn(O,t))return E.nameToUrl(p,e,n);if(req.jsExtRegExp.test(t))a=t+(e||"");else{for(o=I.paths,i=t.split("/"),r=i.length;r>0;r-=1)if(s=i.slice(0,r).join("/"),l=getOwn(o,s)){isArray(l)&&(l=l[0]),i.splice(0,r,l);break}a=i.join("/"),a+=e||(/^data\:|\?/.test(a)||n?"":".js"),a=("/"===a.charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":I.baseUrl)+a}return I.urlArgs?a+((-1===a.indexOf("?")?"?":"&")+I.urlArgs):a},load:function(t,e){req.load(E,t,e)
},execCb:function(t,e,n,o){return e.apply(o,n)},onScriptLoad:function(t){if("load"===t.type||readyRegExp.test((t.currentTarget||t.srcElement).readyState)){interactiveScript=null;var e=m(t);E.completeLoad(e.id)}},onScriptError:function(t){var e=m(t);return i(e.id)?void 0:p(makeError("scripterror","Script error for: "+e.id,t,[e.id]))}},E.require=E.makeRequire(),E}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(t){return"interactive"===t.readyState?interactiveScript=t:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.20",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(t,e,n,o){var i,r,s=defContextName;return isArray(t)||"string"==typeof t||(r=t,isArray(e)?(t=e,e=n,n=o):t=[]),r&&r.context&&(s=r.context),i=getOwn(contexts,s),i||(i=contexts[s]=req.s.newContext(s)),r&&i.configure(r),i.require(t,e,n)},req.config=function(t){return req(t)},req.nextTick="undefined"!=typeof setTimeout?function(t){setTimeout(t,4)}:function(t){t()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(t){var e=t.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return e.type=t.scriptType||"text/javascript",e.charset="utf-8",e.async=!0,e},req.load=function(t,e,n){var o,i=t&&t.config||{};if(isBrowser)return o=req.createNode(i,e,n),i.onNodeCreated&&i.onNodeCreated(o,i,e,n),o.setAttribute("data-requirecontext",t.contextName),o.setAttribute("data-requiremodule",e),!o.attachEvent||o.attachEvent.toString&&o.attachEvent.toString().indexOf("[native code")<0||isOpera?(o.addEventListener("load",t.onScriptLoad,!1),o.addEventListener("error",t.onScriptError,!1)):(useInteractive=!0,o.attachEvent("onreadystatechange",t.onScriptLoad)),o.src=n,currentlyAddingScript=o,baseElement?head.insertBefore(o,baseElement):head.appendChild(o),currentlyAddingScript=null,o;if(isWebWorker)try{importScripts(n),t.completeLoad(e)}catch(r){t.onError(makeError("importscripts","importScripts failed for "+e+" at "+n,r,[e]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(t){return head||(head=t.parentNode),dataMain=t.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(t,e,n){var o,i;"string"!=typeof t&&(n=e,e=t,t=null),isArray(e)||(n=e,e=null),!e&&isFunction(n)&&(e=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(t,n){e.push(n)}),e=(1===n.length?["require"]:["require","exports","module"]).concat(e))),useInteractive&&(o=currentlyAddingScript||getInteractiveScript(),o&&(t||(t=o.getAttribute("data-requiremodule")),i=contexts[o.getAttribute("data-requirecontext")])),i?(i.defQueue.push([t,e,n]),i.defQueueMap[t]=!0):globalDefQueue.push([t,e,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),$(function(){function t(){return new Promise(function(t){navigator.geolocation.getCurrentPosition(function(e){t(e)})})}function e(t){var e=new google.maps.Marker({map:m,position:t.geometry.location,icon:{path:"M 0,-24 6,-7 24,-7 10,4 15,21 0,11 -15,21 -10,4 -24,-7 -6,-7 z",fillColor:"#ffff00",fillOpacity:1,scale:.25,strokeColor:"#bd8d2c",strokeWeight:1}});google.maps.event.addListener(e,"click",function(){g.getDetails(t,function(t,n){if(n!=google.maps.places.PlacesServiceStatus.OK)return void alert(n);var o=t.name+"<br>"+t.formatted_address.split(",")[0]+"<br>"+t.formatted_address.split(",")[1]+t.formatted_address.split(",")[2]+"<br>"+t.formatted_address.split(",")[3];f.setContent(o),f.open(m,e)})})}function n(t,e,n,o){var i,r,s=604800,a=4e7;null===p?(r=t.length,console.log("it equals null")):p<t.length?r=p:p>=t.length&&(r=t.length);for(var u=0;r>u;u++)setTimeout(function(r){return function(){var p,u,h=[];t[r].forEach(function(t){p=t.geometry.location,u={location:new google.maps.LatLng(p.G,p.K)},h.push(u)});var d={origin:e,destination:n,waypoints:h,optimizeWaypoints:!0,travelMode:google.maps.TravelMode.DRIVING},c=C(d);c.then(function(t){if(null!==t){for(var e=t.routes[0].legs.length,n=0,r=0,p=0;e>p;p++)n+=t.routes[0].legs[p].duration.value,r+=t.routes[0].legs[p].distance.value;"distance"===o?a>r&&(a=r,i=t):s>n&&(s=n,i=t),y.setDirections(i),"distance"===o&&l===!0?console.log(a):"time"===o&&l===!0&&console.log(s)}else console.log("directions request: response was null")})}}(u),300*u)}function o(t){for(var e=t.routes[0].overview_path,n=[],o=0;o<e.length;o++)n.push([e[o].lng(),e[o].lat()]);for(var i=u/100,r={type:"LineString",coordinates:n},s=new jsts.io.GeoJSONReader,a=new jsts.io.GeoJSONWriter,l=s.read(r).buffer(i),p=a.write(l),h=[],d=p.coordinates[0],c=d.length,o=0;c>o;o++)h.push(new google.maps.LatLng(d[o][1],d[o][0]));return h}function i(t){for(var e=t.routes[0].overview_path,n=[],o=0;o<e.length;o++)n.push([e[o].lng(),e[o].lat()]);for(var i=u/100,r={type:"LineString",coordinates:n},s=new jsts.io.GeoJSONReader,a=new jsts.io.GeoJSONWriter,l=s.read(r).buffer(i),p=a.write(l),h=[],d=p.coordinates[0],c=d.length,o=0;c>o;o++)h.push(new google.maps.LatLng(d[o][1],d[o][0]));var g=new google.maps.Polygon({paths:h});return g}var r=!1,s=!1,a=!1,l=!1,p=20,u=1,h="on-my-way",d=$("<label for=''>End Address:</label><input class='destination_address form-control autocomplete' placeholder='20 Pine St Anytown CA'><br>");$(".roundtrip").on("click",function(t){var e=t.target.checked;console.log(e),e===!0?(h="out-and-back",$(".start-address-label").text("Start and End Address"),$(".end-address").empty()):(h="on-my-way",$(".start-address-label").text("Start Address"),$(".end-address").html(d))});var c="time";$(".by-time a").on("click",function(t){t.preventDefault(),console.log("optimize by time"),c="time"}),$(".by-distance a").on("click",function(t){t.preventDefault(),console.log("optimize by distance"),c="distance"});var g,f,m,y=new google.maps.DirectionsRenderer,v=new google.maps.DirectionsService,x=new google.maps.LatLng(37.76628,-122.420961),E=(new google.maps.LatLng(33.8,-84.3),{zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP,center:x});if(m=new google.maps.Map(document.getElementById("map-canvas"),E),f=new google.maps.InfoWindow,g=new google.maps.places.PlacesService(m),y.setMap(m),r===!0){var P,j;navigator.geolocation?(P=t(),P.then(function(t){j=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),m.setCenter(j)})):console.log("Geolocation not available")}var I=0,C=function(t){return new Promise(function(e){v.route(t,function(t,n){e(t),"OVER_QUERY_LIMIT"!==n&&(I++,console.log(I))})})},L=function(t){return new Promise(function(e){g.radarSearch(t,function(t){e(t)})})},S=function(t){return new Promise(function(e){g.nearbySearch(t,function(t){e(t)})})};$(".fill-form").on("click",".submit-search",function(t){t.preventDefault(),console.log("search submitted");var r,l,p,u,d,g=null;l=$(".stops").val();var f=(l.match(/,/g)||[]).length;r=$(".origin_address").val(),"on-my-way"===h?g=$(".destination_address").val():"out-and-back"===h&&(g=r),""===r||""===l||"on-my-way"===h&&""===g?$(".missing-warning").html("<div class='alert alert-danger'>Form Information Missing!</div>"):(null!==$(".missing-warning").html()||void 0!==$(".missing-warning").html()||""!==$(".missing-warning").html())&&$(".missing-warning").empty();var y;if(2===f?y=3:1===f?y=2:0===f&&(y=1),p=l.split(",")[0],y>=2&&(u=l.split(",")[1]),y>=3&&(d=l.split(",")[2]),"out-and-back"===h){var v=getGeo(r);v.then(function(t){console.log(t[0].geometry.location,"geocoding results");var o=t[0].geometry.location;o=new google.maps.LatLng(o.G,o.K);var i,s,a,l,h,f,m="6000";i={location:o,radius:m,keyword:p},l=S(i),y>=2&&(s={location:o,radius:m,keyword:u},h=S(s)),y>=3&&(a={location:o,radius:m,keyword:d},f=S(a));var v=[l];y>=2&&v.push(h),y>=3&&v.push(f),Promise.all(v).then(function(t){console.log(t,"results from all 1 or 2 or 3 promises");var o;3===y?o=[[],[],[]]:2===y?o=[[],[]]:1===y&&(o=[[]]),t.forEach(function(t,e){o[e]=cullNeighboringDuplicates(t)}),o.forEach(function(t){t.forEach(function(t){e(t)})});var i;3===y?i=allCombinationsThreeOptions(o[0],o[1],o[2]):2===y?i=allCombinationsTwoOptions(o[0],o[1]):1===y&&(i=allCombinationsOneOption(o[0])),console.log(i,"combinations"),n(i,r,g,c)})})}else if("on-my-way"===h){var x=getGeo(r),E=getGeo(g);Promise.all([x,E]).then(function(t){var l=(t[0][0].geometry.location,t[1][0].geometry.location,{origin:r,destination:g,travelMode:google.maps.TravelMode.DRIVING}),h=C(l);h.then(function(t){var l=i(t);s===!0&&l.setMap(m);var h=o(t),f=polylineBufferExtremities(h,"shape");a===!0&&f.setMap(m);var v=polylineBufferExtremities(h,"bounds"),x={bounds:v,keyword:p};if(y>=2)var E={bounds:v,keyword:u};if(y>=3)var P={bounds:v,keyword:d};var j=L(x);if(y>=2)var I=L(E);if(y>=3)var C=L(P);var S=[];S.push(j),y>=2&&S.push(I),y>=3&&S.push(C),Promise.all(S).then(function(t){var o=[p];y>=2&&o.push(u),y>=3&&o.push(d);var i;3===y?i=[[],[],[]]:2===y?i=[[],[]]:1===y&&(i=[[]]);var s,a;t.forEach(function(t,n){t.forEach(function(t){a=t.geometry.location,s=new google.maps.LatLng(a.G,a.K),google.maps.geometry.poly.containsLocation(s,l)&&notTooClose(t,i[n])===!0&&(e(t),i[n].push(t))})});var h;3===y?h=allCombinationsThreeOptions(i[0],i[1],i[2]):2===y?h=allCombinationsTwoOptions(i[0],i[1]):1===y&&(h=allCombinationsOneOption(i[0])),n(h,r,g,c)})})})}})}),$(function(){$(".view-buffer").on("click",function(t){t.preventDefault()}),$(".view-bounds").on("click",function(t){t.preventDefault()})});